<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ä»˜æ¬¾ç®¡ç†ç³»çµ±</title>
  <style>
    :root{
      --bg1:#0f172a; --bg2:#1e293b; --card:#0b1220; --text:#e5e7eb; --sub:#93a3b8; --accent:#60a5fa; --ok:#22c55e; --warn:#f59e0b; --err:#ef4444;
    }
    *{box-sizing:border-box;}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,"Noto Sans TC",Segoe UI,Roboto,Helvetica,Arial; color:var(--text); background:radial-gradient(1000px 600px at 20% -10%, #1f2a44 0%, #0b1220 55%), radial-gradient(1200px 800px at 120% 10%, #2a2044 0%, #0b1220 60%), #0b1220;}
    .wrap{max-width:1180px;margin:40px auto;padding:0 16px;}
    .nav{display:flex;gap:18px;align-items:center;margin-bottom:18px}
    .nav h1{font-size:24px;margin:0 12px 0 0;display:flex;align-items:center;gap:10px}
    .nav h1 span{display:inline-block;width:28px;height:18px;background:#ffd54a;border-radius:3px}
    .tabs{display:flex;gap:12px;margin-top:12px}
    .tab{padding:10px 14px;border-radius:10px;background:var(--bg2);color:var(--text);cursor:pointer;user-select:none}
    .tab.active{background:#1b2c4d}

    .grid{display:grid;grid-template-columns:1.4fr .6fr;gap:18px;margin-top:16px}
    .card{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:16px}
    .card h3{margin:0 0 12px 0;font-size:16px;color:#dbeafe}
    .row{display:flex;gap:10px;align-items:center;margin-bottom:10px}
    .row .grow{flex:1}
    input,select,textarea{width:100%;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);color:var(--text);border-radius:10px;padding:12px 12px;font-size:15px;outline:none}
    textarea{min-height:120px;resize:vertical}
    .btn{background:#213657;border:1px solid rgba(255,255,255,.15);color:#fff;border-radius:12px;padding:12px 16px;cursor:pointer}
    .btn:hover{filter:brightness(1.08)}
    .btn.primary{background:#2b5fc0}
    .btn.ok{background:#128c55}
    .btn.warn{background:#996a13}
    .btn.danger{background:#7a1a1a}
    .tags{display:flex;gap:12px}
    .tag{flex:1;text-align:center;padding:16px 10px;border-radius:14px;background:#111a2c;cursor:pointer;border:1px solid rgba(255,255,255,.08)}
    .tag.active{outline:2px solid #6ea8ff}
    .tiny{font-size:12px;color:var(--sub)}
    .list{display:flex;flex-direction:column;gap:12px;max-height:360px;overflow:auto}
    .item{border:1px solid rgba(255,255,255,.08);padding:10px;border-radius:12px;background:#0f182a}
    .item b{color:#c7d2fe}
    .split{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .rightHead{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
    @media (max-width:980px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
<div class="wrap">
  <div class="nav">
    <h1><span></span>ä»˜æ¬¾ç®¡ç†ç³»çµ±</h1>
  </div>

  <div class="tabs">
    <div class="tab active" data-tab="send">ç™¼é€ä»˜æ¬¾</div>
    <div class="tab" data-tab="orders">è¨‚å–®ç®¡ç†</div>
    <div class="tab" data-tab="customers">å®¢æˆ¶ç·¨è™Ÿ</div>
    <div class="tab" data-tab="templates">è¨Šæ¯æ¨¡æ¿</div>
  </div>

  <div id="tab-send" class="grid">
    <div class="card">
      <h3>ğŸ” å¿«é€ŸæŸ¥è©¢ï¼ˆè¼¸å…¥ã€Œç·¨è™Ÿã€æˆ–ã€Œå§“åã€ï¼‰</h3>
      <div class="row">
        <input id="q" placeholder="ä¾‹å¦‚ï¼š625 æˆ– ç‹å°æ˜" />
        <button class="btn" id="btnSearch">æŸ¥è©¢</button>
      </div>

      <div class="split">
        <div class="row"><div class="grow">
          <label class="tiny">å®¢æˆ¶å§“å *</label>
          <input id="userName" placeholder="å§“å" />
        </div></div>
        <div class="row"><div class="grow">
          <label class="tiny">å®¢æˆ¶ LINE User ID *</label>
          <input id="userId" placeholder="Uxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" />
        </div></div>
      </div>

      <div class="row"><div class="grow">
        <label class="tiny">é‡‘é¡ï¼ˆNT$ï¼‰*</label>
        <input id="amount" type="number" inputmode="numeric" placeholder="ä¾‹å¦‚ï¼š1500" />
      </div></div>

      <h3>ä»˜æ¬¾æ–¹å¼ *</h3>
      <div class="tags" id="payTags">
        <div class="tag active" data-type="both">ğŸ’™ å…©è€…éƒ½ç™¼</div>
        <div class="tag" data-type="ecpay">ğŸ’³ ç¶ ç•Œä¿¡ç”¨å¡</div>
        <div class="tag" data-type="linepay">ğŸ’š LINE Pay</div>
      </div>

      <div class="row" style="margin-top:12px"><div class="grow">
        <label class="tiny">è¨Šæ¯å…§å®¹ï¼ˆå¯å« {amount}ï¼‰</label>
        <textarea id="customMsg" placeholder="ä¾‹å¦‚ï¼šæ‚¨å¥½ï¼Œé‡‘é¡ NT$ {amount}ï¼Œè«‹å„˜é€Ÿä»˜æ¬¾ï¼Œè¬è¬ï¼"></textarea>
      </div>
      <div>
        <button class="btn" id="btnLoadTpl">è¼‰å…¥æ¨¡æ¿</button>
      </div></div>

      <div class="row">
        <button class="btn primary" id="btnSend">ç™¼é€ä»˜æ¬¾é€£çµ</button>
      </div>

      <div id="sendResult" class="tiny mono" style="margin-top:8px;color:#c7ffcd"></div>
      <div id="sendError" class="tiny mono" style="margin-top:8px;color:#ffd1d1"></div>
    </div>

    <div class="card">
      <div class="rightHead">
        <h3>ğŸ‘¥ å®¢æˆ¶è¼‰å…¥</h3>
        <div class="row"><button class="btn" id="btnReloadRight">é‡æ–°è¼‰å…¥</button></div>
      </div>
      <div class="list" id="rightList"></div>
    </div>
  </div>

  <div id="tab-orders" class="grid" style="display:none">
    <div class="card">
      <h3>è¨‚å–®æ¦‚æ³</h3>
      <div class="row">
        <button class="btn" id="btnRefreshOrders">é‡æ–°æ•´ç†</button>
        <button class="btn" id="btnRemind">ç™¼é€é€¾æœŸæé†’ï¼ˆæ‰¹æ¬¡ï¼‰</button>
        <button class="btn warn" id="btnClean">æ¸…ç†éæœŸ</button>
      </div>
      <div class="list" id="ordersList"></div>
    </div>
  </div>

  <div id="tab-customers" class="grid" style="display:none">
    <div class="card">
      <h3>æ–°å¢ / æ›´æ–° å®¢æˆ¶ç·¨è™Ÿ</h3>
      <div class="split">
        <div><label class="tiny">ç·¨è™Ÿï¼ˆå¯ç©ºç™½è‡ªå‹•éå¢ï¼‰</label><input id="no" placeholder="625" /></div>
        <div><label class="tiny">å§“å *</label><input id="cName" placeholder="ç‹å°æ˜" /></div>
      </div>
      <div class="row"><div class="grow">
        <label class="tiny">LINE User ID *</label>
        <input id="cUid" placeholder="Uxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" />
      </div></div>
      <div class="row">
        <button class="btn ok" id="btnSaveCust">å„²å­˜</button>
      </div>
      <div id="custMsg" class="tiny mono" style="margin-top:8px;color:#c7ffcd"></div>
      <div id="custErr" class="tiny mono" style="margin-top:6px;color:#ffd1d1"></div>
    </div>

    <div class="card">
      <div class="rightHead">
        <h3>å·²å„²å­˜</h3>
        <button class="btn" id="btnReloadCust">é‡æ–°è¼‰å…¥</button>
      </div>
      <div class="list" id="custList"></div>
    </div>
  </div>

  <div id="tab-templates" class="grid" style="display:none">
    <div class="card">
      <h3>å¸¸ç”¨æ¨¡æ¿</h3>
      <div class="row"><div class="grow">
        <input id="tplInput" placeholder="è¼¸å…¥æ–°æ¨¡æ¿ï¼ˆå¯ç”¨ {amount})" />
      </div><button class="btn ok" id="btnAddTpl">æ–°å¢æ¨¡æ¿</button></div>
      <div class="list" id="tplList"></div>
      <div id="tplErr" class="tiny mono" style="margin-top:6px;color:#ffd1d1"></div>
    </div>
  </div>
</div>

<script>
  // --- å·¥å…·ï¼ˆåŒ… JSON è§£æèˆ‡éŒ¯èª¤è™•ç†ï¼‰ ---
  async function apiGet(url){
    const r = await fetch(url, {headers: {Accept:'application/json'}});
    const t = await r.text();
    try { return JSON.parse(t); } catch(e){
      throw new Error("é JSON å›æ‡‰: " + t.slice(0,80));
    }
  }
  async function apiSend(url, body, method='POST'){
    const r = await fetch(url, {method,headers:{'Content-Type':'application/json',Accept:'application/json'}, body: JSON.stringify(body)});
    const t = await r.text();
    try { return JSON.parse(t); } catch(e){
      throw new Error("é JSON å›æ‡‰: " + t.slice(0,80));
    }
  }
  async function apiDelete(url){
    const r = await fetch(url, {method:'DELETE', headers:{Accept:'application/json'}});
    const t = await r.text();
    try { return JSON.parse(t); } catch(e){ throw new Error("é JSON å›æ‡‰: " + t.slice(0,80)); }
  }

  // --- åˆ†é åˆ‡æ› ---
  const tabs = document.querySelectorAll('.tab');
  const panels = {
    send: document.getElementById('tab-send'),
    orders: document.getElementById('tab-orders'),
    customers: document.getElementById('tab-customers'),
    templates: document.getElementById('tab-templates')
  };
  tabs.forEach(tb=>{
    tb.onclick = ()=>{
      tabs.forEach(x=>x.classList.remove('active'));
      Object.values(panels).forEach(p=>p.style.display='none');
      tb.classList.add('active');
      panels[tb.dataset.tab].style.display='';
      if(tb.dataset.tab==='orders') loadOrders();
      if(tb.dataset.tab==='customers') loadCustomersPanel();
      if(tb.dataset.tab==='templates') loadTemplates();
    }
  });

  // --- send tab ---
  const payTags = document.getElementById('payTags');
  let payType = 'both';
  payTags.querySelectorAll('.tag').forEach(el=>{
    el.onclick=()=>{
      payTags.querySelectorAll('.tag').forEach(x=>x.classList.remove('active'));
      el.classList.add('active'); payType = el.dataset.type;
    }
  });

  const $ = id=>document.getElementById(id);
  $('btnLoadTpl').onclick = async ()=>{
    try{
      const data = await apiGet('/api/templates');
      if(!data.success) throw new Error(data.error||'è®€å–æ¨¡æ¿å¤±æ•—');
      const arr = data.templates||[];
      if(arr.length===0){ alert('å°šç„¡æ¨¡æ¿'); return; }
      const pick = prompt('è¼¸å…¥è¦å¥—ç”¨çš„æ¨¡æ¿åºè™Ÿ (0~' + (arr.length-1) + ')\n\n' + arr.map((t,i)=>`[${i}] ${t}`).join('\n'));
      if(pick===null) return;
      const idx = parseInt(pick,10);
      if(isNaN(idx) || idx<0 || idx>=arr.length){ alert('ç´¢å¼•ç„¡æ•ˆ'); return; }
      $('customMsg').value = arr[idx];
    }catch(e){
      alert('è®€å–æ¨¡æ¿å¤±æ•—ï¼š' + e.message);
    }
  };

  $('btnSearch').onclick = async ()=>{
    const kw = $('q').value.trim();
    if(!kw) return;
    try{
      // 1) å˜—è©¦å®¢æˆ¶ç·¨è™Ÿ
      const meta = await apiGet('/api/customer-meta');
      if(meta && meta.map && meta.map[kw]){
        $('userName').value = meta.map[kw].name || '';
        $('userId').value = meta.map[kw].userId || '';
        return;
      }
      // 2) ä»¥å§“åæœå°‹ï¼ˆå¾Œç«¯ç¶­æŒèˆŠçš„å®¢æˆ¶è³‡æ–™åº«ï¼‰
      const s = await apiGet('/api/search/user?name=' + encodeURIComponent(kw));
      if(s.users && s.users.length){
        $('userName').value = s.users[0].displayName || '';
        $('userId').value = s.users[0].userId || '';
        return;
      }
      alert('æŸ¥ç„¡è³‡æ–™');
    }catch(e){
      alert('æŸ¥è©¢å¤±æ•—ï¼š' + e.message);
    }
  };

  $('btnSend').onclick = async ()=>{
    $('sendError').textContent=''; $('sendResult').textContent='';
    const userName = $('userName').value.trim();
    const userId   = $('userId').value.trim();
    const amount   = parseInt($('amount').value,10);
    const customMessage = $('customMsg').value.replace('{amount}', String(amount||''));
    if(!userName || !userId || !amount || amount<=0){ $('sendError').textContent='è«‹å®Œæ•´å¡«å¯«å§“å/ID/é‡‘é¡'; return; }
    try{
      const data = await apiSend('/send-payment',{userName,userId,amount,paymentType:payType,customMessage});
      if(!data.success) throw new Error(data.error||'ç™¼é€å¤±æ•—');
      $('sendResult').textContent = 'å·²ç™¼é€æˆåŠŸã€‚';
    }catch(e){
      $('sendError').textContent = 'ç™¼é€å¤±æ•—ï¼š' + e.message;
    }
  };

  // å³å´å®¢æˆ¶æ¸…å–®ï¼ˆä¾†è‡ª /api/customer-metaï¼‰
  async function loadRight(){
    const box = $('rightList'); box.innerHTML = '';
    try{
      const data = await apiGet('/api/customer-meta');
      const arr = Object.entries(data.map||{}).sort((a,b)=>Number(a[0])-Number(b[0]));
      if(arr.length===0){ box.innerHTML='<div class="tiny">å°šç„¡å®¢æˆ¶</div>'; return; }
      arr.forEach(([no,info])=>{
        const div = document.createElement('div'); div.className='item';
        div.innerHTML = `<div><b>#${no}</b> ${info.name}</div><div class="tiny mono">${info.userId}</div><div class="row" style="margin-top:6px"><button class="btn" data-no="${no}">è¼‰å…¥</button><button class="btn danger" data-del="${no}">åˆªé™¤</button></div>`;
        box.appendChild(div);
      });
      box.onclick = async (e)=>{
        const no = e.target.getAttribute('data-no');
        const del= e.target.getAttribute('data-del');
        if(no){
          const meta = await apiGet('/api/customer-meta');
          $('userName').value = meta.map[no].name||'';
          $('userId').value   = meta.map[no].userId||'';
          $('q').value = no;
        }else if(del){
          if(!confirm('ç¢ºå®šåˆªé™¤ #' + del + ' ?')) return;
          try{
            const r = await apiDelete('/api/customer-meta/' + encodeURIComponent(del));
            if(!r.success) throw new Error(r.error||'åˆªé™¤å¤±æ•—');
            await loadRight();
          }catch(err){ alert('åˆªé™¤å¤±æ•—ï¼š' + err.message); }
        }
      };
    }catch(e){
      box.innerHTML = `<div class="tiny" style="color:#ffd1d1">è®€å–å¤±æ•—ï¼š${e.message}</div>`;
    }
  }
  $('btnReloadRight').onclick = loadRight;

  // --- orders tab ---
  async function loadOrders(){
    const box = $('ordersList'); box.innerHTML='';
    try{
      const data = await apiGet('/api/orders');
      (data.orders||[]).forEach(o=>{
        const div = document.createElement('div'); div.className='item';
        const status = o.status==='paid' ? 'âœ… å·²ä»˜æ¬¾' : (o.isExpired?'â° å·²éæœŸ':'ğŸŸ¡ å¾…ä»˜æ¬¾');
        div.innerHTML = `<div><b>${status}</b>ã€€#${o.orderId}</div>
                         <div class="tiny">å®¢æˆ¶ï¼š${o.userName}ã€€é‡‘é¡ï¼šNT$ ${o.amount?.toLocaleString?.()||o.amount}</div>
                         <div class="tiny mono">å»ºç«‹ï¼š${new Date(o.createdAt).toLocaleString()}</div>
                         <div class="row" style="margin-top:6px">
                           <button class="btn" data-renew="${o.orderId}">çºŒç´„é‡ç™¼</button>
                           <button class="btn danger" data-del="${o.orderId}">åˆªé™¤</button>
                         </div>`;
        box.appendChild(div);
      });
      box.onclick = async (e)=>{
        const renew = e.target.getAttribute('data-renew');
        const del   = e.target.getAttribute('data-del');
        try{
          if(renew){
            const r = await apiSend('/api/order/'+encodeURIComponent(renew)+'/renew',{},'POST');
            if(!r.success) throw new Error(r.error||'çºŒç´„å¤±æ•—');
            alert('å·²çºŒç´„ä¸¦é‡ç™¼ï¼ˆå«ç¶ ç•Œ+LINE Payï¼‰');
            await loadOrders();
          }else if(del){
            if(!confirm('ç¢ºå®šåˆªé™¤ï¼Ÿ')) return;
            const r = await apiDelete('/api/order/'+encodeURIComponent(del));
            if(!r.success) throw new Error(r.error||'åˆªé™¤å¤±æ•—');
            await loadOrders();
          }
        }catch(err){ alert(err.message); }
      };
    }catch(e){
      box.innerHTML = `<div class="tiny" style="color:#ffd1d1">è®€å–å¤±æ•—ï¼š${e.message}</div>`;
    }
  }
  $('btnRefreshOrders').onclick = loadOrders;
  $('btnRemind').onclick = async ()=>{
    try{
      const r = await apiSend('/api/orders/send-reminders',{},'POST');
      alert(r.message||'å·²é€å‡ºæé†’');
    }catch(e){ alert('æé†’å¤±æ•—ï¼š' + e.message); }
  };
  $('btnClean').onclick = async ()=>{
    try{
      const r = await apiSend('/api/orders/clean-expired',{},'POST');
      alert(r.message||'å·²æ¸…ç†');
      await loadOrders();
    }catch(e){ alert('æ¸…ç†å¤±æ•—ï¼š' + e.message); }
  };

  // --- customers tab ---
  async function loadCustomersPanel(){
    // å·¦é‚Šè¡¨å–®ä¸éœ€è®€å–ï¼›å³é‚Šåˆ—è¡¨ï¼š
    await renderCustList();
  }
  async function renderCustList(){
    const box = $('custList'); box.innerHTML='';
    try{
      const meta = await apiGet('/api/customer-meta');
      const arr = Object.entries(meta.map||{}).sort((a,b)=>Number(a[0])-Number(b[0]));
      if(arr.length===0){ box.innerHTML='<div class="tiny">å°šç„¡è³‡æ–™</div>'; return; }
      arr.forEach(([no,info])=>{
        const div = document.createElement('div'); div.className='item';
        div.innerHTML = `<div><b>#${no}</b> ${info.name}</div>
                         <div class="tiny mono">${info.userId}</div>
                         <div class="row" style="margin-top:6px">
                           <button class="btn" data-fill="${no}">å¡«å…¥å·¦å´</button>
                           <button class="btn danger" data-del="${no}">åˆªé™¤</button>
                         </div>`;
        box.appendChild(div);
      });
      box.onclick = async (e)=>{
        const fill = e.target.getAttribute('data-fill');
        const del = e.target.getAttribute('data-del');
        if(fill){
          const meta = await apiGet('/api/customer-meta');
          $('no').value = fill;
          $('cName').value = meta.map[fill].name || '';
          $('cUid').value = meta.map[fill].userId || '';
        }else if(del){
          if(!confirm('ç¢ºå®šåˆªé™¤ #' + del + ' ?')) return;
          try{
            const r = await apiDelete('/api/customer-meta/'+encodeURIComponent(del));
            if(!r.success) throw new Error(r.error||'åˆªé™¤å¤±æ•—');
            await renderCustList();
          }catch(err){ alert('åˆªé™¤å¤±æ•—ï¼š' + err.message); }
        }
      };
    }catch(e){
      box.innerHTML = `<div class="tiny" style="color:#ffd1d1">è®€å–å¤±æ•—ï¼š${e.message}</div>`;
    }
  }
  $('btnReloadCust').onclick = renderCustList;
  $('btnSaveCust').onclick = async ()=>{
    $('custMsg').textContent=''; $('custErr').textContent='';
    try{
      const body = { number:$('no').value.trim(), name:$('cName').value.trim(), userId:$('cUid').value.trim() };
      const r = await apiSend('/api/customer-meta/save', body, 'POST');
      if(!r.success) throw new Error(r.error||'å„²å­˜å¤±æ•—');
      $('custMsg').textContent = `å·²å„²å­˜ #${r.number}ï¼š${r.data.name}`;
      await renderCustList();
    }catch(e){ $('custErr').textContent = 'å„²å­˜å¤±æ•—ï¼š' + e.message; }
  };

  // --- templates tab ---
  async function loadTemplates(){
    const box = $('tplList'); box.innerHTML='';
    try{
      const r = await apiGet('/api/templates');
      if(!r.success) throw new Error(r.error||'è®€å–å¤±æ•—');
      const arr = r.templates || [];
      if(arr.length===0){ box.innerHTML='<div class="tiny">å°šç„¡æ¨¡æ¿</div>'; return; }
      arr.forEach((t,i)=>{
        const div = document.createElement('div'); div.className='item';
        div.innerHTML = `<div class="mono">[${i}] ${t}</div>
                         <div class="row" style="margin-top:6px">
                           <button class="btn" data-use="${i}">å¥—ç”¨</button>
                           <button class="btn" data-edit="${i}">ç·¨è¼¯</button>
                           <button class="btn danger" data-del="${i}">åˆªé™¤</button>
                         </div>`;
        box.appendChild(div);
      });
      box.onclick = async (e)=>{
        const use = e.target.getAttribute('data-use');
        const edit= e.target.getAttribute('data-edit');
        const del = e.target.getAttribute('data-del');
        try{
          if(use!==null){
            const r2 = await apiGet('/api/templates');
            $('customMsg').value = (r2.templates||[])[Number(use)] || '';
            tabs[0].click(); // å›åˆ°ç™¼é€
          }else if(edit!==null){
            const r2 = await apiGet('/api/templates');
            const old = (r2.templates||[])[Number(edit)] || '';
            const nw = prompt('ä¿®æ”¹æ¨¡æ¿ï¼š', old);
            if(nw===null) return;
            const s = await apiSend('/api/templates/'+edit, {content:nw}, 'PUT');
            if(!s.success) throw new Error(s.error||'æ›´æ–°å¤±æ•—');
            await loadTemplates();
          }else if(del!==null){
            if(!confirm('ç¢ºå®šåˆªé™¤ï¼Ÿ')) return;
            const s = await apiDelete('/api/templates/'+del);
            if(!s.success) throw new Error(s.error||'åˆªé™¤å¤±æ•—');
            await loadTemplates();
          }
        }catch(err){ $('tplErr').textContent = err.message; }
      };
    }catch(e){
      box.innerHTML = `<div class="tiny" style="color:#ffd1d1">è®€å–å¤±æ•—ï¼š${e.message}</div>`;
    }
  }
  $('btnAddTpl').onclick = async ()=>{
    const val = $('tplInput').value.trim();
    if(!val) return;
    try{
      const r = await apiSend('/api/templates',{content:val},'POST');
      if(!r.success) throw new Error(r.error||'æ–°å¢å¤±æ•—');
      $('tplInput').value='';
      await loadTemplates();
    }catch(e){ $('tplErr').textContent = e.message; }
  };

  // é¦–æ¬¡è¼‰å…¥
  loadRight();
</script>
</body>
</html>