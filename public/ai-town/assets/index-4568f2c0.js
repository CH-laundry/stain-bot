var VM=Object.defineProperty;var XM=(t,e,n)=>e in t?VM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var qM=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Ve=(t,e,n)=>(XM(t,typeof e!="symbol"?e+"":e,n),n);var LG=qM((BG,qy)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function H_(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var vA={exports:{}},gy={},xA={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bf=Symbol.for("react.element"),YM=Symbol.for("react.portal"),QM=Symbol.for("react.fragment"),KM=Symbol.for("react.strict_mode"),ZM=Symbol.for("react.profiler"),JM=Symbol.for("react.provider"),eO=Symbol.for("react.context"),tO=Symbol.for("react.forward_ref"),nO=Symbol.for("react.suspense"),rO=Symbol.for("react.memo"),iO=Symbol.for("react.lazy"),YS=Symbol.iterator;function sO(t){return t===null||typeof t!="object"?null:(t=YS&&t[YS]||t["@@iterator"],typeof t=="function"?t:null)}var _A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wA=Object.assign,bA={};function vh(t,e,n){this.props=t,this.context=e,this.refs=bA,this.updater=n||_A}vh.prototype.isReactComponent={};vh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function SA(){}SA.prototype=vh.prototype;function j_(t,e,n){this.props=t,this.context=e,this.refs=bA,this.updater=n||_A}var W_=j_.prototype=new SA;W_.constructor=j_;wA(W_,vh.prototype);W_.isPureReactComponent=!0;var QS=Array.isArray,EA=Object.prototype.hasOwnProperty,G_={current:null},TA={key:!0,ref:!0,__self:!0,__source:!0};function CA(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)EA.call(e,r)&&!TA.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),h=0;h<a;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Bf,type:t,key:s,ref:o,props:i,_owner:G_.current}}function oO(t,e){return{$$typeof:Bf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function V_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bf}function aO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var KS=/\/+/g;function tv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?aO(""+t.key):e.toString(36)}function $m(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Bf:case YM:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+tv(o,0):r,QS(i)?(n="",t!=null&&(n=t.replace(KS,"$&/")+"/"),$m(i,e,n,"",function(h){return h})):i!=null&&(V_(i)&&(i=oO(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(KS,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",QS(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+tv(s,a);o+=$m(s,e,n,u,i)}else if(u=sO(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+tv(s,a++),o+=$m(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Up(t,e,n){if(t==null)return t;var r=[],i=0;return $m(t,r,"","",function(s){return e.call(n,s,i++)}),r}function lO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xr={current:null},Hm={transition:null},uO={ReactCurrentDispatcher:Xr,ReactCurrentBatchConfig:Hm,ReactCurrentOwner:G_};ut.Children={map:Up,forEach:function(t,e,n){Up(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Up(t,function(){e++}),e},toArray:function(t){return Up(t,function(e){return e})||[]},only:function(t){if(!V_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ut.Component=vh;ut.Fragment=QM;ut.Profiler=ZM;ut.PureComponent=j_;ut.StrictMode=KM;ut.Suspense=nO;ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uO;ut.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=wA({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=G_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)EA.call(e,u)&&!TA.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var h=0;h<u;h++)a[h]=arguments[h+2];r.children=a}return{$$typeof:Bf,type:t.type,key:i,ref:s,props:r,_owner:o}};ut.createContext=function(t){return t={$$typeof:eO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:JM,_context:t},t.Consumer=t};ut.createElement=CA;ut.createFactory=function(t){var e=CA.bind(null,t);return e.type=t,e};ut.createRef=function(){return{current:null}};ut.forwardRef=function(t){return{$$typeof:tO,render:t}};ut.isValidElement=V_;ut.lazy=function(t){return{$$typeof:iO,_payload:{_status:-1,_result:t},_init:lO}};ut.memo=function(t,e){return{$$typeof:rO,type:t,compare:e===void 0?null:e}};ut.startTransition=function(t){var e=Hm.transition;Hm.transition={};try{t()}finally{Hm.transition=e}};ut.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ut.useCallback=function(t,e){return Xr.current.useCallback(t,e)};ut.useContext=function(t){return Xr.current.useContext(t)};ut.useDebugValue=function(){};ut.useDeferredValue=function(t){return Xr.current.useDeferredValue(t)};ut.useEffect=function(t,e){return Xr.current.useEffect(t,e)};ut.useId=function(){return Xr.current.useId()};ut.useImperativeHandle=function(t,e,n){return Xr.current.useImperativeHandle(t,e,n)};ut.useInsertionEffect=function(t,e){return Xr.current.useInsertionEffect(t,e)};ut.useLayoutEffect=function(t,e){return Xr.current.useLayoutEffect(t,e)};ut.useMemo=function(t,e){return Xr.current.useMemo(t,e)};ut.useReducer=function(t,e,n){return Xr.current.useReducer(t,e,n)};ut.useRef=function(t){return Xr.current.useRef(t)};ut.useState=function(t){return Xr.current.useState(t)};ut.useSyncExternalStore=function(t,e,n){return Xr.current.useSyncExternalStore(t,e,n)};ut.useTransition=function(){return Xr.current.useTransition()};ut.version="18.2.0";xA.exports=ut;var de=xA.exports;const it=yh(de);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cO=de,hO=Symbol.for("react.element"),dO=Symbol.for("react.fragment"),fO=Object.prototype.hasOwnProperty,pO=cO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mO={key:!0,ref:!0,__self:!0,__source:!0};function AA(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)fO.call(e,r)&&!mO.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:hO,type:t,key:s,ref:o,props:i,_owner:pO.current}}gy.Fragment=dO;gy.jsx=AA;gy.jsxs=AA;vA.exports=gy;var W=vA.exports,R1={},IA={exports:{}},Di={},PA={exports:{}},kA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,Q){var B=L.length;L.push(Q);e:for(;0<B;){var ee=B-1>>>1,te=L[ee];if(0<i(te,Q))L[ee]=Q,L[B]=te,B=ee;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var Q=L[0],B=L.pop();if(B!==Q){L[0]=B;e:for(var ee=0,te=L.length,be=te>>>1;ee<be;){var ge=2*(ee+1)-1,je=L[ge],We=ge+1,Ne=L[We];if(0>i(je,B))We<te&&0>i(Ne,je)?(L[ee]=Ne,L[We]=B,ee=We):(L[ee]=je,L[ge]=B,ee=ge);else if(We<te&&0>i(Ne,B))L[ee]=Ne,L[We]=B,ee=We;else break e}}return Q}function i(L,Q){var B=L.sortIndex-Q.sortIndex;return B!==0?B:L.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],h=[],d=1,p=null,f=3,g=!1,v=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(L){for(var Q=n(h);Q!==null;){if(Q.callback===null)r(h);else if(Q.startTime<=L)r(h),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(h)}}function A(L){if(w=!1,_(L),!v)if(n(u)!==null)v=!0,ie(P);else{var Q=n(h);Q!==null&&O(A,Q.startTime-L)}}function P(L,Q){v=!1,w&&(w=!1,b(D),D=-1),g=!0;var B=f;try{for(_(Q),p=n(u);p!==null&&(!(p.expirationTime>Q)||L&&!H());){var ee=p.callback;if(typeof ee=="function"){p.callback=null,f=p.priorityLevel;var te=ee(p.expirationTime<=Q);Q=t.unstable_now(),typeof te=="function"?p.callback=te:p===n(u)&&r(u),_(Q)}else r(u);p=n(u)}if(p!==null)var be=!0;else{var ge=n(h);ge!==null&&O(A,ge.startTime-Q),be=!1}return be}finally{p=null,f=B,g=!1}}var F=!1,N=null,D=-1,q=5,G=-1;function H(){return!(t.unstable_now()-G<q)}function J(){if(N!==null){var L=t.unstable_now();G=L;var Q=!0;try{Q=N(!0,L)}finally{Q?V():(F=!1,N=null)}}else F=!1}var V;if(typeof S=="function")V=function(){S(J)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Z=U.port2;U.port1.onmessage=J,V=function(){Z.postMessage(null)}}else V=function(){C(J,0)};function ie(L){N=L,F||(F=!0,V())}function O(L,Q){D=C(function(){L(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,ie(P))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(L){switch(f){case 1:case 2:case 3:var Q=3;break;default:Q=f}var B=f;f=Q;try{return L()}finally{f=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,Q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var B=f;f=L;try{return Q()}finally{f=B}},t.unstable_scheduleCallback=function(L,Q,B){var ee=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?ee+B:ee):B=ee,L){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=B+te,L={id:d++,callback:Q,priorityLevel:L,startTime:B,expirationTime:te,sortIndex:-1},B>ee?(L.sortIndex=B,e(h,L),n(u)===null&&L===n(h)&&(w?(b(D),D=-1):w=!0,O(A,B-ee))):(L.sortIndex=te,e(u,L),v||g||(v=!0,ie(P))),L},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(L){var Q=f;return function(){var B=f;f=Q;try{return L.apply(this,arguments)}finally{f=B}}}})(kA);PA.exports=kA;var gO=PA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RA=de,Ni=gO;function fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var MA=new Set,Zd={};function Cu(t,e){Yc(t,e),Yc(t+"Capture",e)}function Yc(t,e){for(Zd[t]=e,t=0;t<e.length;t++)MA.add(e[t])}var ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),M1=Object.prototype.hasOwnProperty,yO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ZS={},JS={};function vO(t){return M1.call(JS,t)?!0:M1.call(ZS,t)?!1:yO.test(t)?JS[t]=!0:(ZS[t]=!0,!1)}function xO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _O(t,e,n,r){if(e===null||typeof e>"u"||xO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var vr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vr[t]=new qr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vr[e]=new qr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vr[t]=new qr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vr[t]=new qr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vr[t]=new qr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vr[t]=new qr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vr[t]=new qr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vr[t]=new qr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vr[t]=new qr(t,5,!1,t.toLowerCase(),null,!1,!1)});var X_=/[\-:]([a-z])/g;function q_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(X_,q_);vr[e]=new qr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(X_,q_);vr[e]=new qr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(X_,q_);vr[e]=new qr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vr[t]=new qr(t,1,!1,t.toLowerCase(),null,!1,!1)});vr.xlinkHref=new qr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vr[t]=new qr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Y_(t,e,n,r){var i=vr.hasOwnProperty(e)?vr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_O(e,n,i,r)&&(n=null),r||i===null?vO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ya=RA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zp=Symbol.for("react.element"),pc=Symbol.for("react.portal"),mc=Symbol.for("react.fragment"),Q_=Symbol.for("react.strict_mode"),O1=Symbol.for("react.profiler"),OA=Symbol.for("react.provider"),NA=Symbol.for("react.context"),K_=Symbol.for("react.forward_ref"),N1=Symbol.for("react.suspense"),D1=Symbol.for("react.suspense_list"),Z_=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),DA=Symbol.for("react.offscreen"),eE=Symbol.iterator;function Yh(t){return t===null||typeof t!="object"?null:(t=eE&&t[eE]||t["@@iterator"],typeof t=="function"?t:null)}var pn=Object.assign,nv;function md(t){if(nv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);nv=e&&e[1]||""}return`
`+nv+t}var rv=!1;function iv(t,e){if(!t||rv)return"";rv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{rv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?md(t):""}function wO(t){switch(t.tag){case 5:return md(t.type);case 16:return md("Lazy");case 13:return md("Suspense");case 19:return md("SuspenseList");case 0:case 2:case 15:return t=iv(t.type,!1),t;case 11:return t=iv(t.type.render,!1),t;case 1:return t=iv(t.type,!0),t;default:return""}}function L1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mc:return"Fragment";case pc:return"Portal";case O1:return"Profiler";case Q_:return"StrictMode";case N1:return"Suspense";case D1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case NA:return(t.displayName||"Context")+".Consumer";case OA:return(t._context.displayName||"Context")+".Provider";case K_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Z_:return e=t.displayName||null,e!==null?e:L1(t.type)||"Memo";case Ha:e=t._payload,t=t._init;try{return L1(t(e))}catch{}}return null}function bO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L1(e);case 8:return e===Q_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function LA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function SO(t){var e=LA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $p(t){t._valueTracker||(t._valueTracker=SO(t))}function FA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=LA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function F1(t,e){var n=e.checked;return pn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function BA(t,e){e=e.checked,e!=null&&Y_(t,"checked",e,!1)}function B1(t,e){BA(t,e);var n=fl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?U1(t,e.type,n):e.hasOwnProperty("defaultValue")&&U1(t,e.type,fl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function nE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function U1(t,e,n){(e!=="number"||lg(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var gd=Array.isArray;function Mc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function z1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(fe(91));return pn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(fe(92));if(gd(n)){if(1<n.length)throw Error(fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fl(n)}}function UA(t,e){var n=fl(e.value),r=fl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function iE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function zA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?zA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hp,$A=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hp=Hp||document.createElement("div"),Hp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var kd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},EO=["Webkit","ms","Moz","O"];Object.keys(kd).forEach(function(t){EO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kd[e]=kd[t]})});function HA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||kd.hasOwnProperty(t)&&kd[t]?(""+e).trim():e+"px"}function jA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=HA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var TO=pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function H1(t,e){if(e){if(TO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(fe(62))}}function j1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var W1=null;function J_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var G1=null,Oc=null,Nc=null;function sE(t){if(t=$f(t)){if(typeof G1!="function")throw Error(fe(280));var e=t.stateNode;e&&(e=wy(e),G1(t.stateNode,t.type,e))}}function WA(t){Oc?Nc?Nc.push(t):Nc=[t]:Oc=t}function GA(){if(Oc){var t=Oc,e=Nc;if(Nc=Oc=null,sE(t),e)for(t=0;t<e.length;t++)sE(e[t])}}function VA(t,e){return t(e)}function XA(){}var sv=!1;function qA(t,e,n){if(sv)return t(e,n);sv=!0;try{return VA(t,e,n)}finally{sv=!1,(Oc!==null||Nc!==null)&&(XA(),GA())}}function ef(t,e){var n=t.stateNode;if(n===null)return null;var r=wy(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(fe(231,e,typeof n));return n}var V1=!1;if(ha)try{var Qh={};Object.defineProperty(Qh,"passive",{get:function(){V1=!0}}),window.addEventListener("test",Qh,Qh),window.removeEventListener("test",Qh,Qh)}catch{V1=!1}function CO(t,e,n,r,i,s,o,a,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(d){this.onError(d)}}var Rd=!1,ug=null,cg=!1,X1=null,AO={onError:function(t){Rd=!0,ug=t}};function IO(t,e,n,r,i,s,o,a,u){Rd=!1,ug=null,CO.apply(AO,arguments)}function PO(t,e,n,r,i,s,o,a,u){if(IO.apply(this,arguments),Rd){if(Rd){var h=ug;Rd=!1,ug=null}else throw Error(fe(198));cg||(cg=!0,X1=h)}}function Au(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function YA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function oE(t){if(Au(t)!==t)throw Error(fe(188))}function kO(t){var e=t.alternate;if(!e){if(e=Au(t),e===null)throw Error(fe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return oE(i),t;if(s===r)return oE(i),e;s=s.sibling}throw Error(fe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(fe(189))}}if(n.alternate!==r)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?t:e}function QA(t){return t=kO(t),t!==null?KA(t):null}function KA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=KA(t);if(e!==null)return e;t=t.sibling}return null}var ZA=Ni.unstable_scheduleCallback,aE=Ni.unstable_cancelCallback,RO=Ni.unstable_shouldYield,MO=Ni.unstable_requestPaint,Sn=Ni.unstable_now,OO=Ni.unstable_getCurrentPriorityLevel,ew=Ni.unstable_ImmediatePriority,JA=Ni.unstable_UserBlockingPriority,hg=Ni.unstable_NormalPriority,NO=Ni.unstable_LowPriority,eI=Ni.unstable_IdlePriority,yy=null,Ro=null;function DO(t){if(Ro&&typeof Ro.onCommitFiberRoot=="function")try{Ro.onCommitFiberRoot(yy,t,void 0,(t.current.flags&128)===128)}catch{}}var Ds=Math.clz32?Math.clz32:BO,LO=Math.log,FO=Math.LN2;function BO(t){return t>>>=0,t===0?32:31-(LO(t)/FO|0)|0}var jp=64,Wp=4194304;function yd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dg(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=yd(a):(s&=o,s!==0&&(r=yd(s)))}else o=n&~i,o!==0?r=yd(o):s!==0&&(r=yd(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ds(e),i=1<<n,r|=t[n],e&=~i;return r}function UO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ds(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=UO(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function q1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function tI(){var t=jp;return jp<<=1,!(jp&4194240)&&(jp=64),t}function ov(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Uf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ds(e),t[e]=n}function $O(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ds(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function tw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ds(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Mt=0;function nI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var rI,nw,iI,sI,oI,Y1=!1,Gp=[],rl=null,il=null,sl=null,tf=new Map,nf=new Map,Xa=[],HO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lE(t,e){switch(t){case"focusin":case"focusout":rl=null;break;case"dragenter":case"dragleave":il=null;break;case"mouseover":case"mouseout":sl=null;break;case"pointerover":case"pointerout":tf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nf.delete(e.pointerId)}}function Kh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=$f(e),e!==null&&nw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function jO(t,e,n,r,i){switch(e){case"focusin":return rl=Kh(rl,t,e,n,r,i),!0;case"dragenter":return il=Kh(il,t,e,n,r,i),!0;case"mouseover":return sl=Kh(sl,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return tf.set(s,Kh(tf.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,nf.set(s,Kh(nf.get(s)||null,t,e,n,r,i)),!0}return!1}function aI(t){var e=nu(t.target);if(e!==null){var n=Au(e);if(n!==null){if(e=n.tag,e===13){if(e=YA(n),e!==null){t.blockedOn=e,oI(t.priority,function(){iI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Q1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);W1=r,n.target.dispatchEvent(r),W1=null}else return e=$f(n),e!==null&&nw(e),t.blockedOn=n,!1;e.shift()}return!0}function uE(t,e,n){jm(t)&&n.delete(e)}function WO(){Y1=!1,rl!==null&&jm(rl)&&(rl=null),il!==null&&jm(il)&&(il=null),sl!==null&&jm(sl)&&(sl=null),tf.forEach(uE),nf.forEach(uE)}function Zh(t,e){t.blockedOn===e&&(t.blockedOn=null,Y1||(Y1=!0,Ni.unstable_scheduleCallback(Ni.unstable_NormalPriority,WO)))}function rf(t){function e(i){return Zh(i,t)}if(0<Gp.length){Zh(Gp[0],t);for(var n=1;n<Gp.length;n++){var r=Gp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(rl!==null&&Zh(rl,t),il!==null&&Zh(il,t),sl!==null&&Zh(sl,t),tf.forEach(e),nf.forEach(e),n=0;n<Xa.length;n++)r=Xa[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xa.length&&(n=Xa[0],n.blockedOn===null);)aI(n),n.blockedOn===null&&Xa.shift()}var Dc=ya.ReactCurrentBatchConfig,fg=!0;function GO(t,e,n,r){var i=Mt,s=Dc.transition;Dc.transition=null;try{Mt=1,rw(t,e,n,r)}finally{Mt=i,Dc.transition=s}}function VO(t,e,n,r){var i=Mt,s=Dc.transition;Dc.transition=null;try{Mt=4,rw(t,e,n,r)}finally{Mt=i,Dc.transition=s}}function rw(t,e,n,r){if(fg){var i=Q1(t,e,n,r);if(i===null)gv(t,e,r,pg,n),lE(t,r);else if(jO(i,t,e,n,r))r.stopPropagation();else if(lE(t,r),e&4&&-1<HO.indexOf(t)){for(;i!==null;){var s=$f(i);if(s!==null&&rI(s),s=Q1(t,e,n,r),s===null&&gv(t,e,r,pg,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else gv(t,e,r,null,n)}}var pg=null;function Q1(t,e,n,r){if(pg=null,t=J_(r),t=nu(t),t!==null)if(e=Au(t),e===null)t=null;else if(n=e.tag,n===13){if(t=YA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pg=t,null}function lI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OO()){case ew:return 1;case JA:return 4;case hg:case NO:return 16;case eI:return 536870912;default:return 16}default:return 16}}var Ka=null,iw=null,Wm=null;function uI(){if(Wm)return Wm;var t,e=iw,n=e.length,r,i="value"in Ka?Ka.value:Ka.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Wm=i.slice(t,1<r?1-r:void 0)}function Gm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vp(){return!0}function cE(){return!1}function Li(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Vp:cE,this.isPropagationStopped=cE,this}return pn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vp)},persist:function(){},isPersistent:Vp}),e}var xh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sw=Li(xh),zf=pn({},xh,{view:0,detail:0}),XO=Li(zf),av,lv,Jh,vy=pn({},zf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ow,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jh&&(Jh&&t.type==="mousemove"?(av=t.screenX-Jh.screenX,lv=t.screenY-Jh.screenY):lv=av=0,Jh=t),av)},movementY:function(t){return"movementY"in t?t.movementY:lv}}),hE=Li(vy),qO=pn({},vy,{dataTransfer:0}),YO=Li(qO),QO=pn({},zf,{relatedTarget:0}),uv=Li(QO),KO=pn({},xh,{animationName:0,elapsedTime:0,pseudoElement:0}),ZO=Li(KO),JO=pn({},xh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),eN=Li(JO),tN=pn({},xh,{data:0}),dE=Li(tN),nN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=iN[t])?!!e[t]:!1}function ow(){return sN}var oN=pn({},zf,{key:function(t){if(t.key){var e=nN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ow,charCode:function(t){return t.type==="keypress"?Gm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),aN=Li(oN),lN=pn({},vy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fE=Li(lN),uN=pn({},zf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ow}),cN=Li(uN),hN=pn({},xh,{propertyName:0,elapsedTime:0,pseudoElement:0}),dN=Li(hN),fN=pn({},vy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pN=Li(fN),mN=[9,13,27,32],aw=ha&&"CompositionEvent"in window,Md=null;ha&&"documentMode"in document&&(Md=document.documentMode);var gN=ha&&"TextEvent"in window&&!Md,cI=ha&&(!aw||Md&&8<Md&&11>=Md),pE=String.fromCharCode(32),mE=!1;function hI(t,e){switch(t){case"keyup":return mN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gc=!1;function yN(t,e){switch(t){case"compositionend":return dI(e);case"keypress":return e.which!==32?null:(mE=!0,pE);case"textInput":return t=e.data,t===pE&&mE?null:t;default:return null}}function vN(t,e){if(gc)return t==="compositionend"||!aw&&hI(t,e)?(t=uI(),Wm=iw=Ka=null,gc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cI&&e.locale!=="ko"?null:e.data;default:return null}}var xN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xN[t.type]:e==="textarea"}function fI(t,e,n,r){WA(r),e=mg(e,"onChange"),0<e.length&&(n=new sw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Od=null,sf=null;function _N(t){EI(t,0)}function xy(t){var e=xc(t);if(FA(e))return t}function wN(t,e){if(t==="change")return e}var pI=!1;if(ha){var cv;if(ha){var hv="oninput"in document;if(!hv){var yE=document.createElement("div");yE.setAttribute("oninput","return;"),hv=typeof yE.oninput=="function"}cv=hv}else cv=!1;pI=cv&&(!document.documentMode||9<document.documentMode)}function vE(){Od&&(Od.detachEvent("onpropertychange",mI),sf=Od=null)}function mI(t){if(t.propertyName==="value"&&xy(sf)){var e=[];fI(e,sf,t,J_(t)),qA(_N,e)}}function bN(t,e,n){t==="focusin"?(vE(),Od=e,sf=n,Od.attachEvent("onpropertychange",mI)):t==="focusout"&&vE()}function SN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xy(sf)}function EN(t,e){if(t==="click")return xy(e)}function TN(t,e){if(t==="input"||t==="change")return xy(e)}function CN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $s=typeof Object.is=="function"?Object.is:CN;function of(t,e){if($s(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!M1.call(e,i)||!$s(t[i],e[i]))return!1}return!0}function xE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _E(t,e){var n=xE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xE(n)}}function gI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yI(){for(var t=window,e=lg();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lg(t.document)}return e}function lw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AN(t){var e=yI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&gI(n.ownerDocument.documentElement,n)){if(r!==null&&lw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=_E(n,s);var o=_E(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var IN=ha&&"documentMode"in document&&11>=document.documentMode,yc=null,K1=null,Nd=null,Z1=!1;function wE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Z1||yc==null||yc!==lg(r)||(r=yc,"selectionStart"in r&&lw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Nd&&of(Nd,r)||(Nd=r,r=mg(K1,"onSelect"),0<r.length&&(e=new sw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=yc)))}function Xp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vc={animationend:Xp("Animation","AnimationEnd"),animationiteration:Xp("Animation","AnimationIteration"),animationstart:Xp("Animation","AnimationStart"),transitionend:Xp("Transition","TransitionEnd")},dv={},vI={};ha&&(vI=document.createElement("div").style,"AnimationEvent"in window||(delete vc.animationend.animation,delete vc.animationiteration.animation,delete vc.animationstart.animation),"TransitionEvent"in window||delete vc.transitionend.transition);function _y(t){if(dv[t])return dv[t];if(!vc[t])return t;var e=vc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in vI)return dv[t]=e[n];return t}var xI=_y("animationend"),_I=_y("animationiteration"),wI=_y("animationstart"),bI=_y("transitionend"),SI=new Map,bE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _l(t,e){SI.set(t,e),Cu(e,[t])}for(var fv=0;fv<bE.length;fv++){var pv=bE[fv],PN=pv.toLowerCase(),kN=pv[0].toUpperCase()+pv.slice(1);_l(PN,"on"+kN)}_l(xI,"onAnimationEnd");_l(_I,"onAnimationIteration");_l(wI,"onAnimationStart");_l("dblclick","onDoubleClick");_l("focusin","onFocus");_l("focusout","onBlur");_l(bI,"onTransitionEnd");Yc("onMouseEnter",["mouseout","mouseover"]);Yc("onMouseLeave",["mouseout","mouseover"]);Yc("onPointerEnter",["pointerout","pointerover"]);Yc("onPointerLeave",["pointerout","pointerover"]);Cu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RN=new Set("cancel close invalid load scroll toggle".split(" ").concat(vd));function SE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,PO(r,e,void 0,t),t.currentTarget=null}function EI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,h=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;SE(i,a,h),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,h=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;SE(i,a,h),s=u}}}if(cg)throw t=X1,cg=!1,X1=null,t}function Xt(t,e){var n=e[rx];n===void 0&&(n=e[rx]=new Set);var r=t+"__bubble";n.has(r)||(TI(e,t,2,!1),n.add(r))}function mv(t,e,n){var r=0;e&&(r|=4),TI(n,t,r,e)}var qp="_reactListening"+Math.random().toString(36).slice(2);function af(t){if(!t[qp]){t[qp]=!0,MA.forEach(function(n){n!=="selectionchange"&&(RN.has(n)||mv(n,!1,t),mv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qp]||(e[qp]=!0,mv("selectionchange",!1,e))}}function TI(t,e,n,r){switch(lI(e)){case 1:var i=GO;break;case 4:i=VO;break;default:i=rw}n=i.bind(null,e,n,t),i=void 0,!V1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function gv(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=nu(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}qA(function(){var h=s,d=J_(n),p=[];e:{var f=SI.get(t);if(f!==void 0){var g=sw,v=t;switch(t){case"keypress":if(Gm(n)===0)break e;case"keydown":case"keyup":g=aN;break;case"focusin":v="focus",g=uv;break;case"focusout":v="blur",g=uv;break;case"beforeblur":case"afterblur":g=uv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=hE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=YO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=cN;break;case xI:case _I:case wI:g=ZO;break;case bI:g=dN;break;case"scroll":g=XO;break;case"wheel":g=pN;break;case"copy":case"cut":case"paste":g=eN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=fE}var w=(e&4)!==0,C=!w&&t==="scroll",b=w?f!==null?f+"Capture":null:f;w=[];for(var S=h,_;S!==null;){_=S;var A=_.stateNode;if(_.tag===5&&A!==null&&(_=A,b!==null&&(A=ef(S,b),A!=null&&w.push(lf(S,A,_)))),C)break;S=S.return}0<w.length&&(f=new g(f,v,null,n,d),p.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==W1&&(v=n.relatedTarget||n.fromElement)&&(nu(v)||v[da]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=h,v=v?nu(v):null,v!==null&&(C=Au(v),v!==C||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=h),g!==v)){if(w=hE,A="onMouseLeave",b="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(w=fE,A="onPointerLeave",b="onPointerEnter",S="pointer"),C=g==null?f:xc(g),_=v==null?f:xc(v),f=new w(A,S+"leave",g,n,d),f.target=C,f.relatedTarget=_,A=null,nu(d)===h&&(w=new w(b,S+"enter",v,n,d),w.target=_,w.relatedTarget=C,A=w),C=A,g&&v)t:{for(w=g,b=v,S=0,_=w;_;_=Qu(_))S++;for(_=0,A=b;A;A=Qu(A))_++;for(;0<S-_;)w=Qu(w),S--;for(;0<_-S;)b=Qu(b),_--;for(;S--;){if(w===b||b!==null&&w===b.alternate)break t;w=Qu(w),b=Qu(b)}w=null}else w=null;g!==null&&EE(p,f,g,w,!1),v!==null&&C!==null&&EE(p,C,v,w,!0)}}e:{if(f=h?xc(h):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var P=wN;else if(gE(f))if(pI)P=TN;else{P=SN;var F=bN}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=EN);if(P&&(P=P(t,h))){fI(p,P,n,d);break e}F&&F(t,f,h),t==="focusout"&&(F=f._wrapperState)&&F.controlled&&f.type==="number"&&U1(f,"number",f.value)}switch(F=h?xc(h):window,t){case"focusin":(gE(F)||F.contentEditable==="true")&&(yc=F,K1=h,Nd=null);break;case"focusout":Nd=K1=yc=null;break;case"mousedown":Z1=!0;break;case"contextmenu":case"mouseup":case"dragend":Z1=!1,wE(p,n,d);break;case"selectionchange":if(IN)break;case"keydown":case"keyup":wE(p,n,d)}var N;if(aw)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else gc?hI(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(cI&&n.locale!=="ko"&&(gc||D!=="onCompositionStart"?D==="onCompositionEnd"&&gc&&(N=uI()):(Ka=d,iw="value"in Ka?Ka.value:Ka.textContent,gc=!0)),F=mg(h,D),0<F.length&&(D=new dE(D,t,null,n,d),p.push({event:D,listeners:F}),N?D.data=N:(N=dI(n),N!==null&&(D.data=N)))),(N=gN?yN(t,n):vN(t,n))&&(h=mg(h,"onBeforeInput"),0<h.length&&(d=new dE("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:h}),d.data=N))}EI(p,e)})}function lf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function mg(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ef(t,n),s!=null&&r.unshift(lf(t,s,i)),s=ef(t,e),s!=null&&r.push(lf(t,s,i))),t=t.return}return r}function Qu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function EE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,h=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&h!==null&&(a=h,i?(u=ef(n,s),u!=null&&o.unshift(lf(n,u,a))):i||(u=ef(n,s),u!=null&&o.push(lf(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var MN=/\r\n?/g,ON=/\u0000|\uFFFD/g;function TE(t){return(typeof t=="string"?t:""+t).replace(MN,`
`).replace(ON,"")}function Yp(t,e,n){if(e=TE(e),TE(t)!==e&&n)throw Error(fe(425))}function gg(){}var J1=null,ex=null;function tx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nx=typeof setTimeout=="function"?setTimeout:void 0,NN=typeof clearTimeout=="function"?clearTimeout:void 0,CE=typeof Promise=="function"?Promise:void 0,DN=typeof queueMicrotask=="function"?queueMicrotask:typeof CE<"u"?function(t){return CE.resolve(null).then(t).catch(LN)}:nx;function LN(t){setTimeout(function(){throw t})}function yv(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),rf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);rf(e)}function ol(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function AE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _h=Math.random().toString(36).slice(2),Po="__reactFiber$"+_h,uf="__reactProps$"+_h,da="__reactContainer$"+_h,rx="__reactEvents$"+_h,FN="__reactListeners$"+_h,BN="__reactHandles$"+_h;function nu(t){var e=t[Po];if(e)return e;for(var n=t.parentNode;n;){if(e=n[da]||n[Po]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=AE(t);t!==null;){if(n=t[Po])return n;t=AE(t)}return e}t=n,n=t.parentNode}return null}function $f(t){return t=t[Po]||t[da],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(fe(33))}function wy(t){return t[uf]||null}var ix=[],_c=-1;function wl(t){return{current:t}}function Qt(t){0>_c||(t.current=ix[_c],ix[_c]=null,_c--)}function jt(t,e){_c++,ix[_c]=t.current,t.current=e}var pl={},Dr=wl(pl),ui=wl(!1),gu=pl;function Qc(t,e){var n=t.type.contextTypes;if(!n)return pl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ci(t){return t=t.childContextTypes,t!=null}function yg(){Qt(ui),Qt(Dr)}function IE(t,e,n){if(Dr.current!==pl)throw Error(fe(168));jt(Dr,e),jt(ui,n)}function CI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(fe(108,bO(t)||"Unknown",i));return pn({},n,r)}function vg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pl,gu=Dr.current,jt(Dr,t),jt(ui,ui.current),!0}function PE(t,e,n){var r=t.stateNode;if(!r)throw Error(fe(169));n?(t=CI(t,e,gu),r.__reactInternalMemoizedMergedChildContext=t,Qt(ui),Qt(Dr),jt(Dr,t)):Qt(ui),jt(ui,n)}var ea=null,by=!1,vv=!1;function AI(t){ea===null?ea=[t]:ea.push(t)}function UN(t){by=!0,AI(t)}function bl(){if(!vv&&ea!==null){vv=!0;var t=0,e=Mt;try{var n=ea;for(Mt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ea=null,by=!1}catch(i){throw ea!==null&&(ea=ea.slice(t+1)),ZA(ew,bl),i}finally{Mt=e,vv=!1}}return null}var wc=[],bc=0,xg=null,_g=0,ts=[],ns=0,yu=null,na=1,ra="";function Wl(t,e){wc[bc++]=_g,wc[bc++]=xg,xg=t,_g=e}function II(t,e,n){ts[ns++]=na,ts[ns++]=ra,ts[ns++]=yu,yu=t;var r=na;t=ra;var i=32-Ds(r)-1;r&=~(1<<i),n+=1;var s=32-Ds(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,na=1<<32-Ds(e)+i|n<<i|r,ra=s+t}else na=1<<s|n<<i|r,ra=t}function uw(t){t.return!==null&&(Wl(t,1),II(t,1,0))}function cw(t){for(;t===xg;)xg=wc[--bc],wc[bc]=null,_g=wc[--bc],wc[bc]=null;for(;t===yu;)yu=ts[--ns],ts[ns]=null,ra=ts[--ns],ts[ns]=null,na=ts[--ns],ts[ns]=null}var Ri=null,Pi=null,Jt=!1,Ps=null;function PI(t,e){var n=os(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function kE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ri=t,Pi=ol(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ri=t,Pi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=yu!==null?{id:na,overflow:ra}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=os(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ri=t,Pi=null,!0):!1;default:return!1}}function sx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ox(t){if(Jt){var e=Pi;if(e){var n=e;if(!kE(t,e)){if(sx(t))throw Error(fe(418));e=ol(n.nextSibling);var r=Ri;e&&kE(t,e)?PI(r,n):(t.flags=t.flags&-4097|2,Jt=!1,Ri=t)}}else{if(sx(t))throw Error(fe(418));t.flags=t.flags&-4097|2,Jt=!1,Ri=t}}}function RE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ri=t}function Qp(t){if(t!==Ri)return!1;if(!Jt)return RE(t),Jt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tx(t.type,t.memoizedProps)),e&&(e=Pi)){if(sx(t))throw kI(),Error(fe(418));for(;e;)PI(t,e),e=ol(e.nextSibling)}if(RE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pi=ol(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pi=null}}else Pi=Ri?ol(t.stateNode.nextSibling):null;return!0}function kI(){for(var t=Pi;t;)t=ol(t.nextSibling)}function Kc(){Pi=Ri=null,Jt=!1}function hw(t){Ps===null?Ps=[t]:Ps.push(t)}var zN=ya.ReactCurrentBatchConfig;function Es(t,e){if(t&&t.defaultProps){e=pn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var wg=wl(null),bg=null,Sc=null,dw=null;function fw(){dw=Sc=bg=null}function pw(t){var e=wg.current;Qt(wg),t._currentValue=e}function ax(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Lc(t,e){bg=t,dw=Sc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ai=!0),t.firstContext=null)}function hs(t){var e=t._currentValue;if(dw!==t)if(t={context:t,memoizedValue:e,next:null},Sc===null){if(bg===null)throw Error(fe(308));Sc=t,bg.dependencies={lanes:0,firstContext:t}}else Sc=Sc.next=t;return e}var ru=null;function mw(t){ru===null?ru=[t]:ru.push(t)}function RI(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,mw(e)):(n.next=i.next,i.next=n),e.interleaved=n,fa(t,r)}function fa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ja=!1;function gw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function oa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function al(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,yt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,fa(t,n)}return i=r.interleaved,i===null?(e.next=e,mw(r)):(e.next=i.next,i.next=e),r.interleaved=e,fa(t,n)}function Vm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tw(t,n)}}function ME(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sg(t,e,n,r){var i=t.updateQueue;ja=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=h:a.next=h,d.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;o=0,d=h=u=null,a=s;do{var f=a.lane,g=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,w=a;switch(f=e,g=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){p=v.call(g,p,f);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,f=typeof v=="function"?v.call(g,p,f):v,f==null)break e;p=pn({},p,f);break e;case 2:ja=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(h=d=g,u=p):d=d.next=g,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(d===null&&(u=p),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);xu|=o,t.lanes=o,t.memoizedState=p}}function OE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(fe(191,i));i.call(r)}}}var OI=new RA.Component().refs;function lx(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:pn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sy={isMounted:function(t){return(t=t._reactInternals)?Au(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Vr(),i=ul(t),s=oa(r,i);s.payload=e,n!=null&&(s.callback=n),e=al(t,s,i),e!==null&&(Ls(e,t,i,r),Vm(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Vr(),i=ul(t),s=oa(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=al(t,s,i),e!==null&&(Ls(e,t,i,r),Vm(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Vr(),r=ul(t),i=oa(n,r);i.tag=2,e!=null&&(i.callback=e),e=al(t,i,r),e!==null&&(Ls(e,t,r,n),Vm(e,t,r))}};function NE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!of(n,r)||!of(i,s):!0}function NI(t,e,n){var r=!1,i=pl,s=e.contextType;return typeof s=="object"&&s!==null?s=hs(s):(i=ci(e)?gu:Dr.current,r=e.contextTypes,s=(r=r!=null)?Qc(t,i):pl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function DE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sy.enqueueReplaceState(e,e.state,null)}function ux(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=OI,gw(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=hs(s):(s=ci(e)?gu:Dr.current,i.context=Qc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(lx(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Sy.enqueueReplaceState(i,i.state,null),Sg(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ed(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var r=n.stateNode}if(!r)throw Error(fe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===OI&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,t))}return t}function Kp(t,e){throw t=Object.prototype.toString.call(e),Error(fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function LE(t){var e=t._init;return e(t._payload)}function DI(t){function e(b,S){if(t){var _=b.deletions;_===null?(b.deletions=[S],b.flags|=16):_.push(S)}}function n(b,S){if(!t)return null;for(;S!==null;)e(b,S),S=S.sibling;return null}function r(b,S){for(b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function i(b,S){return b=cl(b,S),b.index=0,b.sibling=null,b}function s(b,S,_){return b.index=_,t?(_=b.alternate,_!==null?(_=_.index,_<S?(b.flags|=2,S):_):(b.flags|=2,S)):(b.flags|=1048576,S)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,S,_,A){return S===null||S.tag!==6?(S=Tv(_,b.mode,A),S.return=b,S):(S=i(S,_),S.return=b,S)}function u(b,S,_,A){var P=_.type;return P===mc?d(b,S,_.props.children,A,_.key):S!==null&&(S.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ha&&LE(P)===S.type)?(A=i(S,_.props),A.ref=ed(b,S,_),A.return=b,A):(A=Zm(_.type,_.key,_.props,null,b.mode,A),A.ref=ed(b,S,_),A.return=b,A)}function h(b,S,_,A){return S===null||S.tag!==4||S.stateNode.containerInfo!==_.containerInfo||S.stateNode.implementation!==_.implementation?(S=Cv(_,b.mode,A),S.return=b,S):(S=i(S,_.children||[]),S.return=b,S)}function d(b,S,_,A,P){return S===null||S.tag!==7?(S=lu(_,b.mode,A,P),S.return=b,S):(S=i(S,_),S.return=b,S)}function p(b,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Tv(""+S,b.mode,_),S.return=b,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case zp:return _=Zm(S.type,S.key,S.props,null,b.mode,_),_.ref=ed(b,null,S),_.return=b,_;case pc:return S=Cv(S,b.mode,_),S.return=b,S;case Ha:var A=S._init;return p(b,A(S._payload),_)}if(gd(S)||Yh(S))return S=lu(S,b.mode,_,null),S.return=b,S;Kp(b,S)}return null}function f(b,S,_,A){var P=S!==null?S.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return P!==null?null:a(b,S,""+_,A);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case zp:return _.key===P?u(b,S,_,A):null;case pc:return _.key===P?h(b,S,_,A):null;case Ha:return P=_._init,f(b,S,P(_._payload),A)}if(gd(_)||Yh(_))return P!==null?null:d(b,S,_,A,null);Kp(b,_)}return null}function g(b,S,_,A,P){if(typeof A=="string"&&A!==""||typeof A=="number")return b=b.get(_)||null,a(S,b,""+A,P);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case zp:return b=b.get(A.key===null?_:A.key)||null,u(S,b,A,P);case pc:return b=b.get(A.key===null?_:A.key)||null,h(S,b,A,P);case Ha:var F=A._init;return g(b,S,_,F(A._payload),P)}if(gd(A)||Yh(A))return b=b.get(_)||null,d(S,b,A,P,null);Kp(S,A)}return null}function v(b,S,_,A){for(var P=null,F=null,N=S,D=S=0,q=null;N!==null&&D<_.length;D++){N.index>D?(q=N,N=null):q=N.sibling;var G=f(b,N,_[D],A);if(G===null){N===null&&(N=q);break}t&&N&&G.alternate===null&&e(b,N),S=s(G,S,D),F===null?P=G:F.sibling=G,F=G,N=q}if(D===_.length)return n(b,N),Jt&&Wl(b,D),P;if(N===null){for(;D<_.length;D++)N=p(b,_[D],A),N!==null&&(S=s(N,S,D),F===null?P=N:F.sibling=N,F=N);return Jt&&Wl(b,D),P}for(N=r(b,N);D<_.length;D++)q=g(N,b,D,_[D],A),q!==null&&(t&&q.alternate!==null&&N.delete(q.key===null?D:q.key),S=s(q,S,D),F===null?P=q:F.sibling=q,F=q);return t&&N.forEach(function(H){return e(b,H)}),Jt&&Wl(b,D),P}function w(b,S,_,A){var P=Yh(_);if(typeof P!="function")throw Error(fe(150));if(_=P.call(_),_==null)throw Error(fe(151));for(var F=P=null,N=S,D=S=0,q=null,G=_.next();N!==null&&!G.done;D++,G=_.next()){N.index>D?(q=N,N=null):q=N.sibling;var H=f(b,N,G.value,A);if(H===null){N===null&&(N=q);break}t&&N&&H.alternate===null&&e(b,N),S=s(H,S,D),F===null?P=H:F.sibling=H,F=H,N=q}if(G.done)return n(b,N),Jt&&Wl(b,D),P;if(N===null){for(;!G.done;D++,G=_.next())G=p(b,G.value,A),G!==null&&(S=s(G,S,D),F===null?P=G:F.sibling=G,F=G);return Jt&&Wl(b,D),P}for(N=r(b,N);!G.done;D++,G=_.next())G=g(N,b,D,G.value,A),G!==null&&(t&&G.alternate!==null&&N.delete(G.key===null?D:G.key),S=s(G,S,D),F===null?P=G:F.sibling=G,F=G);return t&&N.forEach(function(J){return e(b,J)}),Jt&&Wl(b,D),P}function C(b,S,_,A){if(typeof _=="object"&&_!==null&&_.type===mc&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case zp:e:{for(var P=_.key,F=S;F!==null;){if(F.key===P){if(P=_.type,P===mc){if(F.tag===7){n(b,F.sibling),S=i(F,_.props.children),S.return=b,b=S;break e}}else if(F.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ha&&LE(P)===F.type){n(b,F.sibling),S=i(F,_.props),S.ref=ed(b,F,_),S.return=b,b=S;break e}n(b,F);break}else e(b,F);F=F.sibling}_.type===mc?(S=lu(_.props.children,b.mode,A,_.key),S.return=b,b=S):(A=Zm(_.type,_.key,_.props,null,b.mode,A),A.ref=ed(b,S,_),A.return=b,b=A)}return o(b);case pc:e:{for(F=_.key;S!==null;){if(S.key===F)if(S.tag===4&&S.stateNode.containerInfo===_.containerInfo&&S.stateNode.implementation===_.implementation){n(b,S.sibling),S=i(S,_.children||[]),S.return=b,b=S;break e}else{n(b,S);break}else e(b,S);S=S.sibling}S=Cv(_,b.mode,A),S.return=b,b=S}return o(b);case Ha:return F=_._init,C(b,S,F(_._payload),A)}if(gd(_))return v(b,S,_,A);if(Yh(_))return w(b,S,_,A);Kp(b,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,S!==null&&S.tag===6?(n(b,S.sibling),S=i(S,_),S.return=b,b=S):(n(b,S),S=Tv(_,b.mode,A),S.return=b,b=S),o(b)):n(b,S)}return C}var Zc=DI(!0),LI=DI(!1),Hf={},Mo=wl(Hf),cf=wl(Hf),hf=wl(Hf);function iu(t){if(t===Hf)throw Error(fe(174));return t}function yw(t,e){switch(jt(hf,e),jt(cf,t),jt(Mo,Hf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$1(e,t)}Qt(Mo),jt(Mo,e)}function Jc(){Qt(Mo),Qt(cf),Qt(hf)}function FI(t){iu(hf.current);var e=iu(Mo.current),n=$1(e,t.type);e!==n&&(jt(cf,t),jt(Mo,n))}function vw(t){cf.current===t&&(Qt(Mo),Qt(cf))}var hn=wl(0);function Eg(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xv=[];function xw(){for(var t=0;t<xv.length;t++)xv[t]._workInProgressVersionPrimary=null;xv.length=0}var Xm=ya.ReactCurrentDispatcher,_v=ya.ReactCurrentBatchConfig,vu=0,fn=null,Wn=null,er=null,Tg=!1,Dd=!1,df=0,$N=0;function Ar(){throw Error(fe(321))}function _w(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$s(t[n],e[n]))return!1;return!0}function ww(t,e,n,r,i,s){if(vu=s,fn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xm.current=t===null||t.memoizedState===null?GN:VN,t=n(r,i),Dd){s=0;do{if(Dd=!1,df=0,25<=s)throw Error(fe(301));s+=1,er=Wn=null,e.updateQueue=null,Xm.current=XN,t=n(r,i)}while(Dd)}if(Xm.current=Cg,e=Wn!==null&&Wn.next!==null,vu=0,er=Wn=fn=null,Tg=!1,e)throw Error(fe(300));return t}function bw(){var t=df!==0;return df=0,t}function Co(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?fn.memoizedState=er=t:er=er.next=t,er}function ds(){if(Wn===null){var t=fn.alternate;t=t!==null?t.memoizedState:null}else t=Wn.next;var e=er===null?fn.memoizedState:er.next;if(e!==null)er=e,Wn=t;else{if(t===null)throw Error(fe(310));Wn=t,t={memoizedState:Wn.memoizedState,baseState:Wn.baseState,baseQueue:Wn.baseQueue,queue:Wn.queue,next:null},er===null?fn.memoizedState=er=t:er=er.next=t}return er}function ff(t,e){return typeof e=="function"?e(t):e}function wv(t){var e=ds(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=Wn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,h=s;do{var d=h.lane;if((vu&d)===d)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(a=u=p,o=r):u=u.next=p,fn.lanes|=d,xu|=d}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=a,$s(r,e.memoizedState)||(ai=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,fn.lanes|=s,xu|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bv(t){var e=ds(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);$s(s,e.memoizedState)||(ai=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function BI(){}function UI(t,e){var n=fn,r=ds(),i=e(),s=!$s(r.memoizedState,i);if(s&&(r.memoizedState=i,ai=!0),r=r.queue,Sw(HI.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||er!==null&&er.memoizedState.tag&1){if(n.flags|=2048,pf(9,$I.bind(null,n,r,i,e),void 0,null),rr===null)throw Error(fe(349));vu&30||zI(n,e,i)}return i}function zI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=fn.updateQueue,e===null?(e={lastEffect:null,stores:null},fn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $I(t,e,n,r){e.value=n,e.getSnapshot=r,jI(e)&&WI(t)}function HI(t,e,n){return n(function(){jI(e)&&WI(t)})}function jI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$s(t,n)}catch{return!0}}function WI(t){var e=fa(t,1);e!==null&&Ls(e,t,1,-1)}function FE(t){var e=Co();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ff,lastRenderedState:t},e.queue=t,t=t.dispatch=WN.bind(null,fn,t),[e.memoizedState,t]}function pf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=fn.updateQueue,e===null?(e={lastEffect:null,stores:null},fn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function GI(){return ds().memoizedState}function qm(t,e,n,r){var i=Co();fn.flags|=t,i.memoizedState=pf(1|e,n,void 0,r===void 0?null:r)}function Ey(t,e,n,r){var i=ds();r=r===void 0?null:r;var s=void 0;if(Wn!==null){var o=Wn.memoizedState;if(s=o.destroy,r!==null&&_w(r,o.deps)){i.memoizedState=pf(e,n,s,r);return}}fn.flags|=t,i.memoizedState=pf(1|e,n,s,r)}function BE(t,e){return qm(8390656,8,t,e)}function Sw(t,e){return Ey(2048,8,t,e)}function VI(t,e){return Ey(4,2,t,e)}function XI(t,e){return Ey(4,4,t,e)}function qI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function YI(t,e,n){return n=n!=null?n.concat([t]):null,Ey(4,4,qI.bind(null,e,t),n)}function Ew(){}function QI(t,e){var n=ds();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_w(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function KI(t,e){var n=ds();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_w(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ZI(t,e,n){return vu&21?($s(n,e)||(n=tI(),fn.lanes|=n,xu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ai=!0),t.memoizedState=n)}function HN(t,e){var n=Mt;Mt=n!==0&&4>n?n:4,t(!0);var r=_v.transition;_v.transition={};try{t(!1),e()}finally{Mt=n,_v.transition=r}}function JI(){return ds().memoizedState}function jN(t,e,n){var r=ul(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},eP(t))tP(e,n);else if(n=RI(t,e,n,r),n!==null){var i=Vr();Ls(n,t,r,i),nP(n,e,r)}}function WN(t,e,n){var r=ul(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(eP(t))tP(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,$s(a,o)){var u=e.interleaved;u===null?(i.next=i,mw(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=RI(t,e,i,r),n!==null&&(i=Vr(),Ls(n,t,r,i),nP(n,e,r))}}function eP(t){var e=t.alternate;return t===fn||e!==null&&e===fn}function tP(t,e){Dd=Tg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function nP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tw(t,n)}}var Cg={readContext:hs,useCallback:Ar,useContext:Ar,useEffect:Ar,useImperativeHandle:Ar,useInsertionEffect:Ar,useLayoutEffect:Ar,useMemo:Ar,useReducer:Ar,useRef:Ar,useState:Ar,useDebugValue:Ar,useDeferredValue:Ar,useTransition:Ar,useMutableSource:Ar,useSyncExternalStore:Ar,useId:Ar,unstable_isNewReconciler:!1},GN={readContext:hs,useCallback:function(t,e){return Co().memoizedState=[t,e===void 0?null:e],t},useContext:hs,useEffect:BE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qm(4194308,4,qI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qm(4194308,4,t,e)},useInsertionEffect:function(t,e){return qm(4,2,t,e)},useMemo:function(t,e){var n=Co();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Co();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=jN.bind(null,fn,t),[r.memoizedState,t]},useRef:function(t){var e=Co();return t={current:t},e.memoizedState=t},useState:FE,useDebugValue:Ew,useDeferredValue:function(t){return Co().memoizedState=t},useTransition:function(){var t=FE(!1),e=t[0];return t=HN.bind(null,t[1]),Co().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=fn,i=Co();if(Jt){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=e(),rr===null)throw Error(fe(349));vu&30||zI(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,BE(HI.bind(null,r,s,t),[t]),r.flags|=2048,pf(9,$I.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Co(),e=rr.identifierPrefix;if(Jt){var n=ra,r=na;n=(r&~(1<<32-Ds(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=df++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$N++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},VN={readContext:hs,useCallback:QI,useContext:hs,useEffect:Sw,useImperativeHandle:YI,useInsertionEffect:VI,useLayoutEffect:XI,useMemo:KI,useReducer:wv,useRef:GI,useState:function(){return wv(ff)},useDebugValue:Ew,useDeferredValue:function(t){var e=ds();return ZI(e,Wn.memoizedState,t)},useTransition:function(){var t=wv(ff)[0],e=ds().memoizedState;return[t,e]},useMutableSource:BI,useSyncExternalStore:UI,useId:JI,unstable_isNewReconciler:!1},XN={readContext:hs,useCallback:QI,useContext:hs,useEffect:Sw,useImperativeHandle:YI,useInsertionEffect:VI,useLayoutEffect:XI,useMemo:KI,useReducer:bv,useRef:GI,useState:function(){return bv(ff)},useDebugValue:Ew,useDeferredValue:function(t){var e=ds();return Wn===null?e.memoizedState=t:ZI(e,Wn.memoizedState,t)},useTransition:function(){var t=bv(ff)[0],e=ds().memoizedState;return[t,e]},useMutableSource:BI,useSyncExternalStore:UI,useId:JI,unstable_isNewReconciler:!1};function eh(t,e){try{var n="",r=e;do n+=wO(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Sv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cx(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var qN=typeof WeakMap=="function"?WeakMap:Map;function rP(t,e,n){n=oa(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ig||(Ig=!0,_x=r),cx(t,e)},n}function iP(t,e,n){n=oa(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){cx(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){cx(t,e),typeof r!="function"&&(ll===null?ll=new Set([this]):ll.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function UE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new qN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=lD.bind(null,t,e,n),e.then(t,t))}function zE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $E(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=oa(-1,1),e.tag=2,al(n,e,1))),n.lanes|=1),t)}var YN=ya.ReactCurrentOwner,ai=!1;function Gr(t,e,n,r){e.child=t===null?LI(e,null,n,r):Zc(e,t.child,n,r)}function HE(t,e,n,r,i){n=n.render;var s=e.ref;return Lc(e,i),r=ww(t,e,n,r,s,i),n=bw(),t!==null&&!ai?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,pa(t,e,i)):(Jt&&n&&uw(e),e.flags|=1,Gr(t,e,r,i),e.child)}function jE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Mw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,sP(t,e,s,r,i)):(t=Zm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:of,n(o,r)&&t.ref===e.ref)return pa(t,e,i)}return e.flags|=1,t=cl(s,r),t.ref=e.ref,t.return=e,e.child=t}function sP(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(of(s,r)&&t.ref===e.ref)if(ai=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ai=!0);else return e.lanes=t.lanes,pa(t,e,i)}return hx(t,e,n,r,i)}function oP(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},jt(Tc,Ci),Ci|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,jt(Tc,Ci),Ci|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,jt(Tc,Ci),Ci|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,jt(Tc,Ci),Ci|=r;return Gr(t,e,i,n),e.child}function aP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hx(t,e,n,r,i){var s=ci(n)?gu:Dr.current;return s=Qc(e,s),Lc(e,i),n=ww(t,e,n,r,s,i),r=bw(),t!==null&&!ai?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,pa(t,e,i)):(Jt&&r&&uw(e),e.flags|=1,Gr(t,e,n,i),e.child)}function WE(t,e,n,r,i){if(ci(n)){var s=!0;vg(e)}else s=!1;if(Lc(e,i),e.stateNode===null)Ym(t,e),NI(e,n,r),ux(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=hs(h):(h=ci(n)?gu:Dr.current,h=Qc(e,h));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==h)&&DE(e,o,r,h),ja=!1;var f=e.memoizedState;o.state=f,Sg(e,r,o,i),u=e.memoizedState,a!==r||f!==u||ui.current||ja?(typeof d=="function"&&(lx(e,n,d,r),u=e.memoizedState),(a=ja||NE(e,n,a,r,f,u,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,MI(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:Es(e.type,a),o.props=h,p=e.pendingProps,f=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=hs(u):(u=ci(n)?gu:Dr.current,u=Qc(e,u));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||f!==u)&&DE(e,o,r,u),ja=!1,f=e.memoizedState,o.state=f,Sg(e,r,o,i);var v=e.memoizedState;a!==p||f!==v||ui.current||ja?(typeof g=="function"&&(lx(e,n,g,r),v=e.memoizedState),(h=ja||NE(e,n,h,r,f,v,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return dx(t,e,n,r,s,i)}function dx(t,e,n,r,i,s){aP(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&PE(e,n,!1),pa(t,e,s);r=e.stateNode,YN.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Zc(e,t.child,null,s),e.child=Zc(e,null,a,s)):Gr(t,e,a,s),e.memoizedState=r.state,i&&PE(e,n,!0),e.child}function lP(t){var e=t.stateNode;e.pendingContext?IE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&IE(t,e.context,!1),yw(t,e.containerInfo)}function GE(t,e,n,r,i){return Kc(),hw(i),e.flags|=256,Gr(t,e,n,r),e.child}var fx={dehydrated:null,treeContext:null,retryLane:0};function px(t){return{baseLanes:t,cachePool:null,transitions:null}}function uP(t,e,n){var r=e.pendingProps,i=hn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),jt(hn,i&1),t===null)return ox(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ay(o,r,0,null),t=lu(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=px(n),e.memoizedState=fx,t):Tw(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return QN(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=cl(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=cl(a,s):(s=lu(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?px(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=fx,r}return s=t.child,t=s.sibling,r=cl(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Tw(t,e){return e=Ay({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zp(t,e,n,r){return r!==null&&hw(r),Zc(e,t.child,null,n),t=Tw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function QN(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Sv(Error(fe(422))),Zp(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ay({mode:"visible",children:r.children},i,0,null),s=lu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Zc(e,t.child,null,o),e.child.memoizedState=px(o),e.memoizedState=fx,s);if(!(e.mode&1))return Zp(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(fe(419)),r=Sv(s,r,void 0),Zp(t,e,o,r)}if(a=(o&t.childLanes)!==0,ai||a){if(r=rr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,fa(t,i),Ls(r,t,i,-1))}return Rw(),r=Sv(Error(fe(421))),Zp(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=uD.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Pi=ol(i.nextSibling),Ri=e,Jt=!0,Ps=null,t!==null&&(ts[ns++]=na,ts[ns++]=ra,ts[ns++]=yu,na=t.id,ra=t.overflow,yu=e),e=Tw(e,r.children),e.flags|=4096,e)}function VE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ax(t.return,e,n)}function Ev(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function cP(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Gr(t,e,r.children,n),r=hn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&VE(t,n,e);else if(t.tag===19)VE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(jt(hn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Eg(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ev(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Eg(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ev(e,!0,n,null,s);break;case"together":Ev(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ym(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(fe(153));if(e.child!==null){for(t=e.child,n=cl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=cl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KN(t,e,n){switch(e.tag){case 3:lP(e),Kc();break;case 5:FI(e);break;case 1:ci(e.type)&&vg(e);break;case 4:yw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;jt(wg,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(jt(hn,hn.current&1),e.flags|=128,null):n&e.child.childLanes?uP(t,e,n):(jt(hn,hn.current&1),t=pa(t,e,n),t!==null?t.sibling:null);jt(hn,hn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cP(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),jt(hn,hn.current),r)break;return null;case 22:case 23:return e.lanes=0,oP(t,e,n)}return pa(t,e,n)}var hP,mx,dP,fP;hP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mx=function(){};dP=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,iu(Mo.current);var s=null;switch(n){case"input":i=F1(t,i),r=F1(t,r),s=[];break;case"select":i=pn({},i,{value:void 0}),r=pn({},r,{value:void 0}),s=[];break;case"textarea":i=z1(t,i),r=z1(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gg)}H1(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var a=i[h];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Zd.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(a=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==a&&(u!=null||a!=null))if(h==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Zd.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Xt("scroll",t),s||a===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};fP=function(t,e,n,r){n!==r&&(e.flags|=4)};function td(t,e){if(!Jt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ir(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ZN(t,e,n){var r=e.pendingProps;switch(cw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ir(e),null;case 1:return ci(e.type)&&yg(),Ir(e),null;case 3:return r=e.stateNode,Jc(),Qt(ui),Qt(Dr),xw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ps!==null&&(Sx(Ps),Ps=null))),mx(t,e),Ir(e),null;case 5:vw(e);var i=iu(hf.current);if(n=e.type,t!==null&&e.stateNode!=null)dP(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(fe(166));return Ir(e),null}if(t=iu(Mo.current),Qp(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Po]=e,r[uf]=s,t=(e.mode&1)!==0,n){case"dialog":Xt("cancel",r),Xt("close",r);break;case"iframe":case"object":case"embed":Xt("load",r);break;case"video":case"audio":for(i=0;i<vd.length;i++)Xt(vd[i],r);break;case"source":Xt("error",r);break;case"img":case"image":case"link":Xt("error",r),Xt("load",r);break;case"details":Xt("toggle",r);break;case"input":tE(r,s),Xt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Xt("invalid",r);break;case"textarea":rE(r,s),Xt("invalid",r)}H1(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Yp(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Yp(r.textContent,a,t),i=["children",""+a]):Zd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Xt("scroll",r)}switch(n){case"input":$p(r),nE(r,s,!0);break;case"textarea":$p(r),iE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=gg)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=zA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Po]=e,t[uf]=r,hP(t,e,!1,!1),e.stateNode=t;e:{switch(o=j1(n,r),n){case"dialog":Xt("cancel",t),Xt("close",t),i=r;break;case"iframe":case"object":case"embed":Xt("load",t),i=r;break;case"video":case"audio":for(i=0;i<vd.length;i++)Xt(vd[i],t);i=r;break;case"source":Xt("error",t),i=r;break;case"img":case"image":case"link":Xt("error",t),Xt("load",t),i=r;break;case"details":Xt("toggle",t),i=r;break;case"input":tE(t,r),i=F1(t,r),Xt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=pn({},r,{value:void 0}),Xt("invalid",t);break;case"textarea":rE(t,r),i=z1(t,r),Xt("invalid",t);break;default:i=r}H1(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?jA(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&$A(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Jd(t,u):typeof u=="number"&&Jd(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Zd.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Xt("scroll",t):u!=null&&Y_(t,s,u,o))}switch(n){case"input":$p(t),nE(t,r,!1);break;case"textarea":$p(t),iE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Mc(t,!!r.multiple,s,!1):r.defaultValue!=null&&Mc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=gg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ir(e),null;case 6:if(t&&e.stateNode!=null)fP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(fe(166));if(n=iu(hf.current),iu(Mo.current),Qp(e)){if(r=e.stateNode,n=e.memoizedProps,r[Po]=e,(s=r.nodeValue!==n)&&(t=Ri,t!==null))switch(t.tag){case 3:Yp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yp(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Po]=e,e.stateNode=r}return Ir(e),null;case 13:if(Qt(hn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Jt&&Pi!==null&&e.mode&1&&!(e.flags&128))kI(),Kc(),e.flags|=98560,s=!1;else if(s=Qp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(fe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(fe(317));s[Po]=e}else Kc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ir(e),s=!1}else Ps!==null&&(Sx(Ps),Ps=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||hn.current&1?Vn===0&&(Vn=3):Rw())),e.updateQueue!==null&&(e.flags|=4),Ir(e),null);case 4:return Jc(),mx(t,e),t===null&&af(e.stateNode.containerInfo),Ir(e),null;case 10:return pw(e.type._context),Ir(e),null;case 17:return ci(e.type)&&yg(),Ir(e),null;case 19:if(Qt(hn),s=e.memoizedState,s===null)return Ir(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)td(s,!1);else{if(Vn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Eg(t),o!==null){for(e.flags|=128,td(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return jt(hn,hn.current&1|2),e.child}t=t.sibling}s.tail!==null&&Sn()>th&&(e.flags|=128,r=!0,td(s,!1),e.lanes=4194304)}else{if(!r)if(t=Eg(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),td(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Jt)return Ir(e),null}else 2*Sn()-s.renderingStartTime>th&&n!==1073741824&&(e.flags|=128,r=!0,td(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Sn(),e.sibling=null,n=hn.current,jt(hn,r?n&1|2:n&1),e):(Ir(e),null);case 22:case 23:return kw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ci&1073741824&&(Ir(e),e.subtreeFlags&6&&(e.flags|=8192)):Ir(e),null;case 24:return null;case 25:return null}throw Error(fe(156,e.tag))}function JN(t,e){switch(cw(e),e.tag){case 1:return ci(e.type)&&yg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Jc(),Qt(ui),Qt(Dr),xw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vw(e),null;case 13:if(Qt(hn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(fe(340));Kc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qt(hn),null;case 4:return Jc(),null;case 10:return pw(e.type._context),null;case 22:case 23:return kw(),null;case 24:return null;default:return null}}var Jp=!1,Mr=!1,eD=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Ec(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){yn(t,e,r)}else n.current=null}function gx(t,e,n){try{n()}catch(r){yn(t,e,r)}}var XE=!1;function tD(t,e){if(J1=fg,t=yI(),lw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,h=0,d=0,p=t,f=null;t:for(;;){for(var g;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(g=p.firstChild)!==null;)f=p,p=g;for(;;){if(p===t)break t;if(f===n&&++h===i&&(a=o),f===s&&++d===r&&(u=o),(g=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=g}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ex={focusedElem:t,selectionRange:n},fg=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,C=v.memoizedState,b=e.stateNode,S=b.getSnapshotBeforeUpdate(e.elementType===e.type?w:Es(e.type,w),C);b.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(A){yn(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return v=XE,XE=!1,v}function Ld(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&gx(e,n,s)}i=i.next}while(i!==r)}}function Ty(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function yx(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function pP(t){var e=t.alternate;e!==null&&(t.alternate=null,pP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Po],delete e[uf],delete e[rx],delete e[FN],delete e[BN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mP(t){return t.tag===5||t.tag===3||t.tag===4}function qE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gg));else if(r!==4&&(t=t.child,t!==null))for(vx(t,e,n),t=t.sibling;t!==null;)vx(t,e,n),t=t.sibling}function xx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xx(t,e,n),t=t.sibling;t!==null;)xx(t,e,n),t=t.sibling}var dr=null,As=!1;function Ba(t,e,n){for(n=n.child;n!==null;)gP(t,e,n),n=n.sibling}function gP(t,e,n){if(Ro&&typeof Ro.onCommitFiberUnmount=="function")try{Ro.onCommitFiberUnmount(yy,n)}catch{}switch(n.tag){case 5:Mr||Ec(n,e);case 6:var r=dr,i=As;dr=null,Ba(t,e,n),dr=r,As=i,dr!==null&&(As?(t=dr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):dr.removeChild(n.stateNode));break;case 18:dr!==null&&(As?(t=dr,n=n.stateNode,t.nodeType===8?yv(t.parentNode,n):t.nodeType===1&&yv(t,n),rf(t)):yv(dr,n.stateNode));break;case 4:r=dr,i=As,dr=n.stateNode.containerInfo,As=!0,Ba(t,e,n),dr=r,As=i;break;case 0:case 11:case 14:case 15:if(!Mr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&gx(n,e,o),i=i.next}while(i!==r)}Ba(t,e,n);break;case 1:if(!Mr&&(Ec(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){yn(n,e,a)}Ba(t,e,n);break;case 21:Ba(t,e,n);break;case 22:n.mode&1?(Mr=(r=Mr)||n.memoizedState!==null,Ba(t,e,n),Mr=r):Ba(t,e,n);break;default:Ba(t,e,n)}}function YE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new eD),e.forEach(function(r){var i=cD.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function gs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:dr=a.stateNode,As=!1;break e;case 3:dr=a.stateNode.containerInfo,As=!0;break e;case 4:dr=a.stateNode.containerInfo,As=!0;break e}a=a.return}if(dr===null)throw Error(fe(160));gP(s,o,i),dr=null,As=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){yn(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yP(e,t),e=e.sibling}function yP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gs(e,t),_o(t),r&4){try{Ld(3,t,t.return),Ty(3,t)}catch(w){yn(t,t.return,w)}try{Ld(5,t,t.return)}catch(w){yn(t,t.return,w)}}break;case 1:gs(e,t),_o(t),r&512&&n!==null&&Ec(n,n.return);break;case 5:if(gs(e,t),_o(t),r&512&&n!==null&&Ec(n,n.return),t.flags&32){var i=t.stateNode;try{Jd(i,"")}catch(w){yn(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&BA(i,s),j1(a,o);var h=j1(a,s);for(o=0;o<u.length;o+=2){var d=u[o],p=u[o+1];d==="style"?jA(i,p):d==="dangerouslySetInnerHTML"?$A(i,p):d==="children"?Jd(i,p):Y_(i,d,p,h)}switch(a){case"input":B1(i,s);break;case"textarea":UA(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Mc(i,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?Mc(i,!!s.multiple,s.defaultValue,!0):Mc(i,!!s.multiple,s.multiple?[]:"",!1))}i[uf]=s}catch(w){yn(t,t.return,w)}}break;case 6:if(gs(e,t),_o(t),r&4){if(t.stateNode===null)throw Error(fe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){yn(t,t.return,w)}}break;case 3:if(gs(e,t),_o(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{rf(e.containerInfo)}catch(w){yn(t,t.return,w)}break;case 4:gs(e,t),_o(t);break;case 13:gs(e,t),_o(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Iw=Sn())),r&4&&YE(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Mr=(h=Mr)||d,gs(e,t),Mr=h):gs(e,t),_o(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!d&&t.mode&1)for(Ie=t,d=t.child;d!==null;){for(p=Ie=d;Ie!==null;){switch(f=Ie,g=f.child,f.tag){case 0:case 11:case 14:case 15:Ld(4,f,f.return);break;case 1:Ec(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){yn(r,n,w)}}break;case 5:Ec(f,f.return);break;case 22:if(f.memoizedState!==null){KE(p);continue}}g!==null?(g.return=f,Ie=g):KE(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=HA("display",o))}catch(w){yn(t,t.return,w)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(w){yn(t,t.return,w)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:gs(e,t),_o(t),r&4&&YE(t);break;case 21:break;default:gs(e,t),_o(t)}}function _o(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(mP(n)){var r=n;break e}n=n.return}throw Error(fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Jd(i,""),r.flags&=-33);var s=qE(t);xx(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=qE(t);vx(t,a,o);break;default:throw Error(fe(161))}}catch(u){yn(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nD(t,e,n){Ie=t,vP(t)}function vP(t,e,n){for(var r=(t.mode&1)!==0;Ie!==null;){var i=Ie,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Jp;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Mr;a=Jp;var h=Mr;if(Jp=o,(Mr=u)&&!h)for(Ie=i;Ie!==null;)o=Ie,u=o.child,o.tag===22&&o.memoizedState!==null?ZE(i):u!==null?(u.return=o,Ie=u):ZE(i);for(;s!==null;)Ie=s,vP(s),s=s.sibling;Ie=i,Jp=a,Mr=h}QE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ie=s):QE(t)}}function QE(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mr||Ty(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Mr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Es(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&OE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}OE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&rf(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}Mr||e.flags&512&&yx(e)}catch(f){yn(e,e.return,f)}}if(e===t){Ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function KE(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function ZE(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ty(4,e)}catch(u){yn(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){yn(e,i,u)}}var s=e.return;try{yx(e)}catch(u){yn(e,s,u)}break;case 5:var o=e.return;try{yx(e)}catch(u){yn(e,o,u)}}}catch(u){yn(e,e.return,u)}if(e===t){Ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ie=a;break}Ie=e.return}}var rD=Math.ceil,Ag=ya.ReactCurrentDispatcher,Cw=ya.ReactCurrentOwner,cs=ya.ReactCurrentBatchConfig,yt=0,rr=null,Rn=null,gr=0,Ci=0,Tc=wl(0),Vn=0,mf=null,xu=0,Cy=0,Aw=0,Fd=null,oi=null,Iw=0,th=1/0,Jo=null,Ig=!1,_x=null,ll=null,em=!1,Za=null,Pg=0,Bd=0,wx=null,Qm=-1,Km=0;function Vr(){return yt&6?Sn():Qm!==-1?Qm:Qm=Sn()}function ul(t){return t.mode&1?yt&2&&gr!==0?gr&-gr:zN.transition!==null?(Km===0&&(Km=tI()),Km):(t=Mt,t!==0||(t=window.event,t=t===void 0?16:lI(t.type)),t):1}function Ls(t,e,n,r){if(50<Bd)throw Bd=0,wx=null,Error(fe(185));Uf(t,n,r),(!(yt&2)||t!==rr)&&(t===rr&&(!(yt&2)&&(Cy|=n),Vn===4&&qa(t,gr)),hi(t,r),n===1&&yt===0&&!(e.mode&1)&&(th=Sn()+500,by&&bl()))}function hi(t,e){var n=t.callbackNode;zO(t,e);var r=dg(t,t===rr?gr:0);if(r===0)n!==null&&aE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&aE(n),e===1)t.tag===0?UN(JE.bind(null,t)):AI(JE.bind(null,t)),DN(function(){!(yt&6)&&bl()}),n=null;else{switch(nI(r)){case 1:n=ew;break;case 4:n=JA;break;case 16:n=hg;break;case 536870912:n=eI;break;default:n=hg}n=CP(n,xP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function xP(t,e){if(Qm=-1,Km=0,yt&6)throw Error(fe(327));var n=t.callbackNode;if(Fc()&&t.callbackNode!==n)return null;var r=dg(t,t===rr?gr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=kg(t,r);else{e=r;var i=yt;yt|=2;var s=wP();(rr!==t||gr!==e)&&(Jo=null,th=Sn()+500,au(t,e));do try{oD();break}catch(a){_P(t,a)}while(1);fw(),Ag.current=s,yt=i,Rn!==null?e=0:(rr=null,gr=0,e=Vn)}if(e!==0){if(e===2&&(i=q1(t),i!==0&&(r=i,e=bx(t,i))),e===1)throw n=mf,au(t,0),qa(t,r),hi(t,Sn()),n;if(e===6)qa(t,r);else{if(i=t.current.alternate,!(r&30)&&!iD(i)&&(e=kg(t,r),e===2&&(s=q1(t),s!==0&&(r=s,e=bx(t,s))),e===1))throw n=mf,au(t,0),qa(t,r),hi(t,Sn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(fe(345));case 2:Gl(t,oi,Jo);break;case 3:if(qa(t,r),(r&130023424)===r&&(e=Iw+500-Sn(),10<e)){if(dg(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Vr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=nx(Gl.bind(null,t,oi,Jo),e);break}Gl(t,oi,Jo);break;case 4:if(qa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ds(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Sn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rD(r/1960))-r,10<r){t.timeoutHandle=nx(Gl.bind(null,t,oi,Jo),r);break}Gl(t,oi,Jo);break;case 5:Gl(t,oi,Jo);break;default:throw Error(fe(329))}}}return hi(t,Sn()),t.callbackNode===n?xP.bind(null,t):null}function bx(t,e){var n=Fd;return t.current.memoizedState.isDehydrated&&(au(t,e).flags|=256),t=kg(t,e),t!==2&&(e=oi,oi=n,e!==null&&Sx(e)),t}function Sx(t){oi===null?oi=t:oi.push.apply(oi,t)}function iD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!$s(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qa(t,e){for(e&=~Aw,e&=~Cy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ds(e),r=1<<n;t[n]=-1,e&=~r}}function JE(t){if(yt&6)throw Error(fe(327));Fc();var e=dg(t,0);if(!(e&1))return hi(t,Sn()),null;var n=kg(t,e);if(t.tag!==0&&n===2){var r=q1(t);r!==0&&(e=r,n=bx(t,r))}if(n===1)throw n=mf,au(t,0),qa(t,e),hi(t,Sn()),n;if(n===6)throw Error(fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gl(t,oi,Jo),hi(t,Sn()),null}function Pw(t,e){var n=yt;yt|=1;try{return t(e)}finally{yt=n,yt===0&&(th=Sn()+500,by&&bl())}}function _u(t){Za!==null&&Za.tag===0&&!(yt&6)&&Fc();var e=yt;yt|=1;var n=cs.transition,r=Mt;try{if(cs.transition=null,Mt=1,t)return t()}finally{Mt=r,cs.transition=n,yt=e,!(yt&6)&&bl()}}function kw(){Ci=Tc.current,Qt(Tc)}function au(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,NN(n)),Rn!==null)for(n=Rn.return;n!==null;){var r=n;switch(cw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yg();break;case 3:Jc(),Qt(ui),Qt(Dr),xw();break;case 5:vw(r);break;case 4:Jc();break;case 13:Qt(hn);break;case 19:Qt(hn);break;case 10:pw(r.type._context);break;case 22:case 23:kw()}n=n.return}if(rr=t,Rn=t=cl(t.current,null),gr=Ci=e,Vn=0,mf=null,Aw=Cy=xu=0,oi=Fd=null,ru!==null){for(e=0;e<ru.length;e++)if(n=ru[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ru=null}return t}function _P(t,e){do{var n=Rn;try{if(fw(),Xm.current=Cg,Tg){for(var r=fn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Tg=!1}if(vu=0,er=Wn=fn=null,Dd=!1,df=0,Cw.current=null,n===null||n.return===null){Vn=1,mf=e,Rn=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=gr,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=zE(o);if(g!==null){g.flags&=-257,$E(g,o,a,s,e),g.mode&1&&UE(s,h,e),e=g,u=h;var v=e.updateQueue;if(v===null){var w=new Set;w.add(u),e.updateQueue=w}else v.add(u);break e}else{if(!(e&1)){UE(s,h,e),Rw();break e}u=Error(fe(426))}}else if(Jt&&a.mode&1){var C=zE(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),$E(C,o,a,s,e),hw(eh(u,a));break e}}s=u=eh(u,a),Vn!==4&&(Vn=2),Fd===null?Fd=[s]:Fd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=rP(s,u,e);ME(s,b);break e;case 1:a=u;var S=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ll===null||!ll.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=iP(s,a,e);ME(s,A);break e}}s=s.return}while(s!==null)}SP(n)}catch(P){e=P,Rn===n&&n!==null&&(Rn=n=n.return);continue}break}while(1)}function wP(){var t=Ag.current;return Ag.current=Cg,t===null?Cg:t}function Rw(){(Vn===0||Vn===3||Vn===2)&&(Vn=4),rr===null||!(xu&268435455)&&!(Cy&268435455)||qa(rr,gr)}function kg(t,e){var n=yt;yt|=2;var r=wP();(rr!==t||gr!==e)&&(Jo=null,au(t,e));do try{sD();break}catch(i){_P(t,i)}while(1);if(fw(),yt=n,Ag.current=r,Rn!==null)throw Error(fe(261));return rr=null,gr=0,Vn}function sD(){for(;Rn!==null;)bP(Rn)}function oD(){for(;Rn!==null&&!RO();)bP(Rn)}function bP(t){var e=TP(t.alternate,t,Ci);t.memoizedProps=t.pendingProps,e===null?SP(t):Rn=e,Cw.current=null}function SP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=JN(n,e),n!==null){n.flags&=32767,Rn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vn=6,Rn=null;return}}else if(n=ZN(n,e,Ci),n!==null){Rn=n;return}if(e=e.sibling,e!==null){Rn=e;return}Rn=e=t}while(e!==null);Vn===0&&(Vn=5)}function Gl(t,e,n){var r=Mt,i=cs.transition;try{cs.transition=null,Mt=1,aD(t,e,n,r)}finally{cs.transition=i,Mt=r}return null}function aD(t,e,n,r){do Fc();while(Za!==null);if(yt&6)throw Error(fe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(fe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if($O(t,s),t===rr&&(Rn=rr=null,gr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||em||(em=!0,CP(hg,function(){return Fc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=cs.transition,cs.transition=null;var o=Mt;Mt=1;var a=yt;yt|=4,Cw.current=null,tD(t,n),yP(n,t),AN(ex),fg=!!J1,ex=J1=null,t.current=n,nD(n),MO(),yt=a,Mt=o,cs.transition=s}else t.current=n;if(em&&(em=!1,Za=t,Pg=i),s=t.pendingLanes,s===0&&(ll=null),DO(n.stateNode),hi(t,Sn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ig)throw Ig=!1,t=_x,_x=null,t;return Pg&1&&t.tag!==0&&Fc(),s=t.pendingLanes,s&1?t===wx?Bd++:(Bd=0,wx=t):Bd=0,bl(),null}function Fc(){if(Za!==null){var t=nI(Pg),e=cs.transition,n=Mt;try{if(cs.transition=null,Mt=16>t?16:t,Za===null)var r=!1;else{if(t=Za,Za=null,Pg=0,yt&6)throw Error(fe(331));var i=yt;for(yt|=4,Ie=t.current;Ie!==null;){var s=Ie,o=s.child;if(Ie.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var h=a[u];for(Ie=h;Ie!==null;){var d=Ie;switch(d.tag){case 0:case 11:case 15:Ld(8,d,s)}var p=d.child;if(p!==null)p.return=d,Ie=p;else for(;Ie!==null;){d=Ie;var f=d.sibling,g=d.return;if(pP(d),d===h){Ie=null;break}if(f!==null){f.return=g,Ie=f;break}Ie=g}}}var v=s.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var C=w.sibling;w.sibling=null,w=C}while(w!==null)}}Ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ie=o;else e:for(;Ie!==null;){if(s=Ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ld(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,Ie=b;break e}Ie=s.return}}var S=t.current;for(Ie=S;Ie!==null;){o=Ie;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Ie=_;else e:for(o=S;Ie!==null;){if(a=Ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ty(9,a)}}catch(P){yn(a,a.return,P)}if(a===o){Ie=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,Ie=A;break e}Ie=a.return}}if(yt=i,bl(),Ro&&typeof Ro.onPostCommitFiberRoot=="function")try{Ro.onPostCommitFiberRoot(yy,t)}catch{}r=!0}return r}finally{Mt=n,cs.transition=e}}return!1}function e2(t,e,n){e=eh(n,e),e=rP(t,e,1),t=al(t,e,1),e=Vr(),t!==null&&(Uf(t,1,e),hi(t,e))}function yn(t,e,n){if(t.tag===3)e2(t,t,n);else for(;e!==null;){if(e.tag===3){e2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ll===null||!ll.has(r))){t=eh(n,t),t=iP(e,t,1),e=al(e,t,1),t=Vr(),e!==null&&(Uf(e,1,t),hi(e,t));break}}e=e.return}}function lD(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Vr(),t.pingedLanes|=t.suspendedLanes&n,rr===t&&(gr&n)===n&&(Vn===4||Vn===3&&(gr&130023424)===gr&&500>Sn()-Iw?au(t,0):Aw|=n),hi(t,e)}function EP(t,e){e===0&&(t.mode&1?(e=Wp,Wp<<=1,!(Wp&130023424)&&(Wp=4194304)):e=1);var n=Vr();t=fa(t,e),t!==null&&(Uf(t,e,n),hi(t,n))}function uD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),EP(t,n)}function cD(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(fe(314))}r!==null&&r.delete(e),EP(t,n)}var TP;TP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ui.current)ai=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ai=!1,KN(t,e,n);ai=!!(t.flags&131072)}else ai=!1,Jt&&e.flags&1048576&&II(e,_g,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ym(t,e),t=e.pendingProps;var i=Qc(e,Dr.current);Lc(e,n),i=ww(null,e,r,t,i,n);var s=bw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ci(r)?(s=!0,vg(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gw(e),i.updater=Sy,e.stateNode=i,i._reactInternals=e,ux(e,r,t,n),e=dx(null,e,r,!0,s,n)):(e.tag=0,Jt&&s&&uw(e),Gr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ym(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=dD(r),t=Es(r,t),i){case 0:e=hx(null,e,r,t,n);break e;case 1:e=WE(null,e,r,t,n);break e;case 11:e=HE(null,e,r,t,n);break e;case 14:e=jE(null,e,r,Es(r.type,t),n);break e}throw Error(fe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Es(r,i),hx(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Es(r,i),WE(t,e,r,i,n);case 3:e:{if(lP(e),t===null)throw Error(fe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,MI(t,e),Sg(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=eh(Error(fe(423)),e),e=GE(t,e,r,n,i);break e}else if(r!==i){i=eh(Error(fe(424)),e),e=GE(t,e,r,n,i);break e}else for(Pi=ol(e.stateNode.containerInfo.firstChild),Ri=e,Jt=!0,Ps=null,n=LI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Kc(),r===i){e=pa(t,e,n);break e}Gr(t,e,r,n)}e=e.child}return e;case 5:return FI(e),t===null&&ox(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,tx(r,i)?o=null:s!==null&&tx(r,s)&&(e.flags|=32),aP(t,e),Gr(t,e,o,n),e.child;case 6:return t===null&&ox(e),null;case 13:return uP(t,e,n);case 4:return yw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zc(e,null,r,n):Gr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Es(r,i),HE(t,e,r,i,n);case 7:return Gr(t,e,e.pendingProps,n),e.child;case 8:return Gr(t,e,e.pendingProps.children,n),e.child;case 12:return Gr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,jt(wg,r._currentValue),r._currentValue=o,s!==null)if($s(s.value,o)){if(s.children===i.children&&!ui.current){e=pa(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=oa(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?u.next=u:(u.next=d.next,d.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),ax(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(fe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ax(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Gr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Lc(e,n),i=hs(i),r=r(i),e.flags|=1,Gr(t,e,r,n),e.child;case 14:return r=e.type,i=Es(r,e.pendingProps),i=Es(r.type,i),jE(t,e,r,i,n);case 15:return sP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Es(r,i),Ym(t,e),e.tag=1,ci(r)?(t=!0,vg(e)):t=!1,Lc(e,n),NI(e,r,i),ux(e,r,i,n),dx(null,e,r,!0,t,n);case 19:return cP(t,e,n);case 22:return oP(t,e,n)}throw Error(fe(156,e.tag))};function CP(t,e){return ZA(t,e)}function hD(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function os(t,e,n,r){return new hD(t,e,n,r)}function Mw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dD(t){if(typeof t=="function")return Mw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===K_)return 11;if(t===Z_)return 14}return 2}function cl(t,e){var n=t.alternate;return n===null?(n=os(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zm(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Mw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case mc:return lu(n.children,i,s,e);case Q_:o=8,i|=8;break;case O1:return t=os(12,n,e,i|2),t.elementType=O1,t.lanes=s,t;case N1:return t=os(13,n,e,i),t.elementType=N1,t.lanes=s,t;case D1:return t=os(19,n,e,i),t.elementType=D1,t.lanes=s,t;case DA:return Ay(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case OA:o=10;break e;case NA:o=9;break e;case K_:o=11;break e;case Z_:o=14;break e;case Ha:o=16,r=null;break e}throw Error(fe(130,t==null?t:typeof t,""))}return e=os(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function lu(t,e,n,r){return t=os(7,t,r,e),t.lanes=n,t}function Ay(t,e,n,r){return t=os(22,t,r,e),t.elementType=DA,t.lanes=n,t.stateNode={isHidden:!1},t}function Tv(t,e,n){return t=os(6,t,null,e),t.lanes=n,t}function Cv(t,e,n){return e=os(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fD(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ov(0),this.expirationTimes=ov(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ov(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ow(t,e,n,r,i,s,o,a,u){return t=new fD(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=os(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gw(s),t}function pD(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function AP(t){if(!t)return pl;t=t._reactInternals;e:{if(Au(t)!==t||t.tag!==1)throw Error(fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ci(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(fe(171))}if(t.tag===1){var n=t.type;if(ci(n))return CI(t,n,e)}return e}function IP(t,e,n,r,i,s,o,a,u){return t=Ow(n,r,!0,t,i,s,o,a,u),t.context=AP(null),n=t.current,r=Vr(),i=ul(n),s=oa(r,i),s.callback=e??null,al(n,s,i),t.current.lanes=i,Uf(t,i,r),hi(t,r),t}function Iy(t,e,n,r){var i=e.current,s=Vr(),o=ul(i);return n=AP(n),e.context===null?e.context=n:e.pendingContext=n,e=oa(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=al(i,e,o),t!==null&&(Ls(t,i,o,s),Vm(t,i,o)),o}function Rg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function t2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Nw(t,e){t2(t,e),(t=t.alternate)&&t2(t,e)}function mD(){return null}var PP=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dw(t){this._internalRoot=t}Py.prototype.render=Dw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(fe(409));Iy(t,e,null,null)};Py.prototype.unmount=Dw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_u(function(){Iy(null,t,null,null)}),e[da]=null}};function Py(t){this._internalRoot=t}Py.prototype.unstable_scheduleHydration=function(t){if(t){var e=sI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xa.length&&e!==0&&e<Xa[n].priority;n++);Xa.splice(n,0,t),n===0&&aI(t)}};function Lw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ky(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function n2(){}function gD(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Rg(o);s.call(h)}}var o=IP(e,r,t,0,null,!1,!1,"",n2);return t._reactRootContainer=o,t[da]=o.current,af(t.nodeType===8?t.parentNode:t),_u(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var h=Rg(u);a.call(h)}}var u=Ow(t,0,!1,null,null,!1,!1,"",n2);return t._reactRootContainer=u,t[da]=u.current,af(t.nodeType===8?t.parentNode:t),_u(function(){Iy(e,u,n,r)}),u}function Ry(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Rg(o);a.call(u)}}Iy(e,o,t,i)}else o=gD(n,e,t,i,r);return Rg(o)}rI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=yd(e.pendingLanes);n!==0&&(tw(e,n|1),hi(e,Sn()),!(yt&6)&&(th=Sn()+500,bl()))}break;case 13:_u(function(){var r=fa(t,1);if(r!==null){var i=Vr();Ls(r,t,1,i)}}),Nw(t,1)}};nw=function(t){if(t.tag===13){var e=fa(t,134217728);if(e!==null){var n=Vr();Ls(e,t,134217728,n)}Nw(t,134217728)}};iI=function(t){if(t.tag===13){var e=ul(t),n=fa(t,e);if(n!==null){var r=Vr();Ls(n,t,e,r)}Nw(t,e)}};sI=function(){return Mt};oI=function(t,e){var n=Mt;try{return Mt=t,e()}finally{Mt=n}};G1=function(t,e,n){switch(e){case"input":if(B1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wy(r);if(!i)throw Error(fe(90));FA(r),B1(r,i)}}}break;case"textarea":UA(t,n);break;case"select":e=n.value,e!=null&&Mc(t,!!n.multiple,e,!1)}};VA=Pw;XA=_u;var yD={usingClientEntryPoint:!1,Events:[$f,xc,wy,WA,GA,Pw]},nd={findFiberByHostInstance:nu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vD={bundleType:nd.bundleType,version:nd.version,rendererPackageName:nd.rendererPackageName,rendererConfig:nd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ya.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=QA(t),t===null?null:t.stateNode},findFiberByHostInstance:nd.findFiberByHostInstance||mD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tm.isDisabled&&tm.supportsFiber)try{yy=tm.inject(vD),Ro=tm}catch{}}Di.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yD;Di.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lw(e))throw Error(fe(200));return pD(t,e,null,n)};Di.createRoot=function(t,e){if(!Lw(t))throw Error(fe(299));var n=!1,r="",i=PP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ow(t,1,!1,null,null,n,!1,r,i),t[da]=e.current,af(t.nodeType===8?t.parentNode:t),new Dw(e)};Di.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(fe(188)):(t=Object.keys(t).join(","),Error(fe(268,t)));return t=QA(e),t=t===null?null:t.stateNode,t};Di.flushSync=function(t){return _u(t)};Di.hydrate=function(t,e,n){if(!ky(e))throw Error(fe(200));return Ry(null,t,e,!0,n)};Di.hydrateRoot=function(t,e,n){if(!Lw(t))throw Error(fe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=PP;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=IP(e,null,t,1,n??null,i,!1,s,o),t[da]=e.current,af(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Py(e)};Di.render=function(t,e,n){if(!ky(e))throw Error(fe(200));return Ry(null,t,e,!1,n)};Di.unmountComponentAtNode=function(t){if(!ky(t))throw Error(fe(40));return t._reactRootContainer?(_u(function(){Ry(null,null,t,!1,function(){t._reactRootContainer=null,t[da]=null})}),!0):!1};Di.unstable_batchedUpdates=Pw;Di.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ky(n))throw Error(fe(200));if(t==null||t._reactInternals===void 0)throw Error(fe(38));return Ry(t,e,n,!1,r)};Di.version="18.2.0-next-9e3b772b8-20220608";function kP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kP)}catch(t){console.error(t)}}kP(),IA.exports=Di;var Fw=IA.exports;const RP=yh(Fw);var r2=Fw;R1.createRoot=r2.createRoot,R1.hydrateRoot=r2.hydrateRoot;var Iu=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(Iu||{}),MP=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(MP||{}),Ex=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(Ex||{}),Ue=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(Ue||{}),Ms=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(Ms||{}),ye=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(ye||{}),Bc=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(Bc||{}),Be=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(Be||{}),Tx=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(Tx||{}),as=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(as||{}),aa=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(aa||{}),Do=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(Do||{}),js=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(js||{}),Ao=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(Ao||{}),Bw=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(Bw||{}),ls=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(ls||{}),Hn=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(Hn||{}),kn=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(kn||{}),Oo=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(Oo||{});const xD={createCanvas:(t,e)=>{const n=document.createElement("canvas");return n.width=t,n.height=e,n},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")},we={ADAPTER:xD,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Av=/iPhone/i,i2=/iPod/i,s2=/iPad/i,o2=/\biOS-universal(?:.+)Mac\b/i,Iv=/\bAndroid(?:.+)Mobile\b/i,a2=/Android/i,Ku=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,nm=/Silk/i,Yo=/Windows Phone/i,l2=/\bWindows(?:.+)ARM\b/i,u2=/BlackBerry/i,c2=/BB10/i,h2=/Opera Mini/i,d2=/\b(CriOS|Chrome)(?:.+)Mobile/i,f2=/Mobile(?:.+)Firefox\b/i,p2=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function _D(t){return function(e){return e.test(t)}}function m2(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var n=e.userAgent,r=n.split("[FBAN");typeof r[1]<"u"&&(n=r[0]),r=n.split("Twitter"),typeof r[1]<"u"&&(n=r[0]);var i=_D(n),s={apple:{phone:i(Av)&&!i(Yo),ipod:i(i2),tablet:!i(Av)&&(i(s2)||p2(e))&&!i(Yo),universal:i(o2),device:(i(Av)||i(i2)||i(s2)||i(o2)||p2(e))&&!i(Yo)},amazon:{phone:i(Ku),tablet:!i(Ku)&&i(nm),device:i(Ku)||i(nm)},android:{phone:!i(Yo)&&i(Ku)||!i(Yo)&&i(Iv),tablet:!i(Yo)&&!i(Ku)&&!i(Iv)&&(i(nm)||i(a2)),device:!i(Yo)&&(i(Ku)||i(nm)||i(Iv)||i(a2))||i(/\bokhttp\b/i)},windows:{phone:i(Yo),tablet:i(l2),device:i(Yo)||i(l2)},other:{blackberry:i(u2),blackberry10:i(c2),opera:i(h2),firefox:i(f2),chrome:i(d2),device:i(u2)||i(c2)||i(h2)||i(f2)||i(d2)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const wD=m2.default??m2,ia=wD(globalThis.navigator);we.RETINA_PREFIX=/@([0-9\.]+)x/;we.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var OP={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,h,d){this.fn=u,this.context=h,this.once=d||!1}function s(u,h,d,p,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new i(d,p||u,f),v=n?n+h:h;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],g]:u._events[v].push(g):(u._events[v]=g,u._eventsCount++),u}function o(u,h){--u._eventsCount===0?u._events=new r:delete u._events[h]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],d,p;if(this._eventsCount===0)return h;for(p in d=this._events)e.call(d,p)&&h.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(d)):h},a.prototype.listeners=function(h){var d=n?n+h:h,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var f=0,g=p.length,v=new Array(g);f<g;f++)v[f]=p[f].fn;return v},a.prototype.listenerCount=function(h){var d=n?n+h:h,p=this._events[d];return p?p.fn?1:p.length:0},a.prototype.emit=function(h,d,p,f,g,v){var w=n?n+h:h;if(!this._events[w])return!1;var C=this._events[w],b=arguments.length,S,_;if(C.fn){switch(C.once&&this.removeListener(h,C.fn,void 0,!0),b){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,d),!0;case 3:return C.fn.call(C.context,d,p),!0;case 4:return C.fn.call(C.context,d,p,f),!0;case 5:return C.fn.call(C.context,d,p,f,g),!0;case 6:return C.fn.call(C.context,d,p,f,g,v),!0}for(_=1,S=new Array(b-1);_<b;_++)S[_-1]=arguments[_];C.fn.apply(C.context,S)}else{var A=C.length,P;for(_=0;_<A;_++)switch(C[_].once&&this.removeListener(h,C[_].fn,void 0,!0),b){case 1:C[_].fn.call(C[_].context);break;case 2:C[_].fn.call(C[_].context,d);break;case 3:C[_].fn.call(C[_].context,d,p);break;case 4:C[_].fn.call(C[_].context,d,p,f);break;default:if(!S)for(P=1,S=new Array(b-1);P<b;P++)S[P-1]=arguments[P];C[_].fn.apply(C[_].context,S)}}return!0},a.prototype.on=function(h,d,p){return s(this,h,d,p,!1)},a.prototype.once=function(h,d,p){return s(this,h,d,p,!0)},a.prototype.removeListener=function(h,d,p,f){var g=n?n+h:h;if(!this._events[g])return this;if(!d)return o(this,g),this;var v=this._events[g];if(v.fn)v.fn===d&&(!f||v.once)&&(!p||v.context===p)&&o(this,g);else{for(var w=0,C=[],b=v.length;w<b;w++)(v[w].fn!==d||f&&!v[w].once||p&&v[w].context!==p)&&C.push(v[w]);C.length?this._events[g]=C.length===1?C[0]:C:o(this,g)}return this},a.prototype.removeAllListeners=function(h){var d;return h?(d=n?n+h:h,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(OP);var bD=OP.exports;const Bo=yh(bD);var Uw={exports:{}};Uw.exports=My;Uw.exports.default=My;function My(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,s=NP(t,0,i,n,!0),o=[];if(!s||s.next===s.prev)return o;var a,u,h,d,p,f,g;if(r&&(s=AD(t,e,s,n)),t.length>80*n){a=h=t[0],u=d=t[1];for(var v=n;v<i;v+=n)p=t[v],f=t[v+1],p<a&&(a=p),f<u&&(u=f),p>h&&(h=p),f>d&&(d=f);g=Math.max(h-a,d-u),g=g!==0?32767/g:0}return gf(s,o,n,a,u,g,0),o}function NP(t,e,n,r,i){var s,o;if(i===Ix(t,e,n,r)>0)for(s=e;s<n;s+=r)o=g2(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=g2(s,t[s],t[s+1],o);return o&&Oy(o,o.next)&&(vf(o),o=o.next),o}function wu(t,e){if(!t)return t;e||(e=t);var n=t,r;do if(r=!1,!n.steiner&&(Oy(n,n.next)||dn(n.prev,n,n.next)===0)){if(vf(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function gf(t,e,n,r,i,s,o){if(t){!o&&s&&MD(t,r,i,s);for(var a=t,u,h;t.prev!==t.next;){if(u=t.prev,h=t.next,s?ED(t,r,i,s):SD(t)){e.push(u.i/n|0),e.push(t.i/n|0),e.push(h.i/n|0),vf(t),t=h.next,a=h.next;continue}if(t=h,t===a){o?o===1?(t=TD(wu(t),e,n),gf(t,e,n,r,i,s,2)):o===2&&CD(t,e,n,r,i,s):gf(wu(t),e,n,r,i,s,1);break}}}}function SD(t){var e=t.prev,n=t,r=t.next;if(dn(e,n,r)>=0)return!1;for(var i=e.x,s=n.x,o=r.x,a=e.y,u=n.y,h=r.y,d=i<s?i<o?i:o:s<o?s:o,p=a<u?a<h?a:h:u<h?u:h,f=i>s?i>o?i:o:s>o?s:o,g=a>u?a>h?a:h:u>h?u:h,v=r.next;v!==e;){if(v.x>=d&&v.x<=f&&v.y>=p&&v.y<=g&&Cc(i,a,s,u,o,h,v.x,v.y)&&dn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function ED(t,e,n,r){var i=t.prev,s=t,o=t.next;if(dn(i,s,o)>=0)return!1;for(var a=i.x,u=s.x,h=o.x,d=i.y,p=s.y,f=o.y,g=a<u?a<h?a:h:u<h?u:h,v=d<p?d<f?d:f:p<f?p:f,w=a>u?a>h?a:h:u>h?u:h,C=d>p?d>f?d:f:p>f?p:f,b=Cx(g,v,e,n,r),S=Cx(w,C,e,n,r),_=t.prevZ,A=t.nextZ;_&&_.z>=b&&A&&A.z<=S;){if(_.x>=g&&_.x<=w&&_.y>=v&&_.y<=C&&_!==i&&_!==o&&Cc(a,d,u,p,h,f,_.x,_.y)&&dn(_.prev,_,_.next)>=0||(_=_.prevZ,A.x>=g&&A.x<=w&&A.y>=v&&A.y<=C&&A!==i&&A!==o&&Cc(a,d,u,p,h,f,A.x,A.y)&&dn(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;_&&_.z>=b;){if(_.x>=g&&_.x<=w&&_.y>=v&&_.y<=C&&_!==i&&_!==o&&Cc(a,d,u,p,h,f,_.x,_.y)&&dn(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;A&&A.z<=S;){if(A.x>=g&&A.x<=w&&A.y>=v&&A.y<=C&&A!==i&&A!==o&&Cc(a,d,u,p,h,f,A.x,A.y)&&dn(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function TD(t,e,n){var r=t;do{var i=r.prev,s=r.next.next;!Oy(i,s)&&DP(i,r,r.next,s)&&yf(i,s)&&yf(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),vf(r),vf(r.next),r=t=s),r=r.next}while(r!==t);return wu(r)}function CD(t,e,n,r,i,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&DD(o,a)){var u=LP(o,a);o=wu(o,o.next),u=wu(u,u.next),gf(o,e,n,r,i,s,0),gf(u,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function AD(t,e,n,r){var i=[],s,o,a,u,h;for(s=0,o=e.length;s<o;s++)a=e[s]*r,u=s<o-1?e[s+1]*r:t.length,h=NP(t,a,u,r,!1),h===h.next&&(h.steiner=!0),i.push(ND(h));for(i.sort(ID),s=0;s<i.length;s++)n=PD(i[s],n);return n}function ID(t,e){return t.x-e.x}function PD(t,e){var n=kD(t,e);if(!n)return e;var r=LP(n,t);return wu(r,r.next),wu(n,n.next)}function kD(t,e){var n=e,r=t.x,i=t.y,s=-1/0,o;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s&&(s=a,o=n.x<n.next.x?n:n.next,a===r))return o}n=n.next}while(n!==e);if(!o)return null;var u=o,h=o.x,d=o.y,p=1/0,f;n=o;do r>=n.x&&n.x>=h&&r!==n.x&&Cc(i<d?r:s,i,h,d,i<d?s:r,i,n.x,n.y)&&(f=Math.abs(i-n.y)/(r-n.x),yf(n,t)&&(f<p||f===p&&(n.x>o.x||n.x===o.x&&RD(o,n)))&&(o=n,p=f)),n=n.next;while(n!==u);return o}function RD(t,e){return dn(t.prev,t,e.prev)<0&&dn(e.next,t,t.next)<0}function MD(t,e,n,r){var i=t;do i.z===0&&(i.z=Cx(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,OD(i)}function OD(t){var e,n,r,i,s,o,a,u,h=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<h&&(a++,r=r.nextZ,!!r);e++);for(u=h;a>0||u>0&&r;)a!==0&&(u===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,h*=2}while(o>1);return t}function Cx(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function ND(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Cc(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function DD(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!LD(t,e)&&(yf(t,e)&&yf(e,t)&&FD(t,e)&&(dn(t.prev,t,e.prev)||dn(t,e.prev,e))||Oy(t,e)&&dn(t.prev,t,t.next)>0&&dn(e.prev,e,e.next)>0)}function dn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Oy(t,e){return t.x===e.x&&t.y===e.y}function DP(t,e,n,r){var i=im(dn(t,e,n)),s=im(dn(t,e,r)),o=im(dn(n,r,t)),a=im(dn(n,r,e));return!!(i!==s&&o!==a||i===0&&rm(t,n,e)||s===0&&rm(t,r,e)||o===0&&rm(n,t,r)||a===0&&rm(n,e,r))}function rm(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function im(t){return t>0?1:t<0?-1:0}function LD(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&DP(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function yf(t,e){return dn(t.prev,t,t.next)<0?dn(t,e,t.next)>=0&&dn(t,t.prev,e)>=0:dn(t,e,t.prev)<0||dn(t,t.next,e)<0}function FD(t,e){var n=t,r=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function LP(t,e){var n=new Ax(t.i,t.x,t.y),r=new Ax(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function g2(t,e,n,r){var i=new Ax(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function vf(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ax(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}My.deviation=function(t,e,n,r){var i=e&&e.length,s=i?e[0]*n:t.length,o=Math.abs(Ix(t,0,s,n));if(i)for(var a=0,u=e.length;a<u;a++){var h=e[a]*n,d=a<u-1?e[a+1]*n:t.length;o-=Math.abs(Ix(t,h,d,n))}var p=0;for(a=0;a<r.length;a+=3){var f=r[a]*n,g=r[a+1]*n,v=r[a+2]*n;p+=Math.abs((t[f]-t[v])*(t[g+1]-t[f+1])-(t[f]-t[g])*(t[v+1]-t[f+1]))}return o===0&&p===0?0:Math.abs((p-o)/o)};function Ix(t,e,n,r){for(var i=0,s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}My.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)n.vertices.push(t[i][s][o]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};var BD=Uw.exports;const UD=yh(BD);var Mg={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */Mg.exports;(function(t,e){(function(n){var r=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,s=typeof ev=="object"&&ev;(s.global===s||s.window===s||s.self===s)&&(n=s);var o,a=2147483647,u=36,h=1,d=26,p=38,f=700,g=72,v=128,w="-",C=/^xn--/,b=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=u-h,P=Math.floor,F=String.fromCharCode,N;function D(B){throw new RangeError(_[B])}function q(B,ee){for(var te=B.length,be=[];te--;)be[te]=ee(B[te]);return be}function G(B,ee){var te=B.split("@"),be="";te.length>1&&(be=te[0]+"@",B=te[1]),B=B.replace(S,".");var ge=B.split("."),je=q(ge,ee).join(".");return be+je}function H(B){for(var ee=[],te=0,be=B.length,ge,je;te<be;)ge=B.charCodeAt(te++),ge>=55296&&ge<=56319&&te<be?(je=B.charCodeAt(te++),(je&64512)==56320?ee.push(((ge&1023)<<10)+(je&1023)+65536):(ee.push(ge),te--)):ee.push(ge);return ee}function J(B){return q(B,function(ee){var te="";return ee>65535&&(ee-=65536,te+=F(ee>>>10&1023|55296),ee=56320|ee&1023),te+=F(ee),te}).join("")}function V(B){return B-48<10?B-22:B-65<26?B-65:B-97<26?B-97:u}function U(B,ee){return B+22+75*(B<26)-((ee!=0)<<5)}function Z(B,ee,te){var be=0;for(B=te?P(B/f):B>>1,B+=P(B/ee);B>A*d>>1;be+=u)B=P(B/A);return P(be+(A+1)*B/(B+p))}function ie(B){var ee=[],te=B.length,be,ge=0,je=v,We=g,Ne,mt,St,Qe,De,ht,nt,En,On;for(Ne=B.lastIndexOf(w),Ne<0&&(Ne=0),mt=0;mt<Ne;++mt)B.charCodeAt(mt)>=128&&D("not-basic"),ee.push(B.charCodeAt(mt));for(St=Ne>0?Ne+1:0;St<te;){for(Qe=ge,De=1,ht=u;St>=te&&D("invalid-input"),nt=V(B.charCodeAt(St++)),(nt>=u||nt>P((a-ge)/De))&&D("overflow"),ge+=nt*De,En=ht<=We?h:ht>=We+d?d:ht-We,!(nt<En);ht+=u)On=u-En,De>P(a/On)&&D("overflow"),De*=On;be=ee.length+1,We=Z(ge-Qe,be,Qe==0),P(ge/be)>a-je&&D("overflow"),je+=P(ge/be),ge%=be,ee.splice(ge++,0,je)}return J(ee)}function O(B){var ee,te,be,ge,je,We,Ne,mt,St,Qe,De,ht=[],nt,En,On,fi;for(B=H(B),nt=B.length,ee=v,te=0,je=g,We=0;We<nt;++We)De=B[We],De<128&&ht.push(F(De));for(be=ge=ht.length,ge&&ht.push(w);be<nt;){for(Ne=a,We=0;We<nt;++We)De=B[We],De>=ee&&De<Ne&&(Ne=De);for(En=be+1,Ne-ee>P((a-te)/En)&&D("overflow"),te+=(Ne-ee)*En,ee=Ne,We=0;We<nt;++We)if(De=B[We],De<ee&&++te>a&&D("overflow"),De==ee){for(mt=te,St=u;Qe=St<=je?h:St>=je+d?d:St-je,!(mt<Qe);St+=u)fi=mt-Qe,On=u-Qe,ht.push(F(U(Qe+fi%On,0))),mt=P(fi/On);ht.push(F(U(mt,0))),je=Z(te,En,be==ge),te=0,++be}++te,++ee}return ht.join("")}function L(B){return G(B,function(ee){return C.test(ee)?ie(ee.slice(4).toLowerCase()):ee})}function Q(B){return G(B,function(ee){return b.test(ee)?"xn--"+O(ee):ee})}if(o={version:"1.4.1",ucs2:{decode:H,encode:J},decode:ie,encode:O,toASCII:Q,toUnicode:L},r&&i)if(t.exports==r)i.exports=o;else for(N in o)o.hasOwnProperty(N)&&(r[N]=o[N]);else n.punycode=o})(ev)})(Mg,Mg.exports);var zD=Mg.exports,$D=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,n);if(o.value!==i||o.enumerable!==!0)return!1}return!0},y2=typeof Symbol<"u"&&Symbol,HD=$D,jD=function(){return typeof y2!="function"||typeof Symbol!="function"||typeof y2("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:HD()},v2={foo:{}},WD=Object,GD=function(){return{__proto__:v2}.foo===v2.foo&&!({__proto__:null}instanceof WD)},VD="Function.prototype.bind called on incompatible ",Pv=Array.prototype.slice,XD=Object.prototype.toString,qD="[object Function]",YD=function(e){var n=this;if(typeof n!="function"||XD.call(n)!==qD)throw new TypeError(VD+n);for(var r=Pv.call(arguments,1),i,s=function(){if(this instanceof i){var d=n.apply(this,r.concat(Pv.call(arguments)));return Object(d)===d?d:this}else return n.apply(e,r.concat(Pv.call(arguments)))},o=Math.max(0,n.length-r.length),a=[],u=0;u<o;u++)a.push("$"+u);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(s),n.prototype){var h=function(){};h.prototype=n.prototype,i.prototype=new h,h.prototype=null}return i},QD=YD,zw=Function.prototype.bind||QD,KD=zw,ZD=KD.call(Function.call,Object.prototype.hasOwnProperty),ot,nh=SyntaxError,FP=Function,Uc=TypeError,kv=function(t){try{return FP('"use strict"; return ('+t+").constructor;")()}catch{}},uu=Object.getOwnPropertyDescriptor;if(uu)try{uu({},"")}catch{uu=null}var Rv=function(){throw new Uc},JD=uu?function(){try{return arguments.callee,Rv}catch{try{return uu(arguments,"callee").get}catch{return Rv}}}():Rv,Zu=jD(),e4=GD(),Jn=Object.getPrototypeOf||(e4?function(t){return t.__proto__}:null),oc={},t4=typeof Uint8Array>"u"||!Jn?ot:Jn(Uint8Array),cu={"%AggregateError%":typeof AggregateError>"u"?ot:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ot:ArrayBuffer,"%ArrayIteratorPrototype%":Zu&&Jn?Jn([][Symbol.iterator]()):ot,"%AsyncFromSyncIteratorPrototype%":ot,"%AsyncFunction%":oc,"%AsyncGenerator%":oc,"%AsyncGeneratorFunction%":oc,"%AsyncIteratorPrototype%":oc,"%Atomics%":typeof Atomics>"u"?ot:Atomics,"%BigInt%":typeof BigInt>"u"?ot:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ot:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ot:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ot:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?ot:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ot:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ot:FinalizationRegistry,"%Function%":FP,"%GeneratorFunction%":oc,"%Int8Array%":typeof Int8Array>"u"?ot:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ot:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ot:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Zu&&Jn?Jn(Jn([][Symbol.iterator]())):ot,"%JSON%":typeof JSON=="object"?JSON:ot,"%Map%":typeof Map>"u"?ot:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Zu||!Jn?ot:Jn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ot:Promise,"%Proxy%":typeof Proxy>"u"?ot:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?ot:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ot:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Zu||!Jn?ot:Jn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ot:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Zu&&Jn?Jn(""[Symbol.iterator]()):ot,"%Symbol%":Zu?Symbol:ot,"%SyntaxError%":nh,"%ThrowTypeError%":JD,"%TypedArray%":t4,"%TypeError%":Uc,"%Uint8Array%":typeof Uint8Array>"u"?ot:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ot:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ot:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ot:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?ot:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ot:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ot:WeakSet};if(Jn)try{null.error}catch(t){var n4=Jn(Jn(t));cu["%Error.prototype%"]=n4}var r4=function t(e){var n;if(e==="%AsyncFunction%")n=kv("async function () {}");else if(e==="%GeneratorFunction%")n=kv("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=kv("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&Jn&&(n=Jn(i.prototype))}return cu[e]=n,n},x2={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},jf=zw,Og=ZD,i4=jf.call(Function.call,Array.prototype.concat),s4=jf.call(Function.apply,Array.prototype.splice),_2=jf.call(Function.call,String.prototype.replace),Ng=jf.call(Function.call,String.prototype.slice),o4=jf.call(Function.call,RegExp.prototype.exec),a4=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,l4=/\\(\\)?/g,u4=function(e){var n=Ng(e,0,1),r=Ng(e,-1);if(n==="%"&&r!=="%")throw new nh("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new nh("invalid intrinsic syntax, expected opening `%`");var i=[];return _2(e,a4,function(s,o,a,u){i[i.length]=a?_2(u,l4,"$1"):o||s}),i},c4=function(e,n){var r=e,i;if(Og(x2,r)&&(i=x2[r],r="%"+i[0]+"%"),Og(cu,r)){var s=cu[r];if(s===oc&&(s=r4(r)),typeof s>"u"&&!n)throw new Uc("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:s}}throw new nh("intrinsic "+e+" does not exist!")},$w=function(e,n){if(typeof e!="string"||e.length===0)throw new Uc("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Uc('"allowMissing" argument must be a boolean');if(o4(/^%?[^%]*%?$/,e)===null)throw new nh("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=u4(e),i=r.length>0?r[0]:"",s=c4("%"+i+"%",n),o=s.name,a=s.value,u=!1,h=s.alias;h&&(i=h[0],s4(r,i4([0,1],h)));for(var d=1,p=!0;d<r.length;d+=1){var f=r[d],g=Ng(f,0,1),v=Ng(f,-1);if((g==='"'||g==="'"||g==="`"||v==='"'||v==="'"||v==="`")&&g!==v)throw new nh("property names with quotes must have matching quotes");if((f==="constructor"||!p)&&(u=!0),i+="."+f,o="%"+i+"%",Og(cu,o))a=cu[o];else if(a!=null){if(!(f in a)){if(!n)throw new Uc("base intrinsic for "+e+" exists, but the property is not available.");return}if(uu&&d+1>=r.length){var w=uu(a,f);p=!!w,p&&"get"in w&&!("originalValue"in w.get)?a=w.get:a=a[f]}else p=Og(a,f),a=a[f];p&&!u&&(cu[o]=a)}}return a},BP={exports:{}};(function(t){var e=zw,n=$w,r=n("%Function.prototype.apply%"),i=n("%Function.prototype.call%"),s=n("%Reflect.apply%",!0)||e.call(i,r),o=n("%Object.getOwnPropertyDescriptor%",!0),a=n("%Object.defineProperty%",!0),u=n("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(p){var f=s(e,i,arguments);if(o&&a){var g=o(f,"length");g.configurable&&a(f,"length",{value:1+u(0,p.length-(arguments.length-1))})}return f};var h=function(){return s(e,r,arguments)};a?a(t.exports,"apply",{value:h}):t.exports.apply=h})(BP);var h4=BP.exports,UP=$w,zP=h4,d4=zP(UP("String.prototype.indexOf")),f4=function(e,n){var r=UP(e,!!n);return typeof r=="function"&&d4(e,".prototype.")>-1?zP(r):r};const p4={},m4=Object.freeze(Object.defineProperty({__proto__:null,default:p4},Symbol.toStringTag,{value:"Module"})),g4=H_(m4);var Hw=typeof Map=="function"&&Map.prototype,Mv=Object.getOwnPropertyDescriptor&&Hw?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Dg=Hw&&Mv&&typeof Mv.get=="function"?Mv.get:null,w2=Hw&&Map.prototype.forEach,jw=typeof Set=="function"&&Set.prototype,Ov=Object.getOwnPropertyDescriptor&&jw?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Lg=jw&&Ov&&typeof Ov.get=="function"?Ov.get:null,b2=jw&&Set.prototype.forEach,y4=typeof WeakMap=="function"&&WeakMap.prototype,Ud=y4?WeakMap.prototype.has:null,v4=typeof WeakSet=="function"&&WeakSet.prototype,zd=v4?WeakSet.prototype.has:null,x4=typeof WeakRef=="function"&&WeakRef.prototype,S2=x4?WeakRef.prototype.deref:null,_4=Boolean.prototype.valueOf,w4=Object.prototype.toString,b4=Function.prototype.toString,S4=String.prototype.match,Ww=String.prototype.slice,Ja=String.prototype.replace,E4=String.prototype.toUpperCase,E2=String.prototype.toLowerCase,$P=RegExp.prototype.test,T2=Array.prototype.concat,Io=Array.prototype.join,T4=Array.prototype.slice,C2=Math.floor,Px=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Nv=Object.getOwnPropertySymbols,kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,rh=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Lr=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===rh||"symbol")?Symbol.toStringTag:null,HP=Object.prototype.propertyIsEnumerable,A2=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function I2(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||$P.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var r=t<0?-C2(-t):C2(t);if(r!==t){var i=String(r),s=Ww.call(e,i.length+1);return Ja.call(i,n,"$&_")+"."+Ja.call(Ja.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Ja.call(e,n,"$&_")}var Rx=g4,P2=Rx.custom,k2=WP(P2)?P2:null,C4=function t(e,n,r,i){var s=n||{};if(Wa(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Wa(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Wa(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Wa(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Wa(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return VP(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return a?I2(e,u):u}if(typeof e=="bigint"){var h=String(e)+"n";return a?I2(e,h):h}var d=typeof s.depth>"u"?5:s.depth;if(typeof r>"u"&&(r=0),r>=d&&d>0&&typeof e=="object")return Mx(e)?"[Array]":"[Object]";var p=W4(s,r);if(typeof i>"u")i=[];else if(GP(i,e)>=0)return"[Circular]";function f(V,U,Z){if(U&&(i=T4.call(i),i.push(U)),Z){var ie={depth:s.depth};return Wa(s,"quoteStyle")&&(ie.quoteStyle=s.quoteStyle),t(V,ie,r+1,i)}return t(V,s,r+1,i)}if(typeof e=="function"&&!R2(e)){var g=D4(e),v=sm(e,f);return"[Function"+(g?": "+g:" (anonymous)")+"]"+(v.length>0?" { "+Io.call(v,", ")+" }":"")}if(WP(e)){var w=rh?Ja.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):kx.call(e);return typeof e=="object"&&!rh?rd(w):w}if($4(e)){for(var C="<"+E2.call(String(e.nodeName)),b=e.attributes||[],S=0;S<b.length;S++)C+=" "+b[S].name+"="+jP(A4(b[S].value),"double",s);return C+=">",e.childNodes&&e.childNodes.length&&(C+="..."),C+="</"+E2.call(String(e.nodeName))+">",C}if(Mx(e)){if(e.length===0)return"[]";var _=sm(e,f);return p&&!j4(_)?"["+Ox(_,p)+"]":"[ "+Io.call(_,", ")+" ]"}if(P4(e)){var A=sm(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!HP.call(e,"cause")?"{ ["+String(e)+"] "+Io.call(T2.call("[cause]: "+f(e.cause),A),", ")+" }":A.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Io.call(A,", ")+" }"}if(typeof e=="object"&&o){if(k2&&typeof e[k2]=="function"&&Rx)return Rx(e,{depth:d-r});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(L4(e)){var P=[];return w2&&w2.call(e,function(V,U){P.push(f(U,e,!0)+" => "+f(V,e))}),M2("Map",Dg.call(e),P,p)}if(U4(e)){var F=[];return b2&&b2.call(e,function(V){F.push(f(V,e))}),M2("Set",Lg.call(e),F,p)}if(F4(e))return Dv("WeakMap");if(z4(e))return Dv("WeakSet");if(B4(e))return Dv("WeakRef");if(R4(e))return rd(f(Number(e)));if(O4(e))return rd(f(Px.call(e)));if(M4(e))return rd(_4.call(e));if(k4(e))return rd(f(String(e)));if(!I4(e)&&!R2(e)){var N=sm(e,f),D=A2?A2(e)===Object.prototype:e instanceof Object||e.constructor===Object,q=e instanceof Object?"":"null prototype",G=!D&&Lr&&Object(e)===e&&Lr in e?Ww.call(Sl(e),8,-1):q?"Object":"",H=D||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",J=H+(G||q?"["+Io.call(T2.call([],G||[],q||[]),": ")+"] ":"");return N.length===0?J+"{}":p?J+"{"+Ox(N,p)+"}":J+"{ "+Io.call(N,", ")+" }"}return String(e)};function jP(t,e,n){var r=(n.quoteStyle||e)==="double"?'"':"'";return r+t+r}function A4(t){return Ja.call(String(t),/"/g,"&quot;")}function Mx(t){return Sl(t)==="[object Array]"&&(!Lr||!(typeof t=="object"&&Lr in t))}function I4(t){return Sl(t)==="[object Date]"&&(!Lr||!(typeof t=="object"&&Lr in t))}function R2(t){return Sl(t)==="[object RegExp]"&&(!Lr||!(typeof t=="object"&&Lr in t))}function P4(t){return Sl(t)==="[object Error]"&&(!Lr||!(typeof t=="object"&&Lr in t))}function k4(t){return Sl(t)==="[object String]"&&(!Lr||!(typeof t=="object"&&Lr in t))}function R4(t){return Sl(t)==="[object Number]"&&(!Lr||!(typeof t=="object"&&Lr in t))}function M4(t){return Sl(t)==="[object Boolean]"&&(!Lr||!(typeof t=="object"&&Lr in t))}function WP(t){if(rh)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!kx)return!1;try{return kx.call(t),!0}catch{}return!1}function O4(t){if(!t||typeof t!="object"||!Px)return!1;try{return Px.call(t),!0}catch{}return!1}var N4=Object.prototype.hasOwnProperty||function(t){return t in this};function Wa(t,e){return N4.call(t,e)}function Sl(t){return w4.call(t)}function D4(t){if(t.name)return t.name;var e=S4.call(b4.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function GP(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function L4(t){if(!Dg||!t||typeof t!="object")return!1;try{Dg.call(t);try{Lg.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function F4(t){if(!Ud||!t||typeof t!="object")return!1;try{Ud.call(t,Ud);try{zd.call(t,zd)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function B4(t){if(!S2||!t||typeof t!="object")return!1;try{return S2.call(t),!0}catch{}return!1}function U4(t){if(!Lg||!t||typeof t!="object")return!1;try{Lg.call(t);try{Dg.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function z4(t){if(!zd||!t||typeof t!="object")return!1;try{zd.call(t,zd);try{Ud.call(t,Ud)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function $4(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function VP(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return VP(Ww.call(t,0,e.maxStringLength),e)+r}var i=Ja.call(Ja.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,H4);return jP(i,"single",e)}function H4(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+E4.call(e.toString(16))}function rd(t){return"Object("+t+")"}function Dv(t){return t+" { ? }"}function M2(t,e,n,r){var i=r?Ox(n,r):Io.call(n,", ");return t+" ("+e+") {"+i+"}"}function j4(t){for(var e=0;e<t.length;e++)if(GP(t[e],`
`)>=0)return!1;return!0}function W4(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=Io.call(Array(t.indent+1)," ");else return null;return{base:n,prev:Io.call(Array(e+1),n)}}function Ox(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+Io.call(t,","+n)+`
`+e.prev}function sm(t,e){var n=Mx(t),r=[];if(n){r.length=t.length;for(var i=0;i<t.length;i++)r[i]=Wa(t,i)?e(t[i],t):""}var s=typeof Nv=="function"?Nv(t):[],o;if(rh){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var u in t)Wa(t,u)&&(n&&String(Number(u))===u&&u<t.length||rh&&o["$"+u]instanceof Symbol||($P.call(/[^\w$]/,u)?r.push(e(u,t)+": "+e(t[u],t)):r.push(u+": "+e(t[u],t))));if(typeof Nv=="function")for(var h=0;h<s.length;h++)HP.call(t,s[h])&&r.push("["+e(s[h])+"]: "+e(t[s[h]],t));return r}var Gw=$w,wh=f4,G4=C4,V4=Gw("%TypeError%"),om=Gw("%WeakMap%",!0),am=Gw("%Map%",!0),X4=wh("WeakMap.prototype.get",!0),q4=wh("WeakMap.prototype.set",!0),Y4=wh("WeakMap.prototype.has",!0),Q4=wh("Map.prototype.get",!0),K4=wh("Map.prototype.set",!0),Z4=wh("Map.prototype.has",!0),Vw=function(t,e){for(var n=t,r;(r=n.next)!==null;n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r},J4=function(t,e){var n=Vw(t,e);return n&&n.value},eL=function(t,e,n){var r=Vw(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}},tL=function(t,e){return!!Vw(t,e)},nL=function(){var e,n,r,i={assert:function(s){if(!i.has(s))throw new V4("Side channel does not contain "+G4(s))},get:function(s){if(om&&s&&(typeof s=="object"||typeof s=="function")){if(e)return X4(e,s)}else if(am){if(n)return Q4(n,s)}else if(r)return J4(r,s)},has:function(s){if(om&&s&&(typeof s=="object"||typeof s=="function")){if(e)return Y4(e,s)}else if(am){if(n)return Z4(n,s)}else if(r)return tL(r,s);return!1},set:function(s,o){om&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new om),q4(e,s,o)):am?(n||(n=new am),K4(n,s,o)):(r||(r={key:{},next:null}),eL(r,s,o))}};return i},rL=String.prototype.replace,iL=/%20/g,Lv={RFC1738:"RFC1738",RFC3986:"RFC3986"},Xw={default:Lv.RFC3986,formatters:{RFC1738:function(t){return rL.call(t,iL,"+")},RFC3986:function(t){return String(t)}},RFC1738:Lv.RFC1738,RFC3986:Lv.RFC3986},sL=Xw,Fv=Object.prototype.hasOwnProperty,eu=Array.isArray,wo=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),oL=function(e){for(;e.length>1;){var n=e.pop(),r=n.obj[n.prop];if(eu(r)){for(var i=[],s=0;s<r.length;++s)typeof r[s]<"u"&&i.push(r[s]);n.obj[n.prop]=i}}},XP=function(e,n){for(var r=n&&n.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(r[i]=e[i]);return r},aL=function t(e,n,r){if(!n)return e;if(typeof n!="object"){if(eu(e))e.push(n);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!Fv.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var i=e;return eu(e)&&!eu(n)&&(i=XP(e,r)),eu(e)&&eu(n)?(n.forEach(function(s,o){if(Fv.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=t(a,s,r):e.push(s)}else e[o]=s}),e):Object.keys(n).reduce(function(s,o){var a=n[o];return Fv.call(s,o)?s[o]=t(s[o],a,r):s[o]=a,s},i)},lL=function(e,n){return Object.keys(n).reduce(function(r,i){return r[i]=n[i],r},e)},uL=function(t,e,n){var r=t.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},cL=function(e,n,r,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),r==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});for(var a="",u=0;u<o.length;++u){var h=o.charCodeAt(u);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||s===sL.RFC1738&&(h===40||h===41)){a+=o.charAt(u);continue}if(h<128){a=a+wo[h];continue}if(h<2048){a=a+(wo[192|h>>6]+wo[128|h&63]);continue}if(h<55296||h>=57344){a=a+(wo[224|h>>12]+wo[128|h>>6&63]+wo[128|h&63]);continue}u+=1,h=65536+((h&1023)<<10|o.charCodeAt(u)&1023),a+=wo[240|h>>18]+wo[128|h>>12&63]+wo[128|h>>6&63]+wo[128|h&63]}return a},hL=function(e){for(var n=[{obj:{o:e},prop:"o"}],r=[],i=0;i<n.length;++i)for(var s=n[i],o=s.obj[s.prop],a=Object.keys(o),u=0;u<a.length;++u){var h=a[u],d=o[h];typeof d=="object"&&d!==null&&r.indexOf(d)===-1&&(n.push({obj:o,prop:h}),r.push(d))}return oL(n),e},dL=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},fL=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},pL=function(e,n){return[].concat(e,n)},mL=function(e,n){if(eu(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(n(e[i]));return r}return n(e)},qP={arrayToObject:XP,assign:lL,combine:pL,compact:hL,decode:uL,encode:cL,isBuffer:fL,isRegExp:dL,maybeMap:mL,merge:aL},YP=nL,Jm=qP,$d=Xw,gL=Object.prototype.hasOwnProperty,O2={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},ta=Array.isArray,yL=Array.prototype.push,QP=function(t,e){yL.apply(t,ta(e)?e:[e])},vL=Date.prototype.toISOString,N2=$d.default,kr={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Jm.encode,encodeValuesOnly:!1,format:N2,formatter:$d.formatters[N2],indices:!1,serializeDate:function(e){return vL.call(e)},skipNulls:!1,strictNullHandling:!1},xL=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Bv={},_L=function t(e,n,r,i,s,o,a,u,h,d,p,f,g,v,w,C){for(var b=e,S=C,_=0,A=!1;(S=S.get(Bv))!==void 0&&!A;){var P=S.get(e);if(_+=1,typeof P<"u"){if(P===_)throw new RangeError("Cyclic object value");A=!0}typeof S.get(Bv)>"u"&&(_=0)}if(typeof u=="function"?b=u(n,b):b instanceof Date?b=p(b):r==="comma"&&ta(b)&&(b=Jm.maybeMap(b,function(ie){return ie instanceof Date?p(ie):ie})),b===null){if(s)return a&&!v?a(n,kr.encoder,w,"key",f):n;b=""}if(xL(b)||Jm.isBuffer(b)){if(a){var F=v?n:a(n,kr.encoder,w,"key",f);return[g(F)+"="+g(a(b,kr.encoder,w,"value",f))]}return[g(n)+"="+g(String(b))]}var N=[];if(typeof b>"u")return N;var D;if(r==="comma"&&ta(b))v&&a&&(b=Jm.maybeMap(b,a)),D=[{value:b.length>0?b.join(",")||null:void 0}];else if(ta(u))D=u;else{var q=Object.keys(b);D=h?q.sort(h):q}for(var G=i&&ta(b)&&b.length===1?n+"[]":n,H=0;H<D.length;++H){var J=D[H],V=typeof J=="object"&&typeof J.value<"u"?J.value:b[J];if(!(o&&V===null)){var U=ta(b)?typeof r=="function"?r(G,J):G:G+(d?"."+J:"["+J+"]");C.set(e,_);var Z=YP();Z.set(Bv,C),QP(N,t(V,U,r,i,s,o,r==="comma"&&v&&ta(b)?null:a,u,h,d,p,f,g,v,w,Z))}}return N},wL=function(e){if(!e)return kr;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||kr.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=$d.default;if(typeof e.format<"u"){if(!gL.call($d.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=$d.formatters[r],s=kr.filter;return(typeof e.filter=="function"||ta(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:kr.addQueryPrefix,allowDots:typeof e.allowDots>"u"?kr.allowDots:!!e.allowDots,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:kr.charsetSentinel,delimiter:typeof e.delimiter>"u"?kr.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:kr.encode,encoder:typeof e.encoder=="function"?e.encoder:kr.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:kr.encodeValuesOnly,filter:s,format:r,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:kr.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:kr.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:kr.strictNullHandling}},bL=function(t,e){var n=t,r=wL(e),i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):ta(r.filter)&&(s=r.filter,i=s);var o=[];if(typeof n!="object"||n===null)return"";var a;e&&e.arrayFormat in O2?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var u=O2[a];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var h=u==="comma"&&e&&e.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);for(var d=YP(),p=0;p<i.length;++p){var f=i[p];r.skipNulls&&n[f]===null||QP(o,_L(n[f],f,u,h,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,d))}var g=o.join(r.delimiter),v=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),g.length>0?v+g:""},ih=qP,Nx=Object.prototype.hasOwnProperty,SL=Array.isArray,Zn={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:ih.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},EL=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},KP=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},TL="utf8=%26%2310003%3B",CL="utf8=%E2%9C%93",AL=function(e,n){var r={__proto__:null},i=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=n.parameterLimit===1/0?void 0:n.parameterLimit,o=i.split(n.delimiter,s),a=-1,u,h=n.charset;if(n.charsetSentinel)for(u=0;u<o.length;++u)o[u].indexOf("utf8=")===0&&(o[u]===CL?h="utf-8":o[u]===TL&&(h="iso-8859-1"),a=u,u=o.length);for(u=0;u<o.length;++u)if(u!==a){var d=o[u],p=d.indexOf("]="),f=p===-1?d.indexOf("="):p+1,g,v;f===-1?(g=n.decoder(d,Zn.decoder,h,"key"),v=n.strictNullHandling?null:""):(g=n.decoder(d.slice(0,f),Zn.decoder,h,"key"),v=ih.maybeMap(KP(d.slice(f+1),n),function(w){return n.decoder(w,Zn.decoder,h,"value")})),v&&n.interpretNumericEntities&&h==="iso-8859-1"&&(v=EL(v)),d.indexOf("[]=")>-1&&(v=SL(v)?[v]:v),Nx.call(r,g)?r[g]=ih.combine(r[g],v):r[g]=v}return r},IL=function(t,e,n,r){for(var i=r?e:KP(e,n),s=t.length-1;s>=0;--s){var o,a=t[s];if(a==="[]"&&n.parseArrays)o=[].concat(i);else{o=n.plainObjects?Object.create(null):{};var u=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,h=parseInt(u,10);!n.parseArrays&&u===""?o={0:i}:!isNaN(h)&&a!==u&&String(h)===u&&h>=0&&n.parseArrays&&h<=n.arrayLimit?(o=[],o[h]=i):u!=="__proto__"&&(o[u]=i)}i=o}return i},PL=function(e,n,r,i){if(e){var s=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,u=r.depth>0&&o.exec(s),h=u?s.slice(0,u.index):s,d=[];if(h){if(!r.plainObjects&&Nx.call(Object.prototype,h)&&!r.allowPrototypes)return;d.push(h)}for(var p=0;r.depth>0&&(u=a.exec(s))!==null&&p<r.depth;){if(p+=1,!r.plainObjects&&Nx.call(Object.prototype,u[1].slice(1,-1))&&!r.allowPrototypes)return;d.push(u[1])}return u&&d.push("["+s.slice(u.index)+"]"),IL(d,n,r,i)}},kL=function(e){if(!e)return Zn;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?Zn.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?Zn.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Zn.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Zn.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Zn.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Zn.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Zn.comma,decoder:typeof e.decoder=="function"?e.decoder:Zn.decoder,delimiter:typeof e.delimiter=="string"||ih.isRegExp(e.delimiter)?e.delimiter:Zn.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Zn.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Zn.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Zn.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Zn.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Zn.strictNullHandling}},RL=function(t,e){var n=kL(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var r=typeof t=="string"?AL(t,n):t,i=n.plainObjects?Object.create(null):{},s=Object.keys(r),o=0;o<s.length;++o){var a=s[o],u=PL(a,r[a],n,typeof t=="string");i=ih.merge(i,u,n)}return n.allowSparse===!0?i:ih.compact(i)},ML=bL,OL=RL,NL=Xw,DL={formats:NL,parse:OL,stringify:ML},LL=zD;function Fs(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var FL=/^([a-z0-9.+-]+:)/i,BL=/:[0-9]*$/,UL=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,zL=["<",">",'"',"`"," ","\r",`
`,"	"],$L=["{","}","|","\\","^","`"].concat(zL),Dx=["'"].concat($L),D2=["%","/","?",";","#"].concat(Dx),L2=["/","?","#"],HL=255,F2=/^[+a-z0-9A-Z_-]{0,63}$/,jL=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,WL={javascript:!0,"javascript:":!0},Lx={javascript:!0,"javascript:":!0},zc={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Fx=DL;function Ny(t,e,n){if(t&&typeof t=="object"&&t instanceof Fs)return t;var r=new Fs;return r.parse(t,e,n),r}Fs.prototype.parse=function(t,e,n){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=r!==-1&&r<t.indexOf("#")?"?":"#",s=t.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),t=s.join(i);var a=t;if(a=a.trim(),!n&&t.split("#").length===1){var u=UL.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],e?this.query=Fx.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var h=FL.exec(a);if(h){h=h[0];var d=h.toLowerCase();this.protocol=d,a=a.substr(h.length)}if(n||h||a.match(/^\/\/[^@/]+@[^@/]+/)){var p=a.substr(0,2)==="//";p&&!(h&&Lx[h])&&(a=a.substr(2),this.slashes=!0)}if(!Lx[h]&&(p||h&&!zc[h])){for(var f=-1,g=0;g<L2.length;g++){var v=a.indexOf(L2[g]);v!==-1&&(f===-1||v<f)&&(f=v)}var w,C;f===-1?C=a.lastIndexOf("@"):C=a.lastIndexOf("@",f),C!==-1&&(w=a.slice(0,C),a=a.slice(C+1),this.auth=decodeURIComponent(w)),f=-1;for(var g=0;g<D2.length;g++){var v=a.indexOf(D2[g]);v!==-1&&(f===-1||v<f)&&(f=v)}f===-1&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var b=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!b)for(var S=this.hostname.split(/\./),g=0,_=S.length;g<_;g++){var A=S[g];if(A&&!A.match(F2)){for(var P="",F=0,N=A.length;F<N;F++)A.charCodeAt(F)>127?P+="x":P+=A[F];if(!P.match(F2)){var D=S.slice(0,g),q=S.slice(g+1),G=A.match(jL);G&&(D.push(G[1]),q.unshift(G[2])),q.length&&(a="/"+q.join(".")+a),this.hostname=D.join(".");break}}}this.hostname.length>HL?this.hostname="":this.hostname=this.hostname.toLowerCase(),b||(this.hostname=LL.toASCII(this.hostname));var H=this.port?":"+this.port:"",J=this.hostname||"";this.host=J+H,this.href+=this.host,b&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!WL[d])for(var g=0,_=Dx.length;g<_;g++){var V=Dx[g];if(a.indexOf(V)!==-1){var U=encodeURIComponent(V);U===V&&(U=escape(V)),a=a.split(V).join(U)}}var Z=a.indexOf("#");Z!==-1&&(this.hash=a.substr(Z),a=a.slice(0,Z));var ie=a.indexOf("?");if(ie!==-1?(this.search=a.substr(ie),this.query=a.substr(ie+1),e&&(this.query=Fx.parse(this.query)),a=a.slice(0,ie)):e&&(this.search="",this.query={}),a&&(this.pathname=a),zc[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var H=this.pathname||"",O=this.search||"";this.path=H+O}return this.href=this.format(),this};function GL(t){return typeof t=="string"&&(t=Ny(t)),t instanceof Fs?t.format():Fs.prototype.format.call(t)}Fs.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=Fx.stringify(this.query));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||zc[e])&&i!==!1?(i="//"+(i||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),o&&o.charAt(0)!=="?"&&(o="?"+o),n=n.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+i+n+o+r};function VL(t,e){return Ny(t,!1,!0).resolve(e)}Fs.prototype.resolve=function(t){return this.resolveObject(Ny(t,!1,!0)).format()};Fs.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new Fs;e.parse(t,!1,!0),t=e}for(var n=new Fs,r=Object.keys(this),i=0;i<r.length;i++){var s=r[i];n[s]=this[s]}if(n.hash=t.hash,t.href==="")return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var u=o[a];u!=="protocol"&&(n[u]=t[u])}return zc[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!zc[t.protocol]){for(var h=Object.keys(t),d=0;d<h.length;d++){var p=h[d];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,!t.host&&!Lx[t.protocol]){for(var _=(t.pathname||"").split("/");_.length&&!(t.host=_.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),_[0]!==""&&_.unshift(""),_.length<2&&_.unshift(""),n.pathname=_.join("/")}else n.pathname=t.pathname;if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var f=n.pathname||"",g=n.search||"";n.path=f+g}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var v=n.pathname&&n.pathname.charAt(0)==="/",w=t.host||t.pathname&&t.pathname.charAt(0)==="/",C=w||v||n.host&&t.pathname,b=C,S=n.pathname&&n.pathname.split("/")||[],_=t.pathname&&t.pathname.split("/")||[],A=n.protocol&&!zc[n.protocol];if(A&&(n.hostname="",n.port=null,n.host&&(S[0]===""?S[0]=n.host:S.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(_[0]===""?_[0]=t.host:_.unshift(t.host)),t.host=null),C=C&&(_[0]===""||S[0]==="")),w)n.host=t.host||t.host===""?t.host:n.host,n.hostname=t.hostname||t.hostname===""?t.hostname:n.hostname,n.search=t.search,n.query=t.query,S=_;else if(_.length)S||(S=[]),S.pop(),S=S.concat(_),n.search=t.search,n.query=t.query;else if(t.search!=null){if(A){n.host=S.shift(),n.hostname=n.host;var P=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;P&&(n.auth=P.shift(),n.hostname=P.shift(),n.host=n.hostname)}return n.search=t.search,n.query=t.query,(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var F=S.slice(-1)[0],N=(n.host||t.host||S.length>1)&&(F==="."||F==="..")||F==="",D=0,q=S.length;q>=0;q--)F=S[q],F==="."?S.splice(q,1):F===".."?(S.splice(q,1),D++):D&&(S.splice(q,1),D--);if(!C&&!b)for(;D--;D)S.unshift("..");C&&S[0]!==""&&(!S[0]||S[0].charAt(0)!=="/")&&S.unshift(""),N&&S.join("/").substr(-1)!=="/"&&S.push("");var G=S[0]===""||S[0]&&S[0].charAt(0)==="/";if(A){n.hostname=G?"":S.length?S.shift():"",n.host=n.hostname;var P=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;P&&(n.auth=P.shift(),n.hostname=P.shift(),n.host=n.hostname)}return C=C||n.host&&S.length,C&&!G&&S.unshift(""),S.length>0?n.pathname=S.join("/"):(n.pathname=null,n.path=null),(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n};Fs.prototype.parseHost=function(){var t=this.host,e=BL.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var XL=Ny,qL=VL,YL=GL;const QL={parse:XL,format:YL,resolve:qL};function ys(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function id(t){return t.split("?")[0].split("#")[0]}function KL(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ZL(t,e,n){return t.replace(new RegExp(KL(e),"g"),n)}function JL(t,e){let n="",r=0,i=-1,s=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){const u=n.lastIndexOf("/");if(u!==n.length-1){u===-1?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length===2||n.length===1){n="",r=0,i=a,s=0;continue}}e&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+=`/${t.slice(i+1,a)}`:n=t.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return n}const Mn={toPosix(t){return ZL(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},hasProtocol(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol(t){ys(t),t=this.toPosix(t);let e="";const n=/^file:\/\/\//.exec(t),r=/^[^/:]+:\/\//.exec(t),i=/^[^/:]+:\//.exec(t);if(n||r||i){const s=(n==null?void 0:n[0])||(r==null?void 0:r[0])||(i==null?void 0:i[0]);e=s,t=t.slice(s.length)}return e},toAbsolute(t,e,n){if(this.isDataUrl(t))return t;const r=id(this.toPosix(e??we.ADAPTER.getBaseUrl())),i=id(this.toPosix(n??this.rootname(r)));return ys(t),t=this.toPosix(t),t.startsWith("/")?Mn.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(r,t)},normalize(t){if(t=this.toPosix(t),ys(t),t.length===0)return".";let e="";const n=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const r=t.endsWith("/");return t=JL(t,!1),t.length>0&&r&&(t+="/"),n?`/${t}`:e+t},isAbsolute(t){return ys(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let n=0;n<t.length;++n){const r=t[n];if(ys(r),r.length>0)if(e===void 0)e=r;else{const i=t[n-1]??"";this.extname(i)?e+=`/../${r}`:e+=`/${r}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(ys(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const n=e===47;let r=-1,i=!0;const s=this.getProtocol(t),o=t;t=t.slice(s.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),e===47){if(!i){r=a;break}}else i=!1;return r===-1?n?"/":this.isUrl(o)?s+t:s:n&&r===1?"//":s+t.slice(0,r)},rootname(t){ys(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const n=t.indexOf("/",e.length);n!==-1?e=t.slice(0,n):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){ys(t),e&&ys(e),t=id(this.toPosix(t));let n=0,r=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(s=t.length-1;s>=0;--s){const u=t.charCodeAt(s);if(u===47){if(!i){n=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(u===e.charCodeAt(o)?--o===-1&&(r=s):(o=-1,r=a))}return n===r?r=a:r===-1&&(r=t.length),t.slice(n,r)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!i){n=s+1;break}}else r===-1&&(i=!1,r=s+1);return r===-1?"":t.slice(n,r)},extname(t){ys(t),t=id(this.toPosix(t));let e=-1,n=0,r=-1,i=!0,s=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(a===47){if(!i){n=o+1;break}continue}r===-1&&(i=!1,r=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||r===-1||s===0||s===1&&e===r-1&&e===n+1?"":t.slice(e,r)},parse(t){ys(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=id(this.toPosix(t));let n=t.charCodeAt(0);const r=this.isAbsolute(t);let i;e.root=this.rootname(t),r||this.hasProtocol(t)?i=1:i=0;let s=-1,o=0,a=-1,u=!0,h=t.length-1,d=0;for(;h>=i;--h){if(n=t.charCodeAt(h),n===47){if(!u){o=h+1;break}continue}a===-1&&(u=!1,a=h+1),n===46?s===-1?s=h:d!==1&&(d=1):s!==-1&&(d=-1)}return s===-1||a===-1||d===0||d===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&r?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(o,a)):(o===0&&r?(e.name=t.slice(1,s),e.base=t.slice(1,a)):(e.name=t.slice(o,s),e.base=t.slice(o,a)),e.ext=t.slice(s,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"},B2={};function at(t,e,n=3){if(B2[e])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(r=r.split(`
`).splice(n).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(r))),B2[e]=!0}let Uv;function eF(){return typeof Uv>"u"&&(Uv=function(){var n;const e={stencil:!0,failIfMajorPerformanceCaveat:we.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!we.ADAPTER.getWebGLRenderingContext())return!1;const r=we.ADAPTER.createCanvas();let i=r.getContext("webgl",e)||r.getContext("experimental-webgl",e);const s=!!((n=i==null?void 0:i.getContextAttributes())!=null&&n.stencil);if(i){const o=i.getExtension("WEBGL_lose_context");o&&o.loseContext()}return i=null,s}catch{return!1}}()),Uv}var tF={grad:.9,turn:360,rad:360/(2*Math.PI)},Qo=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},tr=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},us=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},ZP=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},U2=function(t){return{r:us(t.r,0,255),g:us(t.g,0,255),b:us(t.b,0,255),a:us(t.a)}},zv=function(t){return{r:tr(t.r),g:tr(t.g),b:tr(t.b),a:tr(t.a,3)}},nF=/^#([0-9a-f]{3,8})$/i,lm=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},JP=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=Math.max(e,n,r),o=s-Math.min(e,n,r),a=o?s===e?(n-r)/o:s===n?2+(r-e)/o:4+(e-n)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},e3=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var s=Math.floor(e),o=r*(1-n),a=r*(1-(e-s)*n),u=r*(1-(1-e+s)*n),h=s%6;return{r:255*[r,a,o,o,u,r][h],g:255*[u,r,r,a,o,o][h],b:255*[o,o,u,r,r,a][h],a:i}},z2=function(t){return{h:ZP(t.h),s:us(t.s,0,100),l:us(t.l,0,100),a:us(t.a)}},$2=function(t){return{h:tr(t.h),s:tr(t.s),l:tr(t.l),a:tr(t.a,3)}},H2=function(t){return e3((n=(e=t).s,{h:e.h,s:(n*=((r=e.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},Hd=function(t){return{h:(e=JP(t)).h,s:(i=(200-(n=e.s))*(r=e.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,n,r,i},rF=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,iF=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,sF=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,oF=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Bx={string:[[function(t){var e=nF.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?tr(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?tr(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=sF.exec(t)||oF.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:U2({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=rF.exec(t)||iF.exec(t);if(!e)return null;var n,r,i=z2({h:(n=e[1],r=e[2],r===void 0&&(r="deg"),Number(n)*(tF[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return H2(i)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=i===void 0?1:i;return Qo(e)&&Qo(n)&&Qo(r)?U2({r:Number(e),g:Number(n),b:Number(r),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,i=t.a,s=i===void 0?1:i;if(!Qo(e)||!Qo(n)||!Qo(r))return null;var o=z2({h:Number(e),s:Number(n),l:Number(r),a:Number(s)});return H2(o)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,i=t.a,s=i===void 0?1:i;if(!Qo(e)||!Qo(n)||!Qo(r))return null;var o=function(a){return{h:ZP(a.h),s:us(a.s,0,100),v:us(a.v,0,100),a:us(a.a)}}({h:Number(e),s:Number(n),v:Number(r),a:Number(s)});return e3(o)},"hsv"]]},j2=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0](t);if(r)return[r,e[n][1]]}return[null,void 0]},aF=function(t){return typeof t=="string"?j2(t.trim(),Bx.string):typeof t=="object"&&t!==null?j2(t,Bx.object):[null,void 0]},$v=function(t,e){var n=Hd(t);return{h:n.h,s:us(n.s+100*e,0,100),l:n.l,a:n.a}},Hv=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},W2=function(t,e){var n=Hd(t);return{h:n.h,s:n.s,l:us(n.l+100*e,0,100),a:n.a}},Ux=function(){function t(e){this.parsed=aF(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return tr(Hv(this.rgba),2)},t.prototype.isDark=function(){return Hv(this.rgba)<.5},t.prototype.isLight=function(){return Hv(this.rgba)>=.5},t.prototype.toHex=function(){return e=zv(this.rgba),n=e.r,r=e.g,i=e.b,o=(s=e.a)<1?lm(tr(255*s)):"","#"+lm(n)+lm(r)+lm(i)+o;var e,n,r,i,s,o},t.prototype.toRgb=function(){return zv(this.rgba)},t.prototype.toRgbString=function(){return e=zv(this.rgba),n=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+n+", "+r+", "+i+", "+s+")":"rgb("+n+", "+r+", "+i+")";var e,n,r,i,s},t.prototype.toHsl=function(){return $2(Hd(this.rgba))},t.prototype.toHslString=function(){return e=$2(Hd(this.rgba)),n=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+s+")":"hsl("+n+", "+r+"%, "+i+"%)";var e,n,r,i,s},t.prototype.toHsv=function(){return e=JP(this.rgba),{h:tr(e.h),s:tr(e.s),v:tr(e.v),a:tr(e.a,3)};var e},t.prototype.invert=function(){return Eo({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Eo($v(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Eo($v(this.rgba,-e))},t.prototype.grayscale=function(){return Eo($v(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Eo(W2(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Eo(W2(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Eo({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):tr(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=Hd(this.rgba);return typeof e=="number"?Eo({h:e,s:n.s,l:n.l,a:n.a}):tr(n.h)},t.prototype.isEqual=function(e){return this.toHex()===Eo(e).toHex()},t}(),Eo=function(t){return t instanceof Ux?t:new Ux(t)},G2=[],lF=function(t){t.forEach(function(e){G2.indexOf(e)<0&&(e(Ux,Bx),G2.push(e))})};function uF(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var s={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,u,h=r[this.toHex()];if(h)return h;if(o!=null&&o.closest){var d=this.toRgb(),p=1/0,f="black";if(!s.length)for(var g in n)s[g]=new t(n[g]).toRgb();for(var v in n){var w=(a=d,u=s[v],Math.pow(a.r-u.r,2)+Math.pow(a.g-u.g,2)+Math.pow(a.b-u.b,2));w<p&&(p=w,f=v)}return f}},e.string.push([function(o){var a=o.toLowerCase(),u=a==="transparent"?"#0000":n[a];return u?new t(u).toRgb():null},"name"])}lF([uF]);const $c=class{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof $c)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,e){const n=typeof t;if(n!==typeof e)return!1;if(n==="number"||n==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((i,s)=>i===e[s]);if(t!==null&&e!==null){const i=Object.keys(t),s=Object.keys(e);return i.length!==s.length?!1:i.every(o=>t[o]===e[o])}return t===e}toRgba(){const[t,e,n,r]=this._components;return{r:t,g:e,b:n,a:r}}toRgb(){const[t,e,n]=this._components;return{r:t,g:e,b:n}}toRgbaString(){const[t,e,n]=this.toUint8RgbArray();return`rgba(${t},${e},${n},${this.alpha})`}toUint8RgbArray(t){const[e,n,r]=this._components;return t=t??[],t[0]=Math.round(e*255),t[1]=Math.round(n*255),t[2]=Math.round(r*255),t}toRgbArray(t){t=t??[];const[e,n,r]=this._components;return t[0]=e,t[1]=n,t[2]=r,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,n,r,i]=$c.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=n,this._components[2]*=r,this._components[3]*=i,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let n=this._int>>16&255,r=this._int>>8&255,i=this._int&255;return e&&(n=n*t+.5|0,r=r*t+.5|0,i=i*t+.5|0),(t*255<<24)+(n<<16)+(r<<8)+i}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,n,r]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(n*t)/t,this._components[2]=Math.round(r*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,n,r,i]=this._components;return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}normalize(t){let e,n,r,i;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const s=t;e=(s>>16&255)/255,n=(s>>8&255)/255,r=(s&255)/255,i=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,n,r,i=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,n,r,i=255]=t,e/=255,n/=255,r/=255,i/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const o=$c.HEX_PATTERN.exec(t);o&&(t=`#${o[2]}`)}const s=Eo(t);s.isValid()&&({r:e,g:n,b:r,a:i}=s.rgba,e/=255,n/=255,r/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=n,this._components[2]=r,this._components[3]=i,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,e,n]=this._components;this._int=(t*255<<16)+(e*255<<8)+(n*255|0)}_clamp(t,e=0,n=1){return typeof t=="number"?Math.min(Math.max(t,e),n):(t.forEach((r,i)=>{t[i]=Math.min(Math.max(r,e),n)}),t)}};let Rt=$c;Rt.shared=new $c;Rt.temp=new $c;Rt.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function cF(t){return at("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Rt.shared.setValue(t).toHex()}function hF(t){return at("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Rt.shared.setValue(t).toNumber()}function dF(){const t=[],e=[];for(let r=0;r<32;r++)t[r]=r,e[r]=r;t[Ue.NORMAL_NPM]=Ue.NORMAL,t[Ue.ADD_NPM]=Ue.ADD,t[Ue.SCREEN_NPM]=Ue.SCREEN,e[Ue.NORMAL]=Ue.NORMAL_NPM,e[Ue.ADD]=Ue.ADD_NPM,e[Ue.SCREEN]=Ue.SCREEN_NPM;const n=[];return n.push(e),n.push(t),n}const t3=dF();function n3(t,e){return t3[e?1:0][t]}function fF(t,e=null){const n=t*6;if(e=e||new Uint16Array(n),e.length!==n)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${n}`);for(let r=0,i=0;r<n;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}function r3(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}function Fg(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function V2(t){return!(t&t-1)&&!!t}function X2(t){let e=(t>65535?1:0)<<4;t>>>=e;let n=(t>255?1:0)<<3;return t>>>=n,e|=n,n=(t>15?1:0)<<2,t>>>=n,e|=n,n=(t>3?1:0)<<1,t>>>=n,e|=n,e|t>>1}function Hc(t,e,n){const r=t.length;let i;if(e>=r||n===0)return;n=e+n>r?r-e:n;const s=r-n;for(i=e;i<s;++i)t[i]=t[i+n];t.length=s}function el(t){return t===0?0:t<0?-1:1}let pF=0;function bu(){return++pF}const i3=class{constructor(t,e,n,r){this.left=t,this.top=e,this.right=n,this.bottom=r}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let zx=i3;zx.EMPTY=new i3(0,0,0,0);const q2={},To=Object.create(null),Ua=Object.create(null);class mF{constructor(e,n,r){this._canvas=we.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||we.RESOLUTION,this.resize(e,n)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,n){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(n*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Y2(t,e,n){for(let r=0,i=4*n*e;r<e;++r,i+=4)if(t[i+3]!==0)return!1;return!0}function Q2(t,e,n,r,i){const s=4*e;for(let o=r,a=r*s+4*n;o<=i;++o,a+=s)if(t[a+3]!==0)return!1;return!0}function gF(t){const{width:e,height:n}=t,r=t.getContext("2d",{willReadFrequently:!0});if(r===null)throw new TypeError("Failed to get canvas 2D context");const s=r.getImageData(0,0,e,n).data;let o=0,a=0,u=e-1,h=n-1;for(;a<n&&Y2(s,e,a);)++a;if(a===n)return zx.EMPTY;for(;Y2(s,e,h);)--h;for(;Q2(s,e,o,a,h);)++o;for(;Q2(s,e,u,a,h);)--u;return++u,++h,new zx(o,a,u,h)}function yF(t){const e=gF(t),{width:n,height:r}=e;let i=null;if(!e.isEmpty()){const s=t.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,n,r)}return{width:n,height:r,data:i}}let um;function vF(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location,um||(um=document.createElement("a")),um.href=t;const n=QL.parse(um.href),r=!n.port&&e.port===""||n.port===e.port;return n.hostname!==e.hostname||!r||n.protocol!==e.protocol?"anonymous":""}function ml(t,e=1){var r;const n=(r=we.RETINA_PREFIX)==null?void 0:r.exec(t);return n?parseFloat(n[1]):e}var Te=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(Te||{});const $x=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},K2=(t,e)=>$x(t).priority??e,Me={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map($x).forEach(e=>{e.type.forEach(n=>{var r,i;return(i=(r=this._removeHandlers)[n])==null?void 0:i.call(r,e)})}),this},add(...t){return t.map($x).forEach(e=>{e.type.forEach(n=>{const r=this._addHandlers,i=this._queue;r[n]?r[n](e):(i[n]=i[n]||[],i[n].push(e))})}),this},handle(t,e,n){const r=this._addHandlers,i=this._removeHandlers;if(r[t]||i[t])throw new Error(`Extension type ${t} already has a handler`);r[t]=e,i[t]=n;const s=this._queue;return s[t]&&(s[t].forEach(o=>e(o)),delete s[t]),this},handleByMap(t,e){return this.handle(t,n=>{e[n.name]=n.ref},n=>{delete e[n.name]})},handleByList(t,e,n=-1){return this.handle(t,r=>{e.includes(r.ref)||(e.push(r.ref),e.sort((i,s)=>K2(s,n)-K2(i,n)))},r=>{const i=e.indexOf(r.ref);i!==-1&&e.splice(i,1)})}};class Hx{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const xF=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function _F(t){let e="";for(let n=0;n<t;++n)n>0&&(e+=`
else `),n<t-1&&(e+=`if(test == ${n}.0){}`);return e}function wF(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=e.createShader(e.FRAGMENT_SHADER);for(;;){const r=xF.replace(/%forloop%/gi,_F(t));if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))t=t/2|0;else break}return t}const jv=0,Wv=1,Gv=2,Vv=3,Xv=4,qv=5;class va{constructor(){this.data=0,this.blendMode=Ue.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<jv)}set blend(e){!!(this.data&1<<jv)!==e&&(this.data^=1<<jv)}get offsets(){return!!(this.data&1<<Wv)}set offsets(e){!!(this.data&1<<Wv)!==e&&(this.data^=1<<Wv)}get culling(){return!!(this.data&1<<Gv)}set culling(e){!!(this.data&1<<Gv)!==e&&(this.data^=1<<Gv)}get depthTest(){return!!(this.data&1<<Vv)}set depthTest(e){!!(this.data&1<<Vv)!==e&&(this.data^=1<<Vv)}get depthMask(){return!!(this.data&1<<qv)}set depthMask(e){!!(this.data&1<<qv)!==e&&(this.data^=1<<qv)}get clockwiseFrontFace(){return!!(this.data&1<<Xv)}set clockwiseFrontFace(e){!!(this.data&1<<Xv)!==e&&(this.data^=1<<Xv)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Ue.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new va;return e.depthTest=!1,e.blend=!0,e}}const jx=[];function s3(t,e){if(!t)return null;let n="";if(typeof t=="string"){const r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(n=r[1].toLowerCase())}for(let r=jx.length-1;r>=0;--r){const i=jx[r];if(i.test&&i.test(t,n))return new i(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Bs{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,n,r,i,s,o,a,u){if(arguments.length>8)throw new Error("max arguments reached");const{name:h,items:d}=this;this._aliasCount++;for(let p=0,f=d.length;p<f;p++)d[p][h](e,n,r,i,s,o,a,u);return d===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const n=this.items.indexOf(e);return n!==-1&&(this.ensureNonAliasedItems(),this.items.splice(n,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Bs.prototype,{dispatch:{value:Bs.prototype.emit},run:{value:Bs.prototype.emit}});class xf{constructor(e=0,n=0){this._width=e,this._height=n,this.destroyed=!1,this.internal=!1,this.onResize=new Bs("setRealSize"),this.onUpdate=new Bs("update"),this.onError=new Bs("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,n){(e!==this._width||n!==this._height)&&(this._width=e,this._height=n,this.onResize.emit(e,n))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,n,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,n){return!1}}class Wf extends xf{constructor(e,n){const{width:r,height:i}=n||{};if(!r||!i)throw new Error("BufferResource width or height invalid");super(r,i),this.data=e}upload(e,n,r){const i=e.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===js.UNPACK);const s=n.realWidth,o=n.realHeight;return r.width===s&&r.height===o?i.texSubImage2D(n.target,0,0,0,s,o,n.format,r.type,this.data):(r.width=s,r.height=o,i.texImage2D(n.target,0,r.internalFormat,s,o,0,n.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array}}const bF={scaleMode:as.NEAREST,format:ye.RGBA,alphaMode:js.NPM},ac=class extends Bo{constructor(t=null,e=null){super(),e=Object.assign({},ac.defaultOptions,e);const{alphaMode:n,mipmap:r,anisotropicLevel:i,scaleMode:s,width:o,height:a,wrapMode:u,format:h,type:d,target:p,resolution:f,resourceOptions:g}=e;t&&!(t instanceof xf)&&(t=s3(t,g),t.internal=!0),this.resolution=f||we.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=r,this.anisotropicLevel=i,this._wrapMode=u,this._scaleMode=s,this.format=h,this.type=d,this.target=p,this.alphaMode=n,this.uid=bu(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let n;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this}setSize(t,e,n){return n=n||this.resolution,this.setRealSize(t*n,e*n,n)}setRealSize(t,e,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=V2(this.realWidth)&&V2(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Ua[this.cacheId],delete To[this.cacheId],this.cacheId=null),this.dispose(),ac.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,n=we.STRICT_TEXTURE_CACHE){const r=typeof t=="string";let i=null;if(r)i=t;else{if(!t._pixiId){const o=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${o}_${bu()}`}i=t._pixiId}let s=Ua[i];if(r&&n&&!s)throw new Error(`The cacheId "${i}" does not exist in BaseTextureCache.`);return s||(s=new ac(t,e),s.cacheId=i,ac.addToCache(s,i)),s}static fromBuffer(t,e,n,r){t=t||new Float32Array(e*n*4);const i=new Wf(t,{width:e,height:n}),s=t instanceof Float32Array?Be.FLOAT:Be.UNSIGNED_BYTE;return new ac(i,Object.assign({},bF,{type:s},r))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Ua[e]&&Ua[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),Ua[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=Ua[t];if(e){const n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete Ua[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete Ua[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};let Ge=ac;Ge.defaultOptions={mipmap:Do.POW2,anisotropicLevel:0,scaleMode:as.LINEAR,wrapMode:aa.CLAMP,alphaMode:js.UNPACK,target:Bc.TEXTURE_2D,format:ye.RGBA,type:Be.UNSIGNED_BYTE};Ge._globalBatch=0;class Wx{constructor(){this.texArray=null,this.blend=0,this.type=Ms.TRIANGLES,this.start=0,this.size=0,this.data=null}}let SF=0;class bn{constructor(e,n=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=n,this.id=SF++,this.disposeRunner=new Bs("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Oo.ELEMENT_ARRAY_BUFFER:Oo.ARRAY_BUFFER}get index(){return this.type===Oo.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new bn(e)}}class Bg{constructor(e,n=0,r=!1,i=Be.FLOAT,s,o,a,u=1){this.buffer=e,this.size=n,this.normalized=r,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=u}destroy(){this.buffer=null}static from(e,n,r,i,s){return new Bg(e,n,r,i,s)}}const EF={Float32Array,Uint32Array,Int32Array,Uint8Array};function TF(t,e){let n=0,r=0;const i={};for(let u=0;u<t.length;u++)r+=e[u],n+=t[u].length;const s=new ArrayBuffer(n*4);let o=null,a=0;for(let u=0;u<t.length;u++){const h=e[u],d=t[u],p=r3(d);i[p]||(i[p]=new EF[p](s)),o=i[p];for(let f=0;f<d.length;f++){const g=(f/h|0)*r+a,v=f%h;o[g+v]=d[f]}a+=h}return new Float32Array(s)}const Z2={5126:4,5123:2,5121:1};let CF=0;const AF={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class gl{constructor(e=[],n={}){this.buffers=e,this.indexBuffer=null,this.attributes=n,this.glVertexArrayObjects={},this.id=CF++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Bs("disposeGeometry"),this.refCount=0}addAttribute(e,n,r=0,i=!1,s,o,a,u=!1){if(!n)throw new Error("You must pass a buffer when creating an attribute");n instanceof bn||(n instanceof Array&&(n=new Float32Array(n)),n=new bn(n));const h=e.split("|");if(h.length>1){for(let p=0;p<h.length;p++)this.addAttribute(h[p],n,r,i,s);return this}let d=this.buffers.indexOf(n);return d===-1&&(this.buffers.push(n),d=this.buffers.length-1),this.attributes[e]=new Bg(d,r,i,s,o,a,u),this.instanced=this.instanced||u,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof bn||(e instanceof Array&&(e=new Uint16Array(e)),e=new bn(e)),e.type=Oo.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],n=[],r=new bn;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),n.push(s.size*Z2[s.type]/4),s.buffer=0}for(r.data=TF(e,n),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const n=this.attributes[e];return this.buffers[n.buffer].data.length/(n.stride/4||n.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new gl;for(let n=0;n<this.buffers.length;n++)e.buffers[n]=new bn(this.buffers[n].data.slice(0));for(const n in this.attributes){const r=this.attributes[n];e.attributes[n]=new Bg(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Oo.ELEMENT_ARRAY_BUFFER),e}static merge(e){const n=new gl,r=[],i=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let u=0;u<o.buffers.length;u++)i[u]=i[u]||0,i[u]+=o.buffers[u].data.length,s[u]=0}for(let a=0;a<o.buffers.length;a++)r[a]=new AF[r3(o.buffers[a].data)](i[a]),n.buffers[a]=new bn(r[a]);for(let a=0;a<e.length;a++){o=e[a];for(let u=0;u<o.buffers.length;u++)r[u].set(o.buffers[u].data,s[u]),s[u]+=o.buffers[u].data.length}if(n.attributes=o.attributes,o.indexBuffer){n.indexBuffer=n.buffers[o.buffers.indexOf(o.indexBuffer)],n.indexBuffer.type=Oo.ELEMENT_ARRAY_BUFFER;let a=0,u=0,h=0,d=0;for(let p=0;p<o.buffers.length;p++)if(o.buffers[p]!==o.indexBuffer){d=p;break}for(const p in o.attributes){const f=o.attributes[p];(f.buffer|0)===d&&(u+=f.size*Z2[f.type]/4)}for(let p=0;p<e.length;p++){const f=e[p].indexBuffer.data;for(let g=0;g<f.length;g++)n.indexBuffer.data[g+h]+=a;a+=e[p].buffers[d].data.length/u,h+=f.length}}return n}}class o3 extends gl{constructor(e=!1){super(),this._buffer=new bn(null,e,!1),this._indexBuffer=new bn(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Be.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Be.FLOAT).addAttribute("aColor",this._buffer,4,!0,Be.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Be.FLOAT).addIndex(this._indexBuffer)}}const Ug=Math.PI*2,IF=180/Math.PI,PF=Math.PI/180;var pr=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(pr||{});class Fe{constructor(e=0,n=0){this.x=0,this.y=0,this.x=e,this.y=n}clone(){return new Fe(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,n=e){return this.x=e,this.y=n,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const cm=[new Fe,new Fe,new Fe,new Fe];class Ye{constructor(e=0,n=0,r=0,i=0){this.x=Number(e),this.y=Number(n),this.width=Number(r),this.height=Number(i),this.type=pr.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Ye(0,0,0,0)}clone(){return new Ye(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,n){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&n>=this.y&&n<this.y+this.height}intersects(e,n){if(!n){const D=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=D)return!1;const G=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>G}const r=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=r||o<=s)return!1;const a=cm[0].set(e.left,e.top),u=cm[1].set(e.left,e.bottom),h=cm[2].set(e.right,e.top),d=cm[3].set(e.right,e.bottom);if(h.x<=a.x||u.y<=a.y)return!1;const p=Math.sign(n.a*n.d-n.b*n.c);if(p===0||(n.apply(a,a),n.apply(u,u),n.apply(h,h),n.apply(d,d),Math.max(a.x,u.x,h.x,d.x)<=r||Math.min(a.x,u.x,h.x,d.x)>=i||Math.max(a.y,u.y,h.y,d.y)<=s||Math.min(a.y,u.y,h.y,d.y)>=o))return!1;const f=p*(u.y-a.y),g=p*(a.x-u.x),v=f*r+g*s,w=f*i+g*s,C=f*r+g*o,b=f*i+g*o;if(Math.max(v,w,C,b)<=f*a.x+g*a.y||Math.min(v,w,C,b)>=f*d.x+g*d.y)return!1;const S=p*(a.y-h.y),_=p*(h.x-a.x),A=S*r+_*s,P=S*i+_*s,F=S*r+_*o,N=S*i+_*o;return!(Math.max(A,P,F,N)<=S*a.x+_*a.y||Math.min(A,P,F,N)>=S*d.x+_*d.y)}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=e*2,this.height+=n*2,this}fit(e){const n=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(r-n,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,n=.001){const r=Math.ceil((this.x+this.width-n)*e)/e,i=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=r-this.x,this.height=i-this.y,this}enlarge(e){const n=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=r-n,this.y=i,this.height=s-i,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class qw{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.radius=r,this.type=pr.CIRC}clone(){return new qw(this.x,this.y,this.radius)}contains(e,n){if(this.radius<=0)return!1;const r=this.radius*this.radius;let i=this.x-e,s=this.y-n;return i*=i,s*=s,i+s<=r}getBounds(){return new Ye(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Yw{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.width=r,this.height=i,this.type=pr.ELIP}clone(){return new Yw(this.x,this.y,this.width,this.height)}contains(e,n){if(this.width<=0||this.height<=0)return!1;let r=(e-this.x)/this.width,i=(n-this.y)/this.height;return r*=r,i*=i,r+i<=1}getBounds(){return new Ye(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class jc{constructor(...e){let n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){const r=[];for(let i=0,s=n.length;i<s;i++)r.push(n[i].x,n[i].y);n=r}this.points=n,this.type=pr.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),n=new jc(e);return n.closeStroke=this.closeStroke,n}contains(e,n){let r=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],u=this.points[s*2+1],h=this.points[o*2],d=this.points[o*2+1];u>n!=d>n&&e<(h-a)*((n-u)/(d-u))+a&&(r=!r)}return r}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((e,n)=>`${e}, ${n}`,"")}]`}}class Qw{constructor(e=0,n=0,r=0,i=0,s=20){this.x=e,this.y=n,this.width=r,this.height=i,this.radius=s,this.type=pr.RREC}clone(){return new Qw(this.x,this.y,this.width,this.height,this.radius)}contains(e,n){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+r&&n<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let i=e-(this.x+r),s=n-(this.y+r);const o=r*r;if(i*i+s*s<=o||(i=e-(this.x+this.width-r),i*i+s*s<=o)||(s=n-(this.y+this.height-r),i*i+s*s<=o)||(i=e-(this.x+r),i*i+s*s<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class rn{constructor(e=1,n=0,r=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,n,r,i,s,o){return this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o,this}toArray(e,n){this.array||(this.array=new Float32Array(9));const r=n||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,n){n=n||new Fe;const r=e.x,i=e.y;return n.x=this.a*r+this.c*i+this.tx,n.y=this.b*r+this.d*i+this.ty,n}applyInverse(e,n){n=n||new Fe;const r=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return n.x=this.d*r*i+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,n.y=this.a*r*s+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,n}translate(e,n){return this.tx+=e,this.ty+=n,this}scale(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this}rotate(e){const n=Math.cos(e),r=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*n-this.b*r,this.b=i*r+this.b*n,this.c=s*n-this.d*r,this.d=s*r+this.d*n,this.tx=o*n-this.ty*r,this.ty=o*r+this.ty*n,this}append(e){const n=this.a,r=this.b,i=this.c,s=this.d;return this.a=e.a*n+e.b*i,this.b=e.a*r+e.b*s,this.c=e.c*n+e.d*i,this.d=e.c*r+e.d*s,this.tx=e.tx*n+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*s+this.ty,this}setTransform(e,n,r,i,s,o,a,u,h){return this.a=Math.cos(a+h)*s,this.b=Math.sin(a+h)*s,this.c=-Math.sin(a-u)*o,this.d=Math.cos(a-u)*o,this.tx=e-(r*this.a+i*this.c),this.ty=n-(r*this.b+i*this.d),this}prepend(e){const n=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,i=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this}decompose(e){const n=this.a,r=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),u=Math.atan2(r,n),h=Math.abs(a+u);return h<1e-5||Math.abs(Ug-h)<1e-5?(e.rotation=u,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=u),e.scale.x=Math.sqrt(n*n+r*r),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*n+o.y*i),e.position.y=this.ty+(o.x*r+o.y*s),e}invert(){const e=this.a,n=this.b,r=this.c,i=this.d,s=this.tx,o=e*i-n*r;return this.a=i/o,this.b=-n/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-i*s)/o,this.ty=-(e*this.ty-n*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new rn;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new rn}static get TEMP_MATRIX(){return new rn}}const Vl=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Xl=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ql=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Yl=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Gx=[],a3=[],hm=Math.sign;function kF(){for(let t=0;t<16;t++){const e=[];Gx.push(e);for(let n=0;n<16;n++){const r=hm(Vl[t]*Vl[n]+ql[t]*Xl[n]),i=hm(Xl[t]*Vl[n]+Yl[t]*Xl[n]),s=hm(Vl[t]*ql[n]+ql[t]*Yl[n]),o=hm(Xl[t]*ql[n]+Yl[t]*Yl[n]);for(let a=0;a<16;a++)if(Vl[a]===r&&Xl[a]===i&&ql[a]===s&&Yl[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new rn;e.set(Vl[t],Xl[t],ql[t],Yl[t],0,0),a3.push(e)}}kF();const cn={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Vl[t],uY:t=>Xl[t],vX:t=>ql[t],vY:t=>Yl[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>Gx[t][e],sub:(t,e)=>Gx[t][cn.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?cn.S:cn.N:Math.abs(e)*2<=Math.abs(t)?t>0?cn.E:cn.W:e>0?t>0?cn.SE:cn.SW:t>0?cn.NE:cn.NW,matrixAppendRotationInv:(t,e,n=0,r=0)=>{const i=a3[cn.inv(e)];i.tx=n,i.ty=r,t.append(i)}};class sa{constructor(e,n,r=0,i=0){this._x=r,this._y=i,this.cb=e,this.scope=n}clone(e=this.cb,n=this.scope){return new sa(e,n,this._x,this._y)}set(e=0,n=e){return(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}const l3=class{constructor(){this.worldTransform=new rn,this.localTransform=new rn,this.position=new sa(this.onChange,this,0,0),this.scale=new sa(this.onChange,this,1,1),this.pivot=new sa(this.onChange,this,0,0),this.skew=new sa(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};let Dy=l3;Dy.IDENTITY=new l3;var RF=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,MF=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function J2(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}function Yv(t){const e=new Array(t);for(let n=0;n<e.length;n++)e[n]=!1;return e}function u3(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Yv(2*e);case"bvec3":return Yv(3*e);case"bvec4":return Yv(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Wc=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(t,e)=>t.type==="vec3"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],OF={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},NF={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function DF(t,e){var r;const n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const i in t.uniforms){const s=e[i];if(!s){(r=t.uniforms[i])!=null&&r.group&&(t.uniforms[i].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.${i}, syncData);
                    `));continue}const o=t.uniforms[i];let a=!1;for(let u=0;u<Wc.length;u++)if(Wc[u].test(s,o)){n.push(Wc[u].code(i,o)),a=!0;break}if(!a){const h=(s.size===1&&!s.isArray?OF:NF)[s.type].replace("location",`ud["${i}"].location`);n.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${h};`)}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}const c3={};let Ju=c3;function LF(){if(Ju===c3||Ju!=null&&Ju.isContextLost()){const t=we.ADAPTER.createCanvas();let e;we.PREFER_ENV>=Iu.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Ju=e}return Ju}let dm;function FF(){if(!dm){dm=ls.MEDIUM;const t=LF();t&&t.getShaderPrecisionFormat&&(dm=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?ls.HIGH:ls.MEDIUM)}return dm}function eT(t,e){const n=t.getShaderSource(e).split(`
`).map((h,d)=>`${d}: ${h}`),r=t.getShaderInfoLog(e),i=r.split(`
`),s={},o=i.map(h=>parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(h=>h&&!s[h]?(s[h]=!0,!0):!1),a=[""];o.forEach(h=>{n[h-1]=`%c${n[h-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const u=n.join(`
`);a[0]=u,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function BF(t,e,n,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||eT(t,n),t.getShaderParameter(r,t.COMPILE_STATUS)||eT(t,r),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const UF={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function h3(t){return UF[t]}let fm=null;const tT={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function d3(t,e){if(!fm){const n=Object.keys(tT);fm={};for(let r=0;r<n.length;++r){const i=n[r];fm[t[i]]=tT[i]}}return fm[e]}function nT(t,e,n){if(t.substring(0,9)!=="precision"){let r=e;return e===ls.HIGH&&n!==ls.HIGH&&(r=ls.MEDIUM),`precision ${r} float;
${t}`}else if(n!==ls.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}let sd;function zF(){if(typeof sd=="boolean")return sd;try{sd=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{sd=!1}return sd}let $F=0;const pm={},lc=class{constructor(t,e,n="pixi-shader",r={}){this.extra={},this.id=$F++,this.vertexSrc=t||lc.defaultVertexSrc,this.fragmentSrc=e||lc.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=r,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),pm[n]?(pm[n]++,n+=`-${pm[n]}`):pm[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=nT(this.vertexSrc,lc.defaultVertexPrecision,ls.HIGH),this.fragmentSrc=nT(this.fragmentSrc,lc.defaultFragmentPrecision,FF())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return MF}static get defaultFragmentSrc(){return RF}static from(t,e,n){const r=t+e;let i=q2[r];return i||(q2[r]=i=new lc(t,e,n)),i}};let Os=lc;Os.defaultVertexPrecision=ls.HIGH;Os.defaultFragmentPrecision=ia.apple.device?ls.HIGH:ls.MEDIUM;let HF=0;class Us{constructor(e,n,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=HF++,this.static=!!n,this.ubo=!!r,e instanceof bn?(this.buffer=e,this.buffer.type=Oo.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new bn(new Float32Array(1)),this.buffer.type=Oo.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,n,r){if(!this.ubo)this.uniforms[e]=new Us(n,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,n,r){return new Us(e,n,r)}static uboFrom(e,n){return new Us(e,n??!0,!0)}}class No{constructor(e,n){this.uniformBindCount=0,this.program=e,n?n instanceof Us?this.uniformGroup=n:this.uniformGroup=new Us(n):this.uniformGroup=new Us({}),this.disposeRunner=new Bs("disposeShader")}checkUniformExists(e,n){if(n.uniforms[e])return!0;for(const r in n.uniforms){const i=n.uniforms[r];if(i.group&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,n,r){const i=Os.from(e,n);return new No(i,r)}}class jF{constructor(e,n){if(this.vertexSrc=e,this.fragTemplate=n,this.programCache={},this.defaultGroupCache={},!n.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!n.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=s;this.defaultGroupCache[e]=Us.from({uSamplers:r},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Os(this.vertexSrc,i)}const n={tint:new Float32Array([1,1,1,1]),translationMatrix:new rn,default:this.defaultGroupCache[e]};return new No(this.programCache[e],n)}generateSampleSrc(e){let n="";n+=`
`,n+=`
`;for(let r=0;r<e;r++)r>0&&(n+=`
else `),r<e-1&&(n+=`if(vTextureId < ${r}.5)`),n+=`
{`,n+=`
	color = texture2D(uSamplers[${r}], vTextureCoord);`,n+=`
}`;return n+=`
`,n+=`
`,n}}class Vx{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function WF(){return!ia.apple.device}function GF(t){let e=!0;const n=we.ADAPTER.getNavigator();if(ia.tablet||ia.phone){if(ia.apple.device){const r=n.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(e=!1)}if(ia.android.device){const r=n.userAgent.match(/Android\s([0-9.]*)/);r&&parseInt(r[1],10)<7&&(e=!1)}}return e?t:4}class Ly{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var VF=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,XF=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const _s=class extends Ly{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=o3,this.vertexSize=6,this.state=va.for2d(),this.size=_s.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??GF(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??WF(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return at("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return XF}static get defaultFragmentTemplate(){return VF}setShaderGenerator({vertex:t=_s.defaultVertexSrc,fragment:e=_s.defaultFragmentTemplate}={}){this.shaderGenerator=new jF(t,e)}contextChange(){const t=this.renderer.gl;we.PREFER_ENV===Iu.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),_s.defaultMaxTextures),this.maxTextures=wF(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=_s,n=this.size/4,r=Math.floor(n/this.maxTextures)+1;for(;t.length<n;)t.push(new Wx);for(;e.length<r;)e.push(new Vx);for(let i=0;i<this.maxTextures;i++)this._tempBoundTextures[i]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,n=_s._textureArrayPool,r=this.renderer.batch,i=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++Ge._globalBatch,a=0,u=n[0],h=0;r.copyBoundTextures(i,e);for(let d=0;d<this._bufferSize;++d){const p=t[d];t[d]=null,p._batchEnabled!==o&&(u.count>=e&&(r.boundArray(u,i,o,e),this.buildDrawCalls(u,h,d),h=d,u=n[++a],++o),p._batchEnabled=o,p.touched=s,u.elements[u.count++]=p)}u.count>0&&(r.boundArray(u,i,o,e),this.buildDrawCalls(u,h,this._bufferSize),++a,++o);for(let d=0;d<i.length;d++)i[d]=null;Ge._globalBatch=o}buildDrawCalls(t,e,n){const{_bufferedElements:r,_attributeBuffer:i,_indexBuffer:s,vertexSize:o}=this,a=_s._drawCallPool;let u=this._dcIndex,h=this._aIndex,d=this._iIndex,p=a[u];p.start=this._iIndex,p.texArray=t;for(let f=e;f<n;++f){const g=r[f],v=g._texture.baseTexture,w=t3[v.alphaMode?1:0][g.blendMode];r[f]=null,e<f&&p.blend!==w&&(p.size=d-p.start,e=f,p=a[++u],p.texArray=t,p.start=d),this.packInterleavedGeometry(g,i,s,h,d),h+=g.vertexData.length/2*o,d+=g.indices.length,p.blend=w}e<n&&(p.size=d-p.start,++u),this._dcIndex=u,this._aIndex=h,this._iIndex=d}bindAndClearTexArray(t){const e=this.renderer.texture;for(let n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:n}=this;_s.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:n}=this.renderer,r=_s._drawCallPool;let i=null;for(let s=0;s<t;s++){const{texArray:o,type:a,size:u,start:h,blend:d}=r[s];i!==o&&(i=o,this.bindAndClearTexArray(o)),this.state.blendMode=d,n.set(this.state),e.drawElements(a,u,e.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),_s.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=Fg(Math.ceil(t/8)),n=X2(e),r=e*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new Hx(r*this.vertexSize*4)),i}getIndexBuffer(t){const e=Fg(Math.ceil(t/12)),n=X2(e),r=e*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i}packInterleavedGeometry(t,e,n,r,i){const{uint32View:s,float32View:o}=e,a=r/this.vertexSize,u=t.uvs,h=t.indices,d=t.vertexData,p=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),g=Rt.shared.setValue(t._tintRGB).toPremultiplied(f,t._texture.baseTexture.alphaMode>0);for(let v=0;v<d.length;v+=2)o[r++]=d[v],o[r++]=d[v+1],o[r++]=u[v],o[r++]=u[v+1],s[r++]=g,o[r++]=p;for(let v=0;v<h.length;v++)n[i++]=a+h[v]}};let ks=_s;ks.defaultBatchSize=4096;ks.extension={name:"batch",type:Te.RendererPlugin};ks._drawCallPool=[];ks._textureArrayPool=[];Me.add(ks);var qF=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,YF=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const xd=class extends No{constructor(t,e,n){const r=Os.from(t||xd.defaultVertexSrc,e||xd.defaultFragmentSrc);super(r,n),this.padding=0,this.resolution=xd.defaultResolution,this.multisample=xd.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new va}apply(t,e,n,r,i){t.applyFilter(this,e,n,r)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return YF}static get defaultFragmentSrc(){return qF}};let mr=xd;mr.defaultResolution=1;mr.defaultMultisample=kn.NONE;class Fy{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Rt(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:n,background:r,backgroundAlpha:i}=e,s=r??n;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}Fy.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};Fy.extension={type:[Te.RendererSystem,Te.CanvasRendererSystem],name:"background"};Me.add(Fy);class f3{constructor(e){this.renderer=e,this.emptyRenderer=new Ly(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,n){const{boundTextures:r}=this.renderer.texture;for(let i=n-1;i>=0;--i)e[i]=r[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,n,r,i){const{elements:s,ids:o,count:a}=e;let u=0;for(let h=0;h<a;h++){const d=s[h],p=d._batchLocation;if(p>=0&&p<i&&n[p]===d){o[h]=p;continue}for(;u<i;){const f=n[u];if(f&&f._batchEnabled===r&&f._batchLocation===u){u++;continue}o[h]=u,d._batchLocation=u,n[u]=d;break}}}destroy(){this.renderer=null}}f3.extension={type:Te.RendererSystem,name:"batch"};Me.add(f3);let rT=0;class By{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=rT++}init(e){if(e.context)this.initFromContext(e.context);else{const n=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:n,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=rT++,this.renderer.runners.contextChange.emit(e);const n=this.renderer.view;n.addEventListener!==void 0&&(n.addEventListener("webglcontextlost",this.handleContextLost,!1),n.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const n=this.createContext(this.renderer.view,e);this.initFromContext(n)}createContext(e,n){let r;if(we.PREFER_ENV>=Iu.WEBGL2&&(r=e.getContext("webgl2",n)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",n)||e.getContext("experimental-webgl",n),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,n={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,n,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,n,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const n=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),n&&!n.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}By.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};By.extension={type:Te.RendererSystem,name:"context"};Me.add(By);class QF extends Wf{upload(e,n,r){const i=e.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===js.UNPACK);const s=n.realWidth,o=n.realHeight;return r.width===s&&r.height===o?i.texSubImage2D(n.target,0,0,0,s,o,n.format,r.type,this.data):(r.width=s,r.height=o,i.texImage2D(n.target,0,r.internalFormat,s,o,0,n.format,r.type,this.data)),!0}}class Xx{constructor(e,n){this.width=Math.round(e||100),this.height=Math.round(n||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Bs("disposeFramebuffer"),this.multisample=kn.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,n){return this.colorTextures[e]=n||new Ge(null,{scaleMode:as.NEAREST,resolution:1,mipmap:Do.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Ge(new QF(null,{width:this.width,height:this.height}),{scaleMode:as.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Do.OFF,format:ye.DEPTH_COMPONENT,type:Be.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,n){if(e=Math.round(e),n=Math.round(n),!(e===this.width&&n===this.height)){this.width=e,this.height=n,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const i=this.colorTextures[r],s=i.resolution;i.setSize(e/s,n/s)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,n/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class p3 extends Ge{constructor(e={}){if(typeof e=="number"){const n=arguments[0],r=arguments[1],i=arguments[2],s=arguments[3];e={width:n,height:r,scaleMode:i,resolution:s}}e.width=e.width||100,e.height=e.height||100,e.multisample??(e.multisample=kn.NONE),super(null,e),this.mipmap=Do.OFF,this.valid=!0,this._clear=new Rt([0,0,0,0]),this.framebuffer=new Xx(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(e,n){this.framebuffer.resize(e*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class yl extends xf{constructor(e){const n=e,r=n.naturalWidth||n.videoWidth||n.width,i=n.naturalHeight||n.videoHeight||n.height;super(r,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,n,r){r===void 0&&!n.startsWith("data:")?e.crossOrigin=vF(n):r!==!1&&(e.crossOrigin=typeof r=="string"?r:"anonymous")}upload(e,n,r,i){const s=e.gl,o=n.realWidth,a=n.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1&&i.buffered.length===0)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===js.UNPACK),!this.noSubImage&&n.target===s.TEXTURE_2D&&r.width===o&&r.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,n.format,r.type,i):(r.width=o,r.height=a,s.texImage2D(n.target,0,r.internalFormat,n.format,r.type,i)),!0}update(){if(this.destroyed)return;const e=this.source,n=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(n,r),super.update()}dispose(){this.source=null}}class m3 extends yl{constructor(e,n){if(n=n||{},typeof e=="string"){const r=new Image;yl.crossOrigin(r,e,n.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(n.createBitmap??we.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,this.bitmap=null,this._load=null,n.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((n,r)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.resize(i.width,i.height),this._load=null,this.createBitmap?n(this.process()):n(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{r(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const n=globalThis.createImageBitmap,r=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then(i=>i.blob()).then(i=>n(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===js.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,n,r){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,n,r,this.bitmap),!this.preserveBitmap){let i=!0;const s=n._glTextures;for(const o in s){const a=s[o];if(a!==r&&a.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class g3{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,n,r){const i=n.width,s=n.height;if(r){const o=e.width/2/i,a=e.height/2/s,u=e.x/i+o,h=e.y/s+a;r=cn.add(r,cn.NW),this.x0=u+o*cn.uX(r),this.y0=h+a*cn.uY(r),r=cn.add(r,2),this.x1=u+o*cn.uX(r),this.y1=h+a*cn.uY(r),r=cn.add(r,2),this.x2=u+o*cn.uX(r),this.y2=h+a*cn.uY(r),r=cn.add(r,2),this.x3=u+o*cn.uX(r),this.y3=h+a*cn.uY(r)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const iT=new g3;function mm(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class _e extends Bo{constructor(e,n,r,i,s,o,a){if(super(),this.noFrame=!1,n||(this.noFrame=!0,n=new Ye(0,0,1,1)),e instanceof _e&&(e=e.baseTexture),this.baseTexture=e,this._frame=n,this.trim=i,this.valid=!1,this._uvs=iT,this.uvMatrix=null,this.orig=r||n,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Fe(o.x,o.y):new Fe(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=n:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:n}=this.baseTexture;n!=null&&n.url&&To[n.url]&&_e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,_e.removeFromCache(this),this.textureCacheIds=null}clone(){var i;const e=this._frame.clone(),n=this._frame===this.orig?e:this.orig.clone(),r=new _e(this.baseTexture,!this.noFrame&&e,n,(i=this.trim)==null?void 0:i.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===iT&&(this._uvs=new g3),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,n={},r=we.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else if(e instanceof Ge){if(!e.cacheId){const a=(n==null?void 0:n.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${bu()}`,Ge.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=(n==null?void 0:n.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${bu()}`}s=e._pixiId}let o=To[s];if(i&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof Ge)?(n.resolution||(n.resolution=ml(e)),o=new _e(new Ge(e,n)),o.baseTexture.cacheId=s,Ge.addToCache(o.baseTexture,s),_e.addToCache(o,s)):!o&&e instanceof Ge&&(o=new _e(e),_e.addToCache(o,s)),o}static fromURL(e,n){const r=Object.assign({autoLoad:!1},n==null?void 0:n.resourceOptions),i=_e.from(e,Object.assign({resourceOptions:r},n),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,n,r,i){return new _e(Ge.fromBuffer(e,n,r,i))}static fromLoader(e,n,r,i){const s=new Ge(e,Object.assign({scaleMode:Ge.defaultOptions.scaleMode,resolution:ml(n)},i)),{resource:o}=s;o instanceof m3&&(o.url=n);const a=new _e(s);return r||(r=n),Ge.addToCache(a.baseTexture,r),_e.addToCache(a,r),r!==n&&(Ge.addToCache(a.baseTexture,n),_e.addToCache(a,n)),a.baseTexture.valid?Promise.resolve(a):new Promise(u=>{a.baseTexture.once("loaded",()=>u(a))})}static addToCache(e,n){n&&(e.textureCacheIds.includes(n)||e.textureCacheIds.push(n),To[n]&&To[n]!==e&&console.warn(`Texture added to the cache with an id [${n}] that already had an entry`),To[n]=e)}static removeFromCache(e){if(typeof e=="string"){const n=To[e];if(n){const r=n.textureCacheIds.indexOf(e);return r>-1&&n.textureCacheIds.splice(r,1),delete To[e],n}}else if(e!=null&&e.textureCacheIds){for(let n=0;n<e.textureCacheIds.length;++n)To[e.textureCacheIds[n]]===e&&delete To[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:n,y:r,width:i,height:s}=e,o=n+i>this.baseTexture.width,a=r+s>this.baseTexture.height;if(o||a){const u=o&&a?"and":"or",h=`X: ${n} + ${i} = ${n+i} > ${this.baseTexture.width}`,d=`Y: ${r} + ${s} = ${r+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${h} ${u} ${d}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return _e._EMPTY||(_e._EMPTY=new _e(new Ge),mm(_e._EMPTY),mm(_e._EMPTY.baseTexture)),_e._EMPTY}static get WHITE(){if(!_e._WHITE){const e=we.ADAPTER.createCanvas(16,16),n=e.getContext("2d");e.width=16,e.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),_e._WHITE=new _e(Ge.from(e)),mm(_e._WHITE),mm(_e._WHITE.baseTexture)}return _e._WHITE}}class Pu extends _e{constructor(e,n){super(e,n),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,n,r=!0){const i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(n*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,r&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:n}=this;n.resolution!==e&&(n.setResolution(e),this.resize(n.width,n.height,!1))}static create(e){return new Pu(new p3(e))}}class y3{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,n,r=kn.NONE){const i=new p3(Object.assign({width:e,height:n,resolution:1,multisample:r},this.textureOptions));return new Pu(i)}getOptimalTexture(e,n,r=1,i=kn.NONE){let s;e=Math.ceil(e*r-1e-6),n=Math.ceil(n*r-1e-6),!this.enableFullScreen||e!==this._pixelsWidth||n!==this._pixelsHeight?(e=Fg(e),n=Fg(n),s=((e&65535)<<16|n&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,n,i)),o.filterPoolKey=s,o.setResolution(r),o}getFilterTexture(e,n,r){const i=this.getOptimalTexture(e.width,e.height,n||e.resolution,r||kn.NONE);return i.filterFrame=e.filterFrame,i}returnTexture(e){const n=e.filterPoolKey;e.filterFrame=null,this.texturePool[n].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const n in this.texturePool){const r=this.texturePool[n];if(r)for(let i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const n in this.texturePool){if(!(Number(n)<0))continue;const r=this.texturePool[n];if(r)for(let i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[n]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}y3.SCREEN_KEY=-1;class KF extends gl{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class v3 extends gl{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new bn(this.vertices),this.uvBuffer=new bn(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,n){let r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+n.width/e.width,this.uvs[3]=i,this.uvs[4]=r+n.width/e.width,this.uvs[5]=i+n.height/e.height,this.uvs[6]=r,this.uvs[7]=i+n.height/e.height,r=n.x,i=n.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+n.width,this.vertices[3]=i,this.vertices[4]=r+n.width,this.vertices[5]=i+n.height,this.vertices[6]=r,this.vertices[7]=i+n.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class ZF{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=kn.NONE,this.sourceFrame=new Ye,this.destinationFrame=new Ye,this.bindingSourceFrame=new Ye,this.bindingDestinationFrame=new Ye,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const gm=[new Fe,new Fe,new Fe,new Fe],Qv=new rn;class x3{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new y3,this.statePool=[],this.quad=new KF,this.quadUv=new v3,this.tempRect=new Ye,this.activeState={},this.globalUniforms=new Us({outputFrame:new Ye,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,n){const r=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new ZF,o=this.renderer.renderTexture;let a=n[0].resolution,u=n[0].multisample,h=n[0].padding,d=n[0].autoFit,p=n[0].legacy??!0;for(let v=1;v<n.length;v++){const w=n[v];a=Math.min(a,w.resolution),u=Math.min(u,w.multisample),h=this.useMaxPadding?Math.max(h,w.padding):h+w.padding,d=d&&w.autoFit,p=p||(w.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=a,s.multisample=u,s.legacy=p,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(h);const f=this.tempRect.copyFrom(o.sourceFrame);r.projection.transform&&this.transformAABB(Qv.copyFrom(r.projection.transform).invert(),f),d?(s.sourceFrame.fit(f),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(f)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:r.resolution,o.sourceFrame,o.destinationFrame,r.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a,u),s.filters=n,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const g=this.tempRect;g.x=0,g.y=0,g.width=s.sourceFrame.width,g.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=r.projection.transform,r.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,g),r.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,n=e.pop(),r=n.filters;this.activeState=n;const i=this.globalUniforms.uniforms;i.outputFrame=n.sourceFrame,i.resolution=n.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=n.destinationFrame.width,s[1]=n.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*n.resolution),o[1]=Math.round(s[1]*n.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=n.sourceFrame.width*s[2]-.5*o[2],a[3]=n.sourceFrame.height*s[3]-.5*o[3],n.legacy){const h=i.filterArea;h[0]=n.destinationFrame.width,h[1]=n.destinationFrame.height,h[2]=n.sourceFrame.x,h[3]=n.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const u=e[e.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,n.renderTexture,u.renderTexture,Ao.BLEND,n),this.returnFilterTexture(n.renderTexture);else{let h=n.renderTexture,d=this.getOptimalFilterTexture(h.width,h.height,n.resolution);d.filterFrame=h.filterFrame;let p=0;for(p=0;p<r.length-1;++p){p===1&&n.multisample>1&&(d=this.getOptimalFilterTexture(h.width,h.height,n.resolution),d.filterFrame=h.filterFrame),r[p].apply(this,h,d,Ao.CLEAR,n);const f=h;h=d,d=f}r[p].apply(this,h,u.renderTexture,Ao.BLEND,n),p>1&&n.multisample>1&&this.returnFilterTexture(n.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(d)}n.clear(),this.statePool.push(n)}bindAndClear(e,n=Ao.CLEAR){const{renderTexture:r,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e!=null&&e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,r.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(n===Ao.CLEAR||n===Ao.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,n,r,i){const s=this.renderer;s.state.set(e.state),this.bindAndClear(r,i),e.uniforms.uSampler=n,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(n._frame,n.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Ms.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Ms.TRIANGLE_STRIP))}calculateSpriteMatrix(e,n){const{sourceFrame:r,destinationFrame:i}=this.activeState,{orig:s}=n._texture,o=e.set(i.width,0,0,i.height,r.x,r.y),a=n.worldTransform.copyTo(rn.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(n.anchor.x,n.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,n,r=1,i=kn.NONE){return this.texturePool.getOptimalTexture(e,n,r,i)}getFilterTexture(e,n,r){if(typeof e=="number"){const s=e;e=n,n=s}e=e||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(e.width,e.height,n||e.resolution,r||kn.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,n){const r=gm[0],i=gm[1],s=gm[2],o=gm[3];r.set(n.left,n.top),i.set(n.left,n.bottom),s.set(n.right,n.top),o.set(n.right,n.bottom),e.apply(r,r),e.apply(i,i),e.apply(s,s),e.apply(o,o);const a=Math.min(r.x,i.x,s.x,o.x),u=Math.min(r.y,i.y,s.y,o.y),h=Math.max(r.x,i.x,s.x,o.x),d=Math.max(r.y,i.y,s.y,o.y);n.x=a,n.y=u,n.width=h-a,n.height=d-u}roundFrame(e,n,r,i,s){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(s){const{a:o,b:a,c:u,d:h}=s;if((Math.abs(a)>1e-4||Math.abs(u)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(h)>1e-4))return}s=s?Qv.copyFrom(s):Qv.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(n),this.transformAABB(s.invert(),e)}}}x3.extension={type:Te.RendererSystem,name:"filter"};Me.add(x3);class JF{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=kn.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const eB=new Ye;class _3{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new Xx(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ye,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let n=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;we.PREFER_ENV===Iu.WEBGL_LEGACY&&(n=null,r=null),n?e.drawBuffers=i=>n.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,n,r=0){const{gl:i}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=r),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),n){const o=n.width>>r,a=n.height>>r,u=o/n.width;this.setViewport(n.x*u,n.y*u,o,a)}else{const o=e.width>>r,a=e.height>>r;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),n?this.setViewport(n.x,n.y,n.width,n.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,n,r,i){const s=this.viewport;e=Math.round(e),n=Math.round(n),r=Math.round(r),i=Math.round(i),(s.width!==r||s.height!==i||s.x!==e||s.y!==n)&&(s.x=e,s.y=n,s.width=r,s.height=i,this.gl.viewport(e,n,r,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,n,r,i,s=Ex.COLOR|Ex.DEPTH){const{gl:o}=this;o.clearColor(e,n,r,i),o.clear(s)}initFramebuffer(e){const{gl:n}=this,r=new JF(n.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){const{gl:n}=this,r=e.glFramebuffers[this.CONTEXT_UID];r.stencil&&(n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height));const i=e.colorTextures;let s=i.length;n.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],u=a.parentTextureArray||a;this.renderer.texture.bind(u,0),o===0&&r.msaaBuffer&&(n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,n){const{gl:r}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;r.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||r.createRenderbuffer():i.msaaBuffer&&(r.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let u=0;u<o;u++){const h=s[u],d=h.parentTextureArray||h;this.renderer.texture.bind(d,0),u===0&&i.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,d._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+u,h.target,d._glTextures[this.CONTEXT_UID].texture,n),a.push(r.COLOR_ATTACHMENT0+u))}if(a.length>1&&r.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const h=e.depthTexture;this.renderer.texture.bind(h,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,n)}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,i.stencil)):i.stencil&&(r.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:n}=this;let r=kn.NONE;if(e<=1||n===null)return r;for(let i=0;i<n.length;i++)if(n[i]<=e){r=n[i];break}return r===1&&(r=kn.NONE),r}blit(e,n,r){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const u=i.glFramebuffers[a];if(!u)return;if(!e){if(!u.msaaBuffer)return;const d=i.colorTextures[0];if(!d)return;u.blitFramebuffer||(u.blitFramebuffer=new Xx(i.width,i.height),u.blitFramebuffer.addColorTexture(0,d)),e=u.blitFramebuffer,e.colorTextures[0]!==d&&(e.colorTextures[0]=d,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}n||(n=eB,n.width=i.width,n.height=i.height),r||(r=n);const h=n.width===r.width&&n.height===r.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(n.left,n.top,n.right,n.bottom,r.left,r.top,r.right,r.bottom,o.COLOR_BUFFER_BIT,h?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,n){const r=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),n||(i.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&i.deleteRenderbuffer(r.msaaBuffer),r.stencil&&i.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,n)}disposeAll(e){const n=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<n.length;r++)this.disposeFramebuffer(n[r],e)}forceStencil(){const e=this.current;if(!e)return;const n=e.glFramebuffers[this.CONTEXT_UID];if(!n||n.stencil)return;e.stencil=!0;const r=e.width,i=e.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),n.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,s.DEPTH24_STENCIL8,r,i):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,r,i),n.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ye}destroy(){this.renderer=null}}_3.extension={type:Te.RendererSystem,name:"framebuffer"};Me.add(_3);const Kv={5126:4,5123:2,5121:1};class w3{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,n=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,n.webGLVersion!==2){let r=this.renderer.context.extensions.vertexArrayObject;we.PREFER_ENV===Iu.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=()=>r.createVertexArrayOES(),e.bindVertexArray=i=>r.bindVertexArrayOES(i),e.deleteVertexArray=i=>r.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(n.webGLVersion!==2){const r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=(i,s)=>r.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,a,u)=>r.drawElementsInstancedANGLE(i,s,o,a,u),e.drawArraysInstanced=(i,s,o,a)=>r.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=n.webGLVersion===2||!!n.extensions.uint32ElementIndex}bind(e,n){n=n||this.renderer.shader.shader;const{gl:r}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[n.program.id]||this.initGeometryVao(e,n,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(e,n.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,n=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++){const i=e.buffers[r];n.update(i)}}checkCompatibility(e,n){const r=e.attributes,i=n.attributeData;for(const s in i)if(!r[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,n){const r=e.attributes,i=n.attributeData,s=["g",e.id];for(const o in r)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,n,r=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=n.program;a.glPrograms[s]||this.renderer.shader.generateProgram(n),this.checkCompatibility(e,a);const u=this.getSignature(e,a),h=e.glVertexArrayObjects[this.CONTEXT_UID];let d=h[u];if(d)return h[a.id]=d,d;const p=e.buffers,f=e.attributes,g={},v={};for(const w in p)g[w]=0,v[w]=0;for(const w in f)!f[w].size&&a.attributeData[w]?f[w].size=a.attributeData[w].size:f[w].size||console.warn(`PIXI Geometry attribute '${w}' size cannot be determined (likely the bound shader does not have the attribute)`),g[f[w].buffer]+=f[w].size*Kv[f[w].type];for(const w in f){const C=f[w],b=C.size;C.stride===void 0&&(g[C.buffer]===b*Kv[C.type]?C.stride=0:C.stride=g[C.buffer]),C.start===void 0&&(C.start=v[C.buffer],v[C.buffer]+=b*Kv[C.type])}d=i.createVertexArray(),i.bindVertexArray(d);for(let w=0;w<p.length;w++){const C=p[w];o.bind(C),r&&C._glBuffers[s].refCount++}return this.activateVao(e,a),h[a.id]=d,h[u]=d,i.bindVertexArray(null),o.unbind(Oo.ARRAY_BUFFER),d}disposeGeometry(e,n){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!r){if(o)for(let u=0;u<s.length;u++){const h=s[u]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!n&&o.dispose(s[u],n))}if(!n){for(const u in r)if(u[0]==="g"){const h=r[u];this._activeVao===h&&this.unbind(),i.deleteVertexArray(h)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const n=Object.keys(this.managedGeometries);for(let r=0;r<n.length;r++)this.disposeGeometry(this.managedGeometries[n[r]],e)}activateVao(e,n){const r=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let u=null;for(const h in a){const d=a[h],p=o[d.buffer],f=p._glBuffers[i];if(n.attributeData[h]){u!==f&&(s.bind(p),u=f);const g=n.attributeData[h].location;if(r.enableVertexAttribArray(g),r.vertexAttribPointer(g,d.size,d.type||r.FLOAT,d.normalized,d.stride,d.start),d.instance)if(this.hasInstance)r.vertexAttribDivisor(g,d.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,n,r,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,u=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,n||o.indexBuffer.data.length,u,(r||0)*a,i||1):s.drawElements(e,n||o.indexBuffer.data.length,u,(r||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,r,n||o.getSize(),i||1):s.drawArrays(e,r,n||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}w3.extension={type:Te.RendererSystem,name:"geometry"};Me.add(w3);const sT=new rn;class Kw{constructor(e,n){this._texture=e,this.mapCoord=new rn,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof n>"u"?.5:n,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,n){n===void 0&&(n=e);const r=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];n[i]=s*r.a+o*r.c+r.tx,n[i+1]=s*r.b+o*r.d+r.ty}return n}update(e){const n=this._texture;if(!n||!n.valid||!e&&this._textureID===n._updateID)return!1;this._textureID=n._updateID,this._updateID++;const r=n._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const i=n.orig,s=n.trim;s&&(sT.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(sT));const o=n.baseTexture,a=this.uClampFrame,u=this.clampMargin/o.resolution,h=this.clampOffset;return a[0]=(n._frame.x+u+h)/o.width,a[1]=(n._frame.y+u+h)/o.height,a[2]=(n._frame.x+n._frame.width-u+h)/o.width,a[3]=(n._frame.y+n._frame.height-u+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=n._frame.width===o.width&&n._frame.height===o.height&&n.rotate===0,!0}}var tB=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,nB=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class rB extends mr{constructor(e,n,r){let i=null;typeof e!="string"&&n===void 0&&r===void 0&&(i=e,e=void 0,n=void 0,r=void 0),super(e||nB,n||tB,r),this.maskSprite=i,this.maskMatrix=new rn}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,n,r,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Kw(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,n,r,i))}}class iB{constructor(e=null){this.type=Hn.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=mr.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Hn.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class b3{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,n){let r=n;if(!r.isMaskData){const s=this.maskDataPool.pop()||new iB;s.pooled=!0,s.maskObject=n,r=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(i),r._colorMask=i?i._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==Hn.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case Hn.SCISSOR:this.renderer.scissor.push(r);break;case Hn.STENCIL:this.renderer.stencil.push(r);break;case Hn.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case Hn.COLOR:this.pushColorMask(r);break}r.type===Hn.SPRITE&&this.maskStack.push(r)}pop(e){const n=this.maskStack.pop();if(!(!n||n._target!==e)){if(n.enabled)switch(n.type){case Hn.SCISSOR:this.renderer.scissor.pop(n);break;case Hn.STENCIL:this.renderer.stencil.pop(n.maskObject);break;case Hn.SPRITE:this.popSpriteMask(n);break;case Hn.COLOR:this.popColorMask(n);break}if(n.reset(),n.pooled&&this.maskDataPool.push(n),this.maskStack.length!==0){const r=this.maskStack[this.maskStack.length-1];r.type===Hn.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}}detect(e){const n=e.maskObject;n?n.isSprite?e.type=Hn.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Hn.SCISSOR:e.type=Hn.STENCIL:e.type=Hn.COLOR}pushSpriteMask(e){const{maskObject:n}=e,r=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new rB]));const s=this.renderer,o=s.renderTexture;let a,u;if(o.current){const d=o.current;a=e.resolution||d.resolution,u=e.multisample??d.multisample}else a=e.resolution||s.resolution,u=e.multisample??s.multisample;i[0].resolution=a,i[0].multisample=u,i[0].maskSprite=n;const h=r.filterArea;r.filterArea=n.getBounds(!0),s.filter.push(r,i),r.filterArea=h,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const n=e._colorMask,r=e._colorMask=n&e.colorMask;r!==n&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}popColorMask(e){const n=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==n&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}destroy(){this.renderer=null}}b3.extension={type:Te.RendererSystem,name:"mask"};Me.add(b3);class S3{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:n}=this.renderer,r=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==r&&(i===0?n.disable(this.glConst):(n.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const oT=new rn,aT=[],eg=class extends S3{constructor(t){super(t),this.glConst=we.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:n}=t,{renderer:r}=this,i=r.renderTexture,s=n.getBounds(!0,aT.pop()??new Ye);this.roundFrameToPixels(s,i.current?i.current.resolution:r.resolution,i.sourceFrame,i.destinationFrame,r.projection.transform),e&&s.fit(e),t._scissorRectLocal=s}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:n,c:r,d:i}=t;return(Math.abs(n)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||eg.isMatrixRotated(e.worldTransform)||eg.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const n=t._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(t,e,n,r,i){eg.isMatrixRotated(i)||(i=i?oT.copyFrom(i):oT.identity(),i.translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.renderer.filter.transformAABB(i,t),t.fit(r),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&aT.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};let E3=eg;E3.extension={type:Te.RendererSystem,name:"scissor"};Me.add(E3);class T3 extends S3{constructor(e){super(e),this.glConst=we.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const n=e.maskObject,{gl:r}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,i,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,s!==0&&(e._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const n=this.renderer.gl;if(this.getStackLength()===0)n.disable(n.STENCIL_TEST);else{const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=r?r._colorMask:15;i!==0&&(r._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilOp(n.KEEP,n.KEEP,n.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(r._colorMask=i,n.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}T3.extension={type:Te.RendererSystem,name:"stencil"};Me.add(T3);class C3{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return at("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return at("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return at("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const n in e)this.plugins[n]=new e[n](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}C3.extension={type:[Te.RendererSystem,Te.CanvasRendererSystem],name:"_plugin"};Me.add(C3);class A3{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new rn,this.transform=null}update(e,n,r,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=n||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,n,r,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/n.width*2,s.d=o*(1/n.height*2),s.tx=-1-n.x*s.a,s.ty=-o-n.y*s.d}setTransform(e){}destroy(){this.renderer=null}}A3.extension={type:Te.RendererSystem,name:"projection"};Me.add(A3);const sB=new Dy;class I3{constructor(e){this.renderer=e,this._tempMatrix=new rn}generateTexture(e,n){const{region:r,...i}=n||{},s=r||e.getLocalBounds(null,!0);s.width===0&&(s.width=1),s.height===0&&(s.height=1);const o=Pu.create({width:s.width,height:s.height,...i});this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const a=e.transform;return e.transform=sB,this.renderer.render(e,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=a,o}destroy(){}}I3.extension={type:[Te.RendererSystem,Te.CanvasRendererSystem],name:"textureGenerator"};Me.add(I3);const zl=new Ye,od=new Ye;class P3{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ye,this.destinationFrame=new Ye,this.viewportFrame=new Ye}contextChange(){var n;const e=(n=this.renderer)==null?void 0:n.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,n,r){const i=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,n||(zl.width=e.frame.width,zl.height=e.frame.height,n=zl),r||(od.x=e.frame.x,od.y=e.frame.y,od.width=n.width,od.height=n.height,r=od),o=s.framebuffer):(a=i.resolution,n||(zl.width=i._view.screen.width,zl.height=i._view.screen.height,n=zl),r||(r=zl,r.width=n.width,r.height=n.height));const u=this.viewportFrame;u.x=r.x*a,u.y=r.y*a,u.width=r.width*a,u.height=r.height*a,e||(u.y=i.view.height-(u.y+u.height)),u.ceil(),this.renderer.framebuffer.bind(o,u),this.renderer.projection.update(r,n,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(n),this.destinationFrame.copyFrom(r)}clear(e,n){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=Rt.shared.setValue(e||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:u,y:h,width:d,height:p}=this.viewportFrame;u=Math.round(u),h=Math.round(h),d=Math.round(d),p=Math.round(p),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(u,h,d,p)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,n),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}P3.extension={type:Te.RendererSystem,name:"renderTexture"};Me.add(P3);class oB{constructor(e,n){this.program=e,this.uniformData=n,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function aB(t,e){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=e.getActiveAttrib(t,i);if(s.name.startsWith("gl_"))continue;const o=d3(e,s.type),a={type:o,name:s.name,size:h3(o),location:e.getAttribLocation(t,s.name)};n[s.name]=a}return n}function lB(t,e){const n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;i++){const s=e.getActiveUniform(t,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),u=d3(e,s.type);n[o]={name:o,index:i,type:u,size:s.size,isArray:a,value:u3(u,s.size)}}return n}function uB(t,e){var u;const n=J2(t,t.VERTEX_SHADER,e.vertexSrc),r=J2(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();t.attachShader(i,n),t.attachShader(i,r);const s=(u=e.extra)==null?void 0:u.transformFeedbackVaryings;if(s&&(typeof t.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||BF(t,i,n,r),e.attributeData=aB(i,t),e.uniformData=lB(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const h=Object.keys(e.attributeData);h.sort((d,p)=>d>p?1:-1);for(let d=0;d<h.length;d++)e.attributeData[h[d]].location=d,t.bindAttribLocation(i,d,h[d]);t.linkProgram(i)}t.deleteShader(n),t.deleteShader(r);const o={};for(const h in e.uniformData){const d=e.uniformData[h];o[h]={location:t.getUniformLocation(i,h),value:u3(d.type,d.size)}}return new oB(i,o)}function cB(t,e,n,r,i){n.buffer.update(i)}const hB={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},k3={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function dB(t){const e=t.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let n=0,r=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(n=k3[o.data.type],o.data.size>1&&(n=Math.max(n,16)*o.data.size),o.dataLen=n,r%n!==0&&r<16){const a=r%n%16;r+=a,i+=a}r+n>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=n,r=n):(o.offset=i,r+=n,i+=n)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function fB(t,e){const n=[];for(const r in t)e[r]&&n.push(e[r]);return n.sort((r,i)=>r.index-i.index),n}function pB(t,e){if(!t.autoManage)return{size:0,syncFunc:cB};const n=fB(t.uniforms,e),{uboElements:r,size:i}=dB(n),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<r.length;o++){const a=r[o],u=t.uniforms[a.data.name],h=a.data.name;let d=!1;for(let p=0;p<Wc.length;p++){const f=Wc[p];if(f.codeUbo&&f.test(a.data,u)){s.push(`offset = ${a.offset/4};`,Wc[p].codeUbo(a.data.name,u)),d=!0;break}}if(!d)if(a.data.size>1){const p=h3(a.data.type),f=Math.max(k3[a.data.type]/16,1),g=p/f,v=(4-g%4)%4;s.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*f}; i++)
                {
                    for(var j = 0; j < ${g}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${v};
                }

                `)}else{const p=hB[a.data.type];s.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};
                ${p};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let mB=0;const ym={textureCount:0,uboCount:0};class R3{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=mB++}systemCheck(){if(!zF())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,n){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const r=e.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),n||(ym.textureCount=0,ym.uboCount=0,this.syncUniformGroup(e.uniformGroup,ym)),i}setUniforms(e){const n=this.shader.program,r=n.glPrograms[this.renderer.CONTEXT_UID];n.syncUniforms(r.uniformData,e,this.renderer)}syncUniformGroup(e,n){const r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,n))}syncUniforms(e,n,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(n.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){const n=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[n]||(this.cache[n]=DF(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[n],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,n){const r=this.getGlProgram();if(!e.static||e.dirtyId!==0||!r.uniformGroups[e.id]){e.dirtyId=0;const i=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,n);e.buffer.update(),i(r.uniformData,e.uniforms,this.renderer,ym,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[n])}createSyncBufferGroup(e,n,r){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(n.program,r);n.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(n.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=pB(e,this.shader.program.uniformData)),e.autoManage){const u=new Float32Array(a.size/4);e.buffer.update(u)}return n.uniformGroups[e.id]=a.syncFunc,n.uniformGroups[e.id]}getSignature(e,n,r){const i=e.uniforms,s=[`${r}-`];for(const o in i)s.push(o),n[o]&&s.push(n[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const n=this.gl,r=e.program,i=uB(n,r);return r.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}R3.extension={type:Te.RendererSystem,name:"shader"};Me.add(R3);class Uy{constructor(e){this.renderer=e}run(e){const{renderer:n}=this;n.runners.init.emit(n.options),e.hello&&console.log(`PixiJS 7.2.4 - ${n.rendererLogId} - https://pixijs.com`),n.resize(n.screen.width,n.screen.height)}destroy(){}}Uy.defaultOptions={hello:!1};Uy.extension={type:[Te.RendererSystem,Te.CanvasRendererSystem],name:"startup"};Me.add(Uy);function gB(t,e=[]){return e[Ue.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.ADD]=[t.ONE,t.ONE],e[Ue.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.NONE]=[0,0],e[Ue.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[Ue.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ue.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[Ue.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[Ue.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Ue.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[Ue.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[Ue.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[Ue.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[Ue.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Ue.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const yB=0,vB=1,xB=2,_B=3,wB=4,bB=5,qx=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Ue.NONE,this._blendEq=!1,this.map=[],this.map[yB]=this.setBlend,this.map[vB]=this.setOffset,this.map[xB]=this.setCullFace,this.map[_B]=this.setDepthTest,this.map[wB]=this.setFrontFace,this.map[bB]=this.setDepthMask,this.checks=[],this.defaultState=new va,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=gB(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,n=0;for(;e;)e&1&&this.map[n].call(this,!!(t.data&1<<n)),e=e>>1,n++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(qx.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(qx.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],n=this.gl;e.length===2?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const n=this.checks.indexOf(t);e&&n===-1?this.checks.push(t):!e&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let M3=qx;M3.extension={type:Te.RendererSystem,name:"state"};Me.add(M3);class SB extends Bo{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const n=(e.priority??[]).filter(i=>e.systems[i]),r=[...n,...Object.keys(e.systems).filter(i=>!n.includes(i))];for(const i of r)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(n=>{this.runners[n]=new Bs(n)})}addSystem(e,n){const r=new e(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=r,this._systemsHash[n]=r;for(const i in this.runners)this.runners[i].add(r);return this}emitWithCustomOptions(e,n){const r=Object.keys(this._systemsHash);e.items.forEach(i=>{const s=r.find(o=>this._systemsHash[o]===i);i[e.name](n[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const tg=class{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=tg.defaultMaxIdle,this.checkCountMax=tg.defaultCheckCountMax,this.mode=tg.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Bw.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let n=!1;for(let r=0;r<e.length;r++){const i=e[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[r]=null,n=!0)}if(n){let r=0;for(let i=0;i<e.length;i++)e[i]!==null&&(e[r++]=e[i]);e.length=r}}unload(t){const e=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&e.destroyTexture(n);for(let r=t.children.length-1;r>=0;r--)this.unload(t.children[r])}destroy(){this.renderer=null}};let Rs=tg;Rs.defaultMode=Bw.AUTO;Rs.defaultMaxIdle=60*60;Rs.defaultCheckCountMax=60*10;Rs.extension={type:Te.RendererSystem,name:"textureGC"};Me.add(Rs);class Zv{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Be.UNSIGNED_BYTE,this.internalFormat=ye.RGBA,this.samplerType=0}}function EB(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[Be.UNSIGNED_BYTE]:{[ye.RGBA]:t.RGBA8,[ye.RGB]:t.RGB8,[ye.RG]:t.RG8,[ye.RED]:t.R8,[ye.RGBA_INTEGER]:t.RGBA8UI,[ye.RGB_INTEGER]:t.RGB8UI,[ye.RG_INTEGER]:t.RG8UI,[ye.RED_INTEGER]:t.R8UI,[ye.ALPHA]:t.ALPHA,[ye.LUMINANCE]:t.LUMINANCE,[ye.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[Be.BYTE]:{[ye.RGBA]:t.RGBA8_SNORM,[ye.RGB]:t.RGB8_SNORM,[ye.RG]:t.RG8_SNORM,[ye.RED]:t.R8_SNORM,[ye.RGBA_INTEGER]:t.RGBA8I,[ye.RGB_INTEGER]:t.RGB8I,[ye.RG_INTEGER]:t.RG8I,[ye.RED_INTEGER]:t.R8I},[Be.UNSIGNED_SHORT]:{[ye.RGBA_INTEGER]:t.RGBA16UI,[ye.RGB_INTEGER]:t.RGB16UI,[ye.RG_INTEGER]:t.RG16UI,[ye.RED_INTEGER]:t.R16UI,[ye.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[Be.SHORT]:{[ye.RGBA_INTEGER]:t.RGBA16I,[ye.RGB_INTEGER]:t.RGB16I,[ye.RG_INTEGER]:t.RG16I,[ye.RED_INTEGER]:t.R16I},[Be.UNSIGNED_INT]:{[ye.RGBA_INTEGER]:t.RGBA32UI,[ye.RGB_INTEGER]:t.RGB32UI,[ye.RG_INTEGER]:t.RG32UI,[ye.RED_INTEGER]:t.R32UI,[ye.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[Be.INT]:{[ye.RGBA_INTEGER]:t.RGBA32I,[ye.RGB_INTEGER]:t.RGB32I,[ye.RG_INTEGER]:t.RG32I,[ye.RED_INTEGER]:t.R32I},[Be.FLOAT]:{[ye.RGBA]:t.RGBA32F,[ye.RGB]:t.RGB32F,[ye.RG]:t.RG32F,[ye.RED]:t.R32F,[ye.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[Be.HALF_FLOAT]:{[ye.RGBA]:t.RGBA16F,[ye.RGB]:t.RGB16F,[ye.RG]:t.RG16F,[ye.RED]:t.R16F},[Be.UNSIGNED_SHORT_5_6_5]:{[ye.RGB]:t.RGB565},[Be.UNSIGNED_SHORT_4_4_4_4]:{[ye.RGBA]:t.RGBA4},[Be.UNSIGNED_SHORT_5_5_5_1]:{[ye.RGBA]:t.RGB5_A1},[Be.UNSIGNED_INT_2_10_10_10_REV]:{[ye.RGBA]:t.RGB10_A2,[ye.RGBA_INTEGER]:t.RGB10_A2UI},[Be.UNSIGNED_INT_10F_11F_11F_REV]:{[ye.RGB]:t.R11F_G11F_B10F},[Be.UNSIGNED_INT_5_9_9_9_REV]:{[ye.RGB]:t.RGB9_E5},[Be.UNSIGNED_INT_24_8]:{[ye.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[Be.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[ye.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[Be.UNSIGNED_BYTE]:{[ye.RGBA]:t.RGBA,[ye.RGB]:t.RGB,[ye.ALPHA]:t.ALPHA,[ye.LUMINANCE]:t.LUMINANCE,[ye.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[Be.UNSIGNED_SHORT_5_6_5]:{[ye.RGB]:t.RGB},[Be.UNSIGNED_SHORT_4_4_4_4]:{[ye.RGBA]:t.RGBA},[Be.UNSIGNED_SHORT_5_5_5_1]:{[ye.RGBA]:t.RGBA}},e}class O3{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Ge,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=EB(e);const n=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=n;for(let i=0;i<n;i++)this.boundTextures[i]=null;this.emptyTextures={};const r=new Zv(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Zv(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,n=0){const{gl:r}=this;if(e=e==null?void 0:e.castToBaseTexture(),e!=null&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[n]!==e&&(this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),r.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[n]=e}else this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[n]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:n,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<r.length;i++)r[i]===e&&(this.currentLocation!==i&&(n.activeTexture(n.TEXTURE0+i),this.currentLocation=i),n.bindTexture(e.target,this.emptyTextures[e.target].texture),r[i]=null)}ensureSamplerType(e){const{boundTextures:n,hasIntegerTextures:r,CONTEXT_UID:i}=this;if(r)for(let s=e-1;s>=0;--s){const o=n[s];o&&o._glTextures[i].samplerType!==Tx.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const n=new Zv(this.gl.createTexture());return n.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=n,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),n}initTextureType(e,n){var r;n.internalFormat=((r=this.internalFormats[e.type])==null?void 0:r[e.format])??e.format,this.webGLVersion===2&&e.type===Be.HALF_FLOAT?n.type=this.gl.HALF_FLOAT:n.type=e.type}updateTexture(e){var i;const n=e._glTextures[this.CONTEXT_UID];if(!n)return;const r=this.renderer;if(this.initTextureType(e,n),(i=e.resource)!=null&&i.upload(r,e,n))n.samplerType!==Tx.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,a=r.gl;(n.width!==s||n.height!==o||n.dirtyId<0)&&(n.width=s,n.height=o,a.texImage2D(e.target,0,n.internalFormat,s,o,0,e.format,n.type,null))}e.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(e),n.dirtyId=e.dirtyId}destroyTexture(e,n){const{gl:r}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!n)){const i=this.managedTextures.indexOf(e);i!==-1&&Hc(this.managedTextures,i,1)}}updateTextureStyle(e){var r;const n=e._glTextures[this.CONTEXT_UID];n&&((e.mipmap===Do.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?n.mipmap=!1:n.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?n.wrapMode=aa.CLAMP:n.wrapMode=e.wrapMode,(r=e.resource)!=null&&r.style(this.renderer,e,n)||this.setStyle(e,n),n.dirtyStyleId=e.dirtyStyleId)}setStyle(e,n){const r=this.gl;if(n.mipmap&&e.mipmap!==Do.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,n.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,n.wrapMode),n.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===as.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===as.LINEAR){const s=Math.min(e.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===as.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===as.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}O3.extension={type:Te.RendererSystem,name:"texture"};Me.add(O3);class N3{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,n){const{gl:r,renderer:i}=this;n&&i.shader.bind(n),r.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:n,renderer:r,CONTEXT_UID:i}=this,s=n.createTransformFeedback();e._glTransformFeedbacks[i]=s,n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(r.buffer.update(a),a._glBuffers[i].refCount++,n.bindBufferBase(n.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,n){const r=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const u=a._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!n&&s.dispose(a,n))}r&&(n||i.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}N3.extension={type:Te.RendererSystem,name:"transformFeedback"};Me.add(N3);class zy{constructor(e){this.renderer=e}init(e){this.screen=new Ye(0,0,e.width,e.height),this.element=e.view||we.ADAPTER.createCanvas(),this.resolution=e.resolution||we.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,n){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(n*this.resolution);const r=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=r,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",r,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var n;e&&((n=this.element.parentNode)==null||n.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}zy.defaultOptions={width:800,height:600,resolution:we.RESOLUTION,autoDensity:!1};zy.extension={type:[Te.RendererSystem,Te.CanvasRendererSystem],name:"_view"};Me.add(zy);we.PREFER_ENV=Iu.WEBGL2;we.STRICT_TEXTURE_CACHE=!1;we.RENDER_OPTIONS={...By.defaultOptions,...Fy.defaultOptions,...zy.defaultOptions,...Uy.defaultOptions};Object.defineProperties(we,{WRAP_MODE:{get(){return Ge.defaultOptions.wrapMode},set(t){at("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Ge.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return Ge.defaultOptions.scaleMode},set(t){at("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Ge.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return Ge.defaultOptions.mipmap},set(t){at("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Ge.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return Ge.defaultOptions.anisotropicLevel},set(t){at("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Ge.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return at("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),mr.defaultResolution},set(t){mr.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return at("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),mr.defaultMultisample},set(t){mr.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return ks.defaultMaxTextures},set(t){at("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),ks.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return ks.defaultBatchSize},set(t){at("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),ks.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return ks.canUploadSameBuffer},set(t){at("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),ks.canUploadSameBuffer=t}},GC_MODE:{get(){return Rs.defaultMode},set(t){at("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Rs.defaultMode=t}},GC_MAX_IDLE:{get(){return Rs.defaultMaxIdle},set(t){at("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Rs.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return Rs.defaultCheckCountMax},set(t){at("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Rs.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return Os.defaultVertexPrecision},set(t){at("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Os.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return Os.defaultFragmentPrecision},set(t){at("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Os.defaultFragmentPrecision=t}}});var vl=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(vl||{});class Jv{constructor(e,n=null,r=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=n,this.priority=r,this.once=i}match(e,n=null){return this.fn===e&&this.context===n}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const n=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=e?null:n,this.previous=null,n}}const Si=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Jv(null,null,1/0),this.deltaMS=1/Si.targetFPMS,this.elapsedMS=1/Si.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,n=vl.NORMAL){return this._addListener(new Jv(t,e,n))}addOnce(t,e,n=vl.NORMAL){return this._addListener(new Jv(t,e,n,!0))}_addListener(t){let e=this._head.next,n=this._head;if(!e)t.connect(n);else{for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}return this._startIfPossible(),this}remove(t,e){let n=this._head.next;for(;n;)n.match(t,e)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Si.targetFPMS;const n=this._head;let r=n.next;for(;r;)r=r.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,e)/1e3,Si.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Si._shared){const t=Si._shared=new Si;t.autoStart=!0,t._protected=!0}return Si._shared}static get system(){if(!Si._system){const t=Si._system=new Si;t.autoStart=!0,t._protected=!0}return Si._system}};let zt=Si;zt.targetFPMS=.06;Object.defineProperties(we,{TARGET_FPMS:{get(){return zt.targetFPMS},set(t){at("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),zt.targetFPMS=t}}});class D3{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,vl.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?zt.shared:new zt,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}D3.extension=Te.Application;Me.add(D3);const L3=[];Me.handleByList(Te.Renderer,L3);function TB(t){for(const e of L3)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}var CB=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,AB=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const IB=CB,F3=AB;class B3{constructor(e){this.renderer=e}contextChange(e){let n;if(this.renderer.context.webGLVersion===1){const r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{const r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}n>=kn.HIGH?this.multisample=kn.HIGH:n>=kn.MEDIUM?this.multisample=kn.MEDIUM:n>=kn.LOW?this.multisample=kn.LOW:this.multisample=kn.NONE}destroy(){}}B3.extension={type:Te.RendererSystem,name:"_multisample"};Me.add(B3);class PB{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class U3{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);n.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:n}=this;n.bindBuffer(e,null)}bindBufferBase(e,n){const{gl:r,CONTEXT_UID:i}=this;if(this.boundBufferBases[n]!==e){const s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[n]=e,r.bindBufferBase(r.UNIFORM_BUFFER,n,s.buffer)}}bindBufferRange(e,n,r){const{gl:i,CONTEXT_UID:s}=this;r=r||0;const o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,n||0,o.buffer,r*256,256)}update(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,n.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)n.bufferSubData(e.type,0,e.data);else{const s=e.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,n.bufferData(e.type,e.data,s)}}dispose(e,n){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const r=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),r&&(n||i.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const n=Object.keys(this.managedBuffers);for(let r=0;r<n.length;r++)this.dispose(this.managedBuffers[n[r]],e)}createGLBuffer(e){const{CONTEXT_UID:n,gl:r}=this;return e._glBuffers[n]=new PB(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[n]}}U3.extension={type:Te.RendererSystem,name:"buffer"};Me.add(U3);class z3{constructor(e){this.renderer=e}render(e,n){const r=this.renderer;let i,s,o,a;if(n&&(i=n.renderTexture,s=n.clear,o=n.transform,a=n.skipUpdateTransform),this.renderingToScreen=!i,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=o,!r.context.isLost){if(i||(this.lastObjectRendered=e),!a){const u=e.enableTempParent();e.updateTransform(),e.disableTempParent(u)}r.renderTexture.bind(i),r.batch.currentRenderer.start(),(s??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),i&&(n.blit&&r.framebuffer.blit(),i.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}z3.extension={type:Te.RendererSystem,name:"objectRenderer"};Me.add(z3);const Yx=class extends SB{constructor(t){super(),this.type=MP.WEBGL,t=Object.assign({},we.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Us({projectionMatrix:new rn},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Yx.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(at("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=Yx.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:eF()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return at("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return at("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return at("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return at("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){at("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return at("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){at("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return at("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};let bh=Yx;bh.extension={type:Te.Renderer,priority:1};bh.__plugins={};bh.__systems={};Me.handleByMap(Te.RendererPlugin,bh.__plugins);Me.handleByMap(Te.RendererSystem,bh.__systems);Me.add(bh);class $3 extends xf{constructor(e,n){const{width:r,height:i}=n||{};super(r,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new Ge;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,n){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof xf?this.addResourceAt(e[r],r):this.addResourceAt(s3(e[r],n),r))}dispose(){for(let e=0,n=this.length;e<n;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,n){if(!this.items[n])throw new Error(`Index ${n} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[n].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)}unbind(e){super.unbind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)}load(){if(this._load)return this._load;const n=this.items.map(r=>r.resource).filter(r=>r).map(r=>r.load());return this._load=Promise.all(n).then(()=>{const{realWidth:r,realHeight:i}=this.items[0];return this.resize(r,i),Promise.resolve(this)}),this._load}}class kB extends $3{constructor(e,n){const{width:r,height:i}=n||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:r,height:i}),s&&this.initFromArray(s,n)}addBaseTextureAt(e,n){if(e.resource)this.addResourceAt(e.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=Bc.TEXTURE_2D_ARRAY}upload(e,n,r){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=e;r.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,i,0,n.format,r.type,null);for(let u=0;u<i;u++){const h=o[u];s[u]<h.dirtyId&&(s[u]=h.dirtyId,h.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,u,h.resource.width,h.resource.height,1,n.format,r.type,h.resource.source))}return!0}}class RB extends yl{constructor(e){super(e)}static test(e){const{OffscreenCanvas:n}=globalThis;return n&&e instanceof n?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const _d=class extends $3{constructor(t,e){const{width:n,height:r,autoLoad:i,linkBaseTexture:s}=e||{};if(t&&t.length!==_d.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:n,height:r});for(let o=0;o<_d.SIDES;o++)this.items[o].target=Bc.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=s!==!1,t&&this.initFromArray(t,e),i!==!1&&this.load()}bind(t){super.bind(t),t.target=Bc.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=Bc.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,n){const r=this.itemDirtyIds;for(let i=0;i<_d.SIDES;i++){const s=this.items[i];(r[i]<s.dirtyId||n.dirtyId<e.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(t,s,n),r[i]=s.dirtyId):r[i]<-1&&(t.gl.texImage2D(s.target,0,n.internalFormat,e.realWidth,e.realHeight,0,e.format,n.type,null),r[i]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===_d.SIDES}};let H3=_d;H3.SIDES=6;class Ac extends yl{constructor(e,n){n=n||{};let r,i;typeof e=="string"?(r=Ac.EMPTY,i=e):(r=e,i=null),super(r),this.url=i,this.crossOrigin=n.crossOrigin??!0,this.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,this._load=null,n.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,n)=>{if(this.url===null){e(this);return}try{const r=await we.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await r.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===js.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=s,this.update(),e(this)}catch(r){if(this.destroyed)return;n(r),this.onError.emit(r)}}),this._load)}upload(e,n,r){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),super.upload(e,n,r)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return Ac._EMPTY=Ac._EMPTY??we.ADAPTER.createCanvas(0,0),Ac._EMPTY}}const ng=class extends yl{constructor(t,e){e=e||{},super(we.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),t(this)},ng.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;yl.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,n=t.height;if(!e||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let r=e*this.scale,i=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(r=this._overrideWidth||this._overrideHeight/n*e,i=this._overrideHeight||this._overrideWidth/e*n),r=Math.round(r),i=Math.round(i);const s=this.source;s.width=r,s.height=i,s._pixiId=`canvas_${bu()}`,s.getContext("2d").drawImage(t,0,0,e,n,0,0,r,i),this._resolve(),this._resolve=null}}static getSize(t){const e=ng.SVG_SIZE.exec(t),n={};return e&&(n[e[1]]=Math.round(parseFloat(e[3])),n[e[5]]=Math.round(parseFloat(e[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&ng.SVG_XML.test(t)}};let _f=ng;_f.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;_f.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const Qx=class extends yl{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const n=document.createElement("video");n.setAttribute("preload","auto"),n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);const r=t[0].src||t[0];yl.crossOrigin(n,r,e.crossorigin);for(let i=0;i<t.length;++i){const s=document.createElement("source");let{src:o,mime:a}=t[i];o=o||t[i];const u=o.split("?").shift().toLowerCase(),h=u.slice(u.lastIndexOf(".")+1);a=a||Qx.MIME_TYPES[h]||`video/${h}`,s.src=o,s.type=a,n.appendChild(s)}t=n}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){const e=zt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise(e=>{this.valid?e(this):(this._resolve=e,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(zt.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(zt.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._isConnectedToTicker&&(zt.shared.remove(this.update,this),this._isConnectedToTicker=!1);const t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(zt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(zt.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t)}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||Qx.TYPES.includes(e)}};let Zw=Qx;Zw.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];Zw.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};jx.push(Ac,m3,RB,Zw,_f,Wf,H3,kB);class zg{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Ye.EMPTY:(e=e||new Ye(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,n){const{a:r,b:i,c:s,d:o,tx:a,ty:u}=e,h=r*n.x+s*n.y+a,d=i*n.x+o*n.y+u;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,d),this.maxY=Math.max(this.maxY,d)}addQuad(e){let n=this.minX,r=this.minY,i=this.maxX,s=this.maxY,o=e[0],a=e[1];n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[2],a=e[3],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[4],a=e[5],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[6],a=e[7],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,this.minX=n,this.minY=r,this.maxX=i,this.maxY=s}addFrame(e,n,r,i,s){this.addFrameMatrix(e.worldTransform,n,r,i,s)}addFrameMatrix(e,n,r,i,s){const o=e.a,a=e.b,u=e.c,h=e.d,d=e.tx,p=e.ty;let f=this.minX,g=this.minY,v=this.maxX,w=this.maxY,C=o*n+u*r+d,b=a*n+h*r+p;f=C<f?C:f,g=b<g?b:g,v=C>v?C:v,w=b>w?b:w,C=o*i+u*r+d,b=a*i+h*r+p,f=C<f?C:f,g=b<g?b:g,v=C>v?C:v,w=b>w?b:w,C=o*n+u*s+d,b=a*n+h*s+p,f=C<f?C:f,g=b<g?b:g,v=C>v?C:v,w=b>w?b:w,C=o*i+u*s+d,b=a*i+h*s+p,f=C<f?C:f,g=b<g?b:g,v=C>v?C:v,w=b>w?b:w,this.minX=f,this.minY=g,this.maxX=v,this.maxY=w}addVertexData(e,n,r){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let u=n;u<r;u+=2){const h=e[u],d=e[u+1];i=h<i?h:i,s=d<s?d:s,o=h>o?h:o,a=d>a?d:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,n,r,i){this.addVerticesMatrix(e.worldTransform,n,r,i)}addVerticesMatrix(e,n,r,i,s=0,o=s){const a=e.a,u=e.b,h=e.c,d=e.d,p=e.tx,f=e.ty;let g=this.minX,v=this.minY,w=this.maxX,C=this.maxY;for(let b=r;b<i;b+=2){const S=n[b],_=n[b+1],A=a*S+h*_+p,P=d*_+u*S+f;g=Math.min(g,A-s),w=Math.max(w,A+s),v=Math.min(v,P-o),C=Math.max(C,P+o)}this.minX=g,this.minY=v,this.maxX=w,this.maxY=C}addBounds(e){const n=this.minX,r=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<n?e.minX:n,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,n){const r=e.minX>n.minX?e.minX:n.minX,i=e.minY>n.minY?e.minY:n.minY,s=e.maxX<n.maxX?e.maxX:n.maxX,o=e.maxY<n.maxY?e.maxY:n.maxY;if(r<=s&&i<=o){const a=this.minX,u=this.minY,h=this.maxX,d=this.maxY;this.minX=r<a?r:a,this.minY=i<u?i:u,this.maxX=s>h?s:h,this.maxY=o>d?o:d}}addBoundsMatrix(e,n){this.addFrameMatrix(n,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,n){const r=e.minX>n.x?e.minX:n.x,i=e.minY>n.y?e.minY:n.y,s=e.maxX<n.x+n.width?e.maxX:n.x+n.width,o=e.maxY<n.y+n.height?e.maxY:n.y+n.height;if(r<=s&&i<=o){const a=this.minX,u=this.minY,h=this.maxX,d=this.maxY;this.minX=r<a?r:a,this.minY=i<u?i:u,this.maxX=s>h?s:h,this.maxY=o>d?o:d}}pad(e=0,n=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=n,this.maxY+=n)}addFramePad(e,n,r,i,s,o){e-=s,n-=o,r+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<n?this.minY:n,this.maxY=this.maxY>i?this.maxY:i}}class sn extends Bo{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Dy,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new zg,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const n=Object.keys(e);for(let r=0;r<n.length;++r){const i=n[r];Object.defineProperty(sn.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,n){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new Ye),n=this._boundsRect),this._bounds.getRectangle(n)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Ye),e=this._localBoundsRect),this._localBounds||(this._localBounds=new zg);const n=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=r,this.transform=n,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,n,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,n)}toLocal(e,n,r,i){return n&&(e=n.toGlobal(e,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,n=0,r=1,i=1,s=0,o=0,a=0,u=0,h=0){return this.position.x=e,this.position.y=n,this.scale.x=r||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=u,this.pivot.y=h,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new MB),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*IF}set angle(e){this.transform.rotation=e*PF}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1))}if(this._mask=e,this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}}}class MB extends sn{constructor(){super(...arguments),this.sortDirty=null}}sn.prototype.displayObjectUpdateTransform=sn.prototype.updateTransform;const OB=new rn;function NB(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const Kx=class extends sn{constructor(){super(),this.children=[],this.sortableChildren=Kx.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const n=this.getChildIndex(t),r=this.getChildIndex(e);this.children[n]=e,this.children[r]=t,this.onChildrenChange(n<r?n:r)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(t);Hc(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],n=this.children.indexOf(e);if(n===-1)return null;e.parent=null,e.transform._parentID=-1,Hc(this.children,n,1),this._boundsID++,this.onChildrenChange(n),e.emit("removed",this),this.emit("childRemoved",e,this,n)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Hc(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const n=t,r=e,i=r-n;let s;if(i>0&&i<=r){s=this.children.splice(n,i);for(let o=0;o<s.length;++o)s[o].parent=null,s[o].transform&&(s[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let o=0;o<s.length;++o)s[o].emit("removed",this),this.emit("childRemoved",s[o],this,o);return s}else if(i===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,n=this.children.length;e<n;++e){const r=this.children[e];r._lastSortedIndex=e,!t&&r.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(NB),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const n=this.children[t];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const n=e._mask.isMaskData?e._mask.maskObject:e._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(e._bounds,n._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const n=super.getLocalBounds(t);if(!e)for(let r=0,i=this.children.length;r<i;++r){const s=this.children[r];s.visible&&s.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let n,r;this.cullArea?(n=this.cullArea,r=this.worldTransform):this._render!==Kx.prototype._render&&(n=this.getBounds(!0));const i=t.projection.transform;if(i&&(r?(r=OB.copyFrom(r),r.prepend(i)):r=i),n&&e.intersects(n,r))this._render(t);else if(this.cullArea)return;for(let s=0,o=this.children.length;s<o;++s){const a=this.children[s],u=a.cullable;a.cullable=u||!this.cullArea,a.render(t),a.cullable=u}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let n=0,r=this.children.length;n<r;++n)this.children[n].render(t)}}renderAdvanced(t){var i,s,o;const e=this.filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<e.length;a++)e[a].enabled&&this._enabledFilters.push(e[a])}const r=e&&((i=this._enabledFilters)==null?void 0:i.length)||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==Hn.NONE));if(r&&t.batch.flush(),e&&((s=this._enabledFilters)!=null&&s.length)&&t.filter.push(this,this._enabledFilters),n&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let a=0,u=this.children.length;a<u;++a)this.children[a].render(t)}r&&t.batch.flush(),n&&t.mask.pop(this),e&&((o=this._enabledFilters)!=null&&o.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t==null?void 0:t.children,n=this.removeChildren(0,this.children.length);if(e)for(let r=0;r<n.length;++r)n[r].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};let ir=Kx;ir.defaultSortableChildren=!1;ir.prototype.containerUpdateTransform=ir.prototype.updateTransform;Object.defineProperties(we,{SORTABLE_CHILDREN:{get(){return ir.defaultSortableChildren},set(t){at("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),ir.defaultSortableChildren=t}}});const ad=new Fe,DB=new Uint16Array([0,1,2,0,2,3]);class Ws extends ir{constructor(e){super(),this._anchor=new sa(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Rt(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Ue.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||_e.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=DB,this.pluginName="batch",this.isSprite=!0,this._roundPixels=we.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=el(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=el(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const n=this.transform.worldTransform,r=n.a,i=n.b,s=n.c,o=n.d,a=n.tx,u=n.ty,h=this.vertexData,d=e.trim,p=e.orig,f=this._anchor;let g=0,v=0,w=0,C=0;if(d?(v=d.x-f._x*p.width,g=v+d.width,C=d.y-f._y*p.height,w=C+d.height):(v=-f._x*p.width,g=v+p.width,C=-f._y*p.height,w=C+p.height),h[0]=r*v+s*C+a,h[1]=o*C+i*v+u,h[2]=r*g+s*C+a,h[3]=o*C+i*g+u,h[4]=r*g+s*w+a,h[5]=o*w+i*g+u,h[6]=r*v+s*w+a,h[7]=o*w+i*v+u,this._roundPixels){const b=we.RESOLUTION;for(let S=0;S<h.length;++S)h[S]=Math.round(h[S]*b)/b}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,n=this.vertexTrimmedData,r=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,u=s.c,h=s.d,d=s.tx,p=s.ty,f=-i._x*r.width,g=f+r.width,v=-i._y*r.height,w=v+r.height;n[0]=o*f+u*v+d,n[1]=h*v+a*f+p,n[2]=o*g+u*v+d,n[3]=h*v+a*g+p,n[4]=o*g+u*w+d,n[5]=h*w+a*g+p,n[6]=o*f+u*w+d,n[7]=h*w+a*f+p}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,n=this._texture.orig;!e||e.width===n.width&&e.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new zg),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ye),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,ad);const n=this._texture.orig.width,r=this._texture.orig.height,i=-n*this.anchor.x;let s=0;return ad.x>=i&&ad.x<i+n&&(s=-r*this.anchor.y,ad.y>=s&&ad.y<s+r)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const r=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!r)}this._texture=null}static from(e,n){const r=e instanceof _e?e:_e.from(e,n);return new Ws(r)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const n=el(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const n=el(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||_e.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const j3=new rn;sn.prototype._cacheAsBitmap=!1;sn.prototype._cacheData=null;sn.prototype._cacheAsBitmapResolution=null;sn.prototype._cacheAsBitmapMultisample=null;class LB{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(sn.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;this._cacheAsBitmap=t;let e;t?(this._cacheData||(this._cacheData=new LB),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});sn.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))};sn.prototype._initCachedDisplayObject=function(e){var f,g;if((f=this._cacheData)!=null&&f.sprite)return;const n=this.alpha;this.alpha=1,e.batch.flush();const r=this.getLocalBounds(null,!0).clone();if((g=this.filters)!=null&&g.length){const v=this.filters[0].padding;r.pad(v)}r.ceil(we.RESOLUTION);const i=e.renderTexture.current,s=e.renderTexture.sourceFrame.clone(),o=e.renderTexture.destinationFrame.clone(),a=e.projection.transform,u=Pu.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:this.cacheAsBitmapMultisample??e.multisample}),h=`cacheAsBitmap_${bu()}`;this._cacheData.textureCacheId=h,Ge.addToCache(u.baseTexture,h),_e.addToCache(u,h);const d=this.transform.localTransform.copyTo(j3).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:u,clear:!0,transform:d,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=a,e.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const p=new Ws(u);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-(r.x/r.width),p.anchor.y=-(r.y/r.height),p.alpha=n,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=p.containsPoint.bind(p)};sn.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))};sn.prototype._initCachedDisplayObjectCanvas=function(e){var d;if((d=this._cacheData)!=null&&d.sprite)return;const n=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;const i=e.canvasContext.activeContext,s=e._projTransform;n.ceil(we.RESOLUTION);const o=Pu.create({width:n.width,height:n.height}),a=`cacheAsBitmap_${bu()}`;this._cacheData.textureCacheId=a,Ge.addToCache(o.baseTexture,a),_e.addToCache(o,a);const u=j3;this.transform.localTransform.copyTo(u),u.invert(),u.tx-=n.x,u.ty-=n.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:u,skipUpdateTransform:!1}),e.canvasContext.activeContext=i,e._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const h=new Ws(o);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(n.x/n.width),h.anchor.y=-(n.y/n.height),h.alpha=r,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)};sn.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};sn.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};sn.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Ge.removeFromCache(this._cacheData.textureCacheId),_e.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};sn.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};sn.prototype.name=null;ir.prototype.getChildByName=function(e,n){for(let r=0,i=this.children.length;r<i;r++)if(this.children[r].name===e)return this.children[r];if(n)for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r];if(!s.getChildByName)continue;const o=s.getChildByName(e,!0);if(o)return o}return null};sn.prototype.getGlobalPosition=function(e=new Fe,n=!1){return this.parent?this.parent.toGlobal(this.position,e,n):(e.x=this.position.x,e.y=this.position.y),e};var FB=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class BB extends mr{constructor(e=1){super(IB,FB,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const UB={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},zB=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function $B(t){const e=UB[t],n=e.length;let r=zB,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<t;a++){let u=s.replace("%index%",a.toString());o=a,a>=n&&(o=t-a-1),u=u.replace("%value%",e[o].toString()),i+=u,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",t.toString()),r}const HB=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function jB(t,e){const n=Math.ceil(t/2);let r=HB,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<t;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(n-1)}.0`),i+=a,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",t.toString()),r}class Zx extends mr{constructor(e,n=8,r=4,i=mr.defaultResolution,s=5){const o=jB(s,e),a=$B(s);super(o,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=r,this.blur=n}apply(e,n,r,i){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/n.width):this.uniforms.strength=1/r.height*(r.height/n.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/n.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,n,r,i);else{const s=e.getFilterTexture(),o=e.renderer;let a=n,u=s;this.state.blend=!1,e.applyFilter(this,a,u,Ao.CLEAR);for(let h=1;h<this.passes-1;h++){e.bindAndClear(a,Ao.BLIT),this.uniforms.uSampler=u;const d=u;u=a,a=d,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,u,r,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class WB extends mr{constructor(e=8,n=4,r=mr.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Zx(!0,e,n,r,i),this.blurYFilter=new Zx(!1,e,n,r,i),this.resolution=r,this.quality=n,this.blur=e,this.repeatEdgePixels=!1}apply(e,n,r,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,n,a,Ao.CLEAR),this.blurYFilter.apply(e,a,r,i),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,n,r,i):this.blurXFilter.apply(e,n,r,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var GB=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Jx extends mr{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(F3,GB,e),this.alpha=1}_loadMatrix(e,n=!1){let r=e;n&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,n,r){return e[0]=n[0]*r[0]+n[1]*r[5]+n[2]*r[10]+n[3]*r[15],e[1]=n[0]*r[1]+n[1]*r[6]+n[2]*r[11]+n[3]*r[16],e[2]=n[0]*r[2]+n[1]*r[7]+n[2]*r[12]+n[3]*r[17],e[3]=n[0]*r[3]+n[1]*r[8]+n[2]*r[13]+n[3]*r[18],e[4]=n[0]*r[4]+n[1]*r[9]+n[2]*r[14]+n[3]*r[19]+n[4],e[5]=n[5]*r[0]+n[6]*r[5]+n[7]*r[10]+n[8]*r[15],e[6]=n[5]*r[1]+n[6]*r[6]+n[7]*r[11]+n[8]*r[16],e[7]=n[5]*r[2]+n[6]*r[7]+n[7]*r[12]+n[8]*r[17],e[8]=n[5]*r[3]+n[6]*r[8]+n[7]*r[13]+n[8]*r[18],e[9]=n[5]*r[4]+n[6]*r[9]+n[7]*r[14]+n[8]*r[19]+n[9],e[10]=n[10]*r[0]+n[11]*r[5]+n[12]*r[10]+n[13]*r[15],e[11]=n[10]*r[1]+n[11]*r[6]+n[12]*r[11]+n[13]*r[16],e[12]=n[10]*r[2]+n[11]*r[7]+n[12]*r[12]+n[13]*r[17],e[13]=n[10]*r[3]+n[11]*r[8]+n[12]*r[13]+n[13]*r[18],e[14]=n[10]*r[4]+n[11]*r[9]+n[12]*r[14]+n[13]*r[19]+n[14],e[15]=n[15]*r[0]+n[16]*r[5]+n[17]*r[10]+n[18]*r[15],e[16]=n[15]*r[1]+n[16]*r[6]+n[17]*r[11]+n[18]*r[16],e[17]=n[15]*r[2]+n[16]*r[7]+n[17]*r[12]+n[18]*r[17],e[18]=n[15]*r[3]+n[16]*r[8]+n[17]*r[13]+n[18]*r[18],e[19]=n[15]*r[4]+n[16]*r[9]+n[17]*r[14]+n[18]*r[19]+n[19],e}_colorMatrix(e){const n=new Float32Array(e);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n}brightness(e,n){const r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,n)}tint(e,n){const[r,i,s]=Rt.shared.setValue(e).toArray(),o=[r,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,n)}greyscale(e,n){const r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,n)}blackAndWhite(e){const n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,e)}hue(e,n){e=(e||0)/180*Math.PI;const r=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),u=r+(1-r)*o,h=o*(1-r)-a*i,d=o*(1-r)+a*i,p=o*(1-r)+a*i,f=r+o*(1-r),g=o*(1-r)-a*i,v=o*(1-r)-a*i,w=o*(1-r)+a*i,C=r+o*(1-r),b=[u,h,d,0,0,p,f,g,0,0,v,w,C,0,0,0,0,0,1,0];this._loadMatrix(b,n)}contrast(e,n){const r=(e||0)+1,i=-.5*(r-1),s=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(s,n)}saturate(e=0,n){const r=e*2/3+1,i=(r-1)*-.5,s=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(s,n)}desaturate(){this.saturate(-1)}negative(e){const n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,e)}sepia(e){const n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,e)}technicolor(e){const n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,e)}polaroid(e){const n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,e)}toBGR(e){const n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,e)}kodachrome(e){const n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,e)}browni(e){const n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,e)}vintage(e){const n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,e)}colorTone(e,n,r,i,s){e=e||.2,n=n||.15,r=r||16770432,i=i||3375104;const o=Rt.shared,[a,u,h]=o.setValue(r).toArray(),[d,p,f]=o.setValue(i).toArray(),g=[.3,.59,.11,0,0,a,u,h,e,0,d,p,f,n,0,a-d,u-p,h-f,0,0];this._loadMatrix(g,s)}night(e,n){e=e||.1;const r=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(r,n)}predator(e,n){const r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,n)}lsd(e){const n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}Jx.prototype.grayscale=Jx.prototype.greyscale;var VB=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,XB=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class qB extends mr{constructor(e,n){const r=new rn;e.renderable=!1,super(XB,VB,{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=r,n==null&&(n=20),this.scale=new Fe(n,n)}apply(e,n,r,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,n,r,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var YB=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,QB=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class KB extends mr{constructor(){super(QB,YB)}}var ZB=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class JB extends mr{constructor(e=.5,n=Math.random()){super(F3,ZB,{uNoise:0,uSeed:0}),this.noise=e,this.seed=n}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const lT={AlphaFilter:BB,BlurFilter:WB,BlurFilterPass:Zx,ColorMatrixFilter:Jx,DisplacementFilter:qB,FXAAFilter:KB,NoiseFilter:JB};Object.entries(lT).forEach(([t,e])=>{Object.defineProperty(lT,t,{get(){return at("7.1.0",`filters.${t} has moved to ${t}`),e}})});class e5{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(zt.system.add(this.tickerUpdate,this,vl.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(zt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Ya=new e5;class Gf{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Gf.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Fe,this.page=new Fe,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,n,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,n,r,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class $g extends Gf{constructor(){super(...arguments),this.client=new Fe,this.movement=new Fe,this.offset=new Fe,this.global=new Fe,this.screen=new Fe}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,n,r){return e.worldTransform.applyInverse(r||this.global,n)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,n,r,i,s,o,a,u,h,d,p,f,g,v,w){throw new Error("Method not implemented.")}}class ws extends $g{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class sh extends $g{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}sh.DOM_DELTA_PIXEL=0;sh.DOM_DELTA_LINE=1;sh.DOM_DELTA_PAGE=2;const t5=2048,n5=new Fe,e1=new Fe;class r5{constructor(e){this.dispatch=new Bo,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,n){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:n,priority:0}),this.mappingTable[e].sort((r,i)=>r.priority-i.priority)}dispatchEvent(e,n){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,n),this.dispatch.emit(n||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const n=this.mappingTable[e.type];if(n)for(let r=0,i=n.length;r<i;r++)n[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,n){Ya.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,n5.set(e,n),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,n){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=r.length-1;i<s;i++)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,n),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=r.length-2;i>=0;i--)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,n,r=this._allInteractiveElements){if(r.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(n)?n:[n];for(let s=r.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=r[s],this.notifyTarget(e,o)})}propagationPath(e){const n=[e];for(let r=0;r<t5&&e!==this.rootTarget;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");n.push(e.parent),e=e.parent}return n.reverse(),n}hitTestMoveRecursive(e,n,r,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||n==="dynamic")&&(Ya.pauseUpdate=!1),e.interactiveChildren&&e.children){const d=e.children;for(let p=d.length-1;p>=0;p--){const f=d[p],g=this.hitTestMoveRecursive(f,this._isInteractive(n)?n:f.eventMode,r,i,s,o||s(e,r));if(g){if(g.length>0&&!g[g.length-1].parent)continue;const v=e.isInteractive();(g.length>0||v)&&(v&&this._allInteractiveElements.push(e),g.push(e)),this._hitElements.length===0&&(this._hitElements=g),a=!0}}}const u=this._isInteractive(n),h=e.isInteractive();return h&&h&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:u&&!s(e,r)&&i(e,r)?h?[e]:[]:null}hitTestRecursive(e,n,r,i,s){if(this._interactivePrune(e)||s(e,r))return null;if((e.eventMode==="dynamic"||n==="dynamic")&&(Ya.pauseUpdate=!1),e.interactiveChildren&&e.children){const u=e.children;for(let h=u.length-1;h>=0;h--){const d=u[h],p=this.hitTestRecursive(d,this._isInteractive(n)?n:d.eventMode,r,i,s);if(p){if(p.length>0&&!p[p.length-1].parent)continue;const f=e.isInteractive();return(p.length>0||f)&&p.push(e),p}}}const o=this._isInteractive(n),a=e.isInteractive();return o&&i(e,r)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,n){var r;if(e.hitArea&&(e.worldTransform.applyInverse(n,e1),!e.hitArea.contains(e1.x,e1.y)))return!0;if(e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;if(i&&!((r=i.containsPoint)!=null&&r.call(i,n)))return!0}return!1}hitTestFn(e,n){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(n):!1}notifyTarget(e,n){var s,o;n=n??e.type;const r=`on${n}`;(o=(s=e.currentTarget)[r])==null||o.call(s,e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${n}capture`:n;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,n)}mapPointerDown(e){if(!(e instanceof ws)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerdown"),n.pointerType==="touch")this.dispatchEvent(n,"touchstart");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const i=n.button===2;this.dispatchEvent(n,i?"rightdown":"mousedown")}const r=this.trackingData(e.pointerId);r.pressTargetsByButton[e.button]=n.composedPath(),this.freeEvent(n)}mapPointerMove(e){var u,h;if(!(e instanceof ws)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const n=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const r=n.pointerType==="mouse"||n.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(((u=i.overTargets)==null?void 0:u.length)>0&&s!==n.target){const d=e.type==="mousemove"?"mouseout":"pointerout",p=this.createPointerEvent(e,d,s);if(this.dispatchEvent(p,"pointerout"),r&&this.dispatchEvent(p,"mouseout"),!n.composedPath().includes(s)){const f=this.createPointerEvent(e,"pointerleave",s);for(f.eventPhase=f.AT_TARGET;f.target&&!n.composedPath().includes(f.target);)f.currentTarget=f.target,this.notifyTarget(f),r&&this.notifyTarget(f,"mouseleave"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(p)}if(s!==n.target){const d=e.type==="mousemove"?"mouseover":"pointerover",p=this.clonePointerEvent(n,d);this.dispatchEvent(p,"pointerover"),r&&this.dispatchEvent(p,"mouseover");let f=s==null?void 0:s.parent;for(;f&&f!==this.rootTarget.parent&&f!==n.target;)f=f.parent;if(!f||f===this.rootTarget.parent){const v=this.clonePointerEvent(n,"pointerenter");for(v.eventPhase=v.AT_TARGET;v.target&&v.target!==s&&v.target!==this.rootTarget.parent;)v.currentTarget=v.target,this.notifyTarget(v),r&&this.notifyTarget(v,"mouseenter"),v.target=v.target.parent;this.freeEvent(v)}this.freeEvent(p)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(n,"pointermove"),a&&o.push("globalpointermove"),n.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(n,"touchmove"),a&&o.push("globaltouchmove")),r&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(n,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(h=n.target)==null?void 0:h.cursor),o.length>0&&this.all(n,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=n.composedPath(),this.freeEvent(n)}mapPointerOver(e){var o;if(!(e instanceof ws)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId),r=this.createPointerEvent(e),i=r.pointerType==="mouse"||r.pointerType==="pen";this.dispatchEvent(r,"pointerover"),i&&this.dispatchEvent(r,"mouseover"),r.pointerType==="mouse"&&(this.cursor=(o=r.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(r,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;n.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof ws)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId);if(n.overTargets){const r=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(n.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),r&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),r&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;n.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof ws)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=performance.now(),r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerup"),r.pointerType==="touch")this.dispatchEvent(r,"touchend");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const a=r.button===2;this.dispatchEvent(r,a?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!r.composedPath().includes(s)){let a=s;for(;a&&!r.composedPath().includes(a);){if(r.currentTarget=a,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch")this.notifyTarget(r,"touchendoutside");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const u=r.button===2;this.notifyTarget(r,u?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(r,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:n});const u=i.clicksByButton[e.button];if(u.target===a.target&&n-u.timeStamp<200?++u.clickCount:u.clickCount=1,u.target=a.target,u.timeStamp=n,a.detail=u.clickCount,a.pointerType==="mouse"){const h=a.button===2;this.dispatchEvent(a,h?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(r)}mapPointerUpOutside(e){if(!(e instanceof ws)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId),r=this.findMountedTarget(n.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(r){let s=r;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete n.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof sh)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const n=this.createWheelEvent(e);this.dispatchEvent(n),this.freeEvent(n)}findMountedTarget(e){if(!e)return null;let n=e[0];for(let r=1;r<e.length&&e[r].parent===n;r++)n=e[r];return n}createPointerEvent(e,n,r){const i=this.allocateEvent(ws);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=r??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof n=="string"&&(i.type=n),i}createWheelEvent(e){const n=this.allocateEvent(sh);return this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=this.hitTest(n.global.x,n.global.y),n}clonePointerEvent(e,n){const r=this.allocateEvent(ws);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=n??r.type,r}copyWheelData(e,n){n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ}copyPointerData(e,n){e instanceof ws&&n instanceof ws&&(n.pointerId=e.pointerId,n.width=e.width,n.height=e.height,n.isPrimary=e.isPrimary,n.pointerType=e.pointerType,n.pressure=e.pressure,n.tangentialPressure=e.tangentialPressure,n.tiltX=e.tiltX,n.tiltY=e.tiltY,n.twist=e.twist)}copyMouseData(e,n){e instanceof $g&&n instanceof $g&&(n.altKey=e.altKey,n.button=e.button,n.buttons=e.buttons,n.client.copyFrom(e.client),n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.movement.copyFrom(e.movement),n.screen.copyFrom(e.screen),n.shiftKey=e.shiftKey,n.global.copyFrom(e.global))}copyData(e,n){n.isTrusted=e.isTrusted,n.srcElement=e.srcElement,n.timeStamp=performance.now(),n.type=e.type,n.detail=e.detail,n.view=e.view,n.which=e.which,n.layer.copyFrom(e.layer),n.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const n=this.eventPool.get(e).pop()||new e(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=null,n.target=null,n}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const n=e.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(e)}notifyListeners(e,n){const r=e.currentTarget._events[n];if(r&&e.currentTarget.isInteractive())if("fn"in r)r.once&&e.currentTarget.removeListener(n,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let i=0,s=r.length;i<s&&!e.propagationImmediatelyStopped;i++)r[i].once&&e.currentTarget.removeListener(n,r[i].fn,void 0,!0),r[i].fn.call(r[i].context,e)}}const i5=1,s5={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},e_=class{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new r5(null),Ya.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new ws(null),this.rootWheelEvent=new sh(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...e_.defaultEventFeatures},{set:(e,n,r)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=r),e[n]=r,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:e,resolution:n}=this.renderer;this.setTargetElement(e),this.resolution=n,e_._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const n=this.cursorStyles[t];if(n)switch(typeof n){case"string":e&&(this.domElement.style.cursor=n);break;case"function":n(t);break;case"object":e&&Object.assign(this.domElement.style,n);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let n=0,r=e.length;n<r;n++){const i=e[n],s=this.bootstrapEvent(this.rootPointerEvent,i);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;Ya.pointerMoved();const e=this.normalizeToPointerData(t);for(let n=0,r=e.length;n<r;n++){const i=this.bootstrapEvent(this.rootPointerEvent,e[n]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const n=e!==this.domElement?"outside":"",r=this.normalizeToPointerData(t);for(let i=0,s=r.length;i<s;i++){const o=this.bootstrapEvent(this.rootPointerEvent,r[i]);o.type+=n,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;const e=this.normalizeToPointerData(t);for(let n=0,r=e.length;n<r;n++){const i=this.bootstrapEvent(this.rootPointerEvent,e[n]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,Ya.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Ya.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Ya.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,n){let r;this.domElement.parentElement?r=this.domElement.getBoundingClientRect():r={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const i=1/this.resolution;t.x=(e-r.left)*(this.domElement.width/r.width)*i,t.y=(n-r.top)*(this.domElement.height/r.height)*i}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let n=0,r=t.changedTouches.length;n<r;n++){const i=t.changedTouches[n];typeof i.button>"u"&&(i.button=0),typeof i.buttons>"u"&&(i.buttons=1),typeof i.isPrimary>"u"&&(i.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof i.width>"u"&&(i.width=i.radiusX||1),typeof i.height>"u"&&(i.height=i.radiusY||1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="touch"),typeof i.pointerId>"u"&&(i.pointerId=i.identifier||0),typeof i.pressure>"u"&&(i.pressure=i.force||.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),typeof i.layerX>"u"&&(i.layerX=i.offsetX=i.clientX),typeof i.layerY>"u"&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,i.type=t.type,e.push(i)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const n=t;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=i5),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,e.push(n)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=s5[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};let wf=e_;wf.extension={name:"events",type:[Te.RendererSystem,Te.CanvasRendererSystem]};wf.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};Me.add(wf);function uT(t){return t==="dynamic"||t==="static"}const o5={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??uT(wf.defaultEventMode)},set interactive(t){at("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=t,this.eventMode=t?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??wf.defaultEventMode},set eventMode(t){this._internalInteractive=uT(t),this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,n){const r=typeof n=="boolean"&&n||typeof n=="object"&&n.capture,i=typeof e=="function"?void 0:e;t=r?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.on(t,e,i)},removeEventListener(t,e,n){const r=typeof n=="boolean"&&n||typeof n=="object"&&n.capture,i=typeof e=="function"?void 0:e;t=r?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,i)},dispatchEvent(t){if(!(t instanceof Gf))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};sn.mixin(o5);const a5={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};sn.mixin(a5);const l5=9,vm=100,u5=0,c5=0,cT=2,hT=1,h5=-1e3,d5=-1e3,f5=2;class W3{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(ia.tablet||ia.phone)&&this.createTouchHook();const n=document.createElement("div");n.style.width=`${vm}px`,n.style.height=`${vm}px`,n.style.position="absolute",n.style.top=`${u5}px`,n.style.left=`${c5}px`,n.style.zIndex=cT.toString(),this.div=n,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${hT}px`,e.style.height=`${hT}px`,e.style.position="absolute",e.style.top=`${h5}px`,e.style.left=`${d5}px`,e.style.zIndex=f5.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const n=e.children;if(n)for(let r=0;r<n.length;r++)this.updateAccessibleObjects(n[r])}update(){const e=performance.now();if(ia.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:n,y:r,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:u}=this.renderer,h=i/o*u,d=s/a*u;let p=this.div;p.style.left=`${n}px`,p.style.top=`${r}px`,p.style.width=`${o}px`,p.style.height=`${a}px`;for(let f=0;f<this.children.length;f++){const g=this.children[f];if(g.renderId!==this.renderId)g._accessibleActive=!1,Hc(this.children,f,1),this.div.removeChild(g._accessibleDiv),this.pool.push(g._accessibleDiv),g._accessibleDiv=null,f--;else{p=g._accessibleDiv;let v=g.hitArea;const w=g.worldTransform;g.hitArea?(p.style.left=`${(w.tx+v.x*w.a)*h}px`,p.style.top=`${(w.ty+v.y*w.d)*d}px`,p.style.width=`${v.width*w.a*h}px`,p.style.height=`${v.height*w.d*d}px`):(v=g.getBounds(),this.capHitArea(v),p.style.left=`${v.x*h}px`,p.style.top=`${v.y*d}px`,p.style.width=`${v.width*h}px`,p.style.height=`${v.height*d}px`,p.title!==g.accessibleTitle&&g.accessibleTitle!==null&&(p.title=g.accessibleTitle),p.getAttribute("aria-label")!==g.accessibleHint&&g.accessibleHint!==null&&p.setAttribute("aria-label",g.accessibleHint)),(g.accessibleTitle!==p.title||g.tabIndex!==p.tabIndex)&&(p.title=g.accessibleTitle,p.tabIndex=g.tabIndex,this.debug&&this.updateDebugHTML(p))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:n,height:r}=this.renderer;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>r&&(e.height=r-e.y)}addChild(e){let n=this.pool.pop();n||(n=document.createElement("button"),n.style.width=`${vm}px`,n.style.height=`${vm}px`,n.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",n.style.position="absolute",n.style.zIndex=cT.toString(),n.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?n.setAttribute("aria-live","off"):n.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?n.setAttribute("aria-relevant","additions"):n.setAttribute("aria-relevant","text"),n.addEventListener("click",this._onClick.bind(this)),n.addEventListener("focus",this._onFocus.bind(this)),n.addEventListener("focusout",this._onFocusOut.bind(this))),n.style.pointerEvents=e.accessiblePointerEvents,n.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?n.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(n.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&n.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(n),e._accessibleActive=!0,e._accessibleDiv=n,n.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,n){const{displayObject:r}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new Gf(i),{target:r});i.rootTarget=this.renderer.lastObjectRendered,n.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===l5&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}W3.extension={name:"accessibility",type:[Te.RendererPlugin,Te.CanvasRendererPlugin]};Me.add(W3);const t_=class{constructor(t){this.stage=new ir,t=Object.assign({forceCanvas:!1},t),this.renderer=TB(t),t_._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(t,e){const n=t_._plugins.slice(0);n.reverse(),n.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};let Vf=t_;Vf._plugins=[];Me.handleByList(Te.Application,Vf._plugins);class G3{static init(e){Object.defineProperty(this,"resizeTo",{set(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let n,r;if(this._resizeTo===globalThis.window)n=globalThis.innerWidth,r=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;n=i,r=s}this.renderer.resize(n,r),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}G3.extension=Te.Application;Me.add(G3);const dT={loader:Te.LoadParser,resolver:Te.ResolveParser,cache:Te.CacheParser,detection:Te.DetectionParser};Me.handle(Te.Asset,t=>{const e=t.ref;Object.entries(dT).filter(([n])=>!!e[n]).forEach(([n,r])=>Me.add(Object.assign(e[n],{extension:e[n].extension??r})))},t=>{const e=t.ref;Object.keys(dT).filter(n=>!!e[n]).forEach(n=>Me.remove(e[n]))});class p5{constructor(e,n=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(e){e.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],n=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<n;r++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Xf(t,e){if(Array.isArray(e)){for(const n of e)if(t.startsWith(`data:${n}`))return!0;return!1}return t.startsWith(`data:${e}`)}function ku(t,e){const n=t.split("?")[0],r=Mn.extname(n).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}const la=(t,e)=>(Array.isArray(t)||(t=[t]),e?t.map(n=>typeof n=="string"?e(n):n):t),n_=(t,e)=>{const n=e.split("?")[1];return n&&(t+=`?${n}`),t};function V3(t,e,n,r,i){const s=e[n];for(let o=0;o<s.length;o++){const a=s[o];n<e.length-1?V3(t.replace(r[n],a),e,n+1,r,i):i.push(t.replace(r[n],a))}}function m5(t){const e=/\{(.*?)\}/g,n=t.match(e),r=[];if(n){const i=[];n.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),V3(t,i,0,n,r)}else r.push(t);return r}const Hg=t=>!Array.isArray(t);class g5{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const n=this._cache.get(e);return n||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),n}set(e,n){const r=la(e);let i;for(let a=0;a<this.parsers.length;a++){const u=this.parsers[a];if(u.test(n)){i=u.getCacheableAssets(r,n);break}}i||(i={},r.forEach(a=>{i[a]=n}));const s=Object.keys(i),o={cacheKeys:s,keys:r};if(r.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==n&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),n instanceof _e){const a=n;r.forEach(u=>{a.baseTexture!==_e.EMPTY.baseTexture&&Ge.addToCache(a.baseTexture,u),_e.addToCache(a,u)})}}remove(e){if(this._cacheMap.get(e),!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const n=this._cacheMap.get(e);n.cacheKeys.forEach(i=>{this._cache.delete(i)}),n.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const ld=new g5;class y5{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,n,r)=>(this._parsersValidated=!1,e[n]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,n){const r={promise:null,parser:null};return r.promise=(async()=>{var o,a;let i=null,s=null;if(n.loadParser&&(s=this._parserHash[n.loadParser],s||console.warn(`[Assets] specified load parser "${n.loadParser}" not found while loading ${e}`)),!s){for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];if(h.load&&((o=h.test)!=null&&o.call(h,e,n,this))){s=h;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,n,this),r.parser=s;for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];h.parse&&h.parse&&await((a=h.testParse)==null?void 0:a.call(h,i,n,this))&&(i=await h.parse(i,n,this)||i,r.parser=h)}return i})(),r}async load(e,n){this._parsersValidated||this._validateParsers();let r=0;const i={},s=Hg(e),o=la(e,h=>({src:h})),a=o.length,u=o.map(async h=>{const d=Mn.toAbsolute(h.src);if(!i[h.src])try{this.promiseCache[d]||(this.promiseCache[d]=this._getLoadPromiseAndParser(d,h)),i[h.src]=await this.promiseCache[d].promise,n&&n(++r/a)}catch(p){throw delete this.promiseCache[d],delete i[h.src],new Error(`[Loader.load] Failed to load ${d}.
${p}`)}});return await Promise.all(u),s?i[o[0].src]:i}async unload(e){const r=la(e,i=>({src:i})).map(async i=>{var a,u;const s=Mn.toAbsolute(i.src),o=this.promiseCache[s];if(o){const h=await o.promise;(u=(a=o.parser)==null?void 0:a.unload)==null||u.call(a,h,i,this),delete this.promiseCache[s]}});await Promise.all(r)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,n)=>(e[n.name]&&console.warn(`[Assets] loadParser name conflict "${n.name}"`),{...e,[n.name]:n}),{})}}var Gs=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(Gs||{});const v5=".json",x5="application/json",_5={extension:{type:Te.LoadParser,priority:Gs.Low},name:"loadJson",test(t){return Xf(t,x5)||ku(t,v5)},async load(t){return await(await we.ADAPTER.fetch(t)).json()}};Me.add(_5);const w5=".txt",b5="text/plain",S5={name:"loadTxt",extension:{type:Te.LoadParser,priority:Gs.Low},test(t){return Xf(t,b5)||ku(t,w5)},async load(t){return await(await we.ADAPTER.fetch(t)).text()}};Me.add(S5);const E5=["normal","bold","100","200","300","400","500","600","700","800","900"],T5=[".ttf",".otf",".woff",".woff2"],C5=["font/ttf","font/otf","font/woff","font/woff2"],A5=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function I5(t){const e=Mn.extname(t),i=Mn.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let s=i.length>0;for(const a of i)if(!a.match(A5)){s=!1;break}let o=i.join(" ");return s||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const P5={extension:{type:Te.LoadParser,priority:Gs.Low},name:"loadWebFont",test(t){return Xf(t,C5)||ku(t,T5)},async load(t,e){var r,i,s;const n=we.ADAPTER.getFontFaceSet();if(n){const o=[],a=((r=e.data)==null?void 0:r.family)??I5(t),u=((s=(i=e.data)==null?void 0:i.weights)==null?void 0:s.filter(d=>E5.includes(d)))??["normal"],h=e.data??{};for(let d=0;d<u.length;d++){const p=u[d],f=new FontFace(a,`url(${encodeURI(t)})`,{...h,weight:p});await f.load(),n.add(f),o.push(f)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>we.ADAPTER.getFontFaceSet().delete(e))}};Me.add(P5);let fT=0,t1;const k5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",R5={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${k5}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},M5={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let n1;class O5{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const n=URL.createObjectURL(new Blob([R5.code],{type:"application/javascript"})),r=new Worker(n);r.addEventListener("message",i=>{r.terminate(),URL.revokeObjectURL(n),e(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){t1===void 0&&(t1=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<t1&&(n1||(n1=URL.createObjectURL(new Blob([M5.code],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(n1),e.addEventListener("message",n=>{this.complete(n.data),this.returnWorker(n.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,n){await this._initWorkers();const r=new Promise((i,s)=>{this.queue.push({id:e,arguments:n,resolve:i,reject:s})});return this.next(),r}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const n=this.queue.pop(),r=n.id;this.resolveHash[fT]={resolve:n.resolve,reject:n.reject},e.postMessage({data:n.arguments,uuid:fT++,id:r})}}const pT=new O5;function $y(t,e,n){const r=new _e(t);return r.baseTexture.on("dispose",()=>{delete e.promiseCache[n]}),r}const N5=[".jpeg",".jpg",".png",".webp",".avif"],D5=["image/jpeg","image/png","image/webp","image/avif"];async function L5(t){const e=await we.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const n=await e.blob();return await createImageBitmap(n)}const Hy={name:"loadTextures",extension:{type:Te.LoadParser,priority:Gs.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return Xf(t,D5)||ku(t,N5)},async load(t,e,n){let r=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await pT.isImageBitmapSupported()?r=await pT.loadImageBitmap(t):r=await L5(t):r=await new Promise(s=>{r=new Image,r.crossOrigin=this.config.crossOrigin,r.src=t,r.complete?s(r):r.onload=()=>{s(r)}});const i=new Ge(r,{resolution:ml(t),...e.data});return i.resource.src=t,$y(i,n,t)},unload(t){t.destroy(!0)}};Me.add(Hy);const F5=".svg",B5="image/svg+xml",U5={extension:{type:Te.LoadParser,priority:Gs.High},name:"loadSVG",test(t){return Xf(t,B5)||ku(t,F5)},async testParse(t){return _f.test(t)},async parse(t,e,n){var o;const r=new _f(t,(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions);await r.load();const i=new Ge(r,{resolution:ml(t),...e==null?void 0:e.data});return i.resource.src=t,$y(i,n,t)},async load(t,e){return(await we.ADAPTER.fetch(t)).text()},unload:Hy.unload};Me.add(U5);class z5{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,n)=>`${e}${this._bundleIdConnector}${n}`,extractAssetIdFromBundle:(e,n)=>n.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const n=e;this._defaultSearchParams=Object.keys(n).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`).join("&")}}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(e,n){const r=[];Array.isArray(n)?n.forEach(i=>{if(typeof i.name=="string"){const s=this._createBundleAssetId(e,i.name);r.push(s),this.add([i.name,s],i.srcs,i.data)}else{const s=i.name.map(o=>this._createBundleAssetId(e,o));s.forEach(o=>{r.push(o)}),this.add([...i.name,...s],i.srcs)}}):Object.keys(n).forEach(i=>{r.push(this._createBundleAssetId(e,i)),this.add([i,this._createBundleAssetId(e,i)],n[i])}),this._bundles[e]=r}add(e,n,r){const i=la(e);i.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(n)||(typeof n=="string"?n=m5(n):n=[n]);const s=n.map(o=>{let a=o;if(typeof o=="string"){let u=!1;for(let h=0;h<this._parsers.length;h++){const d=this._parsers[h];if(d.test(o)){a=d.parse(o),u=!0;break}}u||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=i),(this._basePath||this._rootPath)&&(a.src=Mn.toAbsolute(a.src,this._basePath,this._rootPath)),a.src=this._appendDefaultSearchParams(a.src),a.data=a.data??r,a});i.forEach(o=>{this._assetMap[o]=s})}resolveBundle(e){const n=Hg(e);e=la(e);const r={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const u in o){const h=o[u];a[this._extractAssetIdFromBundle(i,u)]=h}r[i]=a}}),n?r[e[0]]:r}resolveUrl(e){const n=this.resolve(e);if(typeof e!="string"){const r={};for(const i in n)r[i]=n[i].src;return r}return n.src}resolve(e){const n=Hg(e);e=la(e);const r={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=this._getPreferredOrder(s),a=s[0];o==null||o.priority.forEach(u=>{o.params[u].forEach(h=>{const d=s.filter(p=>p[u]?p[u]===h:!1);d.length&&(s=d)})}),this._resolverHash[i]=s[0]??a}else{let s=i;(this._basePath||this._rootPath)&&(s=Mn.toAbsolute(s,this._basePath,this._rootPath)),s=this._appendDefaultSearchParams(s),this._resolverHash[i]={src:s}}r[i]=this._resolverHash[i]}),n?r[e[0]]:r}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let n=0;n<e.length;n++){const r=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(r.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const n=/\?/.test(e)?"&":"?";return`${e}${n}${this._defaultSearchParams}`}}class $5{constructor(){this._detections=[],this._initialized=!1,this.resolver=new z5,this.loader=new y5,this.cache=ld,this._backgroundLoader=new p5(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o,a;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let u=e.manifest;typeof u=="string"&&(u=await this.load(u)),this.resolver.addManifest(u)}const n=((s=e.texturePreference)==null?void 0:s.resolution)??1,r=typeof n=="number"?[n]:n;let i=[];if((o=e.texturePreference)!=null&&o.format){const u=(a=e.texturePreference)==null?void 0:a.format;i=typeof u=="string"?[u]:u;for(const h of this._detections)await h.test()||(i=await h.remove(i))}else for(const u of this._detections)await u.test()&&(i=await u.add(i));this.resolver.prefer({params:{format:i,resolution:r}}),e.preferences&&this.setPreferences(e.preferences)}add(e,n,r){this.resolver.add(e,n,r)}async load(e,n){this._initialized||await this.init();const r=Hg(e),i=la(e).map(a=>typeof a!="string"?(this.resolver.add(a.src,a),a.src):(this.resolver.hasKey(a)||this.resolver.add(a,a),a)),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,n);return r?o[i[0]]:o}addBundle(e,n){this.resolver.addBundle(e,n)}async loadBundle(e,n){this._initialized||await this.init();let r=!1;typeof e=="string"&&(r=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},o=Object.keys(i);let a=0,u=0;const h=()=>{n==null||n(++a/u)},d=o.map(p=>{const f=i[p];return u+=Object.keys(f).length,this._mapLoadToResolve(f,h).then(g=>{s[p]=g})});return await Promise.all(d),r?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(n))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolveBundle(e);Object.values(n).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return ld.get(e);const n={};for(let r=0;r<e.length;r++)n[r]=ld.get(e[r]);return n}async _mapLoadToResolve(e,n){const r=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(r,n);this._backgroundLoader.active=!0;const o={};return r.forEach((a,u)=>{const h=s[a.src],d=[a.src];a.alias&&d.push(...a.alias),o[i[u]]=h,ld.set(d,h)}),o}async unload(e){this._initialized||await this.init();const n=la(e).map(i=>typeof i!="string"?i.src:i),r=this.resolver.resolve(n);await this._unloadFromResolved(r)}async unloadBundle(e){this._initialized||await this.init(),e=la(e);const n=this.resolver.resolveBundle(e),r=Object.keys(n).map(i=>this._unloadFromResolved(n[i]));await Promise.all(r)}async _unloadFromResolved(e){const n=Object.values(e);n.forEach(r=>{ld.remove(r.src)}),await this.loader.unload(n)}get detections(){return this._detections}get preferWorkers(){return Hy.config.preferWorkers}set preferWorkers(e){at("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(n=>{n.config&&Object.keys(n.config).filter(r=>r in e).forEach(r=>{n.config[r]=e[r]})})}}const xm=new $5;Me.handleByList(Te.LoadParser,xm.loader.parsers).handleByList(Te.ResolveParser,xm.resolver.parsers).handleByList(Te.CacheParser,xm.cache.parsers).handleByList(Te.DetectionParser,xm.detections);const H5={extension:Te.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof _e),getCacheableAssets:(t,e)=>{const n={};return t.forEach(r=>{e.forEach((i,s)=>{n[r+(s===0?"":s+1)]=i})}),n}};Me.add(H5);const j5={extension:{type:Te.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",e=await we.ADAPTER.fetch(t).then(n=>n.blob());return createImageBitmap(e).then(()=>!0,()=>!1)},add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};Me.add(j5);const W5={extension:{type:Te.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",e=await we.ADAPTER.fetch(t).then(n=>n.blob());return createImageBitmap(e).then(()=>!0,()=>!1)},add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};Me.add(W5);const mT=["png","jpg","jpeg"],G5={extension:{type:Te.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...mT],remove:async t=>t.filter(e=>!mT.includes(e))};Me.add(G5);const V5={extension:Te.ResolveParser,test:Hy.test,parse:t=>{var e;return{resolution:parseFloat(((e=we.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:t.split(".").pop(),src:t}}};Me.add(V5);var Ti=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t))(Ti||{});const jg={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let Ko,uc;function gT(){uc={s3tc:Ko.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Ko.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Ko.getExtension("WEBGL_compressed_texture_etc"),etc1:Ko.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Ko.getExtension("WEBGL_compressed_texture_pvrtc")||Ko.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Ko.getExtension("WEBGL_compressed_texture_atc"),astc:Ko.getExtension("WEBGL_compressed_texture_astc")}}const X5={extension:{type:Te.DetectionParser,priority:2},test:async()=>{const e=we.ADAPTER.createCanvas().getContext("webgl");return e?(Ko=e,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{uc||gT();const e=[];for(const n in uc)uc[n]&&e.push(n);return[...e,...t]},remove:async t=>(uc||gT(),t.filter(e=>!(e in uc)))};Me.add(X5);class q5 extends Wf{constructor(e,n={width:1,height:1,autoLoad:!0}){let r,i;typeof e=="string"?(r=e,i=new Uint8Array):(r=null,i=e),super(i,n),this.origin=r,this.buffer=i?new Hx(i):null,this._load=null,this.loaded=!1,this.origin!==null&&n.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new Hx(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class hu extends q5{constructor(e,n){super(e,n),this.format=n.format,this.levels=n.levels||1,this._width=n.width,this._height=n.height,this._extension=hu._formatToExtension(this.format),(n.levelBuffers||this.buffer)&&(this._levelBuffers=n.levelBuffers||hu._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,n,r){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:u,levelWidth:h,levelHeight:d,levelBuffer:p}=this._levelBuffers[o];i.compressedTexImage2D(i.TEXTURE_2D,u,this.format,h,d,0,p)}return!0}onBlobLoaded(){this._levelBuffers=hu._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,n,r,i,s,o,a){const u=new Array(r);let h=e.byteOffset,d=o,p=a,f=d+i-1&~(i-1),g=p+s-1&~(s-1),v=f*g*jg[n];for(let w=0;w<r;w++)u[w]={levelID:w,levelWidth:r>1?d:f,levelHeight:r>1?p:g,levelBuffer:new Uint8Array(e.buffer,h,v)},h+=v,d=d>>1||1,p=p>>1||1,f=d+i-1&~(i-1),g=p+s-1&~(s-1),v=f*g*jg[n];return u}}const r1=4,_m=124,Y5=32,yT=20,Q5=542327876,wm={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},K5={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},bm={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},Z5=1,J5=2,e6=4,t6=64,n6=512,r6=131072,i6=827611204,s6=861165636,o6=894720068,a6=808540228,l6=4,u6={[i6]:Ti.COMPRESSED_RGBA_S3TC_DXT1_EXT,[s6]:Ti.COMPRESSED_RGBA_S3TC_DXT3_EXT,[o6]:Ti.COMPRESSED_RGBA_S3TC_DXT5_EXT},c6={70:Ti.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Ti.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Ti.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Ti.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Ti.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Ti.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Ti.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Ti.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Ti.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function h6(t){const e=new Uint32Array(t);if(e[0]!==Q5)throw new Error("Invalid DDS file magic word");const r=new Uint32Array(t,0,_m/Uint32Array.BYTES_PER_ELEMENT),i=r[wm.HEIGHT],s=r[wm.WIDTH],o=r[wm.MIPMAP_COUNT],a=new Uint32Array(t,wm.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,Y5/Uint32Array.BYTES_PER_ELEMENT),u=a[Z5];if(u&e6){const h=a[K5.FOURCC];if(h!==a6){const _=u6[h],A=r1+_m,P=new Uint8Array(t,A);return[new hu(P,{format:_,width:s,height:i,levels:o})]}const d=r1+_m,p=new Uint32Array(e.buffer,d,yT/Uint32Array.BYTES_PER_ELEMENT),f=p[bm.DXGI_FORMAT],g=p[bm.RESOURCE_DIMENSION],v=p[bm.MISC_FLAG],w=p[bm.ARRAY_SIZE],C=c6[f];if(C===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${f}`);if(v===l6)throw new Error("DDSParser does not support cubemap textures");if(g===6)throw new Error("DDSParser does not supported 3D texture data");const b=new Array,S=r1+_m+yT;if(w===1)b.push(new Uint8Array(t,S));else{const _=jg[C];let A=0,P=s,F=i;for(let D=0;D<o;D++){const q=Math.max(1,P+3&-4),G=Math.max(1,F+3&-4),H=q*G*_;A+=H,P=P>>>1,F=F>>>1}let N=S;for(let D=0;D<w;D++)b.push(new Uint8Array(t,N,A)),N+=A}return b.map(_=>new hu(_,{format:C,width:s,height:i,levels:o}))}throw u&t6?new Error("DDSParser does not support uncompressed texture data."):u&n6?new Error("DDSParser does not supported YUV uncompressed texture data."):u&r6?new Error("DDSParser does not support single-channel (lumninance) texture data!"):u&J5?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const vT=[171,75,84,88,32,49,49,187,13,10,26,10],d6=67305985,vs={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},r_=64,xT={[Be.UNSIGNED_BYTE]:1,[Be.UNSIGNED_SHORT]:2,[Be.INT]:4,[Be.UNSIGNED_INT]:4,[Be.FLOAT]:4,[Be.HALF_FLOAT]:8},f6={[ye.RGBA]:4,[ye.RGB]:3,[ye.RG]:2,[ye.RED]:1,[ye.LUMINANCE]:1,[ye.LUMINANCE_ALPHA]:2,[ye.ALPHA]:1},p6={[Be.UNSIGNED_SHORT_4_4_4_4]:2,[Be.UNSIGNED_SHORT_5_5_5_1]:2,[Be.UNSIGNED_SHORT_5_6_5]:2};function m6(t,e,n=!1){const r=new DataView(e);if(!g6(t,r))return null;const i=r.getUint32(vs.ENDIANNESS,!0)===d6,s=r.getUint32(vs.GL_TYPE,i),o=r.getUint32(vs.GL_FORMAT,i),a=r.getUint32(vs.GL_INTERNAL_FORMAT,i),u=r.getUint32(vs.PIXEL_WIDTH,i),h=r.getUint32(vs.PIXEL_HEIGHT,i)||1,d=r.getUint32(vs.PIXEL_DEPTH,i)||1,p=r.getUint32(vs.NUMBER_OF_ARRAY_ELEMENTS,i)||1,f=r.getUint32(vs.NUMBER_OF_FACES,i),g=r.getUint32(vs.NUMBER_OF_MIPMAP_LEVELS,i),v=r.getUint32(vs.BYTES_OF_KEY_VALUE_DATA,i);if(h===0||d!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(p!==1)throw new Error("WebGL does not support array textures");const w=4,C=4,b=u+3&-4,S=h+3&-4,_=new Array(p);let A=u*h;s===0&&(A=b*S);let P;if(s!==0?xT[s]?P=xT[s]*f6[o]:P=p6[s]:P=jg[a],P===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const F=n?v6(r,v,i):null;let D=A*P,q=u,G=h,H=b,J=S,V=r_+v;for(let U=0;U<g;U++){const Z=r.getUint32(V,i);let ie=V+4;for(let O=0;O<p;O++){let L=_[O];L||(L=_[O]=new Array(g)),L[U]={levelID:U,levelWidth:g>1||s!==0?q:H,levelHeight:g>1||s!==0?G:J,levelBuffer:new Uint8Array(e,ie,D)},ie+=D}V+=Z+4,V=V%4!==0?V+4-V%4:V,q=q>>1||1,G=G>>1||1,H=q+w-1&~(w-1),J=G+C-1&~(C-1),D=H*J*P}return s!==0?{uncompressed:_.map(U=>{let Z=U[0].levelBuffer,ie=!1;return s===Be.FLOAT?Z=new Float32Array(U[0].levelBuffer.buffer,U[0].levelBuffer.byteOffset,U[0].levelBuffer.byteLength/4):s===Be.UNSIGNED_INT?(ie=!0,Z=new Uint32Array(U[0].levelBuffer.buffer,U[0].levelBuffer.byteOffset,U[0].levelBuffer.byteLength/4)):s===Be.INT&&(ie=!0,Z=new Int32Array(U[0].levelBuffer.buffer,U[0].levelBuffer.byteOffset,U[0].levelBuffer.byteLength/4)),{resource:new Wf(Z,{width:U[0].levelWidth,height:U[0].levelHeight}),type:s,format:ie?y6(o):o}}),kvData:F}:{compressed:_.map(U=>new hu(null,{format:a,width:u,height:h,levels:g,levelBuffers:U})),kvData:F}}function g6(t,e){for(let n=0;n<vT.length;n++)if(e.getUint8(n)!==vT[n])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}function y6(t){switch(t){case ye.RGBA:return ye.RGBA_INTEGER;case ye.RGB:return ye.RGB_INTEGER;case ye.RG:return ye.RG_INTEGER;case ye.RED:return ye.RED_INTEGER;default:return t}}function v6(t,e,n){const r=new Map;let i=0;for(;i<e;){const s=t.getUint32(r_+i,n),o=r_+i+4,a=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let u=0;for(;u<s&&t.getUint8(o+u)!==0;u++);if(u===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const h=new TextDecoder().decode(new Uint8Array(t.buffer,o,u)),d=new DataView(t.buffer,o+u+1,s-u-1);r.set(h,d),i+=4+s+a}return r}const x6={extension:{type:Te.LoadParser,priority:Gs.High},name:"loadDDS",test(t){return ku(t,".dds")},async load(t,e,n){const i=await(await we.ADAPTER.fetch(t)).arrayBuffer(),o=h6(i).map(a=>{const u=new Ge(a,{mipmap:Do.OFF,alphaMode:js.NO_PREMULTIPLIED_ALPHA,resolution:ml(t),...e.data});return $y(u,n,t)});return o.length===1?o[0]:o},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};Me.add(x6);const _6={extension:{type:Te.LoadParser,priority:Gs.High},name:"loadKTX",test(t){return ku(t,".ktx")},async load(t,e,n){const i=await(await we.ADAPTER.fetch(t)).arrayBuffer(),{compressed:s,uncompressed:o,kvData:a}=m6(t,i),u=s??o,h={mipmap:Do.OFF,alphaMode:js.NO_PREMULTIPLIED_ALPHA,resolution:ml(t),...e.data},d=u.map(p=>{u===o&&Object.assign(h,{type:p.type,format:p.format});const f=new Ge(p,h);return f.ktxKeyValueData=a,$y(f,n,t)});return d.length===1?d[0]:d},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};Me.add(_6);const w6={extension:Te.ResolveParser,test:t=>{const n=t.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(n)},parse:t=>{var r,i;if(t.split("?")[0].split(".").pop()==="ktx"){const s=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(s.some(o=>t.endsWith(o)))return{resolution:parseFloat(((r=we.RETINA_PREFIX.exec(t))==null?void 0:r[1])??"1"),format:s.find(o=>t.endsWith(o)),src:t}}return{resolution:parseFloat(((i=we.RETINA_PREFIX.exec(t))==null?void 0:i[1])??"1"),format:t.split(".").pop(),src:t}}};Me.add(w6);const b6=new Ye,S6=4,wd=class{constructor(t){this.renderer=t}async image(t,e,n){const r=new Image;return r.src=await this.base64(t,e,n),r}async base64(t,e,n){const r=this.canvas(t);if(r.toBlob!==void 0)return new Promise((i,s)=>{r.toBlob(o=>{if(!o){s(new Error("ICanvas.toBlob failed!"));return}const a=new FileReader;a.onload=()=>i(a.result),a.onerror=s,a.readAsDataURL(o)},e,n)});if(r.toDataURL!==void 0)return r.toDataURL(e,n);if(r.convertToBlob!==void 0){const i=await r.convertToBlob({type:e,quality:n});return new Promise((s,o)=>{const a=new FileReader;a.onload=()=>s(a.result),a.onerror=o,a.readAsDataURL(i)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,e){const{pixels:n,width:r,height:i,flipY:s}=this._rawPixels(t,e);s&&wd._flipY(n,r,i),wd._unpremultiplyAlpha(n);const o=new mF(r,i,1),a=new ImageData(new Uint8ClampedArray(n.buffer),r,i);return o.context.putImageData(a,0,0),o.canvas}pixels(t,e){const{pixels:n,width:r,height:i,flipY:s}=this._rawPixels(t,e);return s&&wd._flipY(n,r,i),wd._unpremultiplyAlpha(n),n}_rawPixels(t,e){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let r,i=!1,s,o=!1;if(t&&(t instanceof Pu?s=t:(s=n.generateTexture(t,{resolution:n.resolution,multisample:n.multisample}),o=!0)),s){if(r=s.baseTexture.resolution,e=e??s.frame,i=!1,!o){n.renderTexture.bind(s);const p=s.framebuffer.glFramebuffers[n.CONTEXT_UID];p.blitFramebuffer&&n.framebuffer.bind(p.blitFramebuffer)}}else r=n.resolution,e||(e=b6,e.width=n.width/r,e.height=n.height/r),i=!0,n.renderTexture.bind();const a=Math.round(e.width*r),u=Math.round(e.height*r),h=new Uint8Array(S6*a*u),d=n.gl;return d.readPixels(Math.round(e.x*r),Math.round(e.y*r),a,u,d.RGBA,d.UNSIGNED_BYTE,h),o&&(s==null||s.destroy(!0)),{pixels:h,width:a,height:u,flipY:i}}destroy(){this.renderer=null}static _flipY(t,e,n){const r=e<<2,i=n>>1,s=new Uint8Array(r);for(let o=0;o<i;o++){const a=o*r,u=(n-o-1)*r;s.set(t.subarray(a,a+r)),t.copyWithin(a,u,u+r),t.set(s,u)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let n=0;n<e;n+=4){const r=t[n+3];if(r!==0){const i=255.001/r;t[n]=t[n]*i+.5,t[n+1]=t[n+1]*i+.5,t[n+2]=t[n+2]*i+.5}}}};let X3=wd;X3.extension={name:"extract",type:Te.RendererSystem};Me.add(X3);const Wg={build(t){const e=t.points;let n,r,i,s,o,a;if(t.type===pr.CIRC){const v=t.shape;n=v.x,r=v.y,o=a=v.radius,i=s=0}else if(t.type===pr.ELIP){const v=t.shape;n=v.x,r=v.y,o=v.width,a=v.height,i=s=0}else{const v=t.shape,w=v.width/2,C=v.height/2;n=v.x+w,r=v.y+C,o=a=Math.max(0,Math.min(v.radius,Math.min(w,C))),i=w-o,s=C-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){e.length=0;return}const u=Math.ceil(2.3*Math.sqrt(o+a)),h=u*8+(i?4:0)+(s?4:0);if(e.length=h,h===0)return;if(u===0){e.length=8,e[0]=e[6]=n+i,e[1]=e[3]=r+s,e[2]=e[4]=n-i,e[5]=e[7]=r-s;return}let d=0,p=u*4+(i?2:0)+2,f=p,g=h;{const v=i+o,w=s,C=n+v,b=n-v,S=r+w;if(e[d++]=C,e[d++]=S,e[--p]=S,e[--p]=b,s){const _=r-w;e[f++]=b,e[f++]=_,e[--g]=_,e[--g]=C}}for(let v=1;v<u;v++){const w=Math.PI/2*(v/u),C=i+Math.cos(w)*o,b=s+Math.sin(w)*a,S=n+C,_=n-C,A=r+b,P=r-b;e[d++]=S,e[d++]=A,e[--p]=A,e[--p]=_,e[f++]=_,e[f++]=P,e[--g]=P,e[--g]=S}{const v=i,w=s+a,C=n+v,b=n-v,S=r+w,_=r-w;e[d++]=C,e[d++]=S,e[--g]=_,e[--g]=C,i&&(e[d++]=b,e[d++]=S,e[--g]=_,e[--g]=b)}},triangulate(t,e){const n=t.points,r=e.points,i=e.indices;if(n.length===0)return;let s=r.length/2;const o=s;let a,u;if(t.type!==pr.RREC){const d=t.shape;a=d.x,u=d.y}else{const d=t.shape;a=d.x+d.width/2,u=d.y+d.height/2}const h=t.matrix;r.push(t.matrix?h.a*a+h.c*u+h.tx:a,t.matrix?h.b*a+h.d*u+h.ty:u),s++,r.push(n[0],n[1]);for(let d=2;d<n.length;d+=2)r.push(n[d],n[d+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function _T(t,e=!1){const n=t.length;if(n<6)return;let r=0;for(let i=0,s=t[n-2],o=t[n-1];i<n;i+=2){const a=t[i],u=t[i+1];r+=(a-s)*(u+o),s=a,o=u}if(!e&&r>0||e&&r<=0){const i=n/2;for(let s=i+i%2;s<n;s+=2){const o=n-s-2,a=n-s-1,u=s,h=s+1;[t[o],t[u]]=[t[u],t[o]],[t[a],t[h]]=[t[h],t[a]]}}}const q3={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let n=t.points;const r=t.holes,i=e.points,s=e.indices;if(n.length>=6){_T(n,!1);const o=[];for(let h=0;h<r.length;h++){const d=r[h];_T(d.points,!0),o.push(n.length/2),n=n.concat(d.points)}const a=UD(n,o,2);if(!a)return;const u=i.length/2;for(let h=0;h<a.length;h+=3)s.push(a[h]+u),s.push(a[h+1]+u),s.push(a[h+2]+u);for(let h=0;h<n.length;h++)i.push(n[h])}}},E6={build(t){const e=t.shape,n=e.x,r=e.y,i=e.width,s=e.height,o=t.points;o.length=0,i>=0&&s>=0&&o.push(n,r,n+i,r,n+i,r+s,n,r+s)},triangulate(t,e){const n=t.points,r=e.points;if(n.length===0)return;const i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},T6={build(t){Wg.build(t)},triangulate(t,e){Wg.triangulate(t,e)}};var Ts=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(Ts||{}),su=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(su||{});const oh={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}};class wT{static curveTo(e,n,r,i,s,o){const a=o[o.length-2],h=o[o.length-1]-n,d=a-e,p=i-n,f=r-e,g=Math.abs(h*f-d*p);if(g<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==n)&&o.push(e,n),null;const v=h*h+d*d,w=p*p+f*f,C=h*p+d*f,b=s*Math.sqrt(v)/g,S=s*Math.sqrt(w)/g,_=b*C/v,A=S*C/w,P=b*f+S*d,F=b*p+S*h,N=d*(S+_),D=h*(S+_),q=f*(b+A),G=p*(b+A),H=Math.atan2(D-F,N-P),J=Math.atan2(G-F,q-P);return{cx:P+e,cy:F+n,radius:s,startAngle:H,endAngle:J,anticlockwise:d*p>f*h}}static arc(e,n,r,i,s,o,a,u,h){const d=a-o,p=oh._segmentsCount(Math.abs(d)*s,Math.ceil(Math.abs(d)/Ug)*40),f=d/(p*2),g=f*2,v=Math.cos(f),w=Math.sin(f),C=p-1,b=C%1/C;for(let S=0;S<=C;++S){const _=S+b*S,A=f+o+g*_,P=Math.cos(A),F=-Math.sin(A);h.push((v*P+w*F)*s+r,(v*-F+w*P)*s+i)}}}class C6{constructor(){this.reset()}begin(e,n,r){this.reset(),this.style=e,this.start=n,this.attribStart=r}end(e,n){this.attribSize=n-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Jw{static curveLength(e,n,r,i,s,o,a,u){let d=0,p=0,f=0,g=0,v=0,w=0,C=0,b=0,S=0,_=0,A=0,P=e,F=n;for(let N=1;N<=10;++N)p=N/10,f=p*p,g=f*p,v=1-p,w=v*v,C=w*v,b=C*e+3*w*p*r+3*v*f*s+g*a,S=C*n+3*w*p*i+3*v*f*o+g*u,_=P-b,A=F-S,P=b,F=S,d+=Math.sqrt(_*_+A*A);return d}static curveTo(e,n,r,i,s,o,a){const u=a[a.length-2],h=a[a.length-1];a.length-=2;const d=oh._segmentsCount(Jw.curveLength(u,h,e,n,r,i,s,o));let p=0,f=0,g=0,v=0,w=0;a.push(u,h);for(let C=1,b=0;C<=d;++C)b=C/d,p=1-b,f=p*p,g=f*p,v=b*b,w=v*b,a.push(g*u+3*f*b*e+3*p*v*r+w*s,g*h+3*f*b*n+3*p*v*i+w*o)}}function bT(t,e,n,r,i,s,o,a){const u=t-n*i,h=e-r*i,d=t+n*s,p=e+r*s;let f,g;o?(f=r,g=-n):(f=-r,g=n);const v=u+f,w=h+g,C=d+f,b=p+g;return a.push(v,w,C,b),2}function $l(t,e,n,r,i,s,o,a){const u=n-t,h=r-e;let d=Math.atan2(u,h),p=Math.atan2(i-t,s-e);a&&d<p?d+=Math.PI*2:!a&&d>p&&(p+=Math.PI*2);let f=d;const g=p-d,v=Math.abs(g),w=Math.sqrt(u*u+h*h),C=(15*v*Math.sqrt(w)/Math.PI>>0)+1,b=g/C;if(f+=b,a){o.push(t,e,n,r);for(let S=1,_=f;S<C;S++,_+=b)o.push(t,e,t+Math.sin(_)*w,e+Math.cos(_)*w);o.push(t,e,i,s)}else{o.push(n,r,t,e);for(let S=1,_=f;S<C;S++,_+=b)o.push(t+Math.sin(_)*w,e+Math.cos(_)*w,t,e);o.push(i,s,t,e)}return C*2}function A6(t,e){const n=t.shape;let r=t.points||n.points.slice();const i=e.closePointEps;if(r.length===0)return;const s=t.lineStyle,o=new Fe(r[0],r[1]),a=new Fe(r[r.length-2],r[r.length-1]),u=n.type!==pr.POLY||n.closeStroke,h=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(u){r=r.slice(),h&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));const O=(o.x+a.x)*.5,L=(a.y+o.y)*.5;r.unshift(O,L),r.push(O,L)}const d=e.points,p=r.length/2;let f=r.length;const g=d.length/2,v=s.width/2,w=v*v,C=s.miterLimit*s.miterLimit;let b=r[0],S=r[1],_=r[2],A=r[3],P=0,F=0,N=-(S-A),D=b-_,q=0,G=0,H=Math.sqrt(N*N+D*D);N/=H,D/=H,N*=v,D*=v;const J=s.alignment,V=(1-J)*2,U=J*2;u||(s.cap===su.ROUND?f+=$l(b-N*(V-U)*.5,S-D*(V-U)*.5,b-N*V,S-D*V,b+N*U,S+D*U,d,!0)+2:s.cap===su.SQUARE&&(f+=bT(b,S,N,D,V,U,!0,d))),d.push(b-N*V,S-D*V,b+N*U,S+D*U);for(let O=1;O<p-1;++O){b=r[(O-1)*2],S=r[(O-1)*2+1],_=r[O*2],A=r[O*2+1],P=r[(O+1)*2],F=r[(O+1)*2+1],N=-(S-A),D=b-_,H=Math.sqrt(N*N+D*D),N/=H,D/=H,N*=v,D*=v,q=-(A-F),G=_-P,H=Math.sqrt(q*q+G*G),q/=H,G/=H,q*=v,G*=v;const L=_-b,Q=S-A,B=_-P,ee=F-A,te=L*B+Q*ee,be=Q*B-ee*L,ge=be<0;if(Math.abs(be)<.001*Math.abs(te)){d.push(_-N*V,A-D*V,_+N*U,A+D*U),te>=0&&(s.join===Ts.ROUND?f+=$l(_,A,_-N*V,A-D*V,_-q*V,A-G*V,d,!1)+4:f+=2,d.push(_-q*U,A-G*U,_+q*V,A+G*V));continue}const je=(-N+b)*(-D+A)-(-N+_)*(-D+S),We=(-q+P)*(-G+A)-(-q+_)*(-G+F),Ne=(L*We-B*je)/be,mt=(ee*je-Q*We)/be,St=(Ne-_)*(Ne-_)+(mt-A)*(mt-A),Qe=_+(Ne-_)*V,De=A+(mt-A)*V,ht=_-(Ne-_)*U,nt=A-(mt-A)*U,En=Math.min(L*L+Q*Q,B*B+ee*ee),On=ge?V:U,fi=En+On*On*w,pi=St<=fi;let Nn=s.join;if(Nn===Ts.MITER&&St/w>C&&(Nn=Ts.BEVEL),pi)switch(Nn){case Ts.MITER:{d.push(Qe,De,ht,nt);break}case Ts.BEVEL:{ge?d.push(Qe,De,_+N*U,A+D*U,Qe,De,_+q*U,A+G*U):d.push(_-N*V,A-D*V,ht,nt,_-q*V,A-G*V,ht,nt),f+=2;break}case Ts.ROUND:{ge?(d.push(Qe,De,_+N*U,A+D*U),f+=$l(_,A,_+N*U,A+D*U,_+q*U,A+G*U,d,!0)+4,d.push(Qe,De,_+q*U,A+G*U)):(d.push(_-N*V,A-D*V,ht,nt),f+=$l(_,A,_-N*V,A-D*V,_-q*V,A-G*V,d,!1)+4,d.push(_-q*V,A-G*V,ht,nt));break}}else{switch(d.push(_-N*V,A-D*V,_+N*U,A+D*U),Nn){case Ts.MITER:{ge?d.push(ht,nt,ht,nt):d.push(Qe,De,Qe,De),f+=2;break}case Ts.ROUND:{ge?f+=$l(_,A,_+N*U,A+D*U,_+q*U,A+G*U,d,!0)+2:f+=$l(_,A,_-N*V,A-D*V,_-q*V,A-G*V,d,!1)+2;break}}d.push(_-q*V,A-G*V,_+q*U,A+G*U),f+=2}}b=r[(p-2)*2],S=r[(p-2)*2+1],_=r[(p-1)*2],A=r[(p-1)*2+1],N=-(S-A),D=b-_,H=Math.sqrt(N*N+D*D),N/=H,D/=H,N*=v,D*=v,d.push(_-N*V,A-D*V,_+N*U,A+D*U),u||(s.cap===su.ROUND?f+=$l(_-N*(V-U)*.5,A-D*(V-U)*.5,_-N*V,A-D*V,_+N*U,A+D*U,d,!1)+2:s.cap===su.SQUARE&&(f+=bT(_,A,N,D,V,U,!1,d)));const Z=e.indices,ie=oh.epsilon*oh.epsilon;for(let O=g;O<f+g-2;++O)b=d[O*2],S=d[O*2+1],_=d[(O+1)*2],A=d[(O+1)*2+1],P=d[(O+2)*2],F=d[(O+2)*2+1],!(Math.abs(b*(A-F)+_*(F-S)+P*(S-A))<ie)&&Z.push(O,O+1,O+2)}function I6(t,e){let n=0;const r=t.shape,i=t.points||r.points,s=r.type!==pr.POLY||r.closeStroke;if(i.length===0)return;const o=e.points,a=e.indices,u=i.length/2,h=o.length/2;let d=h;for(o.push(i[0],i[1]),n=1;n<u;n++)o.push(i[n*2],i[n*2+1]),a.push(d,d+1),d++;s&&a.push(d,h)}function ST(t,e){t.lineStyle.native?I6(t,e):A6(t,e)}class eb{static curveLength(e,n,r,i,s,o){const a=e-2*r+s,u=n-2*i+o,h=2*r-2*e,d=2*i-2*n,p=4*(a*a+u*u),f=4*(a*h+u*d),g=h*h+d*d,v=2*Math.sqrt(p+f+g),w=Math.sqrt(p),C=2*p*w,b=2*Math.sqrt(g),S=f/w;return(C*v+w*f*(v-b)+(4*g*p-f*f)*Math.log((2*w+S+v)/(S+b)))/(4*C)}static curveTo(e,n,r,i,s){const o=s[s.length-2],a=s[s.length-1],u=oh._segmentsCount(eb.curveLength(o,a,e,n,r,i));let h=0,d=0;for(let p=1;p<=u;++p){const f=p/u;h=o+(e-o)*f,d=a+(n-a)*f,s.push(h+(e+(r-e)*f-h)*f,d+(n+(i-n)*f-d)*f)}}}const i1={[pr.POLY]:q3,[pr.CIRC]:Wg,[pr.ELIP]:Wg,[pr.RECT]:E6,[pr.RREC]:T6},ET=[],Sm=[];class Gg{constructor(e,n=null,r=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=n,this.matrix=i,this.type=e.type}clone(){return new Gg(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const ec=new Fe,Y3=class extends o3{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new zg,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Sm.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),ET.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,n=null,r=null){const i=new Gg(t,e,n,r);return this.graphicsData.push(i),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const n=new Gg(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=r.lineStyle,r.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let n=0;n<e.length;++n){const r=e[n];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(t,ec):ec.copyFrom(t),r.shape.contains(ec.x,ec.y))){let i=!1;if(r.holes){for(let s=0;s<r.holes.length;s++)if(r.holes[s].shape.contains(ec.x,ec.y)){i=!0;break}}if(!i)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let n=null,r=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],r=n.style);for(let a=this.shapeIndex;a<e.length;a++){this.shapeIndex++;const u=e[a],h=u.fillStyle,d=u.lineStyle;i1[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(h.visible||d.visible)&&this.processHoles(u.holes);for(let f=0;f<2;f++){const g=f===0?h:d;if(!g.visible)continue;const v=g.texture.baseTexture,w=this.indices.length,C=this.points.length/2;v.wrapMode=aa.REPEAT,f===0?this.processFill(u):this.processLine(u);const b=this.points.length/2-C;b!==0&&(n&&!this._compareStyles(r,g)&&(n.end(w,C),n=null),n||(n=ET.pop()||new C6,n.begin(g,w,C),this.batches.push(n),r=g),this.addUvs(this.points,t,g.texture,C,b,g.matrix))}}const i=this.indices.length,s=this.points.length/2;if(n&&n.end(i,s),this.batches.length===0){this.batchable=!0;return}const o=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const n=this.graphicsData[t],r=n.fillStyle,i=n.lineStyle;if(r&&!r.texture.baseTexture.valid||i&&!i.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,n=t.length;e<n;e++){const r=t[e];for(let i=0;i<r.size;i++){const s=r.start+i;this.indicesUint16[s]=this.indicesUint16[s]-r.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<Y3.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++Ge._globalBatch;for(let d=0;d<this.drawCalls.length;d++)this.drawCalls[d].texArray.clear(),Sm.push(this.drawCalls[d]);this.drawCalls.length=0;const e=this.colors,n=this.textureIds;let r=Sm.pop();r||(r=new Wx,r.texArray=new Vx),r.texArray.count=0,r.start=0,r.size=0,r.type=Ms.TRIANGLES;let i=0,s=null,o=0,a=!1,u=Ms.TRIANGLES,h=0;this.drawCalls.push(r);for(let d=0;d<this.batches.length;d++){const p=this.batches[d],f=8,g=p.style,v=g.texture.baseTexture;a!==!!g.native&&(a=!!g.native,u=a?Ms.LINES:Ms.TRIANGLES,s=null,i=f,t++),s!==v&&(s=v,v._batchEnabled!==t&&(i===f&&(t++,i=0,r.size>0&&(r=Sm.pop(),r||(r=new Wx,r.texArray=new Vx),this.drawCalls.push(r)),r.start=h,r.size=0,r.texArray.count=0,r.type=u),v.touched=1,v._batchEnabled=t,v._batchLocation=i,v.wrapMode=aa.REPEAT,r.texArray.elements[r.texArray.count++]=v,i++)),r.size+=p.size,h+=p.size,o=v._batchLocation,this.addColors(e,g.color,g.alpha,p.attribSize,p.attribStart),this.addTextureIds(n,o,p.attribSize,p.attribStart)}Ge._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,n=this.colors,r=this.textureIds,i=new ArrayBuffer(t.length*3*4),s=new Float32Array(i),o=new Uint32Array(i);let a=0;for(let u=0;u<t.length/2;u++)s[a++]=t[u*2],s[a++]=t[u*2+1],s[a++]=e[u*2],s[a++]=e[u*2+1],o[a++]=n[u],s[a++]=r[u];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?q3.triangulate(t,this):i1[t.type].triangulate(t,this)}processLine(t){ST(t,this);for(let e=0;e<t.holes.length;e++)ST(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const n=t[e];i1[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let n=0;n<t.length/2;n++){const r=t[n*2],i=t[n*2+1];t[n*2]=e.a*r+e.c*i+e.tx,t[n*2+1]=e.b*r+e.d*i+e.ty}}addColors(t,e,n,r,i=0){const s=Rt.shared.setValue(e).toLittleEndianNumber(),o=Rt.shared.setValue(s).toPremultiplied(n);t.length=Math.max(t.length,i+r);for(let a=0;a<r;a++)t[i+a]=o}addTextureIds(t,e,n,r=0){t.length=Math.max(t.length,r+n);for(let i=0;i<n;i++)t[r+i]=e}addUvs(t,e,n,r,i,s=null){let o=0;const a=e.length,u=n.frame;for(;o<i;){let d=t[(r+o)*2],p=t[(r+o)*2+1];if(s){const f=s.a*d+s.c*p+s.tx;p=s.b*d+s.d*p+s.ty,d=f}o++,e.push(d/u.width,p/u.height)}const h=n.baseTexture;(u.width<h.width||u.height<h.height)&&this.adjustUvs(e,n,a,i)}adjustUvs(t,e,n,r){const i=e.baseTexture,s=1e-6,o=n+r*2,a=e.frame,u=a.width/i.width,h=a.height/i.height;let d=a.x/a.width,p=a.y/a.height,f=Math.floor(t[n]+s),g=Math.floor(t[n+1]+s);for(let v=n+2;v<o;v+=2)f=Math.min(f,Math.floor(t[v]+s)),g=Math.min(g,Math.floor(t[v+1]+s));d-=f,p-=g;for(let v=n;v<o;v+=2)t[v]=(t[v]+d)*u,t[v+1]=(t[v+1]+p)*h}};let Q3=Y3;Q3.BATCHABLE_SIZE=100;class jy{constructor(){this.color=16777215,this.alpha=1,this.texture=_e.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new jy;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=_e.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class tb extends jy{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=su.BUTT,this.join=Ts.MITER,this.miterLimit=10}clone(){const e=new tb;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const s1={},rg=class extends ir{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new jy,this._lineStyle=new tb,this._matrix=null,this._holeMode=!1,this.state=va.for2d(),this._geometry=t||new Q3,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Rt(16777215),this.blendMode=Ue.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new rg(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,n,r=.5,i=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:n,alignment:r,native:i}),this.lineTextureStyle(t)}lineTextureStyle(t){const e={width:0,texture:_e.WHITE,color:t!=null&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:su.BUTT,join:Ts.MITER,miterLimit:10};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const n=t.width>0&&t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:n},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new jc,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new jc,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,r=n[n.length-2],i=n[n.length-1];return(r!==t||i!==e)&&n.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,n,r){this._initCurve();const i=this.currentPath.points;return i.length===0&&this.moveTo(0,0),eb.curveTo(t,e,n,r,i),this}bezierCurveTo(t,e,n,r,i,s){return this._initCurve(),Jw.curveTo(t,e,n,r,i,s,this.currentPath.points),this}arcTo(t,e,n,r,i){this._initCurve(t,e);const s=this.currentPath.points,o=wT.curveTo(t,e,n,r,i,s);if(o){const{cx:a,cy:u,radius:h,startAngle:d,endAngle:p,anticlockwise:f}=o;this.arc(a,u,h,d,p,f)}return this}arc(t,e,n,r,i,s=!1){if(r===i)return this;if(!s&&i<=r?i+=Ug:s&&r<=i&&(r+=Ug),i-r===0)return this;const a=t+Math.cos(r)*n,u=e+Math.sin(r)*n,h=this._geometry.closePointEps;let d=this.currentPath?this.currentPath.points:null;if(d){const p=Math.abs(d[d.length-2]-a),f=Math.abs(d[d.length-1]-u);p<h&&f<h||d.push(a,u)}else this.moveTo(a,u),d=this.currentPath.points;return wT.arc(a,u,t,e,n,r,i,s,d),this}beginFill(t=0,e){return this.beginTextureFill({texture:_e.WHITE,color:t,alpha:e})}normalizeColor(t){const e=Rt.shared.setValue(t.color??0);t.color=e.toNumber(),t.alpha??(t.alpha=e.alpha)}beginTextureFill(t){const e={texture:_e.WHITE,color:16777215,matrix:null};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const n=t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:n},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,n,r){return this.drawShape(new Ye(t,e,n,r))}drawRoundedRect(t,e,n,r,i){return this.drawShape(new Qw(t,e,n,r,i))}drawCircle(t,e,n){return this.drawShape(new qw(t,e,n))}drawEllipse(t,e,n,r){return this.drawShape(new Yw(t,e,n,r))}drawPolygon(...t){let e,n=!0;const r=t[0];r.points?(n=r.closeStroke,e=r.points):Array.isArray(t[0])?e=t[0]:e=t;const i=new jc(e);return i.closeStroke=n,this.drawShape(i),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===pr.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(let r=0;r<n;r++){const i=t.batches[r],s=i.style.color,o=new Float32Array(this.vertexData.buffer,i.attribStart*4*2,i.attribSize*2),a=new Float32Array(t.uvsFloat32.buffer,i.attribStart*4*2,i.attribSize*2),u=new Uint16Array(t.indicesUint16.buffer,i.start*2,i.size),h={vertexData:o,blendMode:e,indices:u,uvs:a,_batchRGB:Rt.shared.setValue(s).toRgbArray(),_tintRGB:s,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[r]=h}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,n=this.batches.length;e<n;e++){const r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}}_renderDirect(t){const e=this._resolveDirectShader(t),n=this._geometry,r=this.worldAlpha,i=e.uniforms,s=n.drawCalls;i.translationMatrix=this.transform.worldTransform,Rt.shared.setValue(this._tintColor).premultiply(r).toArray(i.tint),t.shader.bind(e),t.geometry.bind(n,e),t.state.set(this.state);for(let o=0,a=s.length;o<a;o++)this._renderDrawCallDirect(t,n.drawCalls[o])}_renderDrawCallDirect(t,e){const{texArray:n,type:r,size:i,start:s}=e,o=n.count;for(let a=0;a<o;a++)t.texture.bind(n.elements[a],a);t.geometry.draw(r,i,s)}_resolveDirectShader(t){let e=this.shader;const n=this.pluginName;if(!e){if(!s1[n]){const{maxTextures:r}=t.plugins[n],i=new Int32Array(r);for(let a=0;a<r;a++)i[a]=a;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new rn,default:Us.from({uSamplers:i},!0)},o=t.plugins[n]._shader.program;s1[n]=new No(o,s)}e=s1[n]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:n,maxX:r,maxY:i}=t.bounds;this._bounds.addFrame(this.transform,e,n,r,i)}containsPoint(t){return this.worldTransform.applyInverse(t,rg._TEMP_POINT),this._geometry.containsPoint(rg._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e._tintRGB=Rt.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,n=e.a,r=e.b,i=e.c,s=e.d,o=e.tx,a=e.ty,u=this._geometry.points,h=this.vertexData;let d=0;for(let p=0;p<u.length;p+=2){const f=u[p],g=u[p+1];h[d++]=n*f+i*g+o,h[d++]=s*g+r*f+a}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};let du=rg;du.curves=oh;du._TEMP_POINT=new Fe;class P6{constructor(e,n){this.uvBuffer=e,this.uvMatrix=n,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const n=this.uvBuffer.data;(!this.data||this.data.length!==n.length)&&(this.data=new Float32Array(n.length)),this.uvMatrix.multiplyUvs(n,this.data),this._updateID++}}const o1=new Fe,TT=new jc,K3=class extends ir{constructor(t,e,n,r=Ms.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=n||va.for2d(),this.drawMode=r,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=we.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Ms.TRIANGLES&&e.length<K3.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)}calculateVertices(){const e=this.geometry.buffers[0],n=e.data,r=e._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,u=i.d,h=i.tx,d=i.ty,p=this.vertexData;for(let f=0;f<p.length/2;f++){const g=n[f*2],v=n[f*2+1];p[f*2]=s*g+a*v+h,p[f*2+1]=o*g+u*v+d}if(this._roundPixels){const f=we.RESOLUTION;for(let g=0;g<p.length;++g)p[g]=Math.round(p[g]*f)/f}this.vertexDirty=r}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new P6(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,o1);const e=this.geometry.getBuffer("aVertexPosition").data,n=TT.points,r=this.geometry.getIndex().data,i=r.length,s=this.drawMode===4?3:1;for(let o=0;o+2<i;o+=s){const a=r[o]*2,u=r[o+1]*2,h=r[o+2]*2;if(n[0]=e[a],n[1]=e[a+1],n[2]=e[u],n[3]=e[u+1],n[4]=e[h],n[5]=e[h+1],TT.contains(o1.x,o1.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let ah=K3;ah.BATCHABLE_SIZE=100;class Wy extends gl{constructor(e,n,r){super();const i=new bn(e),s=new bn(n,!0),o=new bn(r,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,Be.FLOAT).addAttribute("aTextureCoord",s,2,!1,Be.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var k6=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,R6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class bf extends No{constructor(e,n){const r={uSampler:e,alpha:1,uTextureMatrix:rn.IDENTITY,uColor:new Float32Array([1,1,1,1])};n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(r,n.uniforms),super(n.program||Os.from(R6,k6),r),this._colorDirty=!1,this.uvMatrix=new Kw(e),this.batchable=n.program===void 0,this.pluginName=n.pluginName,this._tintColor=new Rt(n.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=n.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const n=this.texture.baseTexture.alphaMode;Rt.shared.setValue(this._tintColor).premultiply(this._alpha,n).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class M6 extends Wy{constructor(e=100,n=100,r=10,i=10){super(),this.segWidth=r,this.segHeight=i,this.width=e,this.height=n,this.build()}build(){const e=this.segWidth*this.segHeight,n=[],r=[],i=[],s=this.segWidth-1,o=this.segHeight-1,a=this.width/s,u=this.height/o;for(let d=0;d<e;d++){const p=d%this.segWidth,f=d/this.segWidth|0;n.push(p*a,f*u),r.push(p/s,f/o)}const h=s*o;for(let d=0;d<h;d++){const p=d%s,f=d/s|0,g=f*this.segWidth+p,v=f*this.segWidth+p+1,w=(f+1)*this.segWidth+p,C=(f+1)*this.segWidth+p+1;i.push(g,v,w,v,C,w)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class O6 extends Wy{constructor(e=200,n,r=0){super(new Float32Array(n.length*4),new Float32Array(n.length*4),new Uint16Array((n.length-1)*6)),this.points=n,this._width=e,this.textureScale=r,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const n=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),i=this.getIndex();if(e.length<1)return;n.data.length/4!==e.length&&(n.data=new Float32Array(e.length*4),r.data=new Float32Array(e.length*4),i.data=new Uint16Array((e.length-1)*6));const s=r.data,o=i.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let a=0,u=e[0];const h=this._width*this.textureScale,d=e.length;for(let f=0;f<d;f++){const g=f*4;if(this.textureScale>0){const v=u.x-e[f].x,w=u.y-e[f].y,C=Math.sqrt(v*v+w*w);u=e[f],a+=C/h}else a=f/(d-1);s[g]=a,s[g+1]=0,s[g+2]=a,s[g+3]=1}let p=0;for(let f=0;f<d-1;f++){const g=f*2;o[p++]=g,o[p++]=g+1,o[p++]=g+2,o[p++]=g+2,o[p++]=g+1,o[p++]=g+3}r.update(),i.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let n=e[0],r,i=0,s=0;const o=this.buffers[0].data,a=e.length,u=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let h=0;h<a;h++){const d=e[h],p=h*4;h<e.length-1?r=e[h+1]:r=d,s=-(r.x-n.x),i=r.y-n.y;const f=Math.sqrt(i*i+s*s);f<1e-6?(i=0,s=0):(i/=f,s/=f,i*=u,s*=u),o[p]=d.x+i,o[p+1]=d.y+s,o[p+2]=d.x-i,o[p+3]=d.y-s,n=d}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class N6 extends ah{constructor(e,n,r){const i=new M6(e.width,e.height,n,r),s=new bf(_e.WHITE);super(i,s),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:n,height:r}=this.shader.texture;this.autoResize&&(e.width!==n||e.height!==r)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const Em=10;class D6 extends N6{constructor(e,n,r,i,s){var o,a,u,h;super(_e.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=n??((o=e.defaultBorders)==null?void 0:o.left)??Em,this._rightWidth=i??((a=e.defaultBorders)==null?void 0:a.right)??Em,this._topHeight=r??((u=e.defaultBorders)==null?void 0:u.top)??Em,this._bottomHeight=s??((h=e.defaultBorders)==null?void 0:h.bottom)??Em,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,n=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*n,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*n,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,n=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*n,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*n,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,n=this._width>e?1:this._width/e,r=this._topHeight+this._bottomHeight,i=this._height>r?1:this._height/r;return Math.min(n,i)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,n=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const r=1/this._origWidth,i=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=r*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-r*this._rightWidth,n[9]=n[11]=n[13]=n[15]=i*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class L6 extends ah{constructor(e=_e.EMPTY,n,r,i,s){const o=new Wy(n,r,i);o.getBuffer("aVertexPosition").static=!1;const a=new bf(e);super(o,a,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}class F6 extends ah{constructor(e,n,r=0){const i=new O6(e.height,n,r),s=new bf(e);r>0&&(e.baseTexture.wrapMode=aa.REPEAT),super(i,s),this.autoUpdate=!0}_render(e){const n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),super._render(e)}}class B6 extends ir{constructor(e=1500,n,r=16384,i=!1){super();const s=16384;r>s&&(r=s),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=r,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=Ue.NORMAL,this.autoResize=i,this.roundPixels=!0,this.baseTexture=null,this.setProperties(n),this._tintColor=new Rt(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const n=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class CT{constructor(e,n,r){this.geometry=new gl,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||Be.FLOAT,offset:s.offset},n[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let n=0;this.indexBuffer=new bn(fF(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=n,n+=a.size,this.dynamicStride+=a.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new bn(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new bn(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===Be.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===Be.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,n,r){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(e,n,r,s.type===Be.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,n,r){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(e,n,r,s.type===Be.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var U6=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,z6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Z3 extends Ly{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new rn,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Be.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=No.from(z6,U6,{}),this.state=va.for2d()}render(e){const n=e.children,r=e._maxSize,i=e._batchSize,s=this.renderer;let o=n.length;if(o===0)return;o>r&&!e.autoResize&&(o=r);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const u=n[0]._texture.baseTexture,h=u.alphaMode>0;this.state.blendMode=n3(e.blendMode,h),s.state.set(this.state);const d=s.gl,p=e.worldTransform.copyTo(this.tempMatrix);p.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=p.toArray(!0),this.shader.uniforms.uColor=Rt.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,h).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);let f=!1;for(let g=0,v=0;g<o;g+=i,v+=1){let w=o-g;w>i&&(w=i),v>=a.length&&a.push(this._generateOneMoreBuffer(e));const C=a[v];C.uploadDynamic(n,g,w);const b=e._bufferUpdateIDs[v]||0;f=f||C._updateID<b,f&&(C._updateID=e._updateID,C.uploadStatic(n,g,w)),s.geometry.bind(C.geometry),d.drawElements(d.TRIANGLES,w*6,d.UNSIGNED_SHORT,0)}}generateBuffers(e){const n=[],r=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<r;o+=i)n.push(new CT(this.properties,s,i));return n}_generateOneMoreBuffer(e){const n=e._batchSize,r=e._properties;return new CT(this.properties,r,n)}uploadVertices(e,n,r,i,s,o){let a=0,u=0,h=0,d=0;for(let p=0;p<r;++p){const f=e[n+p],g=f._texture,v=f.scale.x,w=f.scale.y,C=g.trim,b=g.orig;C?(u=C.x-f.anchor.x*b.width,a=u+C.width,d=C.y-f.anchor.y*b.height,h=d+C.height):(a=b.width*(1-f.anchor.x),u=b.width*-f.anchor.x,h=b.height*(1-f.anchor.y),d=b.height*-f.anchor.y),i[o]=u*v,i[o+1]=d*w,i[o+s]=a*v,i[o+s+1]=d*w,i[o+s*2]=a*v,i[o+s*2+1]=h*w,i[o+s*3]=u*v,i[o+s*3+1]=h*w,o+=s*4}}uploadPosition(e,n,r,i,s,o){for(let a=0;a<r;a++){const u=e[n+a].position;i[o]=u.x,i[o+1]=u.y,i[o+s]=u.x,i[o+s+1]=u.y,i[o+s*2]=u.x,i[o+s*2+1]=u.y,i[o+s*3]=u.x,i[o+s*3+1]=u.y,o+=s*4}}uploadRotation(e,n,r,i,s,o){for(let a=0;a<r;a++){const u=e[n+a].rotation;i[o]=u,i[o+s]=u,i[o+s*2]=u,i[o+s*3]=u,o+=s*4}}uploadUvs(e,n,r,i,s,o){for(let a=0;a<r;++a){const u=e[n+a]._texture._uvs;u?(i[o]=u.x0,i[o+1]=u.y0,i[o+s]=u.x1,i[o+s+1]=u.y1,i[o+s*2]=u.x2,i[o+s*2+1]=u.y2,i[o+s*3]=u.x3,i[o+s*3+1]=u.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,n,r,i,s,o){for(let a=0;a<r;++a){const u=e[n+a],h=Rt.shared.setValue(u._tintRGB).toPremultiplied(u.alpha,u.texture.baseTexture.alphaMode>0);i[o]=h,i[o+s]=h,i[o+s*2]=h,i[o+s*3]=h,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Z3.extension={name:"particle",type:Te.RendererPlugin};Me.add(Z3);var Gy=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(Gy||{});const Tm={willReadFrequently:!0},Re=class{static get experimentalLetterSpacingSupported(){let t=Re._experimentalLetterSpacingSupported;if(t!==void 0){const e=we.ADAPTER.getCanvasRenderingContext2D().prototype;t=Re._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,n,r,i,s,o,a,u){this.text=t,this.style=e,this.width=n,this.height=r,this.lines=i,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=u}static measureText(t,e,n,r=Re._canvas){n=n??e.wordWrap;const i=e.toFontString(),s=Re.measureFont(i);s.fontSize===0&&(s.fontSize=e.fontSize,s.ascent=e.fontSize);const o=r.getContext("2d",Tm);o.font=i;const u=(n?Re.wordWrap(t,e,r):t).split(/(?:\r\n|\r|\n)/),h=new Array(u.length);let d=0;for(let v=0;v<u.length;v++){const w=Re._measureText(u[v],e.letterSpacing,o);h[v]=w,d=Math.max(d,w)}let p=d+e.strokeThickness;e.dropShadow&&(p+=e.dropShadowDistance);const f=e.lineHeight||s.fontSize+e.strokeThickness;let g=Math.max(f,s.fontSize+e.strokeThickness*2)+(u.length-1)*(f+e.leading);return e.dropShadow&&(g+=e.dropShadowDistance),new Re(t,e,p,g,u,h,f+e.leading,d,s)}static _measureText(t,e,n){let r=!1;Re.experimentalLetterSpacingSupported&&(Re.experimentalLetterSpacing?(n.letterSpacing=`${e}px`,n.textLetterSpacing=`${e}px`,r=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let i=n.measureText(t).width;return i>0&&(r?i-=e:i+=(Re.graphemeSegmenter(t).length-1)*e),i}static wordWrap(t,e,n=Re._canvas){const r=n.getContext("2d",Tm);let i=0,s="",o="";const a=Object.create(null),{letterSpacing:u,whiteSpace:h}=e,d=Re.collapseSpaces(h),p=Re.collapseNewlines(h);let f=!d;const g=e.wordWrapWidth+u,v=Re.tokenize(t);for(let w=0;w<v.length;w++){let C=v[w];if(Re.isNewline(C)){if(!p){o+=Re.addLine(s),f=!d,s="",i=0;continue}C=" "}if(d){const S=Re.isBreakingSpace(C),_=Re.isBreakingSpace(s[s.length-1]);if(S&&_)continue}const b=Re.getFromCache(C,u,a,r);if(b>g)if(s!==""&&(o+=Re.addLine(s),s="",i=0),Re.canBreakWords(C,e.breakWords)){const S=Re.wordWrapSplit(C);for(let _=0;_<S.length;_++){let A=S[_],P=A,F=1;for(;S[_+F];){const D=S[_+F];if(!Re.canBreakChars(P,D,C,_,e.breakWords))A+=D;else break;P=D,F++}_+=F-1;const N=Re.getFromCache(A,u,a,r);N+i>g&&(o+=Re.addLine(s),f=!1,s="",i=0),s+=A,i+=N}}else{s.length>0&&(o+=Re.addLine(s),s="",i=0);const S=w===v.length-1;o+=Re.addLine(C,!S),f=!1,s="",i=0}else b+i>g&&(f=!1,o+=Re.addLine(s),s="",i=0),(s.length>0||!Re.isBreakingSpace(C)||f)&&(s+=C,i+=b)}return o+=Re.addLine(s,!1),o}static addLine(t,e=!0){return t=Re.trimRight(t),t=e?`${t}
`:t,t}static getFromCache(t,e,n,r){let i=n[t];return typeof i!="number"&&(i=Re._measureText(t,e,r)+e,n[t]=i),i}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const n=t[e];if(!Re.isBreakingSpace(n))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:Re._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:Re._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let n="";if(typeof t!="string")return e;for(let r=0;r<t.length;r++){const i=t[r],s=t[r+1];if(Re.isBreakingSpace(i,s)||Re.isNewline(i)){n!==""&&(e.push(n),n=""),e.push(i);continue}n+=i}return n!==""&&e.push(n),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,n,r,i){return!0}static wordWrapSplit(t){return Re.graphemeSegmenter(t)}static measureFont(t){if(Re._fonts[t])return Re._fonts[t];const e={ascent:0,descent:0,fontSize:0},n=Re._canvas,r=Re._context;r.font=t;const i=Re.METRICS_STRING+Re.BASELINE_SYMBOL,s=Math.ceil(r.measureText(i).width);let o=Math.ceil(r.measureText(Re.BASELINE_SYMBOL).width);const a=Math.ceil(Re.HEIGHT_MULTIPLIER*o);if(o=o*Re.BASELINE_MULTIPLIER|0,s===0||a===0)return Re._fonts[t]=e,e;n.width=s,n.height=a,r.fillStyle="#f00",r.fillRect(0,0,s,a),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(i,0,o);const u=r.getImageData(0,0,s,a).data,h=u.length,d=s*4;let p=0,f=0,g=!1;for(p=0;p<o;++p){for(let v=0;v<d;v+=4)if(u[f+v]!==255){g=!0;break}if(!g)f+=d;else break}for(e.ascent=o-p,f=h-d,g=!1,p=a;p>o;--p){for(let v=0;v<d;v+=4)if(u[f+v]!==255){g=!0;break}if(!g)f-=d;else break}return e.descent=p-o,e.fontSize=e.ascent+e.descent,Re._fonts[t]=e,e}static clearMetrics(t=""){t?delete Re._fonts[t]:Re._fonts={}}static get _canvas(){if(!Re.__canvas){let t;try{const e=new OffscreenCanvas(0,0),n=e.getContext("2d",Tm);if(n!=null&&n.measureText)return Re.__canvas=e,e;t=we.ADAPTER.createCanvas()}catch{t=we.ADAPTER.createCanvas()}t.width=t.height=10,Re.__canvas=t}return Re.__canvas}static get _context(){return Re.__context||(Re.__context=Re._canvas.getContext("2d",Tm)),Re.__context}};let fr=Re;fr.METRICS_STRING="|ÉqÅ";fr.BASELINE_SYMBOL="M";fr.BASELINE_MULTIPLIER=1.4;fr.HEIGHT_MULTIPLIER=2;fr.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(n=>n.segment)}return t=>[...t]})();fr.experimentalLetterSpacing=!1;fr._fonts={};fr._newlines=[10,13];fr._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const $6=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],bd=class{constructor(t){this.styleID=0,this.reset(),l1(this,t,t)}clone(){const t={};return l1(t,this,bd.defaultStyle),new bd(t)}reset(){l1(this,bd.defaultStyle,bd.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=a1(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=a1(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){H6(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=a1(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let n=e.length-1;n>=0;n--){let r=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!$6.includes(r)&&(r=`"${r}"`),e[n]=r}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};let ma=bd;ma.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Gy.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function a1(t){const e=Rt.shared;return Array.isArray(t)?t.map(n=>e.setValue(n).toHex()):e.setValue(t).toHex()}function H6(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}function l1(t,e,n){for(const r in n)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}const j6={texture:!0,children:!1,baseTexture:!0},i_=class extends Ws{constructor(t,e,n){let r=!1;n||(n=we.ADAPTER.createCanvas(),r=!0),n.width=3,n.height=3;const i=_e.from(n);i.orig=new Ye,i.trim=new Ye,super(i),this._ownCanvas=r,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=i_.defaultResolution??we.RESOLUTION,this._autoResolution=i_.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return fr.experimentalLetterSpacing}static set experimentalLetterSpacing(t){at("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),fr.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const n=this.context,r=fr.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),i=r.width,s=r.height,o=r.lines,a=r.lineHeight,u=r.lineWidths,h=r.maxLineWidth,d=r.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,i)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+e.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit;let p,f;const g=e.dropShadow?2:1;for(let v=0;v<g;++v){const w=e.dropShadow&&v===0,C=w?Math.ceil(Math.max(1,s)+e.padding*2):0,b=C*this._resolution;if(w){n.fillStyle="black",n.strokeStyle="black";const _=e.dropShadowColor,A=e.dropShadowBlur*this._resolution,P=e.dropShadowDistance*this._resolution;n.shadowColor=Rt.shared.setValue(_).setAlpha(e.dropShadowAlpha).toRgbaString(),n.shadowBlur=A,n.shadowOffsetX=Math.cos(e.dropShadowAngle)*P,n.shadowOffsetY=Math.sin(e.dropShadowAngle)*P+b}else n.fillStyle=this._generateFillStyle(e,o,r),n.strokeStyle=e.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let S=(a-d.fontSize)/2;a-d.fontSize<0&&(S=0);for(let _=0;_<o.length;_++)p=e.strokeThickness/2,f=e.strokeThickness/2+_*a+d.ascent+S,e.align==="right"?p+=h-u[_]:e.align==="center"&&(p+=(h-u[_])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[_],p+e.padding,f+e.padding-C,!0),e.fill&&this.drawLetterSpacing(o[_],p+e.padding,f+e.padding-C)}this.updateTexture()}drawLetterSpacing(t,e,n,r=!1){const s=this._style.letterSpacing;let o=!1;if(fr.experimentalLetterSpacingSupported&&(fr.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){r?this.context.strokeText(t,e,n):this.context.fillText(t,e,n);return}let a=e;const u=fr.graphemeSegmenter(t);let h=this.context.measureText(t).width,d=0;for(let p=0;p<u.length;++p){const f=u[p];r?this.context.strokeText(f,a,n):this.context.fillText(f,a,n);let g="";for(let v=p+1;v<u.length;++v)g+=u[v];d=this.context.measureText(g).width,a+=h-d+s,h=d}}updateTexture(){const t=this.canvas;if(this._style.trim){const s=yF(t);s.data&&(t.width=s.width,t.height=s.height,this.context.putImageData(s.data,0,0))}const e=this._texture,n=this._style,r=n.trim?0:n.padding,i=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-r,e.trim.y=-r,e.orig.width=e._frame.width-r*2,e.orig.height=e._frame.height-r*2,this._onTextureUpdate(),i.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,n){const r=t.fill;if(Array.isArray(r)){if(r.length===1)return r[0]}else return r;let i;const s=t.dropShadow?t.dropShadowDistance:0,o=t.padding||0,a=this.canvas.width/this._resolution-s-o*2,u=this.canvas.height/this._resolution-s-o*2,h=r.slice(),d=t.fillGradientStops.slice();if(!d.length){const p=h.length+1;for(let f=1;f<p;++f)d.push(f/p)}if(h.unshift(r[0]),d.unshift(0),h.push(r[r.length-1]),d.push(1),t.fillGradientType===Gy.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,o,a/2,u+o);const p=n.fontProperties.fontSize+t.strokeThickness;for(let f=0;f<e.length;f++){const g=n.lineHeight*(f-1)+p,v=n.lineHeight*f;let w=v;f>0&&g>v&&(w=(v+g)/2);const C=v+p,b=n.lineHeight*(f+1);let S=C;f+1<e.length&&b<C&&(S=(C+b)/2);const _=(S-w)/u;for(let A=0;A<h.length;A++){let P=0;typeof d[A]=="number"?P=d[A]:P=A/h.length;let F=Math.min(1,Math.max(0,w/u+P*_));F=Number(F.toFixed(5)),i.addColorStop(F,h[A])}}}else{i=this.context.createLinearGradient(o,u/2,a+o,u/2);const p=h.length+1;let f=1;for(let g=0;g<h.length;g++){let v;typeof d[g]=="number"?v=d[g]:v=f/p,i.addColorStop(v,h[g]),f++}}return i}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},j6,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=el(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=el(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof ma?this._style=t:this._style=new ma(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};let Vy=i_;Vy.defaultAutoResolution=!0;class W6{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function G6(t,e){var r;let n=!1;if((r=t==null?void 0:t._textures)!=null&&r.length){for(let i=0;i<t._textures.length;i++)if(t._textures[i]instanceof _e){const s=t._textures[i].baseTexture;e.includes(s)||(e.push(s),n=!0)}}return n}function V6(t,e){if(t.baseTexture instanceof Ge){const n=t.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function X6(t,e){if(t._texture&&t._texture instanceof _e){const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function q6(t,e){return e instanceof Vy?(e.updateText(!0),!0):!1}function Y6(t,e){if(e instanceof ma){const n=e.toFontString();return fr.measureFont(n),!0}return!1}function Q6(t,e){if(t instanceof Vy){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function K6(t,e){return t instanceof ma?(e.includes(t)||e.push(t),!0):!1}const J3=class{constructor(t){this.limiter=new W6(J3.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(Q6),this.registerFindHook(K6),this.registerFindHook(G6),this.registerFindHook(V6),this.registerFindHook(X6),this.registerUploadHook(q6),this.registerUploadHook(Y6)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,zt.system.addOnce(this.tick,this,vl.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed){for(let n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)zt.system.addOnce(this.tick,this,vl.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,n=t.length;e<n;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,n=this.addHooks.length;e<n&&!this.addHooks[e](t,this.queue);e++);if(t instanceof ir)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&zt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let Vg=J3;Vg.uploadsPerFrame=4;Object.defineProperties(we,{UPLOADS_PER_FRAME:{get(){return Vg.uploadsPerFrame},set(t){at("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Vg.uploadsPerFrame=t}}});function ek(t,e){return e instanceof Ge?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function Z6(t,e){if(!(e instanceof du))return!1;const{geometry:n}=e;e.finishPoly(),n.updateBatches();const{batches:r}=n;for(let i=0;i<r.length;i++){const{texture:s}=r[i].style;s&&ek(t,s.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function J6(t,e){return t instanceof du?(e.push(t),!0):!1}class tk extends Vg{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(J6),this.registerUploadHook(ek),this.registerUploadHook(Z6)}}tk.extension={name:"prepare",type:Te.RendererSystem};Me.add(tk);class lh extends Ws{constructor(e,n=!0){super(e[0]instanceof _e?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=n,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(zt.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(zt.shared.add(this.update,this,vl.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const n=this.animationSpeed*e,r=this.currentFrame;if(this._durations!==null){let i=this._currentTime%1*this._durations[this.currentFrame];for(i+=n/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const n=[];for(let r=0;r<e.length;++r)n.push(_e.from(e[r]));return new lh(n)}static fromImages(e){const n=[];for(let r=0;r<e.length;++r)n.push(_e.from(e[r]));return new lh(n)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof _e)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let n=0;n<e.length;n++)this._textures.push(e[n].texture),this._durations.push(e[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const n=this.currentFrame;this._currentTime=e,n!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(zt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(zt.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const ud=new Fe;class nb extends Ws{constructor(e,n=100,r=100){super(e),this.tileTransform=new Dy,this._width=n,this._height=r,this.uvMatrix=this.texture.uvMatrix||new Kw(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,n=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,n,r,i)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ye),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,ud);const n=this._width,r=this._height,i=-n*this.anchor._x;if(ud.x>=i&&ud.x<i+n){const s=-r*this.anchor._y;if(ud.y>=s&&ud.y<s+r)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,n){const r=e instanceof _e?e:_e.from(e,n);return new nb(r,n.width,n.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var eU=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,tU=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,nU=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,AT=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,rU=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Cm=new rn;class nk extends Ly{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new v3,this.state=va.for2d()}contextChange(){const e=this.renderer,n={globals:e.globalUniforms};this.simpleShader=No.from(AT,rU,n),this.shader=e.context.webGLVersion>1?No.from(tU,eU,n):No.from(AT,nU,n)}render(e){const n=this.renderer,r=this.quad;let i=r.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=r.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,r.invalidate();const a=e._texture,u=a.baseTexture,h=u.alphaMode>0,d=e.tileTransform.localTransform,p=e.uvMatrix;let f=u.isPowerOfTwo&&a.frame.width===u.width&&a.frame.height===u.height;f&&(u._glTextures[n.CONTEXT_UID]?f=u.wrapMode!==aa.CLAMP:u.wrapMode===aa.CLAMP&&(u.wrapMode=aa.REPEAT));const g=f?this.simpleShader:this.shader,v=a.width,w=a.height,C=e._width,b=e._height;Cm.set(d.a*v/C,d.b*v/b,d.c*w/C,d.d*w/b,d.tx/C,d.ty/b),Cm.invert(),f?Cm.prepend(p.mapCoord):(g.uniforms.uMapCoord=p.mapCoord.toArray(!0),g.uniforms.uClampFrame=p.uClampFrame,g.uniforms.uClampOffset=p.uClampOffset),g.uniforms.uTransform=Cm.toArray(!0),g.uniforms.uColor=Rt.shared.setValue(e.tint).premultiply(e.worldAlpha,h).toArray(g.uniforms.uColor),g.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),g.uniforms.uSampler=a,n.shader.bind(g),n.geometry.bind(r),this.state.blendMode=n3(e.blendMode,h),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}nk.extension={name:"tilingSprite",type:Te.RendererPlugin};Me.add(nk);const Sd=class{constructor(t,e,n=null){this.linkedSheets=[],this._texture=t instanceof _e?t:null,this.baseTexture=t instanceof Ge?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;const r=this.baseTexture.resource;this.resolution=this._updateResolution(n||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let n=ml(t,null);return n===null&&(n=parseFloat(e??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Sd.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const n=Sd.BATCH_SIZE;for(;e-t<n&&e<this._frameKeys.length;){const r=this._frameKeys[e],i=this._frames[r],s=i.frame;if(s){let o=null,a=null;const u=i.trimmed!==!1&&i.sourceSize?i.sourceSize:i.frame,h=new Ye(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);i.rotated?o=new Ye(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):o=new Ye(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),i.trimmed!==!1&&i.spriteSourceSize&&(a=new Ye(Math.floor(i.spriteSourceSize.x)/this.resolution,Math.floor(i.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[r]=new _e(this.baseTexture,o,h,a,i.rotated?2:0,i.anchor,i.borders),_e.addToCache(this.textures[r],r)}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let n=0;n<t[e].length;n++){const r=t[e][n];this.animations[e].push(this.textures[r])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Sd.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Sd.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let Sf=Sd;Sf.BATCH_SIZE=1e3;const iU=["jpg","png","jpeg","avif","webp"];function rk(t,e,n){const r={};if(t.forEach(i=>{r[i]=e}),Object.keys(e.textures).forEach(i=>{r[i]=e.textures[i]}),!n){const i=Mn.dirname(t[0]);e.linkedSheets.forEach((s,o)=>{const a=rk([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(r,a)})}return r}const sU={extension:Te.Asset,cache:{test:t=>t instanceof Sf,getCacheableAssets:(t,e)=>rk(t,e,!1)},resolver:{test:t=>{const n=t.split("?")[0].split("."),r=n.pop(),i=n.pop();return r==="json"&&iU.includes(i)},parse:t=>{var n;const e=t.split(".");return{resolution:parseFloat(((n=we.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:Te.LoadParser,priority:Gs.Normal},async testParse(t,e){return Mn.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,n){var h,d;let r=Mn.dirname(e.src);r&&r.lastIndexOf("/")!==r.length-1&&(r+="/");let i=r+t.meta.image;i=n_(i,e.src);const o=(await n.load([i]))[i],a=new Sf(o.baseTexture,t,e.src);await a.parse();const u=(h=t==null?void 0:t.meta)==null?void 0:h.related_multi_packs;if(Array.isArray(u)){const p=[];for(const g of u){if(typeof g!="string")continue;let v=r+g;(d=e.data)!=null&&d.ignoreMultiPack||(v=n_(v,e.src),p.push(n.load({src:v,data:{ignoreMultiPack:!0}})))}const f=await Promise.all(p);a.linkedSheets=f,f.forEach(g=>{g.linkedSheets=[a].concat(a.linkedSheets.filter(v=>v!==g))})}return a},unload(t){t.destroy(!0)}}};Me.add(sU);class Xg{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class ig{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const n=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in n){const o=n[s].match(/^[a-z]+/gm)[0],a=n[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),u={};for(const h in a){const d=a[h].split("="),p=d[0],f=d[1].replace(/"/gm,""),g=parseFloat(f),v=isNaN(g)?f:g;u[p]=v}r[o].push(u)}const i=new Xg;return r.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),r.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),r.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),r.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),r.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),r.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class s_{static test(e){const n=e;return"getElementsByTagName"in n&&n.getElementsByTagName("page").length&&n.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const n=new Xg,r=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),u=e.getElementsByTagName("distanceField");for(let h=0;h<r.length;h++)n.info.push({face:r[h].getAttribute("face"),size:parseInt(r[h].getAttribute("size"),10)});for(let h=0;h<i.length;h++)n.common.push({lineHeight:parseInt(i[h].getAttribute("lineHeight"),10)});for(let h=0;h<s.length;h++)n.page.push({id:parseInt(s[h].getAttribute("id"),10)||0,file:s[h].getAttribute("file")});for(let h=0;h<o.length;h++){const d=o[h];n.char.push({id:parseInt(d.getAttribute("id"),10),page:parseInt(d.getAttribute("page"),10)||0,x:parseInt(d.getAttribute("x"),10),y:parseInt(d.getAttribute("y"),10),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10),xoffset:parseInt(d.getAttribute("xoffset"),10),yoffset:parseInt(d.getAttribute("yoffset"),10),xadvance:parseInt(d.getAttribute("xadvance"),10)})}for(let h=0;h<a.length;h++)n.kerning.push({first:parseInt(a[h].getAttribute("first"),10),second:parseInt(a[h].getAttribute("second"),10),amount:parseInt(a[h].getAttribute("amount"),10)});for(let h=0;h<u.length;h++)n.distanceField.push({fieldType:u[h].getAttribute("fieldType"),distanceRange:parseInt(u[h].getAttribute("distanceRange"),10)});return n}}class o_{static test(e){return typeof e=="string"&&e.includes("<font>")?s_.test(we.ADAPTER.parseXML(e)):!1}static parse(e){return s_.parse(we.ADAPTER.parseXML(e))}}const u1=[ig,s_,o_];function oU(t){for(let e=0;e<u1.length;e++)if(u1[e].test(t))return u1[e];return null}function aU(t,e,n,r,i,s){const o=n.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const u=n.dropShadow?n.dropShadowDistance:0,h=n.padding||0,d=t.width/r-u-h*2,p=t.height/r-u-h*2,f=o.slice(),g=n.fillGradientStops.slice();if(!g.length){const v=f.length+1;for(let w=1;w<v;++w)g.push(w/v)}if(f.unshift(o[0]),g.unshift(0),f.push(o[o.length-1]),g.push(1),n.fillGradientType===Gy.LINEAR_VERTICAL){a=e.createLinearGradient(d/2,h,d/2,p+h);let v=0;const C=(s.fontProperties.fontSize+n.strokeThickness)/p;for(let b=0;b<i.length;b++){const S=s.lineHeight*b;for(let _=0;_<f.length;_++){let A=0;typeof g[_]=="number"?A=g[_]:A=_/f.length;const P=S/p+A*C;let F=Math.max(v,P);F=Math.min(F,1),a.addColorStop(F,f[_]),v=F}}}else{a=e.createLinearGradient(h,p/2,d+h,p/2);const v=f.length+1;let w=1;for(let C=0;C<f.length;C++){let b;typeof g[C]=="number"?b=g[C]:b=w/v,a.addColorStop(b,f[C]),w++}}return a}function lU(t,e,n,r,i,s,o){const a=n.text,u=n.fontProperties;e.translate(r,i),e.scale(s,s);const h=o.strokeThickness/2,d=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=aU(t,e,o,s,[a],n),e.strokeStyle=o.stroke,o.dropShadow){const p=o.dropShadowColor,f=o.dropShadowBlur*s,g=o.dropShadowDistance*s;e.shadowColor=Rt.shared.setValue(p).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=f,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*g,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*g}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,h,d+n.lineHeight-u.descent),o.fill&&e.fillText(a,h,d+n.lineHeight-u.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function sg(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}function ik(t){return Array.from?Array.from(t):t.split("")}function uU(t){typeof t=="string"&&(t=[t]);const e=[];for(let n=0,r=t.length;n<r;n++){const i=t[n];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,u=o;a<=u;a++)e.push(String.fromCharCode(a))}else e.push(...ik(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const Ss=class{constructor(t,e,n){var h;const[r]=t.info,[i]=t.common,[s]=t.page,[o]=t.distanceField,a=ml(s.file),u={};this._ownsTextures=n,this.font=r.face,this.size=r.size,this.lineHeight=i.lineHeight/a,this.chars={},this.pageTextures=u;for(let d=0;d<t.page.length;d++){const{id:p,file:f}=t.page[d];u[p]=e instanceof Array?e[d]:e[f],o!=null&&o.fieldType&&o.fieldType!=="none"&&(u[p].baseTexture.alphaMode=js.NO_PREMULTIPLIED_ALPHA,u[p].baseTexture.mipmap=Do.OFF)}for(let d=0;d<t.char.length;d++){const{id:p,page:f}=t.char[d];let{x:g,y:v,width:w,height:C,xoffset:b,yoffset:S,xadvance:_}=t.char[d];g/=a,v/=a,w/=a,C/=a,b/=a,S/=a,_/=a;const A=new Ye(g+u[f].frame.x/a,v+u[f].frame.y/a,w,C);this.chars[p]={xOffset:b,yOffset:S,xAdvance:_,kerning:{},texture:new _e(u[f].baseTexture,A),page:f}}for(let d=0;d<t.kerning.length;d++){let{first:p,second:f,amount:g}=t.kerning[d];p/=a,f/=a,g/=a,this.chars[f]&&(this.chars[f].kerning[p]=g)}this.distanceFieldRange=o==null?void 0:o.distanceRange,this.distanceFieldType=((h=o==null?void 0:o.fieldType)==null?void 0:h.toLowerCase())??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,n){let r;if(t instanceof Xg)r=t;else{const s=oU(t);if(!s)throw new Error("Unrecognized data format for font.");r=s.parse(t)}e instanceof _e&&(e=[e]);const i=new Ss(r,e,n);return Ss.available[i.font]=i,i}static uninstall(t){const e=Ss.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete Ss.available[t]}static from(t,e,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:r,padding:i,resolution:s,textureWidth:o,textureHeight:a,...u}=Object.assign({},Ss.defaultOptions,n),h=uU(r),d=e instanceof ma?e:new ma(e),p=o,f=new Xg;f.info[0]={face:d.fontFamily,size:d.fontSize},f.common[0]={lineHeight:d.fontSize};let g=0,v=0,w,C,b,S=0;const _=[];for(let P=0;P<h.length;P++){w||(w=we.ADAPTER.createCanvas(),w.width=o,w.height=a,C=w.getContext("2d"),b=new Ge(w,{resolution:s,...u}),_.push(new _e(b)),f.page.push({id:_.length-1,file:""}));const F=h[P],N=fr.measureText(F,d,!1,w),D=N.width,q=Math.ceil(N.height),G=Math.ceil((d.fontStyle==="italic"?2:1)*D);if(v>=a-q*s){if(v===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${F}')`);--P,w=null,C=null,b=null,v=0,g=0,S=0;continue}if(S=Math.max(q+N.fontProperties.descent,S),G*s+g>=p){if(g===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${F}')`);--P,v+=S*s,v=Math.ceil(v),g=0,S=0;continue}lU(w,C,N,g,v,s,d);const H=sg(N.text);f.char.push({id:H,page:_.length-1,x:g/s,y:v/s,width:G,height:q,xoffset:0,yoffset:0,xadvance:D-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0)}),g+=(G+2*i)*s,g=Math.ceil(g)}for(let P=0,F=h.length;P<F;P++){const N=h[P];for(let D=0;D<F;D++){const q=h[D],G=C.measureText(N).width,H=C.measureText(q).width,V=C.measureText(N+q).width-(G+H);V&&f.kerning.push({first:sg(N),second:sg(q),amount:V})}}const A=new Ss(f,_,!0);return Ss.available[t]!==void 0&&Ss.uninstall(t),Ss.available[t]=A,A}};let si=Ss;si.ALPHA=[["a","z"],["A","Z"]," "];si.NUMERIC=[["0","9"]];si.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];si.ASCII=[[" ","~"]];si.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Ss.ALPHANUMERIC};si.available={};var cU=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,hU=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const IT=[],PT=[],kT=[],sk=class extends ir{constructor(t,e={}){super();const{align:n,tint:r,maxWidth:i,letterSpacing:s,fontName:o,fontSize:a}=Object.assign({},sk.styleDefaults,e);if(!si.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new Rt(r),this._font=void 0,this._fontName=o,this._fontSize=a,this.text=t,this._maxWidth=i,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new sa(()=>{this.dirty=!0},this,0,0),this._roundPixels=we.ROUND_PIXELS,this.dirty=!0,this._resolution=we.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var G;const t=si.available[this._fontName],e=this.fontSize,n=e/t.size,r=new Fe,i=[],s=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=ik(a),h=this._maxWidth*t.size/e,d=t.distanceFieldType==="none"?IT:PT;let p=null,f=0,g=0,v=0,w=-1,C=0,b=0,S=0,_=0;for(let H=0;H<u.length;H++){const J=u[H],V=sg(J);if(/(?:\s)/.test(J)&&(w=H,C=f,_++),J==="\r"||J===`
`){s.push(f),o.push(-1),g=Math.max(g,f),++v,++b,r.x=0,r.y+=t.lineHeight,p=null,_=0;continue}const U=t.chars[V];if(!U)continue;p&&U.kerning[p]&&(r.x+=U.kerning[p]);const Z=kT.pop()||{texture:_e.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Fe};Z.texture=U.texture,Z.line=v,Z.charCode=V,Z.position.x=Math.round(r.x+U.xOffset+this._letterSpacing/2),Z.position.y=Math.round(r.y+U.yOffset),Z.prevSpaces=_,i.push(Z),f=Z.position.x+Math.max(U.xAdvance-U.xOffset,U.texture.orig.width),r.x+=U.xAdvance+this._letterSpacing,S=Math.max(S,U.yOffset+U.texture.height),p=V,w!==-1&&h>0&&r.x>h&&(++b,Hc(i,1+w-b,1+H-w),H=w,w=-1,s.push(C),o.push(i.length>0?i[i.length-1].prevSpaces:0),g=Math.max(g,C),v++,r.x=0,r.y+=t.lineHeight,p=null,_=0)}const A=u[u.length-1];A!=="\r"&&A!==`
`&&(/(?:\s)/.test(A)&&(f=C),s.push(f),g=Math.max(g,f),o.push(-1));const P=[];for(let H=0;H<=v;H++){let J=0;this._align==="right"?J=g-s[H]:this._align==="center"?J=(g-s[H])/2:this._align==="justify"&&(J=o[H]<0?0:(g-s[H])/o[H]),P.push(J)}const F=i.length,N={},D=[],q=this._activePagesMeshData;d.push(...q);for(let H=0;H<F;H++){const J=i[H].texture,V=J.baseTexture.uid;if(!N[V]){let U=d.pop();if(!U){const ie=new Wy;let O,L;t.distanceFieldType==="none"?(O=new bf(_e.EMPTY),L=Ue.NORMAL):(O=new bf(_e.EMPTY,{program:Os.from(hU,cU),uniforms:{uFWidth:0}}),L=Ue.NORMAL_NPM);const Q=new ah(ie,O);Q.blendMode=L,U={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Q,vertices:null,uvs:null,indices:null}}U.index=0,U.indexCount=0,U.vertexCount=0,U.uvsCount=0,U.total=0;const{_textureCache:Z}=this;Z[V]=Z[V]||new _e(J.baseTexture),U.mesh.texture=Z[V],U.mesh.tint=this._tintColor.value,D.push(U),N[V]=U}N[V].total++}for(let H=0;H<q.length;H++)D.includes(q[H])||this.removeChild(q[H].mesh);for(let H=0;H<D.length;H++)D[H].mesh.parent!==this&&this.addChild(D[H].mesh);this._activePagesMeshData=D;for(const H in N){const J=N[H],V=J.total;if(!(((G=J.indices)==null?void 0:G.length)>6*V)||J.vertices.length<ah.BATCHABLE_SIZE*2)J.vertices=new Float32Array(4*2*V),J.uvs=new Float32Array(4*2*V),J.indices=new Uint16Array(6*V);else{const U=J.total,Z=J.vertices;for(let ie=U*4*2;ie<Z.length;ie++)Z[ie]=0}J.mesh.size=6*V}for(let H=0;H<F;H++){const J=i[H];let V=J.position.x+P[J.line]*(this._align==="justify"?J.prevSpaces:1);this._roundPixels&&(V=Math.round(V));const U=V*n,Z=J.position.y*n,ie=J.texture,O=N[ie.baseTexture.uid],L=ie.frame,Q=ie._uvs,B=O.index++;O.indices[B*6+0]=0+B*4,O.indices[B*6+1]=1+B*4,O.indices[B*6+2]=2+B*4,O.indices[B*6+3]=0+B*4,O.indices[B*6+4]=2+B*4,O.indices[B*6+5]=3+B*4,O.vertices[B*8+0]=U,O.vertices[B*8+1]=Z,O.vertices[B*8+2]=U+L.width*n,O.vertices[B*8+3]=Z,O.vertices[B*8+4]=U+L.width*n,O.vertices[B*8+5]=Z+L.height*n,O.vertices[B*8+6]=U,O.vertices[B*8+7]=Z+L.height*n,O.uvs[B*8+0]=Q.x0,O.uvs[B*8+1]=Q.y0,O.uvs[B*8+2]=Q.x1,O.uvs[B*8+3]=Q.y1,O.uvs[B*8+4]=Q.x2,O.uvs[B*8+5]=Q.y2,O.uvs[B*8+6]=Q.x3,O.uvs[B*8+7]=Q.y3}this._textWidth=g*n,this._textHeight=(r.y+t.lineHeight)*n;for(const H in N){const J=N[H];if(this.anchor.x!==0||this.anchor.y!==0){let ie=0;const O=this._textWidth*this.anchor.x,L=this._textHeight*this.anchor.y;for(let Q=0;Q<J.total;Q++)J.vertices[ie++]-=O,J.vertices[ie++]-=L,J.vertices[ie++]-=O,J.vertices[ie++]-=L,J.vertices[ie++]-=O,J.vertices[ie++]-=L,J.vertices[ie++]-=O,J.vertices[ie++]-=L}this._maxLineHeight=S*n;const V=J.mesh.geometry.getBuffer("aVertexPosition"),U=J.mesh.geometry.getBuffer("aTextureCoord"),Z=J.mesh.geometry.getIndex();V.data=J.vertices,U.data=J.uvs,Z.data=J.indices,V.update(),U.update(),Z.update()}for(let H=0;H<i.length;H++)kT.push(i[H]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:n,size:r}=si.available[this._fontName];if(n!=="none"){const{a:i,b:s,c:o,d:a}=this.worldTransform,u=Math.sqrt(i*i+s*s),h=Math.sqrt(o*o+a*a),d=(Math.abs(u)+Math.abs(h))/2,p=this.fontSize/r,f=t._view.resolution;for(const g of this._activePagesMeshData)g.mesh.shader.uniforms.uFWidth=d*e*p*f}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=si.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!si.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??si.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,r=si.available[this._fontName].distanceFieldType==="none"?IT:PT;r.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],r.filter(i=>e[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=_e.EMPTY});for(const i in e)e[i].destroy(),delete e[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};let ok=sk;ok.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const dU=[".xml",".fnt"],fU={extension:{type:Te.LoadParser,priority:Gs.Normal},name:"loadBitmapFont",test(t){return dU.includes(Mn.extname(t).toLowerCase())},async testParse(t){return ig.test(t)||o_.test(t)},async parse(t,e,n){const r=ig.test(t)?ig.parse(t):o_.parse(t),{src:i}=e,{page:s}=r,o=[];for(let h=0;h<s.length;++h){const d=s[h].file;let p=Mn.join(Mn.dirname(i),d);p=n_(p,i),o.push(p)}const a=await n.load(o),u=o.map(h=>a[h]);return si.install(r,u,!0)},async load(t,e){return(await we.ADAPTER.fetch(t)).text()},unload(t){t.destroy()}};Me.add(fU);const cc=class extends ma{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new cc(Object.keys(cc.defaultOptions).reduce((e,n)=>({...e,[n]:t[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,t.refs===0&&(t.fontFace&&document.fonts.delete(t.fontFace),delete cc.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,e={}){const{availableFonts:n}=cc;if(n[t]){const r=n[t];return this._fonts.push(r),r.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return we.ADAPTER.fetch(t).then(r=>r.blob()).then(async r=>new Promise((i,s)=>{const o=URL.createObjectURL(r),a=new FileReader;a.onload=()=>i([o,a.result]),a.onerror=s,a.readAsDataURL(r)})).then(async([r,i])=>{const s=Object.assign({family:Mn.basename(t,Mn.extname(t)),weight:"normal",style:"normal",src:r,dataSrc:i,refs:1,originalUrl:t,fontFace:null},e);n[t]=s,this._fonts.push(s),this.styleID++;const o=new FontFace(s.family,`url(${s.src})`,{weight:s.weight,style:s.style});s.fontFace=o,await o.load(),document.fonts.add(o),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...t){const e=t.filter(n=>!this._overrides.includes(n));e.length>0&&(this._overrides.push(...e),this.styleID++)}removeOverride(...t){const e=t.filter(n=>this._overrides.includes(n));e.length>0&&(this._overrides=this._overrides.filter(n=>!e.includes(n)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,e)=>`${t}
            @font-face {
                font-family: "${e.family}";
                src: url('${e.dataSrc}');
                font-weight: ${e.weight};
                font-style: ${e.style}; 
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=hF(t)),typeof t=="number"?cF(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor);const e=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),r=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&e<1&&(t+=(e*255|0).toString(16).padStart(2,"0"));const i=`${n}px ${r}px`;return this.dropShadowBlur>0?`text-shadow: ${i} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${i} ${t}`}reset(){Object.assign(this,cc.defaultOptions)}onBeforeDraw(){const{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(e=>setTimeout(e,100)):Promise.resolve()}get isSafari(){const{userAgent:t}=we.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let jd=cc;jd.availableFonts={};jd.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const hc=class extends Ws{constructor(t="",e={}){super(_e.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const n=new Image,r=_e.from(n,{scaleMode:we.SCALE_MODE,resourceOptions:{autoLoad:!1}});r.orig=new Ye,r.trim=new Ye,this.texture=r;const i="http://www.w3.org/2000/svg",s="http://www.w3.org/1999/xhtml",o=document.createElementNS(i,"svg"),a=document.createElementNS(i,"foreignObject"),u=document.createElementNS(s,"div"),h=document.createElementNS(s,"style");a.setAttribute("width","10000"),a.setAttribute("height","10000"),a.style.overflow="hidden",o.appendChild(a),this.maxWidth=hc.defaultMaxWidth,this.maxHeight=hc.defaultMaxHeight,this._domElement=u,this._styleElement=h,this._svgRoot=o,this._foreignObject=a,this._foreignObject.appendChild(h),this._foreignObject.appendChild(u),this._image=n,this._loadImage=new Image,this._autoResolution=hc.defaultAutoResolution,this._resolution=hc.defaultResolution??we.RESOLUTION,this.text=t,this.style=e}measureText(t){var a,u;const{text:e,style:n,resolution:r}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:e,style:n.toCSS(r)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const i=this._domElement.getBoundingClientRect();this._svgRoot.remove();const s=Math.min(this.maxWidth,Math.ceil(i.width)),o=Math.min(this.maxHeight,Math.ceil(i.height));return this._svgRoot.setAttribute("width",s.toString()),this._svgRoot.setAttribute("height",o.toString()),e!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:(a=this._style)==null?void 0:a.toCSS(r)}),this._styleElement.textContent=(u=this._style)==null?void 0:u.toGlobalCSS()),{width:s+n.padding*2,height:o+n.padding*2}}async updateText(t=!0){const{style:e,_image:n,_loadImage:r}=this;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;const{width:i,height:s}=this.measureText();n.width=r.width=Math.ceil(Math.max(1,i)),n.height=r.height=Math.ceil(Math.max(1,s)),this._loading||(this._loading=!0,await new Promise(o=>{r.onload=async()=>{await e.onBeforeDraw(),this._loading=!1,n.src=r.src,r.onload=null,r.src="",this.updateTexture(),o()};const a=new XMLSerializer().serializeToString(this._svgRoot);r.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(a)}`}))}get source(){return this._image}updateTexture(){const{style:t,texture:e,_image:n,resolution:r}=this,{padding:i}=t,{baseTexture:s}=e;e.trim.width=e._frame.width=n.width/r,e.trim.height=e._frame.height=n.height/r,e.trim.x=-i,e.trim.y=-i,e.orig.width=e._frame.width-i*2,e.orig.height=e._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(n.width,n.height,r),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){var n,r,i,s,o;typeof t=="boolean"&&(t={children:t}),t=Object.assign({},hc.defaultDestroyOptions,t),super.destroy(t);const e=null;this.ownsStyle&&((n=this._style)==null||n.cleanFonts()),this._style=e,(r=this._svgRoot)==null||r.remove(),this._svgRoot=e,(i=this._domElement)==null||i.remove(),this._domElement=e,(s=this._foreignObject)==null||s.remove(),this._foreignObject=e,(o=this._styleElement)==null||o.remove(),this._styleElement=e,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=e,this._image.src="",this._image=e}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);const e=el(this.scale.x)||1;this.scale.x=e*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);const e=el(this.scale.y)||1;this.scale.y=e*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&(t=t||{},t instanceof jd?(this.ownsStyle=!1,this._style=t):t instanceof ma?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=jd.from(t)):(this.ownsStyle=!0,this._style=new jd(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(t===""||t===null||t===void 0?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let Xy=hc;Xy.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0};Xy.defaultMaxWidth=2024;Xy.defaultMaxHeight=2024;Xy.defaultAutoResolution=!0;var qy={exports:{}},ak={exports:{}},pU="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",mU=pU,gU=mU;function lk(){}function uk(){}uk.resetWarningCache=lk;var yU=function(){function t(r,i,s,o,a,u){if(u!==gU){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:uk,resetWarningCache:lk};return n.PropTypes=n,n};ak.exports=yU();var rb=ak.exports;const qt=yh(rb);function Mi(t){return Mi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mi(t)}function ck(t){var e=function(n,r){if(Mi(n)!=="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,r||"default");if(Mi(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(t,"string");return Mi(e)==="symbol"?e:String(e)}function wn(t,e,n){return(e=ck(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ga(t){return function(e){if(Array.isArray(e))return c1(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return c1(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c1(e,n):void 0}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vn(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]}var vU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xU(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _U=function(t){return t==null};function Ed(t){var e=[];if(t===void 0)return e;if(typeof t=="string")e=t.split(",");else if(typeof t=="number")e=[t];else if(Array.isArray(t))e=ga(t);else{if(t===null||Mi(t)!=="object")return e;e=[t&&(t==null?void 0:t.x)||0,t&&(t==null?void 0:t.y)||0]}return e.filter(function(n){return!_U(n)&&!isNaN(n)}).map(Number)}function RT(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function h1(t){return t instanceof Fe||t instanceof sa}var qg=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function d1(t,e,n){if(h1(t[e])&&h1(n))t[e].copyFrom(n);else if(h1(t[e])){var r=Ed(n);vn(r!==void 0&&r.length>0&&r.length<3,"The property `%s` is a `PIXI.Point` or `PIXI.ObservablePoint` and must be set to a comma-separated string of either 1 or 2 coordinates, a 1 or 2 element array containing coordinates, or a PIXI Point/ObservablePoint. If only one coordinate is given then X and Y will be set to the provided value. Received: `%s` of type `%s`.",e,JSON.stringify(n),Mi(n)),t[e].set(r.shift(),r.shift())}else t[e]=n}var tc,hk=function(t){var e,n=t;if(!Array.isArray(n)){if(e=t,Object.prototype.toString.call(e)!=="[object Object]")throw new Error("collection needs to be an Array or Object");n=Object.keys(t)}var r={};return n.forEach(function(i){r[i]=!0}),function(i){return r[i]!==void 0}},dk=function(t){return function(){return!t.apply(void 0,arguments)}},a_="children",wU=(wn(tc={},a_,!0),wn(tc,"parent",!0),wn(tc,"worldAlpha",!0),wn(tc,"worldTransform",!0),wn(tc,"worldVisible",!0),tc),l_={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},Lo=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=function(a){return requestAnimationFrame(function(){var u,h;a==null||(u=a.__reactpixi)===null||u===void 0||(h=u.root)===null||h===void 0||h.emit("__REACT_PIXI_REQUEST_RENDER__")})},i=function(a,u){if(n.hasOwnProperty(a))return vn(u.typeofs.some(function(h){return Mi(n[a])===h})||u.instanceofs.some(function(h){return n[a]instanceof h}),"".concat(t," ").concat(a," prop is invalid")),n[a]};if(n.texture)return vn(n.texture instanceof _e,"".concat(t," texture needs to be typeof `Texture`")),n.texture;var s=i("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||i("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||i("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,_e]});vn(!!s,"".concat(t," could not get texture from props"));var o=_e.from(s);return o.__reactpixi={root:e},o.once("update",r),o.once("loaded",r),o.valid&&r(o),o},bU=dk(hk([].concat(ga(Object.keys(wU)),ga(qg))));function Fo(t,e,n){var r=!1;if(vn(sn.prototype.isPrototypeOf(t),"instance needs to be typeof `DisplayObject`, got `%s`",Mi(t)),!n.ignoreEvents)for(var i=typeof t.removeListener=="function",s=typeof t.on=="function",o=0;o<qg.length;o++){var a=qg[o];e[a]!==n[a]&&(r=!0,typeof e[a]=="function"&&i&&t.removeListener(a,e[a]),typeof n[a]=="function"&&s&&t.on(a,n[a]))}var u=Object.keys(n||{});if(n.overwriteProps){for(var h=0;h<u.length;h++){var d=u[h];e[d]!==n[d]&&(r=!0,d1(t,d,n[d]))}return r}for(var p=u.filter(bU),f=0;f<p.length;f++){var g=p[f],v=n[g];n[g]!==e[g]&&(r=!0),v!==void 0?d1(t,g,v):g in l_?(console.warn("setting default value: ".concat(g,", from: ").concat(t[g]," to: ").concat(v," for"),t),r=!0,d1(t,g,l_[g])):console.warn("ignoring prop: ".concat(g,", from ").concat(t[g]," to ").concat(v," for"),t)}return r}var SU=function(t,e){var n=e.text,r=e.style;return new ok(n,r)},EU=function(){return new ir};function El(t,e){if(t==null)return{};var n,r,i=function(o,a){if(o==null)return{};var u,h,d={},p=Object.keys(o);for(h=0;h<p.length;h++)u=p[h],a.indexOf(u)>=0||(d[u]=o[u]);return d}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var TU=["draw","geometry"],CU=function(t,e){var n=e.geometry;vn(!n||n instanceof du,"Graphics geometry needs to be a `PIXI.Graphics`");var r=n?new du(n.geometry):new du;return r.applyProps=function(i,s,o){var a=o.draw;o.geometry;var u=Fo(i,s,El(o,TU));return s.draw!==a&&typeof a=="function"&&(u=!0,a.call(r,r)),u},r},AU=["image","texture"],IU=function(t,e){var n=e.leftWidth,r=n===void 0?10:n,i=e.topHeight,s=i===void 0?10:i,o=e.rightWidth,a=o===void 0?10:o,u=e.bottomHeight,h=u===void 0?10:u,d=Lo("NineSlicePlane",t,e),p=new D6(d,r,s,a,h);return p.applyProps=function(f,g,v){var w=v.image,C=v.texture,b=Fo(f,g,El(v,AU));return(w||C)&&(C!==g.texture&&(b=!0),f.texture=Lo("NineSlicePlane",t,v)),b},p};function MT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Am(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MT(Object(n),!0).forEach(function(r){wn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var PU=function(t,e){var n=e.maxSize,r=n===void 0?1500:n,i=e.batchSize,s=i===void 0?16384:i,o=e.autoResize,a=o!==void 0&&o,u=Am(Am({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),e.properties||{}),h=Am(Am({},{children:!1,texture:!1,baseTexture:!1}),e.destroyOptions||{}),d=new B6(r,u,s,a);return d.willUnmount=function(p,f,g){p.destroy(h)},d},kU=["image","texture"],RU=function(t,e){var n=new Ws(Lo("Sprite",t,e));return n.applyProps=function(r,i,s){var o=s.image,a=s.texture,u=Fo(r,i,El(s,kU));return(a&&i.texture!==s.texture||o&&i.image!==s.image)&&(i.texture!==s.texture&&(u=!0),r.texture=Lo("Sprite",t,s)),u},n},MU=["textures","isPlaying","initialFrame"],OU=function(t,e){var n=e.textures,r=e.images,i=e.isPlaying,s=i===void 0||i,o=e.initialFrame,a=function(h){return h.map(function(d){return vn(d instanceof _e||(d==null?void 0:d.texture),"AnimationSprite texture needs to be an array of `PIXI.Texture` or `{ texture: PIXI.Texture, time:\n                number }`"),d})},u=r?lh.fromImages(r):new lh(a(n));return u[s?"gotoAndPlay":"gotoAndStop"](o||0),u.applyProps=function(h,d,p){var f=p.textures,g=p.isPlaying,v=p.initialFrame,w=Fo(h,d,El(p,MU));if(f&&d.textures!==f&&(h.textures=a(f),w=!0),g!==d.isPlaying||v!==d.initialFrame){var C=typeof v=="number"?v:u.currentFrame||0;u[g?"gotoAndPlay":"gotoAndStop"](C),w=!0}return w},u},NU=function(t,e){var n=e.text,r=n===void 0?"":n,i=e.style,s=i===void 0?{}:i,o=e.isSprite,a=new Vy(r,s);return o?(a.updateText(),new Ws(a.texture)):a},DU=["tileScale","tilePosition","image","texture"],LU=function(t,e){var n=e.width,r=n===void 0?100:n,i=e.height,s=i===void 0?100:i,o=Lo("TilingSprite",t,e),a=new nb(o,r,s);return a.applyProps=function(u,h,d){var p=d.tileScale,f=d.tilePosition,g=d.image,v=d.texture,w=Fo(u,h,El(d,DU));if(f){var C,b=Ed(f);(C=u.tilePosition).set.apply(C,ga(b)),w=!RT(Ed(h.tilePosition),b)||w}if(p){var S,_=Ed(p);(S=u.tileScale).set.apply(S,ga(_)),w=!RT(Ed(h.tileScale),_)||w}return(g||v)&&(v!==h.texture&&(w=!0),u.texture=Lo("Sprite",t,d)),w},a},FU=["image","texture"],BU=function(t,e){var n=Lo("Mesh",t,e),r=e.vertices,i=e.uvs,s=e.indices,o=e.drawMode,a=o===void 0?Ms.TRIANGLES:o,u=new L6(n,r,i,s,a);return u.applyProps=function(h,d,p){var f=p.image,g=p.texture,v=Fo(h,d,El(p,FU));return(f||g)&&(g!==d.texture&&(v=!0),h.texture=Lo("Mesh",t,p)),v},u},UU=["image","texture"],zU=function(t,e){var n=Lo("SimpleRope",t,e),r=e.points,i=new F6(n,r);return i.applyProps=function(s,o,a){var u=a.image,h=a.texture,d=El(a,UU);vn(Array.isArray(a.points),"SimpleRope points needs to be %s","Array<PIXI.Point>");var p=Fo(s,o,d);return(u||h)&&(h!==o.texture&&(p=!0),s.texture=Lo("SimpleRope",t,a)),p},i},$U=Object.freeze({__proto__:null,BitmapText:SU,Container:EU,Graphics:CU,NineSlicePlane:IU,ParticleContainer:PU,Sprite:RU,Text:NU,TilingSprite:LU,SimpleMesh:BU,SimpleRope:zU,AnimatedSprite:OU});function OT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OT(Object(n),!0).forEach(function(r){wn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var di={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},HU=Object.keys(di).reduce(function(t,e){return NT(NT({},t),{},wn({},e,$U[e]))},{}),fk={};function jU(t,e){return vn(!!t,"Expect type to be defined, got `%s`",t),vn(!di[t],"Component `%s` could not be created, already exists in default components.",t),fk[t]=e,t}var DT,LT,FT,BT,u_={},c_={},WU={get exports(){return c_},set exports(t){c_=t}},UT={};function GU(){return LT||(LT=1,WU.exports=(DT||(DT=1,function(t){function e(L,Q){var B=L.length;L.push(Q);e:for(;0<B;){var ee=B-1>>>1,te=L[ee];if(!(0<i(te,Q)))break e;L[ee]=Q,L[B]=te,B=ee}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var Q=L[0],B=L.pop();if(B!==Q){L[0]=B;e:for(var ee=0,te=L.length,be=te>>>1;ee<be;){var ge=2*(ee+1)-1,je=L[ge],We=ge+1,Ne=L[We];if(0>i(je,B))We<te&&0>i(Ne,je)?(L[ee]=Ne,L[We]=B,ee=We):(L[ee]=je,L[ge]=B,ee=ge);else{if(!(We<te&&0>i(Ne,B)))break e;L[ee]=Ne,L[We]=B,ee=We}}}return Q}function i(L,Q){var B=L.sortIndex-Q.sortIndex;return B!==0?B:L.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],h=[],d=1,p=null,f=3,g=!1,v=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function _(L){for(var Q=n(h);Q!==null;){if(Q.callback===null)r(h);else{if(!(Q.startTime<=L))break;r(h),Q.sortIndex=Q.expirationTime,e(u,Q)}Q=n(h)}}function A(L){if(w=!1,_(L),!v)if(n(u)!==null)v=!0,ie(P);else{var Q=n(h);Q!==null&&O(A,Q.startTime-L)}}function P(L,Q){v=!1,w&&(w=!1,b(q),q=-1),g=!0;var B=f;try{for(_(Q),p=n(u);p!==null&&(!(p.expirationTime>Q)||L&&!J());){var ee=p.callback;if(typeof ee=="function"){p.callback=null,f=p.priorityLevel;var te=ee(p.expirationTime<=Q);Q=t.unstable_now(),typeof te=="function"?p.callback=te:p===n(u)&&r(u),_(Q)}else r(u);p=n(u)}if(p!==null)var be=!0;else{var ge=n(h);ge!==null&&O(A,ge.startTime-Q),be=!1}return be}finally{p=null,f=B,g=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var F,N=!1,D=null,q=-1,G=5,H=-1;function J(){return!(t.unstable_now()-H<G)}function V(){if(D!==null){var L=t.unstable_now();H=L;var Q=!0;try{Q=D(!0,L)}finally{Q?F():(N=!1,D=null)}}else N=!1}if(typeof S=="function")F=function(){S(V)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Z=U.port2;U.port1.onmessage=V,F=function(){Z.postMessage(null)}}else F=function(){C(V,0)};function ie(L){D=L,N||(N=!0,F())}function O(L,Q){q=C(function(){L(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,ie(P))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(L){switch(f){case 1:case 2:case 3:var Q=3;break;default:Q=f}var B=f;f=Q;try{return L()}finally{f=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,Q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var B=f;f=L;try{return Q()}finally{f=B}},t.unstable_scheduleCallback=function(L,Q,B){var ee=t.unstable_now();switch(B=typeof B=="object"&&B!==null&&typeof(B=B.delay)=="number"&&0<B?ee+B:ee,L){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return L={id:d++,callback:Q,priorityLevel:L,startTime:B,expirationTime:te=B+te,sortIndex:-1},B>ee?(L.sortIndex=B,e(h,L),n(u)===null&&L===n(h)&&(w?(b(q),q=-1):w=!0,O(A,B-ee))):(L.sortIndex=te,e(u,L),v||g||(v=!0,ie(P))),L},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(L){var Q=f;return function(){var B=f;f=Q;try{return L.apply(this,arguments)}finally{f=B}}}}(UT)),UT)),c_}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function VU(){return BT||(BT=1,FT=function(t){var e={},n=it,r=GU(),i=Object.assign;function s(l){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+l,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a=Symbol.for("react.element"),u=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),g=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),A=Symbol.iterator;function P(l){return l===null||typeof l!="object"?null:typeof(l=A&&l[A]||l["@@iterator"])=="function"?l:null}function F(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case h:return"Fragment";case u:return"Portal";case p:return"Profiler";case d:return"StrictMode";case w:return"Suspense";case C:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case g:return(l.displayName||"Context")+".Consumer";case f:return(l._context.displayName||"Context")+".Provider";case v:var c=l.render;return(l=l.displayName)||(l=(l=c.displayName||c.name||"")!==""?"ForwardRef("+l+")":"ForwardRef"),l;case b:return(c=l.displayName||null)!==null?c:F(l.type)||"Memo";case S:c=l._payload,l=l._init;try{return F(l(c))}catch{}}return null}function N(l){var c=l.type;switch(l.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=(l=c.render).displayName||l.name||"",c.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(c);case 8:return c===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function D(l){var c=l,m=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do 4098&(c=l).flags&&(m=c.return),l=c.return;while(l)}return c.tag===3?m:null}function q(l){if(D(l)!==l)throw Error(s(188))}function G(l){var c=l.alternate;if(!c){if((c=D(l))===null)throw Error(s(188));return c!==l?null:l}for(var m=l,y=c;;){var x=m.return;if(x===null)break;var T=x.alternate;if(T===null){if((y=x.return)!==null){m=y;continue}break}if(x.child===T.child){for(T=x.child;T;){if(T===m)return q(x),l;if(T===y)return q(x),c;T=T.sibling}throw Error(s(188))}if(m.return!==y.return)m=x,y=T;else{for(var k=!1,$=x.child;$;){if($===m){k=!0,m=x,y=T;break}if($===y){k=!0,y=x,m=T;break}$=$.sibling}if(!k){for($=T.child;$;){if($===m){k=!0,m=T,y=x;break}if($===y){k=!0,y=T,m=x;break}$=$.sibling}if(!k)throw Error(s(189))}}if(m.alternate!==y)throw Error(s(190))}if(m.tag!==3)throw Error(s(188));return m.stateNode.current===m?l:c}function H(l){return(l=G(l))!==null?J(l):null}function J(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var c=J(l);if(c!==null)return c;l=l.sibling}return null}function V(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){if(l.tag!==4){var c=V(l);if(c!==null)return c}l=l.sibling}return null}var U,Z=Array.isArray,ie=t.getPublicInstance,O=t.getRootHostContext,L=t.getChildHostContext,Q=t.prepareForCommit,B=t.resetAfterCommit,ee=t.createInstance,te=t.appendInitialChild,be=t.finalizeInitialChildren,ge=t.prepareUpdate,je=t.shouldSetTextContent,We=t.createTextInstance,Ne=t.scheduleTimeout,mt=t.cancelTimeout,St=t.noTimeout,Qe=t.isPrimaryRenderer,De=t.supportsMutation,ht=t.supportsPersistence,nt=t.supportsHydration,En=t.getInstanceFromNode,On=t.preparePortalMount,fi=t.getCurrentEventPriority,pi=t.detachDeletedInstance,Nn=t.supportsMicrotasks,Mu=t.scheduleMicrotask,xr=t.supportsTestSelectors,qs=t.findFiberRoot,Xe=t.getBoundingRect,Ze=t.getTextContent,mn=t.isHiddenSubtree,qe=t.matchAccessibilityRole,sr=t.setFocusIfFocusable,Ys=t.setupIntersectionObserver,Uo=t.appendChild,Qs=t.appendChildToContainer,_r=t.commitTextUpdate,mi=t.commitMount,Ur=t.commitUpdate,Yr=t.insertBefore,Ui=t.insertInContainerBefore,Ks=t.removeChild,xa=t.removeChildFromContainer,Zs=t.resetTextContent,Ou=t.hideInstance,Qr=t.hideTextInstance,Ih=t.unhideInstance,Qf=t.unhideTextInstance,h0=t.clearContainer,d0=t.cloneInstance,Kf=t.createContainerChildSet,Zf=t.appendChildToContainerChildSet,f0=t.finalizeContainerChildren,Le=t.replaceContainerChildren,Js=t.cloneHiddenInstance,Dn=t.cloneHiddenTextInstance,eo=t.canHydrateInstance,_a=t.canHydrateTextInstance,wa=t.canHydrateSuspenseInstance,zr=t.isSuspenseInstancePending,to=t.isSuspenseInstanceFallback,ba=t.getSuspenseInstanceFallbackErrorDetails,Jf=t.registerSuspenseInstanceRetry,Tl=t.getNextHydratableSibling,p0=t.getFirstHydratableChild,m0=t.getFirstHydratableChildWithinContainer,zo=t.getFirstHydratableChildWithinSuspenseInstance,g0=t.hydrateInstance,Cl=t.hydrateTextInstance,ep=t.hydrateSuspenseInstance,no=t.getNextHydratableInstanceAfterSuspenseInstance,Ln=t.commitHydratedContainer,Tn=t.commitHydratedSuspenseInstance,Cn=t.clearSuspenseBoundary,Nu=t.clearSuspenseBoundaryFromContainer,gi=t.shouldDeleteUnhydratedTailInstances,Al=t.didNotMatchHydratedContainerTextInstance,tp=t.didNotMatchHydratedTextInstance;function $o(l){if(U===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);U=c&&c[1]||""}return`
`+U+l}var Sa=!1;function ro(l,c){if(!l||Sa)return"";Sa=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(re){var y=re}Reflect.construct(l,[],c)}else{try{c.call()}catch(re){y=re}l.call(c.prototype)}else{try{throw Error()}catch(re){y=re}l()}}catch(re){if(re&&y&&typeof re.stack=="string"){for(var x=re.stack.split(`
`),T=y.stack.split(`
`),k=x.length-1,$=T.length-1;1<=k&&0<=$&&x[k]!==T[$];)$--;for(;1<=k&&0<=$;k--,$--)if(x[k]!==T[$]){if(k!==1||$!==1)do if(k--,0>--$||x[k]!==T[$]){var K=`
`+x[k].replace(" at new "," at ");return l.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",l.displayName)),K}while(1<=k&&0<=$);break}}}finally{Sa=!1,Error.prepareStackTrace=m}return(l=l?l.displayName||l.name:"")?$o(l):""}var Ph=Object.prototype.hasOwnProperty,Il=[],io=-1;function zi(l){return{current:l}}function Ot(l){0>io||(l.current=Il[io],Il[io]=null,io--)}function Et(l,c){io++,Il[io]=l.current,l.current=c}var $i={},$t=zi($i),or=zi(!1),so=$i;function oo(l,c){var m=l.type.contextTypes;if(!m)return $i;var y=l.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var x,T={};for(x in m)T[x]=c[x];return y&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=c,l.__reactInternalMemoizedMaskedChildContext=T),T}function wr(l){return(l=l.childContextTypes)!=null}function kh(){Ot(or),Ot($t)}function np(l,c,m){if($t.current!==$i)throw Error(s(168));Et($t,c),Et(or,m)}function rp(l,c,m){var y=l.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return m;for(var x in y=y.getChildContext())if(!(x in c))throw Error(s(108,N(l)||"Unknown",x));return i({},m,y)}function Pl(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||$i,so=$t.current,Et($t,l),Et(or,or.current),!0}function Rh(l,c,m){var y=l.stateNode;if(!y)throw Error(s(169));m?(l=rp(l,c,so),y.__reactInternalMemoizedMergedChildContext=l,Ot(or),Ot($t),Et($t,l)):Ot(or),Et(or,m)}var yi=Math.clz32?Math.clz32:function(l){return(l>>>=0)===0?32:31-(ip(l)/Mh|0)|0},ip=Math.log,Mh=Math.LN2,Ea=64,Ta=4194304;function kl(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&l;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&l;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function Ca(l,c){var m=l.pendingLanes;if(m===0)return 0;var y=0,x=l.suspendedLanes,T=l.pingedLanes,k=268435455&m;if(k!==0){var $=k&~x;$!==0?y=kl($):(T&=k)!==0&&(y=kl(T))}else(k=m&~x)!==0?y=kl(k):T!==0&&(y=kl(T));if(y===0)return 0;if(c!==0&&c!==y&&!(c&x)&&((x=y&-y)>=(T=c&-c)||x===16&&4194240&T))return c;if(4&y&&(y|=16&m),(c=l.entangledLanes)!==0)for(l=l.entanglements,c&=y;0<c;)x=1<<(m=31-yi(c)),y|=l[m],c&=~x;return y}function y0(l,c){switch(l){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;default:return-1}}function Oh(l){return(l=-1073741825&l.pendingLanes)!==0?l:1073741824&l?1073741824:0}function sp(){var l=Ea;return!(4194240&(Ea<<=1))&&(Ea=64),l}function ao(l){for(var c=[],m=0;31>m;m++)c.push(l);return c}function lo(l,c,m){l.pendingLanes|=c,c!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),(l=l.eventTimes)[c=31-yi(c)]=m}function Rl(l,c){var m=l.entangledLanes|=c;for(l=l.entanglements;m;){var y=31-yi(m),x=1<<y;x&c|l[y]&c&&(l[y]|=c),m&=~x}}var rt=0;function op(l){return 1<(l&=-l)?4<l?268435455&l?16:536870912:4:1}var uo=r.unstable_scheduleCallback,ap=r.unstable_cancelCallback,lp=r.unstable_shouldYield,Nh=r.unstable_requestPaint,gn=r.unstable_now,Ml=r.unstable_ImmediatePriority,Aa=r.unstable_UserBlockingPriority,Ho=r.unstable_NormalPriority,up=r.unstable_IdlePriority,Ol=null,ar=null,qn=typeof Object.is=="function"?Object.is:function(l,c){return l===c&&(l!==0||1/l==1/c)||l!=l&&c!=c},Hi=null,Nl=!1,Pt=!1;function Dt(l){Hi===null?Hi=[l]:Hi.push(l)}function Fn(){if(!Pt&&Hi!==null){Pt=!0;var l=0,c=rt;try{var m=Hi;for(rt=1;l<m.length;l++){var y=m[l];do y=y(!0);while(y!==null)}Hi=null,Nl=!1}catch(x){throw Hi!==null&&(Hi=Hi.slice(l+1)),uo(Ml,Fn),x}finally{rt=c,Pt=!1}}return null}var Kt=[],Gt=0,on=null,Tt=0,Bn=[],lr=0,jo=null,Un=1,An="";function Wo(l,c){Kt[Gt++]=Tt,Kt[Gt++]=on,on=l,Tt=c}function cp(l,c,m){Bn[lr++]=Un,Bn[lr++]=An,Bn[lr++]=jo,jo=l;var y=Un;l=An;var x=32-yi(y)-1;y&=~(1<<x),m+=1;var T=32-yi(c)+x;if(30<T){var k=x-x%5;T=(y&(1<<k)-1).toString(32),y>>=k,x-=k,Un=1<<32-yi(c)+x|m<<x|y,An=T+l}else Un=1<<T|m<<x|y,An=l}function Dh(l){l.return!==null&&(Wo(l,1),cp(l,1,0))}function Lh(l){for(;l===on;)on=Kt[--Gt],Kt[Gt]=null,Tt=Kt[--Gt],Kt[Gt]=null;for(;l===jo;)jo=Bn[--lr],Bn[lr]=null,An=Bn[--lr],Bn[lr]=null,Un=Bn[--lr],Bn[lr]=null}var an=null,xn=null,vt=!1,ji=!1,vi=null;function xi(l,c){var m=Yi(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=l,(c=l.deletions)===null?(l.deletions=[m],l.flags|=16):c.push(m)}function hp(l,c){switch(l.tag){case 5:return(c=eo(c,l.type,l.pendingProps))!==null&&(l.stateNode=c,an=l,xn=p0(c),!0);case 6:return(c=_a(c,l.pendingProps))!==null&&(l.stateNode=c,an=l,xn=null,!0);case 13:if((c=wa(c))!==null){var m=jo!==null?{id:Un,overflow:An}:null;return l.memoizedState={dehydrated:c,treeContext:m,retryLane:1073741824},(m=Yi(18,null,null,0)).stateNode=c,m.return=l,l.child=m,an=l,xn=null,!0}return!1;default:return!1}}function Du(l){return(1&l.mode)!=0&&(128&l.flags)==0}function Lu(l){if(vt){var c=xn;if(c){var m=c;if(!hp(l,c)){if(Du(l))throw Error(s(418));c=Tl(m);var y=an;c&&hp(l,c)?xi(y,m):(l.flags=-4097&l.flags|2,vt=!1,an=l)}}else{if(Du(l))throw Error(s(418));l.flags=-4097&l.flags|2,vt=!1,an=l}}}function Ia(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;an=l}function co(l){if(!nt||l!==an)return!1;if(!vt)return Ia(l),vt=!0,!1;if(l.tag!==3&&(l.tag!==5||gi(l.type)&&!je(l.type,l.memoizedProps))){var c=xn;if(c){if(Du(l))throw dp(),Error(s(418));for(;c;)xi(l,c),c=Tl(c)}}if(Ia(l),l.tag===13){if(!nt)throw Error(s(316));if(!(l=(l=l.memoizedState)!==null?l.dehydrated:null))throw Error(s(317));xn=no(l)}else xn=an?Tl(l.stateNode):null;return!0}function dp(){for(var l=xn;l;)l=Tl(l)}function ho(){nt&&(xn=an=null,ji=vt=!1)}function Fh(l){vi===null?vi=[l]:vi.push(l)}var Go=o.ReactCurrentBatchConfig;function _i(l,c){if(qn(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var m=Object.keys(l),y=Object.keys(c);if(m.length!==y.length)return!1;for(y=0;y<m.length;y++){var x=m[y];if(!Ph.call(c,x)||!qn(l[x],c[x]))return!1}return!0}function Dl(l){switch(l.tag){case 5:return $o(l.type);case 16:return $o("Lazy");case 13:return $o("Suspense");case 19:return $o("SuspenseList");case 0:case 2:case 15:return l=ro(l.type,!1);case 11:return l=ro(l.type.render,!1);case 1:return l=ro(l.type,!0);default:return""}}function Kr(l,c){if(l&&l.defaultProps){for(var m in c=i({},c),l=l.defaultProps)c[m]===void 0&&(c[m]=l[m]);return c}return c}var Pa=zi(null),ka=null,ps=null,Fu=null;function Bu(){Fu=ps=ka=null}function Bh(l,c,m){Qe?(Et(Pa,c._currentValue),c._currentValue=m):(Et(Pa,c._currentValue2),c._currentValue2=m)}function Uu(l){var c=Pa.current;Ot(Pa),Qe?l._currentValue=c:l._currentValue2=c}function zu(l,c,m){for(;l!==null;){var y=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),l===m)break;l=l.return}}function Vo(l,c){ka=l,Fu=ps=null,(l=l.dependencies)!==null&&l.firstContext!==null&&(l.lanes&c&&(ti=!0),l.firstContext=null)}function Zr(l){var c=Qe?l._currentValue:l._currentValue2;if(Fu!==l)if(l={context:l,memoizedValue:c,next:null},ps===null){if(ka===null)throw Error(s(308));ps=l,ka.dependencies={lanes:0,firstContext:l}}else ps=ps.next=l;return c}var fo=null;function $u(l){fo===null?fo=[l]:fo.push(l)}function Xo(l,c,m,y){var x=c.interleaved;return x===null?(m.next=m,$u(c)):(m.next=x.next,x.next=m),c.interleaved=m,$r(l,y)}function $r(l,c){l.lanes|=c;var m=l.alternate;for(m!==null&&(m.lanes|=c),m=l,l=l.return;l!==null;)l.childLanes|=c,(m=l.alternate)!==null&&(m.childLanes|=c),m=l,l=l.return;return m.tag===3?m.stateNode:null}var Lt=!1;function Hu(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ln(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Wi(l,c){return{eventTime:l,lane:c,tag:0,payload:null,callback:null,next:null}}function Gi(l,c,m){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(2&ct)!=0){var x=y.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),y.pending=c,$r(l,m)}return(x=y.interleaved)===null?(c.next=c,$u(y)):(c.next=x.next,x.next=c),y.interleaved=c,$r(l,m)}function po(l,c,m){if((c=c.updateQueue)!==null&&(c=c.shared,(4194240&m)!=0)){var y=c.lanes;m|=y&=l.pendingLanes,c.lanes=m,Rl(l,m)}}function fp(l,c){var m=l.updateQueue,y=l.alternate;if(y!==null&&m===(y=y.updateQueue)){var x=null,T=null;if((m=m.firstBaseUpdate)!==null){do{var k={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};T===null?x=T=k:T=T.next=k,m=m.next}while(m!==null);T===null?x=T=c:T=T.next=c}else x=T=c;return m={baseState:y.baseState,firstBaseUpdate:x,lastBaseUpdate:T,shared:y.shared,effects:y.effects},void(l.updateQueue=m)}(l=m.lastBaseUpdate)===null?m.firstBaseUpdate=c:l.next=c,m.lastBaseUpdate=c}function ju(l,c,m,y){var x=l.updateQueue;Lt=!1;var T=x.firstBaseUpdate,k=x.lastBaseUpdate,$=x.shared.pending;if($!==null){x.shared.pending=null;var K=$,re=K.next;K.next=null,k===null?T=re:k.next=re,k=K;var le=l.alternate;le!==null&&($=(le=le.updateQueue).lastBaseUpdate)!==k&&($===null?le.firstBaseUpdate=re:$.next=re,le.lastBaseUpdate=K)}if(T!==null){var ve=x.baseState;for(k=0,le=re=K=null,$=T;;){var ae=$.lane,me=$.eventTime;if((y&ae)===ae){le!==null&&(le=le.next={eventTime:me,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var Pe=l,tt=$;switch(ae=c,me=m,tt.tag){case 1:if(typeof(Pe=tt.payload)=="function"){ve=Pe.call(me,ve,ae);break e}ve=Pe;break e;case 3:Pe.flags=-65537&Pe.flags|128;case 0:if((ae=typeof(Pe=tt.payload)=="function"?Pe.call(me,ve,ae):Pe)==null)break e;ve=i({},ve,ae);break e;case 2:Lt=!0}}$.callback!==null&&$.lane!==0&&(l.flags|=64,(ae=x.effects)===null?x.effects=[$]:ae.push($))}else me={eventTime:me,lane:ae,tag:$.tag,payload:$.payload,callback:$.callback,next:null},le===null?(re=le=me,K=ve):le=le.next=me,k|=ae;if(($=$.next)===null){if(($=x.shared.pending)===null)break;$=(ae=$).next,ae.next=null,x.lastBaseUpdate=ae,x.shared.pending=null}}if(le===null&&(K=ve),x.baseState=K,x.firstBaseUpdate=re,x.lastBaseUpdate=le,(c=x.shared.interleaved)!==null){x=c;do k|=x.lane,x=x.next;while(x!==c)}else T===null&&(x.shared.lanes=0);Ll|=k,l.lanes=k,l.memoizedState=ve}}function Wu(l,c,m){if(l=c.effects,c.effects=null,l!==null)for(c=0;c<l.length;c++){var y=l[c],x=y.callback;if(x!==null){if(y.callback=null,y=m,typeof x!="function")throw Error(s(191,x));x.call(y)}}}var E=new n.Component().refs;function I(l,c,m,y){m=(m=m(y,c=l.memoizedState))==null?c:i({},c,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var R={isMounted:function(l){return!!(l=l._reactInternals)&&D(l)===l},enqueueSetState:function(l,c,m){l=l._reactInternals;var y=Cr(),x=Na(l),T=Wi(y,x);T.payload=c,m!=null&&(T.callback=m),(c=Gi(l,T,x))!==null&&(qi(c,l,x,y),po(c,l,x))},enqueueReplaceState:function(l,c,m){l=l._reactInternals;var y=Cr(),x=Na(l),T=Wi(y,x);T.tag=1,T.payload=c,m!=null&&(T.callback=m),(c=Gi(l,T,x))!==null&&(qi(c,l,x,y),po(c,l,x))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var m=Cr(),y=Na(l),x=Wi(m,y);x.tag=2,c!=null&&(x.callback=c),(c=Gi(l,x,y))!==null&&(qi(c,l,y,m),po(c,l,y))}};function M(l,c,m,y,x,T,k){return typeof(l=l.stateNode).shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,T,k):!c.prototype||!c.prototype.isPureReactComponent||!_i(m,y)||!_i(x,T)}function z(l,c,m){var y=!1,x=$i,T=c.contextType;return typeof T=="object"&&T!==null?T=Zr(T):(x=wr(c)?so:$t.current,T=(y=(y=c.contextTypes)!=null)?oo(l,x):$i),c=new c(m,T),l.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=R,l.stateNode=c,c._reactInternals=l,y&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=x,l.__reactInternalMemoizedMaskedChildContext=T),c}function Y(l,c,m,y){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,y),c.state!==l&&R.enqueueReplaceState(c,c.state,null)}function se(l,c,m,y){var x=l.stateNode;x.props=m,x.state=l.memoizedState,x.refs=E,Hu(l);var T=c.contextType;typeof T=="object"&&T!==null?x.context=Zr(T):(T=wr(c)?so:$t.current,x.context=oo(l,T)),x.state=l.memoizedState,typeof(T=c.getDerivedStateFromProps)=="function"&&(I(l,c,T,m),x.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(c=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),c!==x.state&&R.enqueueReplaceState(x,x.state,null),ju(l,m,x,y),x.state=l.memoizedState),typeof x.componentDidMount=="function"&&(l.flags|=4194308)}function ce(l,c,m){if((l=m.ref)!==null&&typeof l!="function"&&typeof l!="object"){if(m._owner){if(m=m._owner){if(m.tag!==1)throw Error(s(309));var y=m.stateNode}if(!y)throw Error(s(147,l));var x=y,T=""+l;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===T?c.ref:(c=function(k){var $=x.refs;$===E&&($=x.refs={}),k===null?delete $[T]:$[T]=k},c._stringRef=T,c)}if(typeof l!="string")throw Error(s(284));if(!m._owner)throw Error(s(290,l))}return l}function pe(l,c){throw l=Object.prototype.toString.call(c),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l))}function xe(l){return(0,l._init)(l._payload)}function Se(l){function c(ue,X){if(l){var ne=ue.deletions;ne===null?(ue.deletions=[X],ue.flags|=16):ne.push(X)}}function m(ue,X){if(!l)return null;for(;X!==null;)c(ue,X),X=X.sibling;return null}function y(ue,X){for(ue=new Map;X!==null;)X.key!==null?ue.set(X.key,X):ue.set(X.index,X),X=X.sibling;return ue}function x(ue,X){return(ue=La(ue,X)).index=0,ue.sibling=null,ue}function T(ue,X,ne){return ue.index=ne,l?(ne=ue.alternate)!==null?(ne=ne.index)<X?(ue.flags|=2,X):ne:(ue.flags|=2,X):(ue.flags|=1048576,X)}function k(ue){return l&&ue.alternate===null&&(ue.flags|=2),ue}function $(ue,X,ne,he){return X===null||X.tag!==6?((X=Z0(ne,ue.mode,he)).return=ue,X):((X=x(X,ne)).return=ue,X)}function K(ue,X,ne,he){var Oe=ne.type;return Oe===h?le(ue,X,ne.props.children,he,ne.key):X!==null&&(X.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===S&&xe(Oe)===X.type)?((he=x(X,ne.props)).ref=ce(ue,X,ne),he.return=ue,he):((he=Lp(ne.type,ne.key,ne.props,null,ue.mode,he)).ref=ce(ue,X,ne),he.return=ue,he)}function re(ue,X,ne,he){return X===null||X.tag!==4||X.stateNode.containerInfo!==ne.containerInfo||X.stateNode.implementation!==ne.implementation?((X=J0(ne,ue.mode,he)).return=ue,X):((X=x(X,ne.children||[])).return=ue,X)}function le(ue,X,ne,he,Oe){return X===null||X.tag!==7?((X=Ul(ne,ue.mode,he,Oe)).return=ue,X):((X=x(X,ne)).return=ue,X)}function ve(ue,X,ne){if(typeof X=="string"&&X!==""||typeof X=="number")return(X=Z0(""+X,ue.mode,ne)).return=ue,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case a:return(ne=Lp(X.type,X.key,X.props,null,ue.mode,ne)).ref=ce(ue,null,X),ne.return=ue,ne;case u:return(X=J0(X,ue.mode,ne)).return=ue,X;case S:return ve(ue,(0,X._init)(X._payload),ne)}if(Z(X)||P(X))return(X=Ul(X,ue.mode,ne,null)).return=ue,X;pe(ue,X)}return null}function ae(ue,X,ne,he){var Oe=X!==null?X.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number")return Oe!==null?null:$(ue,X,""+ne,he);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case a:return ne.key===Oe?K(ue,X,ne,he):null;case u:return ne.key===Oe?re(ue,X,ne,he):null;case S:return ae(ue,X,(Oe=ne._init)(ne._payload),he)}if(Z(ne)||P(ne))return Oe!==null?null:le(ue,X,ne,he,null);pe(ue,ne)}return null}function me(ue,X,ne,he,Oe){if(typeof he=="string"&&he!==""||typeof he=="number")return $(X,ue=ue.get(ne)||null,""+he,Oe);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case a:return K(X,ue=ue.get(he.key===null?ne:he.key)||null,he,Oe);case u:return re(X,ue=ue.get(he.key===null?ne:he.key)||null,he,Oe);case S:return me(ue,X,ne,(0,he._init)(he._payload),Oe)}if(Z(he)||P(he))return le(X,ue=ue.get(ne)||null,he,Oe,null);pe(X,he)}return null}function Pe(ue,X,ne,he){for(var Oe=null,Ct=null,ke=X,_t=X=0,cr=null;ke!==null&&_t<ne.length;_t++){ke.index>_t?(cr=ke,ke=null):cr=ke.sibling;var At=ae(ue,ke,ne[_t],he);if(At===null){ke===null&&(ke=cr);break}l&&ke&&At.alternate===null&&c(ue,ke),X=T(At,X,_t),Ct===null?Oe=At:Ct.sibling=At,Ct=At,ke=cr}if(_t===ne.length)return m(ue,ke),vt&&Wo(ue,_t),Oe;if(ke===null){for(;_t<ne.length;_t++)(ke=ve(ue,ne[_t],he))!==null&&(X=T(ke,X,_t),Ct===null?Oe=ke:Ct.sibling=ke,Ct=ke);return vt&&Wo(ue,_t),Oe}for(ke=y(ue,ke);_t<ne.length;_t++)(cr=me(ke,ue,_t,ne[_t],he))!==null&&(l&&cr.alternate!==null&&ke.delete(cr.key===null?_t:cr.key),X=T(cr,X,_t),Ct===null?Oe=cr:Ct.sibling=cr,Ct=cr);return l&&ke.forEach(function(Fa){return c(ue,Fa)}),vt&&Wo(ue,_t),Oe}function tt(ue,X,ne,he){var Oe=P(ne);if(typeof Oe!="function")throw Error(s(150));if((ne=Oe.call(ne))==null)throw Error(s(151));for(var Ct=Oe=null,ke=X,_t=X=0,cr=null,At=ne.next();ke!==null&&!At.done;_t++,At=ne.next()){ke.index>_t?(cr=ke,ke=null):cr=ke.sibling;var Fa=ae(ue,ke,At.value,he);if(Fa===null){ke===null&&(ke=cr);break}l&&ke&&Fa.alternate===null&&c(ue,ke),X=T(Fa,X,_t),Ct===null?Oe=Fa:Ct.sibling=Fa,Ct=Fa,ke=cr}if(At.done)return m(ue,ke),vt&&Wo(ue,_t),Oe;if(ke===null){for(;!At.done;_t++,At=ne.next())(At=ve(ue,At.value,he))!==null&&(X=T(At,X,_t),Ct===null?Oe=At:Ct.sibling=At,Ct=At);return vt&&Wo(ue,_t),Oe}for(ke=y(ue,ke);!At.done;_t++,At=ne.next())(At=me(ke,ue,_t,At.value,he))!==null&&(l&&At.alternate!==null&&ke.delete(At.key===null?_t:At.key),X=T(At,X,_t),Ct===null?Oe=At:Ct.sibling=At,Ct=At);return l&&ke.forEach(function(GM){return c(ue,GM)}),vt&&Wo(ue,_t),Oe}return function ue(X,ne,he,Oe){if(typeof he=="object"&&he!==null&&he.type===h&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case a:e:{for(var Ct=he.key,ke=ne;ke!==null;){if(ke.key===Ct){if((Ct=he.type)===h){if(ke.tag===7){m(X,ke.sibling),(ne=x(ke,he.props.children)).return=X,X=ne;break e}}else if(ke.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===S&&xe(Ct)===ke.type){m(X,ke.sibling),(ne=x(ke,he.props)).ref=ce(X,ke,he),ne.return=X,X=ne;break e}m(X,ke);break}c(X,ke),ke=ke.sibling}he.type===h?((ne=Ul(he.props.children,X.mode,Oe,he.key)).return=X,X=ne):((Oe=Lp(he.type,he.key,he.props,null,X.mode,Oe)).ref=ce(X,ne,he),Oe.return=X,X=Oe)}return k(X);case u:e:{for(ke=he.key;ne!==null;){if(ne.key===ke){if(ne.tag===4&&ne.stateNode.containerInfo===he.containerInfo&&ne.stateNode.implementation===he.implementation){m(X,ne.sibling),(ne=x(ne,he.children||[])).return=X,X=ne;break e}m(X,ne);break}c(X,ne),ne=ne.sibling}(ne=J0(he,X.mode,Oe)).return=X,X=ne}return k(X);case S:return ue(X,ne,(ke=he._init)(he._payload),Oe)}if(Z(he))return Pe(X,ne,he,Oe);if(P(he))return tt(X,ne,he,Oe);pe(X,he)}return typeof he=="string"&&he!==""||typeof he=="number"?(he=""+he,ne!==null&&ne.tag===6?(m(X,ne.sibling),(ne=x(ne,he)).return=X,X=ne):(m(X,ne),(ne=Z0(he,X.mode,Oe)).return=X,X=ne),k(X)):m(X,ne)}}var Ee=Se(!0),$e=Se(!1),gt={},He=zi(gt),Je=zi(gt),ze=zi(gt);function Ce(l){if(l===gt)throw Error(s(174));return l}function xt(l,c){Et(ze,c),Et(Je,l),Et(He,gt),l=O(c),Ot(He),Et(He,l)}function Nt(){Ot(He),Ot(Je),Ot(ze)}function Vt(l){var c=Ce(ze.current),m=Ce(He.current);m!==(c=L(m,l.type,c))&&(Et(Je,l),Et(He,c))}function kt(l){Je.current===l&&(Ot(He),Ot(Je))}var et=zi(0);function zn(l){for(var c=l;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&((m=m.dehydrated)===null||zr(m)||to(m)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(128&c.flags)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Yn=[];function br(){for(var l=0;l<Yn.length;l++){var c=Yn[l];Qe?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}Yn.length=0}var Sr=o.ReactCurrentDispatcher,Hr=o.ReactCurrentBatchConfig,un=0,dt=null,ft=null,pt=null,Qn=!1,Vi=!1,Jr=0,ei=0;function Er(){throw Error(s(321))}function v0(l,c){if(c===null)return!1;for(var m=0;m<c.length&&m<l.length;m++)if(!qn(l[m],c[m]))return!1;return!0}function x0(l,c,m,y,x,T){if(un=T,dt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Sr.current=l===null||l.memoizedState===null?CM:AM,l=m(y,x),Vi){T=0;do{if(Vi=!1,Jr=0,25<=T)throw Error(s(301));T+=1,pt=ft=null,c.updateQueue=null,Sr.current=IM,l=m(y,x)}while(Vi)}if(Sr.current=gp,c=ft!==null&&ft.next!==null,un=0,pt=ft=dt=null,Qn=!1,c)throw Error(s(300));return l}function _0(){var l=Jr!==0;return Jr=0,l}function mo(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?dt.memoizedState=pt=l:pt=pt.next=l,pt}function Xi(){if(ft===null){var l=dt.alternate;l=l!==null?l.memoizedState:null}else l=ft.next;var c=pt===null?dt.memoizedState:pt.next;if(c!==null)pt=c,ft=l;else{if(l===null)throw Error(s(310));l={memoizedState:(ft=l).memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},pt===null?dt.memoizedState=pt=l:pt=pt.next=l}return pt}function Uh(l,c){return typeof c=="function"?c(l):c}function w0(l){var c=Xi(),m=c.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=l;var y=ft,x=y.baseQueue,T=m.pending;if(T!==null){if(x!==null){var k=x.next;x.next=T.next,T.next=k}y.baseQueue=x=T,m.pending=null}if(x!==null){T=x.next,y=y.baseState;var $=k=null,K=null,re=T;do{var le=re.lane;if((un&le)===le)K!==null&&(K=K.next={lane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),y=re.hasEagerState?re.eagerState:l(y,re.action);else{var ve={lane:le,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null};K===null?($=K=ve,k=y):K=K.next=ve,dt.lanes|=le,Ll|=le}re=re.next}while(re!==null&&re!==T);K===null?k=y:K.next=$,qn(y,c.memoizedState)||(ti=!0),c.memoizedState=y,c.baseState=k,c.baseQueue=K,m.lastRenderedState=y}if((l=m.interleaved)!==null){x=l;do T=x.lane,dt.lanes|=T,Ll|=T,x=x.next;while(x!==l)}else x===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function b0(l){var c=Xi(),m=c.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=l;var y=m.dispatch,x=m.pending,T=c.memoizedState;if(x!==null){m.pending=null;var k=x=x.next;do T=l(T,k.action),k=k.next;while(k!==x);qn(T,c.memoizedState)||(ti=!0),c.memoizedState=T,c.baseQueue===null&&(c.baseState=T),m.lastRenderedState=T}return[T,y]}function Fb(){}function Bb(l,c){var m=dt,y=Xi(),x=c(),T=!qn(y.memoizedState,x);if(T&&(y.memoizedState=x,ti=!0),y=y.queue,S0($b.bind(null,m,y,l),[l]),y.getSnapshot!==c||T||pt!==null&&1&pt.memoizedState.tag){if(m.flags|=2048,zh(9,zb.bind(null,m,y,x,c),void 0,null),Kn===null)throw Error(s(349));30&un||Ub(m,c,x)}return x}function Ub(l,c,m){l.flags|=16384,l={getSnapshot:c,value:m},(c=dt.updateQueue)===null?(c={lastEffect:null,stores:null},dt.updateQueue=c,c.stores=[l]):(m=c.stores)===null?c.stores=[l]:m.push(l)}function zb(l,c,m,y){c.value=m,c.getSnapshot=y,Hb(c)&&jb(l)}function $b(l,c,m){return m(function(){Hb(c)&&jb(l)})}function Hb(l){var c=l.getSnapshot;l=l.value;try{var m=c();return!qn(l,m)}catch{return!0}}function jb(l){var c=$r(l,1);c!==null&&qi(c,l,1,-1)}function Wb(l){var c=mo();return typeof l=="function"&&(l=l()),c.memoizedState=c.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uh,lastRenderedState:l},c.queue=l,l=l.dispatch=TM.bind(null,dt,l),[c.memoizedState,l]}function zh(l,c,m,y){return l={tag:l,create:c,destroy:m,deps:y,next:null},(c=dt.updateQueue)===null?(c={lastEffect:null,stores:null},dt.updateQueue=c,c.lastEffect=l.next=l):(m=c.lastEffect)===null?c.lastEffect=l.next=l:(y=m.next,m.next=l,l.next=y,c.lastEffect=l),l}function Gb(){return Xi().memoizedState}function pp(l,c,m,y){var x=mo();dt.flags|=l,x.memoizedState=zh(1|c,m,void 0,y===void 0?null:y)}function mp(l,c,m,y){var x=Xi();y=y===void 0?null:y;var T=void 0;if(ft!==null){var k=ft.memoizedState;if(T=k.destroy,y!==null&&v0(y,k.deps))return void(x.memoizedState=zh(c,m,T,y))}dt.flags|=l,x.memoizedState=zh(1|c,m,T,y)}function Vb(l,c){return pp(8390656,8,l,c)}function S0(l,c){return mp(2048,8,l,c)}function Xb(l,c){return mp(4,2,l,c)}function qb(l,c){return mp(4,4,l,c)}function Yb(l,c){return typeof c=="function"?(l=l(),c(l),function(){c(null)}):c!=null?(l=l(),c.current=l,function(){c.current=null}):void 0}function Qb(l,c,m){return m=m!=null?m.concat([l]):null,mp(4,4,Yb.bind(null,c,l),m)}function E0(){}function Kb(l,c){var m=Xi();c=c===void 0?null:c;var y=m.memoizedState;return y!==null&&c!==null&&v0(c,y[1])?y[0]:(m.memoizedState=[l,c],l)}function Zb(l,c){var m=Xi();c=c===void 0?null:c;var y=m.memoizedState;return y!==null&&c!==null&&v0(c,y[1])?y[0]:(l=l(),m.memoizedState=[l,c],l)}function Jb(l,c,m){return 21&un?(qn(m,c)||(m=sp(),dt.lanes|=m,Ll|=m,l.baseState=!0),c):(l.baseState&&(l.baseState=!1,ti=!0),l.memoizedState=m)}function SM(l,c){var m=rt;rt=m!==0&&4>m?m:4,l(!0);var y=Hr.transition;Hr.transition={};try{l(!1),c()}finally{rt=m,Hr.transition=y}}function eS(){return Xi().memoizedState}function EM(l,c,m){var y=Na(l);m={lane:y,action:m,hasEagerState:!1,eagerState:null,next:null},tS(l)?nS(c,m):(m=Xo(l,c,m,y))!==null&&(qi(m,l,y,Cr()),rS(m,c,y))}function TM(l,c,m){var y=Na(l),x={lane:y,action:m,hasEagerState:!1,eagerState:null,next:null};if(tS(l))nS(c,x);else{var T=l.alternate;if(l.lanes===0&&(T===null||T.lanes===0)&&(T=c.lastRenderedReducer)!==null)try{var k=c.lastRenderedState,$=T(k,m);if(x.hasEagerState=!0,x.eagerState=$,qn($,k)){var K=c.interleaved;return K===null?(x.next=x,$u(c)):(x.next=K.next,K.next=x),void(c.interleaved=x)}}catch{}(m=Xo(l,c,x,y))!==null&&(qi(m,l,y,x=Cr()),rS(m,c,y))}}function tS(l){var c=l.alternate;return l===dt||c!==null&&c===dt}function nS(l,c){Vi=Qn=!0;var m=l.pending;m===null?c.next=c:(c.next=m.next,m.next=c),l.pending=c}function rS(l,c,m){if(4194240&m){var y=c.lanes;m|=y&=l.pendingLanes,c.lanes=m,Rl(l,m)}}var gp={readContext:Zr,useCallback:Er,useContext:Er,useEffect:Er,useImperativeHandle:Er,useInsertionEffect:Er,useLayoutEffect:Er,useMemo:Er,useReducer:Er,useRef:Er,useState:Er,useDebugValue:Er,useDeferredValue:Er,useTransition:Er,useMutableSource:Er,useSyncExternalStore:Er,useId:Er,unstable_isNewReconciler:!1},CM={readContext:Zr,useCallback:function(l,c){return mo().memoizedState=[l,c===void 0?null:c],l},useContext:Zr,useEffect:Vb,useImperativeHandle:function(l,c,m){return m=m!=null?m.concat([l]):null,pp(4194308,4,Yb.bind(null,c,l),m)},useLayoutEffect:function(l,c){return pp(4194308,4,l,c)},useInsertionEffect:function(l,c){return pp(4,2,l,c)},useMemo:function(l,c){var m=mo();return c=c===void 0?null:c,l=l(),m.memoizedState=[l,c],l},useReducer:function(l,c,m){var y=mo();return c=m!==void 0?m(c):c,y.memoizedState=y.baseState=c,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:c},y.queue=l,l=l.dispatch=EM.bind(null,dt,l),[y.memoizedState,l]},useRef:function(l){return l={current:l},mo().memoizedState=l},useState:Wb,useDebugValue:E0,useDeferredValue:function(l){return mo().memoizedState=l},useTransition:function(){var l=Wb(!1),c=l[0];return l=SM.bind(null,l[1]),mo().memoizedState=l,[c,l]},useMutableSource:function(){},useSyncExternalStore:function(l,c,m){var y=dt,x=mo();if(vt){if(m===void 0)throw Error(s(407));m=m()}else{if(m=c(),Kn===null)throw Error(s(349));30&un||Ub(y,c,m)}x.memoizedState=m;var T={value:m,getSnapshot:c};return x.queue=T,Vb($b.bind(null,y,T,l),[l]),y.flags|=2048,zh(9,zb.bind(null,y,T,m,c),void 0,null),m},useId:function(){var l=mo(),c=Kn.identifierPrefix;if(vt){var m=An;c=":"+c+"R"+(m=(Un&~(1<<32-yi(Un)-1)).toString(32)+m),0<(m=Jr++)&&(c+="H"+m.toString(32)),c+=":"}else c=":"+c+"r"+(m=ei++).toString(32)+":";return l.memoizedState=c},unstable_isNewReconciler:!1},AM={readContext:Zr,useCallback:Kb,useContext:Zr,useEffect:S0,useImperativeHandle:Qb,useInsertionEffect:Xb,useLayoutEffect:qb,useMemo:Zb,useReducer:w0,useRef:Gb,useState:function(){return w0(Uh)},useDebugValue:E0,useDeferredValue:function(l){return Jb(Xi(),ft.memoizedState,l)},useTransition:function(){return[w0(Uh)[0],Xi().memoizedState]},useMutableSource:Fb,useSyncExternalStore:Bb,useId:eS,unstable_isNewReconciler:!1},IM={readContext:Zr,useCallback:Kb,useContext:Zr,useEffect:S0,useImperativeHandle:Qb,useInsertionEffect:Xb,useLayoutEffect:qb,useMemo:Zb,useReducer:b0,useRef:Gb,useState:function(){return b0(Uh)},useDebugValue:E0,useDeferredValue:function(l){var c=Xi();return ft===null?c.memoizedState=l:Jb(c,ft.memoizedState,l)},useTransition:function(){return[b0(Uh)[0],Xi().memoizedState]},useMutableSource:Fb,useSyncExternalStore:Bb,useId:eS,unstable_isNewReconciler:!1};function Gu(l,c){try{var m="",y=c;do m+=Dl(y),y=y.return;while(y);var x=m}catch(T){x=`
Error generating stack: `+T.message+`
`+T.stack}return{value:l,source:c,stack:x,digest:null}}function T0(l,c,m){return{value:l,source:null,stack:m??null,digest:c??null}}function C0(l,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var PM=typeof WeakMap=="function"?WeakMap:Map;function iS(l,c,m){(m=Wi(-1,m)).tag=3,m.payload={element:null};var y=c.value;return m.callback=function(){kp||(kp=!0,G0=y),C0(0,c)},m}function sS(l,c,m){(m=Wi(-1,m)).tag=3;var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var x=c.value;m.payload=function(){return y(x)},m.callback=function(){C0(0,c)}}var T=l.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(m.callback=function(){C0(0,c),typeof y!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var k=c.stack;this.componentDidCatch(c.value,{componentStack:k!==null?k:""})}),m}function oS(l,c,m){var y=l.pingCache;if(y===null){y=l.pingCache=new PM;var x=new Set;y.set(c,x)}else(x=y.get(c))===void 0&&(x=new Set,y.set(c,x));x.has(m)||(x.add(m),l=BM.bind(null,l,c,m),c.then(l,l))}function aS(l){do{var c;if((c=l.tag===13)&&(c=(c=l.memoizedState)===null||c.dehydrated!==null),c)return l;l=l.return}while(l!==null);return null}function lS(l,c,m,y,x){return 1&l.mode?(l.flags|=65536,l.lanes=x,l):(l===c?l.flags|=65536:(l.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:((c=Wi(-1,1)).tag=2,Gi(m,c,1))),m.lanes|=1),l)}var kM=o.ReactCurrentOwner,ti=!1;function ni(l,c,m,y){c.child=l===null?$e(c,null,m,y):Ee(c,l.child,m,y)}function uS(l,c,m,y,x){m=m.render;var T=c.ref;return Vo(c,x),y=x0(l,c,m,y,T,x),m=_0(),l===null||ti?(vt&&m&&Dh(c),c.flags|=1,ni(l,c,y,x),c.child):(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~x,qo(l,c,x))}function cS(l,c,m,y,x){if(l===null){var T=m.type;return typeof T!="function"||K0(T)||T.defaultProps!==void 0||m.compare!==null||m.defaultProps!==void 0?((l=Lp(m.type,null,y,c,c.mode,x)).ref=c.ref,l.return=c,c.child=l):(c.tag=15,c.type=T,hS(l,c,T,y,x))}if(T=l.child,(l.lanes&x)==0){var k=T.memoizedProps;if((m=(m=m.compare)!==null?m:_i)(k,y)&&l.ref===c.ref)return qo(l,c,x)}return c.flags|=1,(l=La(T,y)).ref=c.ref,l.return=c,c.child=l}function hS(l,c,m,y,x){if(l!==null){var T=l.memoizedProps;if(_i(T,y)&&l.ref===c.ref){if(ti=!1,c.pendingProps=y=T,(l.lanes&x)==0)return c.lanes=l.lanes,qo(l,c,x);131072&l.flags&&(ti=!0)}}return A0(l,c,m,y,x)}function dS(l,c,m){var y=c.pendingProps,x=y.children,T=l!==null?l.memoizedState:null;if(y.mode==="hidden")if(!(1&c.mode))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(Xu,wi),wi|=m;else{if(!(1073741824&m))return l=T!==null?T.baseLanes|m:m,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:l,cachePool:null,transitions:null},c.updateQueue=null,Et(Xu,wi),wi|=l,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=T!==null?T.baseLanes:m,Et(Xu,wi),wi|=y}else T!==null?(y=T.baseLanes|m,c.memoizedState=null):y=m,Et(Xu,wi),wi|=y;return ni(l,c,x,m),c.child}function fS(l,c){var m=c.ref;(l===null&&m!==null||l!==null&&l.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function A0(l,c,m,y,x){var T=wr(m)?so:$t.current;return T=oo(c,T),Vo(c,x),m=x0(l,c,m,y,T,x),y=_0(),l===null||ti?(vt&&y&&Dh(c),c.flags|=1,ni(l,c,m,x),c.child):(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~x,qo(l,c,x))}function pS(l,c,m,y,x){if(wr(m)){var T=!0;Pl(c)}else T=!1;if(Vo(c,x),c.stateNode===null)_p(l,c),z(c,m,y),se(c,m,y,x),y=!0;else if(l===null){var k=c.stateNode,$=c.memoizedProps;k.props=$;var K=k.context,re=m.contextType;typeof re=="object"&&re!==null?re=Zr(re):re=oo(c,re=wr(m)?so:$t.current);var le=m.getDerivedStateFromProps,ve=typeof le=="function"||typeof k.getSnapshotBeforeUpdate=="function";ve||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||($!==y||K!==re)&&Y(c,k,y,re),Lt=!1;var ae=c.memoizedState;k.state=ae,ju(c,y,k,x),K=c.memoizedState,$!==y||ae!==K||or.current||Lt?(typeof le=="function"&&(I(c,m,le,y),K=c.memoizedState),($=Lt||M(c,m,$,y,ae,K,re))?(ve||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(c.flags|=4194308)):(typeof k.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=K),k.props=y,k.state=K,k.context=re,y=$):(typeof k.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{k=c.stateNode,ln(l,c),$=c.memoizedProps,re=c.type===c.elementType?$:Kr(c.type,$),k.props=re,ve=c.pendingProps,ae=k.context,typeof(K=m.contextType)=="object"&&K!==null?K=Zr(K):K=oo(c,K=wr(m)?so:$t.current);var me=m.getDerivedStateFromProps;(le=typeof me=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||($!==ve||ae!==K)&&Y(c,k,y,K),Lt=!1,ae=c.memoizedState,k.state=ae,ju(c,y,k,x);var Pe=c.memoizedState;$!==ve||ae!==Pe||or.current||Lt?(typeof me=="function"&&(I(c,m,me,y),Pe=c.memoizedState),(re=Lt||M(c,m,re,y,ae,Pe,K)||!1)?(le||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(y,Pe,K),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(y,Pe,K)),typeof k.componentDidUpdate=="function"&&(c.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof k.componentDidUpdate!="function"||$===l.memoizedProps&&ae===l.memoizedState||(c.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||$===l.memoizedProps&&ae===l.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Pe),k.props=y,k.state=Pe,k.context=K,y=re):(typeof k.componentDidUpdate!="function"||$===l.memoizedProps&&ae===l.memoizedState||(c.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||$===l.memoizedProps&&ae===l.memoizedState||(c.flags|=1024),y=!1)}return I0(l,c,m,y,T,x)}function I0(l,c,m,y,x,T){fS(l,c);var k=(128&c.flags)!=0;if(!y&&!k)return x&&Rh(c,m,!1),qo(l,c,T);y=c.stateNode,kM.current=c;var $=k&&typeof m.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,l!==null&&k?(c.child=Ee(c,l.child,null,T),c.child=Ee(c,null,$,T)):ni(l,c,$,T),c.memoizedState=y.state,x&&Rh(c,m,!0),c.child}function mS(l){var c=l.stateNode;c.pendingContext?np(0,c.pendingContext,c.pendingContext!==c.context):c.context&&np(0,c.context,!1),xt(l,c.containerInfo)}function gS(l,c,m,y,x){return ho(),Fh(x),c.flags|=256,ni(l,c,m,y),c.child}var $h,Hh,yp,vp,P0={dehydrated:null,treeContext:null,retryLane:0};function k0(l){return{baseLanes:l,cachePool:null,transitions:null}}function yS(l,c,m){var y,x=c.pendingProps,T=et.current,k=!1,$=(128&c.flags)!=0;if((y=$)||(y=(l===null||l.memoizedState!==null)&&(2&T)!=0),y?(k=!0,c.flags&=-129):l!==null&&l.memoizedState===null||(T|=1),Et(et,1&T),l===null)return Lu(c),(l=c.memoizedState)!==null&&(l=l.dehydrated)!==null?(1&c.mode?to(l)?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):($=x.children,l=x.fallback,k?(x=c.mode,k=c.child,$={mode:"hidden",children:$},!(1&x)&&k!==null?(k.childLanes=0,k.pendingProps=$):k=Fp($,x,0,null),l=Ul(l,x,m,null),k.return=c,l.return=c,k.sibling=l,c.child=k,c.child.memoizedState=k0(m),c.memoizedState=P0,l):R0(c,$));if((T=l.memoizedState)!==null&&(y=T.dehydrated)!==null)return function(re,le,ve,ae,me,Pe,tt){if(ve)return 256&le.flags?(le.flags&=-257,xp(re,le,tt,ae=T0(Error(s(422))))):le.memoizedState!==null?(le.child=re.child,le.flags|=128,null):(Pe=ae.fallback,me=le.mode,ae=Fp({mode:"visible",children:ae.children},me,0,null),(Pe=Ul(Pe,me,tt,null)).flags|=2,ae.return=le,Pe.return=le,ae.sibling=Pe,le.child=ae,1&le.mode&&Ee(le,re.child,null,tt),le.child.memoizedState=k0(tt),le.memoizedState=P0,Pe);if(!(1&le.mode))return xp(re,le,tt,null);if(to(me))return ae=ba(me).digest,Pe=Error(s(419)),ae=T0(Pe,ae,void 0),xp(re,le,tt,ae);if(ve=(tt&re.childLanes)!=0,ti||ve){if((ae=Kn)!==null){switch(tt&-tt){case 4:me=2;break;case 16:me=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:me=32;break;case 536870912:me=268435456;break;default:me=0}(me=me&(ae.suspendedLanes|tt)?0:me)!==0&&me!==Pe.retryLane&&(Pe.retryLane=me,$r(re,me),qi(ae,re,me,-1))}return Q0(),xp(re,le,tt,ae=T0(Error(s(421))))}return zr(me)?(le.flags|=128,le.child=re.child,le=UM.bind(null,re),Jf(me,le),null):(re=Pe.treeContext,nt&&(xn=zo(me),an=le,vt=!0,vi=null,ji=!1,re!==null&&(Bn[lr++]=Un,Bn[lr++]=An,Bn[lr++]=jo,Un=re.id,An=re.overflow,jo=le)),le=R0(le,ae.children),le.flags|=4096,le)}(l,c,$,x,y,T,m);if(k){k=x.fallback,$=c.mode,y=(T=l.child).sibling;var K={mode:"hidden",children:x.children};return!(1&$)&&c.child!==T?((x=c.child).childLanes=0,x.pendingProps=K,c.deletions=null):(x=La(T,K)).subtreeFlags=14680064&T.subtreeFlags,y!==null?k=La(y,k):(k=Ul(k,$,m,null)).flags|=2,k.return=c,x.return=c,x.sibling=k,c.child=x,x=k,k=c.child,$=($=l.child.memoizedState)===null?k0(m):{baseLanes:$.baseLanes|m,cachePool:null,transitions:$.transitions},k.memoizedState=$,k.childLanes=l.childLanes&~m,c.memoizedState=P0,x}return l=(k=l.child).sibling,x=La(k,{mode:"visible",children:x.children}),!(1&c.mode)&&(x.lanes=m),x.return=c,x.sibling=null,l!==null&&((m=c.deletions)===null?(c.deletions=[l],c.flags|=16):m.push(l)),c.child=x,c.memoizedState=null,x}function R0(l,c){return(c=Fp({mode:"visible",children:c},l.mode,0,null)).return=l,l.child=c}function xp(l,c,m,y){return y!==null&&Fh(y),Ee(c,l.child,null,m),(l=R0(c,c.pendingProps.children)).flags|=2,c.memoizedState=null,l}function vS(l,c,m){l.lanes|=c;var y=l.alternate;y!==null&&(y.lanes|=c),zu(l.return,c,m)}function M0(l,c,m,y,x){var T=l.memoizedState;T===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:m,tailMode:x}:(T.isBackwards=c,T.rendering=null,T.renderingStartTime=0,T.last=y,T.tail=m,T.tailMode=x)}function xS(l,c,m){var y=c.pendingProps,x=y.revealOrder,T=y.tail;if(ni(l,c,y.children,m),(2&(y=et.current))!=0)y=1&y|2,c.flags|=128;else{if(l!==null&&128&l.flags)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&vS(l,m,c);else if(l.tag===19)vS(l,m,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}if(Et(et,y),(1&c.mode)==0)c.memoizedState=null;else switch(x){case"forwards":for(m=c.child,x=null;m!==null;)(l=m.alternate)!==null&&zn(l)===null&&(x=m),m=m.sibling;(m=x)===null?(x=c.child,c.child=null):(x=m.sibling,m.sibling=null),M0(c,!1,x,m,T);break;case"backwards":for(m=null,x=c.child,c.child=null;x!==null;){if((l=x.alternate)!==null&&zn(l)===null){c.child=x;break}l=x.sibling,x.sibling=m,m=x,x=l}M0(c,!0,m,null,T);break;case"together":M0(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function _p(l,c){!(1&c.mode)&&l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2)}function qo(l,c,m){if(l!==null&&(c.dependencies=l.dependencies),Ll|=c.lanes,(m&c.childLanes)==0)return null;if(l!==null&&c.child!==l.child)throw Error(s(153));if(c.child!==null){for(m=La(l=c.child,l.pendingProps),c.child=m,m.return=c;l.sibling!==null;)l=l.sibling,(m=m.sibling=La(l,l.pendingProps)).return=c;m.sibling=null}return c.child}function go(l){l.flags|=4}function _S(l,c){if(l!==null&&l.child===c.child)return!0;if(16&c.flags)return!1;for(l=c.child;l!==null;){if(12854&l.flags||12854&l.subtreeFlags)return!1;l=l.sibling}return!0}if(De)$h=function(l,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)te(l,m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Hh=function(){},yp=function(l,c,m,y,x){if((l=l.memoizedProps)!==y){var T=c.stateNode,k=Ce(He.current);m=ge(T,m,l,y,x,k),(c.updateQueue=m)&&go(c)}},vp=function(l,c,m,y){m!==y&&go(c)};else if(ht){$h=function(l,c,m,y){for(var x=c.child;x!==null;){if(x.tag===5){var T=x.stateNode;m&&y&&(T=Js(T,x.type,x.memoizedProps,x)),te(l,T)}else if(x.tag===6)T=x.stateNode,m&&y&&(T=Dn(T,x.memoizedProps,x)),te(l,T);else if(x.tag!==4){if(x.tag===22&&x.memoizedState!==null)(T=x.child)!==null&&(T.return=x),$h(l,x,!0,!0);else if(x.child!==null){x.child.return=x,x=x.child;continue}}if(x===c)break;for(;x.sibling===null;){if(x.return===null||x.return===c)return;x=x.return}x.sibling.return=x.return,x=x.sibling}};var wS=function(l,c,m,y){for(var x=c.child;x!==null;){if(x.tag===5){var T=x.stateNode;m&&y&&(T=Js(T,x.type,x.memoizedProps,x)),Zf(l,T)}else if(x.tag===6)T=x.stateNode,m&&y&&(T=Dn(T,x.memoizedProps,x)),Zf(l,T);else if(x.tag!==4){if(x.tag===22&&x.memoizedState!==null)(T=x.child)!==null&&(T.return=x),wS(l,x,!0,!0);else if(x.child!==null){x.child.return=x,x=x.child;continue}}if(x===c)break;for(;x.sibling===null;){if(x.return===null||x.return===c)return;x=x.return}x.sibling.return=x.return,x=x.sibling}};Hh=function(l,c){var m=c.stateNode;if(!_S(l,c)){l=m.containerInfo;var y=Kf(l);wS(y,c,!1,!1),m.pendingChildren=y,go(c),f0(l,y)}},yp=function(l,c,m,y,x){var T=l.stateNode,k=l.memoizedProps;if((l=_S(l,c))&&k===y)c.stateNode=T;else{var $=c.stateNode,K=Ce(He.current),re=null;k!==y&&(re=ge($,m,k,y,x,K)),l&&re===null?c.stateNode=T:(T=d0(T,re,m,k,y,c,l,$),be(T,m,y,x,K)&&go(c),c.stateNode=T,l?go(c):$h(T,c,!1,!1))}},vp=function(l,c,m,y){m!==y?(l=Ce(ze.current),m=Ce(He.current),c.stateNode=We(y,l,m,c),go(c)):c.stateNode=l.stateNode}}else Hh=function(){},yp=function(){},vp=function(){};function jh(l,c){if(!vt)switch(l.tailMode){case"hidden":c=l.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var y=null;m!==null;)m.alternate!==null&&(y=m),m=m.sibling;y===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function jr(l){var c=l.alternate!==null&&l.alternate.child===l.child,m=0,y=0;if(c)for(var x=l.child;x!==null;)m|=x.lanes|x.childLanes,y|=14680064&x.subtreeFlags,y|=14680064&x.flags,x.return=l,x=x.sibling;else for(x=l.child;x!==null;)m|=x.lanes|x.childLanes,y|=x.subtreeFlags,y|=x.flags,x.return=l,x=x.sibling;return l.subtreeFlags|=y,l.childLanes=m,c}function RM(l,c,m){var y=c.pendingProps;switch(Lh(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jr(c),null;case 1:case 17:return wr(c.type)&&kh(),jr(c),null;case 3:return m=c.stateNode,Nt(),Ot(or),Ot($t),br(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),l!==null&&l.child!==null||(co(c)?go(c):l===null||l.memoizedState.isDehydrated&&!(256&c.flags)||(c.flags|=1024,vi!==null&&(q0(vi),vi=null))),Hh(l,c),jr(c),null;case 5:kt(c),m=Ce(ze.current);var x=c.type;if(l!==null&&c.stateNode!=null)yp(l,c,x,y,m),l.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(s(166));return jr(c),null}if(l=Ce(He.current),co(c)){if(!nt)throw Error(s(175));l=g0(c.stateNode,c.type,c.memoizedProps,m,l,c,!ji),c.updateQueue=l,l!==null&&go(c)}else{var T=ee(x,y,m,l,c);$h(T,c,!1,!1),c.stateNode=T,be(T,x,y,m,l)&&go(c)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return jr(c),null;case 6:if(l&&c.stateNode!=null)vp(l,c,l.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(s(166));if(l=Ce(ze.current),m=Ce(He.current),co(c)){if(!nt)throw Error(s(176));if(l=c.stateNode,m=c.memoizedProps,(y=Cl(l,m,c,!ji))&&(x=an)!==null)switch(x.tag){case 3:Al(x.stateNode.containerInfo,l,m,(1&x.mode)!=0);break;case 5:tp(x.type,x.memoizedProps,x.stateNode,l,m,(1&x.mode)!=0)}y&&go(c)}else c.stateNode=We(y,l,m,c)}return jr(c),null;case 13:if(Ot(et),y=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(vt&&xn!==null&&1&c.mode&&!(128&c.flags))dp(),ho(),c.flags|=98560,x=!1;else if(x=co(c),y!==null&&y.dehydrated!==null){if(l===null){if(!x)throw Error(s(318));if(!nt)throw Error(s(344));if(!(x=(x=c.memoizedState)!==null?x.dehydrated:null))throw Error(s(317));ep(x,c)}else ho(),!(128&c.flags)&&(c.memoizedState=null),c.flags|=4;jr(c),x=!1}else vi!==null&&(q0(vi),vi=null),x=!0;if(!x)return 65536&c.flags?c:null}return 128&c.flags?(c.lanes=m,c):((m=y!==null)!=(l!==null&&l.memoizedState!==null)&&m&&(c.child.flags|=8192,1&c.mode&&(l===null||1&et.current?$n===0&&($n=3):Q0())),c.updateQueue!==null&&(c.flags|=4),jr(c),null);case 4:return Nt(),Hh(l,c),l===null&&On(c.stateNode.containerInfo),jr(c),null;case 10:return Uu(c.type._context),jr(c),null;case 19:if(Ot(et),(x=c.memoizedState)===null)return jr(c),null;if(y=(128&c.flags)!=0,(T=x.rendering)===null)if(y)jh(x,!1);else{if($n!==0||l!==null&&128&l.flags)for(l=c.child;l!==null;){if((T=zn(l))!==null){for(c.flags|=128,jh(x,!1),(l=T.updateQueue)!==null&&(c.updateQueue=l,c.flags|=4),c.subtreeFlags=0,l=m,m=c.child;m!==null;)x=l,(y=m).flags&=14680066,(T=y.alternate)===null?(y.childLanes=0,y.lanes=x,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=T.childLanes,y.lanes=T.lanes,y.child=T.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=T.memoizedProps,y.memoizedState=T.memoizedState,y.updateQueue=T.updateQueue,y.type=T.type,x=T.dependencies,y.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext}),m=m.sibling;return Et(et,1&et.current|2),c.child}l=l.sibling}x.tail!==null&&gn()>W0&&(c.flags|=128,y=!0,jh(x,!1),c.lanes=4194304)}else{if(!y)if((l=zn(T))!==null){if(c.flags|=128,y=!0,(l=l.updateQueue)!==null&&(c.updateQueue=l,c.flags|=4),jh(x,!0),x.tail===null&&x.tailMode==="hidden"&&!T.alternate&&!vt)return jr(c),null}else 2*gn()-x.renderingStartTime>W0&&m!==1073741824&&(c.flags|=128,y=!0,jh(x,!1),c.lanes=4194304);x.isBackwards?(T.sibling=c.child,c.child=T):((l=x.last)!==null?l.sibling=T:c.child=T,x.last=T)}return x.tail!==null?(c=x.tail,x.rendering=c,x.tail=c.sibling,x.renderingStartTime=gn(),c.sibling=null,l=et.current,Et(et,y?1&l|2:1&l),c):(jr(c),null);case 22:case 23:return Y0(),m=c.memoizedState!==null,l!==null&&l.memoizedState!==null!==m&&(c.flags|=8192),m&&1&c.mode?1073741824&wi&&(jr(c),De&&6&c.subtreeFlags&&(c.flags|=8192)):jr(c),null;case 24:case 25:return null}throw Error(s(156,c.tag))}function MM(l,c){switch(Lh(c),c.tag){case 1:return wr(c.type)&&kh(),65536&(l=c.flags)?(c.flags=-65537&l|128,c):null;case 3:return Nt(),Ot(or),Ot($t),br(),65536&(l=c.flags)&&!(128&l)?(c.flags=-65537&l|128,c):null;case 5:return kt(c),null;case 13:if(Ot(et),(l=c.memoizedState)!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(s(340));ho()}return 65536&(l=c.flags)?(c.flags=-65537&l|128,c):null;case 19:return Ot(et),null;case 4:return Nt(),null;case 10:return Uu(c.type._context),null;case 22:case 23:return Y0(),null;default:return null}}var wp=!1,Tr=!1,OM=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function Vu(l,c){var m=l.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(y){Zt(l,c,y)}else m.current=null}function bS(l,c,m){try{m()}catch(y){Zt(l,c,y)}}var SS=!1;function Wh(l,c,m){var y=c.updateQueue;if((y=y!==null?y.lastEffect:null)!==null){var x=y=y.next;do{if((x.tag&l)===l){var T=x.destroy;x.destroy=void 0,T!==void 0&&bS(c,m,T)}x=x.next}while(x!==y)}}function bp(l,c){if((c=(c=c.updateQueue)!==null?c.lastEffect:null)!==null){var m=c=c.next;do{if((m.tag&l)===l){var y=m.create;m.destroy=y()}m=m.next}while(m!==c)}}function O0(l){var c=l.ref;if(c!==null){var m=l.stateNode;l.tag===5?l=ie(m):l=m,typeof c=="function"?c(l):c.current=l}}function ES(l){var c=l.alternate;c!==null&&(l.alternate=null,ES(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode)!==null&&pi(c),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function TS(l){return l.tag===5||l.tag===3||l.tag===4}function CS(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||TS(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(2&l.flags||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(2&l.flags))return l.stateNode}}function N0(l,c,m){var y=l.tag;if(y===5||y===6)l=l.stateNode,c?Ui(m,l,c):Qs(m,l);else if(y!==4&&(l=l.child)!==null)for(N0(l,c,m),l=l.sibling;l!==null;)N0(l,c,m),l=l.sibling}function D0(l,c,m){var y=l.tag;if(y===5||y===6)l=l.stateNode,c?Yr(m,l,c):Uo(m,l);else if(y!==4&&(l=l.child)!==null)for(D0(l,c,m),l=l.sibling;l!==null;)D0(l,c,m),l=l.sibling}var Wr=null,yo=!1;function vo(l,c,m){for(m=m.child;m!==null;)L0(l,c,m),m=m.sibling}function L0(l,c,m){if(ar&&typeof ar.onCommitFiberUnmount=="function")try{ar.onCommitFiberUnmount(Ol,m)}catch{}switch(m.tag){case 5:Tr||Vu(m,c);case 6:if(De){var y=Wr,x=yo;Wr=null,vo(l,c,m),yo=x,(Wr=y)!==null&&(yo?xa(Wr,m.stateNode):Ks(Wr,m.stateNode))}else vo(l,c,m);break;case 18:De&&Wr!==null&&(yo?Nu(Wr,m.stateNode):Cn(Wr,m.stateNode));break;case 4:De?(y=Wr,x=yo,Wr=m.stateNode.containerInfo,yo=!0,vo(l,c,m),Wr=y,yo=x):(ht&&(y=m.stateNode.containerInfo,x=Kf(y),Le(y,x)),vo(l,c,m));break;case 0:case 11:case 14:case 15:if(!Tr&&(y=m.updateQueue)!==null&&(y=y.lastEffect)!==null){x=y=y.next;do{var T=x,k=T.destroy;T=T.tag,k!==void 0&&(2&T||4&T)&&bS(m,c,k),x=x.next}while(x!==y)}vo(l,c,m);break;case 1:if(!Tr&&(Vu(m,c),typeof(y=m.stateNode).componentWillUnmount=="function"))try{y.props=m.memoizedProps,y.state=m.memoizedState,y.componentWillUnmount()}catch($){Zt(m,c,$)}vo(l,c,m);break;case 21:vo(l,c,m);break;case 22:1&m.mode?(Tr=(y=Tr)||m.memoizedState!==null,vo(l,c,m),Tr=y):vo(l,c,m);break;default:vo(l,c,m)}}function AS(l){var c=l.updateQueue;if(c!==null){l.updateQueue=null;var m=l.stateNode;m===null&&(m=l.stateNode=new OM),c.forEach(function(y){var x=zM.bind(null,l,y);m.has(y)||(m.add(y),y.then(x,x))})}}function ms(l,c){var m=c.deletions;if(m!==null)for(var y=0;y<m.length;y++){var x=m[y];try{var T=l,k=c;if(De){var $=k;e:for(;$!==null;){switch($.tag){case 5:Wr=$.stateNode,yo=!1;break e;case 3:case 4:Wr=$.stateNode.containerInfo,yo=!0;break e}$=$.return}if(Wr===null)throw Error(s(160));L0(T,k,x),Wr=null,yo=!1}else L0(T,k,x);var K=x.alternate;K!==null&&(K.return=null),x.return=null}catch(re){Zt(x,c,re)}}if(12854&c.subtreeFlags)for(c=c.child;c!==null;)IS(c,l),c=c.sibling}function IS(l,c){var m=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(ms(c,l),xo(l),4&y){try{Wh(3,l,l.return),bp(3,l)}catch(ae){Zt(l,l.return,ae)}try{Wh(5,l,l.return)}catch(ae){Zt(l,l.return,ae)}}break;case 1:ms(c,l),xo(l),512&y&&m!==null&&Vu(m,m.return);break;case 5:if(ms(c,l),xo(l),512&y&&m!==null&&Vu(m,m.return),De){if(32&l.flags){var x=l.stateNode;try{Zs(x)}catch(ae){Zt(l,l.return,ae)}}if(4&y&&(x=l.stateNode)!=null){var T=l.memoizedProps;if(m=m!==null?m.memoizedProps:T,y=l.type,c=l.updateQueue,l.updateQueue=null,c!==null)try{Ur(x,c,y,m,T,l)}catch(ae){Zt(l,l.return,ae)}}}break;case 6:if(ms(c,l),xo(l),4&y&&De){if(l.stateNode===null)throw Error(s(162));x=l.stateNode,T=l.memoizedProps,m=m!==null?m.memoizedProps:T;try{_r(x,m,T)}catch(ae){Zt(l,l.return,ae)}}break;case 3:if(ms(c,l),xo(l),4&y){if(De&&nt&&m!==null&&m.memoizedState.isDehydrated)try{Ln(c.containerInfo)}catch(ae){Zt(l,l.return,ae)}if(ht){x=c.containerInfo,T=c.pendingChildren;try{Le(x,T)}catch(ae){Zt(l,l.return,ae)}}}break;case 4:if(ms(c,l),xo(l),4&y&&ht){x=(T=l.stateNode).containerInfo,T=T.pendingChildren;try{Le(x,T)}catch(ae){Zt(l,l.return,ae)}}break;case 13:ms(c,l),xo(l),8192&(x=l.child).flags&&(T=x.memoizedState!==null,x.stateNode.isHidden=T,!T||x.alternate!==null&&x.alternate.memoizedState!==null||(j0=gn())),4&y&&AS(l);break;case 22:var k=m!==null&&m.memoizedState!==null;if(1&l.mode?(Tr=(m=Tr)||k,ms(c,l),Tr=m):ms(c,l),xo(l),8192&y){if(m=l.memoizedState!==null,(l.stateNode.isHidden=m)&&!k&&(1&l.mode)!=0)for(Ae=l,y=l.child;y!==null;){for(c=Ae=y;Ae!==null;){var $=(k=Ae).child;switch(k.tag){case 0:case 11:case 14:case 15:Wh(4,k,k.return);break;case 1:Vu(k,k.return);var K=k.stateNode;if(typeof K.componentWillUnmount=="function"){var re=k,le=k.return;try{var ve=re;K.props=ve.memoizedProps,K.state=ve.memoizedState,K.componentWillUnmount()}catch(ae){Zt(re,le,ae)}}break;case 5:Vu(k,k.return);break;case 22:if(k.memoizedState!==null){RS(c);continue}}$!==null?($.return=k,Ae=$):RS(c)}y=y.sibling}if(De){e:if(y=null,De)for(c=l;;){if(c.tag===5){if(y===null){y=c;try{x=c.stateNode,m?Ou(x):Ih(c.stateNode,c.memoizedProps)}catch(ae){Zt(l,l.return,ae)}}}else if(c.tag===6){if(y===null)try{T=c.stateNode,m?Qr(T):Qf(T,c.memoizedProps)}catch(ae){Zt(l,l.return,ae)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;y===c&&(y=null),c=c.return}y===c&&(y=null),c.sibling.return=c.return,c=c.sibling}}}break;case 19:ms(c,l),xo(l),4&y&&AS(l);break;case 21:break;default:ms(c,l),xo(l)}}function xo(l){var c=l.flags;if(2&c){try{if(De){e:{for(var m=l.return;m!==null;){if(TS(m)){var y=m;break e}m=m.return}throw Error(s(160))}switch(y.tag){case 5:var x=y.stateNode;32&y.flags&&(Zs(x),y.flags&=-33),D0(l,CS(l),x);break;case 3:case 4:var T=y.stateNode.containerInfo;N0(l,CS(l),T);break;default:throw Error(s(161))}}}catch(k){Zt(l,l.return,k)}l.flags&=-3}4096&c&&(l.flags&=-4097)}function NM(l,c,m){Ae=l,PS(l)}function PS(l,c,m){for(var y=(1&l.mode)!=0;Ae!==null;){var x=Ae,T=x.child;if(x.tag===22&&y){var k=x.memoizedState!==null||wp;if(!k){var $=x.alternate,K=$!==null&&$.memoizedState!==null||Tr;$=wp;var re=Tr;if(wp=k,(Tr=K)&&!re)for(Ae=x;Ae!==null;)K=(k=Ae).child,k.tag===22&&k.memoizedState!==null?MS(x):K!==null?(K.return=k,Ae=K):MS(x);for(;T!==null;)Ae=T,PS(T),T=T.sibling;Ae=x,wp=$,Tr=re}kS(l)}else 8772&x.subtreeFlags&&T!==null?(T.return=x,Ae=T):kS(l)}}function kS(l){for(;Ae!==null;){var c=Ae;if(8772&c.flags){var m=c.alternate;try{if(8772&c.flags)switch(c.tag){case 0:case 11:case 15:Tr||bp(5,c);break;case 1:var y=c.stateNode;if(4&c.flags&&!Tr)if(m===null)y.componentDidMount();else{var x=c.elementType===c.type?m.memoizedProps:Kr(c.type,m.memoizedProps);y.componentDidUpdate(x,m.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var T=c.updateQueue;T!==null&&Wu(c,T,y);break;case 3:var k=c.updateQueue;if(k!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=ie(c.child.stateNode);break;case 1:m=c.child.stateNode}Wu(c,k,m)}break;case 5:var $=c.stateNode;m===null&&4&c.flags&&mi($,c.type,c.memoizedProps,c);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(nt&&c.memoizedState===null){var K=c.alternate;if(K!==null){var re=K.memoizedState;if(re!==null){var le=re.dehydrated;le!==null&&Tn(le)}}}break;default:throw Error(s(163))}Tr||512&c.flags&&O0(c)}catch(ve){Zt(c,c.return,ve)}}if(c===l){Ae=null;break}if((m=c.sibling)!==null){m.return=c.return,Ae=m;break}Ae=c.return}}function RS(l){for(;Ae!==null;){var c=Ae;if(c===l){Ae=null;break}var m=c.sibling;if(m!==null){m.return=c.return,Ae=m;break}Ae=c.return}}function MS(l){for(;Ae!==null;){var c=Ae;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{bp(4,c)}catch(K){Zt(c,m,K)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var x=c.return;try{y.componentDidMount()}catch(K){Zt(c,x,K)}}var T=c.return;try{O0(c)}catch(K){Zt(c,T,K)}break;case 5:var k=c.return;try{O0(c)}catch(K){Zt(c,k,K)}}}catch(K){Zt(c,c.return,K)}if(c===l){Ae=null;break}var $=c.sibling;if($!==null){$.return=c.return,Ae=$;break}Ae=c.return}}var Sp=0,Ep=1,Tp=2,Cp=3,Ap=4;if(typeof Symbol=="function"&&Symbol.for){var Gh=Symbol.for;Sp=Gh("selector.component"),Ep=Gh("selector.has_pseudo_class"),Tp=Gh("selector.role"),Cp=Gh("selector.test_id"),Ap=Gh("selector.text")}function F0(l){var c=En(l);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(s(364));return c}if((l=qs(l))===null)throw Error(s(362));return l.stateNode.current}function B0(l,c){switch(c.$$typeof){case Sp:if(l.type===c.value)return!0;break;case Ep:e:{c=c.value,l=[l,0];for(var m=0;m<l.length;){var y=l[m++],x=l[m++],T=c[x];if(y.tag!==5||!mn(y)){for(;T!=null&&B0(y,T);)T=c[++x];if(x===c.length){c=!0;break e}for(y=y.child;y!==null;)l.push(y,x),y=y.sibling}}c=!1}return c;case Tp:if(l.tag===5&&qe(l.stateNode,c.value))return!0;break;case Ap:if((l.tag===5||l.tag===6)&&(l=Ze(l))!==null&&0<=l.indexOf(c.value))return!0;break;case Cp:if(l.tag===5&&typeof(l=l.memoizedProps["data-testname"])=="string"&&l.toLowerCase()===c.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function U0(l){switch(l.$$typeof){case Sp:return"<"+(F(l.value)||"Unknown")+">";case Ep:return":has("+(U0(l)||"")+")";case Tp:return'[role="'+l.value+'"]';case Ap:return'"'+l.value+'"';case Cp:return'[data-testname="'+l.value+'"]';default:throw Error(s(365))}}function OS(l,c){var m=[];l=[l,0];for(var y=0;y<l.length;){var x=l[y++],T=l[y++],k=c[T];if(x.tag!==5||!mn(x)){for(;k!=null&&B0(x,k);)k=c[++T];if(T===c.length)m.push(x);else for(x=x.child;x!==null;)l.push(x,T),x=x.sibling}}return m}function z0(l,c){if(!xr)throw Error(s(363));l=OS(l=F0(l),c),c=[],l=Array.from(l);for(var m=0;m<l.length;){var y=l[m++];if(y.tag===5)mn(y)||c.push(y.stateNode);else for(y=y.child;y!==null;)l.push(y),y=y.sibling}return c}var DM=Math.ceil,Ip=o.ReactCurrentDispatcher,$0=o.ReactCurrentOwner,_n=o.ReactCurrentBatchConfig,ct=0,Kn=null,In=null,ur=0,wi=0,Xu=zi(0),$n=0,Vh=null,Ll=0,Pp=0,H0=0,Xh=null,bi=null,j0=0,W0=1/0,Ra=null;function qu(){W0=gn()+500}var NS,kp=!1,G0=null,Ma=null,Rp=!1,Oa=null,Mp=0,qh=0,V0=null,Op=-1,Np=0;function Cr(){return 6&ct?gn():Op!==-1?Op:Op=gn()}function Na(l){return 1&l.mode?2&ct&&ur!==0?ur&-ur:Go.transition!==null?(Np===0&&(Np=sp()),Np):(l=rt)!==0?l:fi():1}function qi(l,c,m,y){if(50<qh)throw qh=0,V0=null,Error(s(185));lo(l,m,y),2&ct&&l===Kn||(l===Kn&&(!(2&ct)&&(Pp|=m),$n===4&&Da(l,ur)),ri(l,y),m===1&&ct===0&&!(1&c.mode)&&(qu(),Nl&&Fn()))}function ri(l,c){var m=l.callbackNode;(function(x,T){for(var k=x.suspendedLanes,$=x.pingedLanes,K=x.expirationTimes,re=x.pendingLanes;0<re;){var le=31-yi(re),ve=1<<le,ae=K[le];ae===-1?ve&k&&!(ve&$)||(K[le]=y0(ve,T)):ae<=T&&(x.expiredLanes|=ve),re&=~ve}})(l,c);var y=Ca(l,l===Kn?ur:0);if(y===0)m!==null&&ap(m),l.callbackNode=null,l.callbackPriority=0;else if(c=y&-y,l.callbackPriority!==c){if(m!=null&&ap(m),c===1)l.tag===0?function(x){Nl=!0,Dt(x)}(LS.bind(null,l)):Dt(LS.bind(null,l)),Nn?Mu(function(){!(6&ct)&&Fn()}):uo(Ml,Fn),m=null;else{switch(op(y)){case 1:m=Ml;break;case 4:m=Aa;break;case 16:default:m=Ho;break;case 536870912:m=up}m=WS(m,DS.bind(null,l))}l.callbackPriority=c,l.callbackNode=m}}function DS(l,c){if(Op=-1,Np=0,(6&ct)!=0)throw Error(s(327));var m=l.callbackNode;if(Bl()&&l.callbackNode!==m)return null;var y=Ca(l,l===Kn?ur:0);if(y===0)return null;if(30&y||y&l.expiredLanes||c)c=Dp(l,y);else{c=y;var x=ct;ct|=2;var T=US();for(Kn===l&&ur===c||(Ra=null,qu(),Fl(l,c));;)try{FM();break}catch($){BS(l,$)}Bu(),Ip.current=T,ct=x,In!==null?c=0:(Kn=null,ur=0,c=$n)}if(c!==0){if(c===2&&(x=Oh(l))!==0&&(y=x,c=X0(l,x)),c===1)throw m=Vh,Fl(l,0),Da(l,y),ri(l,gn()),m;if(c===6)Da(l,y);else{if(x=l.current.alternate,(30&y)==0&&!function($){for(var K=$;;){if(16384&K.flags){var re=K.updateQueue;if(re!==null&&(re=re.stores)!==null)for(var le=0;le<re.length;le++){var ve=re[le],ae=ve.getSnapshot;ve=ve.value;try{if(!qn(ae(),ve))return!1}catch{return!1}}}if(re=K.child,16384&K.subtreeFlags&&re!==null)re.return=K,K=re;else{if(K===$)break;for(;K.sibling===null;){if(K.return===null||K.return===$)return!0;K=K.return}K.sibling.return=K.return,K=K.sibling}}return!0}(x)&&((c=Dp(l,y))===2&&(T=Oh(l))!==0&&(y=T,c=X0(l,T)),c===1))throw m=Vh,Fl(l,0),Da(l,y),ri(l,gn()),m;switch(l.finishedWork=x,l.finishedLanes=y,c){case 0:case 1:throw Error(s(345));case 2:case 5:Yu(l,bi,Ra);break;case 3:if(Da(l,y),(130023424&y)===y&&10<(c=j0+500-gn())){if(Ca(l,0)!==0)break;if(((x=l.suspendedLanes)&y)!==y){Cr(),l.pingedLanes|=l.suspendedLanes&x;break}l.timeoutHandle=Ne(Yu.bind(null,l,bi,Ra),c);break}Yu(l,bi,Ra);break;case 4:if(Da(l,y),(4194240&y)===y)break;for(c=l.eventTimes,x=-1;0<y;){var k=31-yi(y);T=1<<k,(k=c[k])>x&&(x=k),y&=~T}if(y=x,10<(y=(120>(y=gn()-y)?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*DM(y/1960))-y)){l.timeoutHandle=Ne(Yu.bind(null,l,bi,Ra),y);break}Yu(l,bi,Ra);break;default:throw Error(s(329))}}}return ri(l,gn()),l.callbackNode===m?DS.bind(null,l):null}function X0(l,c){var m=Xh;return l.current.memoizedState.isDehydrated&&(Fl(l,c).flags|=256),(l=Dp(l,c))!==2&&(c=bi,bi=m,c!==null&&q0(c)),l}function q0(l){bi===null?bi=l:bi.push.apply(bi,l)}function Da(l,c){for(c&=~H0,c&=~Pp,l.suspendedLanes|=c,l.pingedLanes&=~c,l=l.expirationTimes;0<c;){var m=31-yi(c),y=1<<m;l[m]=-1,c&=~y}}function LS(l){if(6&ct)throw Error(s(327));Bl();var c=Ca(l,0);if(!(1&c))return ri(l,gn()),null;var m=Dp(l,c);if(l.tag!==0&&m===2){var y=Oh(l);y!==0&&(c=y,m=X0(l,y))}if(m===1)throw m=Vh,Fl(l,0),Da(l,c),ri(l,gn()),m;if(m===6)throw Error(s(345));return l.finishedWork=l.current.alternate,l.finishedLanes=c,Yu(l,bi,Ra),ri(l,gn()),null}function FS(l){Oa!==null&&Oa.tag===0&&!(6&ct)&&Bl();var c=ct;ct|=1;var m=_n.transition,y=rt;try{if(_n.transition=null,rt=1,l)return l()}finally{rt=y,_n.transition=m,!(6&(ct=c))&&Fn()}}function Y0(){wi=Xu.current,Ot(Xu)}function Fl(l,c){l.finishedWork=null,l.finishedLanes=0;var m=l.timeoutHandle;if(m!==St&&(l.timeoutHandle=St,mt(m)),In!==null)for(m=In.return;m!==null;){var y=m;switch(Lh(y),y.tag){case 1:(y=y.type.childContextTypes)!=null&&kh();break;case 3:Nt(),Ot(or),Ot($t),br();break;case 5:kt(y);break;case 4:Nt();break;case 13:case 19:Ot(et);break;case 10:Uu(y.type._context);break;case 22:case 23:Y0()}m=m.return}if(Kn=l,In=l=La(l.current,null),ur=wi=c,$n=0,Vh=null,H0=Pp=Ll=0,bi=Xh=null,fo!==null){for(c=0;c<fo.length;c++)if((y=(m=fo[c]).interleaved)!==null){m.interleaved=null;var x=y.next,T=m.pending;if(T!==null){var k=T.next;T.next=x,y.next=k}m.pending=y}fo=null}return l}function BS(l,c){for(;;){var m=In;try{if(Bu(),Sr.current=gp,Qn){for(var y=dt.memoizedState;y!==null;){var x=y.queue;x!==null&&(x.pending=null),y=y.next}Qn=!1}if(un=0,pt=ft=dt=null,Vi=!1,Jr=0,$0.current=null,m===null||m.return===null){$n=1,Vh=c,In=null;break}e:{var T=l,k=m.return,$=m,K=c;if(c=ur,$.flags|=32768,K!==null&&typeof K=="object"&&typeof K.then=="function"){var re=K,le=$,ve=le.tag;if(!(1&le.mode)&&(ve===0||ve===11||ve===15)){var ae=le.alternate;ae?(le.updateQueue=ae.updateQueue,le.memoizedState=ae.memoizedState,le.lanes=ae.lanes):(le.updateQueue=null,le.memoizedState=null)}var me=aS(k);if(me!==null){me.flags&=-257,lS(me,k,$,0,c),1&me.mode&&oS(T,re,c),K=re;var Pe=(c=me).updateQueue;if(Pe===null){var tt=new Set;tt.add(K),c.updateQueue=tt}else Pe.add(K);break e}if(!(1&c)){oS(T,re,c),Q0();break e}K=Error(s(426))}else if(vt&&1&$.mode){var ue=aS(k);if(ue!==null){!(65536&ue.flags)&&(ue.flags|=256),lS(ue,k,$,0,c),Fh(Gu(K,$));break e}}T=K=Gu(K,$),$n!==4&&($n=2),Xh===null?Xh=[T]:Xh.push(T),T=k;do{switch(T.tag){case 3:T.flags|=65536,c&=-c,T.lanes|=c,fp(T,iS(0,K,c));break e;case 1:$=K;var X=T.type,ne=T.stateNode;if(!(128&T.flags)&&(typeof X.getDerivedStateFromError=="function"||ne!==null&&typeof ne.componentDidCatch=="function"&&(Ma===null||!Ma.has(ne)))){T.flags|=65536,c&=-c,T.lanes|=c,fp(T,sS(T,$,c));break e}}T=T.return}while(T!==null)}$S(m)}catch(he){c=he,In===m&&m!==null&&(In=m=m.return);continue}break}}function US(){var l=Ip.current;return Ip.current=gp,l===null?gp:l}function Q0(){$n!==0&&$n!==3&&$n!==2||($n=4),Kn===null||!(268435455&Ll)&&!(268435455&Pp)||Da(Kn,ur)}function Dp(l,c){var m=ct;ct|=2;var y=US();for(Kn===l&&ur===c||(Ra=null,Fl(l,c));;)try{LM();break}catch(x){BS(l,x)}if(Bu(),ct=m,Ip.current=y,In!==null)throw Error(s(261));return Kn=null,ur=0,$n}function LM(){for(;In!==null;)zS(In)}function FM(){for(;In!==null&&!lp();)zS(In)}function zS(l){var c=NS(l.alternate,l,wi);l.memoizedProps=l.pendingProps,c===null?$S(l):In=c,$0.current=null}function $S(l){var c=l;do{var m=c.alternate;if(l=c.return,(32768&c.flags)==0){if((m=RM(m,c,wi))!==null)return void(In=m)}else{if((m=MM(m,c))!==null)return m.flags&=32767,void(In=m);if(l===null)return $n=6,void(In=null);l.flags|=32768,l.subtreeFlags=0,l.deletions=null}if((c=c.sibling)!==null)return void(In=c);In=c=l}while(c!==null);$n===0&&($n=5)}function Yu(l,c,m){var y=rt,x=_n.transition;try{_n.transition=null,rt=1,function(T,k,$,K){do Bl();while(Oa!==null);if(6&ct)throw Error(s(327));$=T.finishedWork;var re=T.finishedLanes;if($===null)return null;if(T.finishedWork=null,T.finishedLanes=0,$===T.current)throw Error(s(177));T.callbackNode=null,T.callbackPriority=0;var le=$.lanes|$.childLanes;if(function(me,Pe){var tt=me.pendingLanes&~Pe;me.pendingLanes=Pe,me.suspendedLanes=0,me.pingedLanes=0,me.expiredLanes&=Pe,me.mutableReadLanes&=Pe,me.entangledLanes&=Pe,Pe=me.entanglements;var ue=me.eventTimes;for(me=me.expirationTimes;0<tt;){var X=31-yi(tt),ne=1<<X;Pe[X]=0,ue[X]=-1,me[X]=-1,tt&=~ne}}(T,le),T===Kn&&(In=Kn=null,ur=0),!(2064&$.subtreeFlags)&&!(2064&$.flags)||Rp||(Rp=!0,WS(Ho,function(){return Bl(),null})),le=(15990&$.flags)!=0,(15990&$.subtreeFlags)!=0||le){le=_n.transition,_n.transition=null;var ve=rt;rt=1;var ae=ct;ct|=4,$0.current=null,function(me,Pe){for(Q(me.containerInfo),Ae=Pe;Ae!==null;)if(Pe=(me=Ae).child,(1028&me.subtreeFlags)!=0&&Pe!==null)Pe.return=me,Ae=Pe;else for(;Ae!==null;){me=Ae;try{var tt=me.alternate;if(1024&me.flags)switch(me.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(tt!==null){var ue=tt.memoizedProps,X=tt.memoizedState,ne=me.stateNode,he=ne.getSnapshotBeforeUpdate(me.elementType===me.type?ue:Kr(me.type,ue),X);ne.__reactInternalSnapshotBeforeUpdate=he}break;case 3:De&&h0(me.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(Oe){Zt(me,me.return,Oe)}if((Pe=me.sibling)!==null){Pe.return=me.return,Ae=Pe;break}Ae=me.return}tt=SS,SS=!1}(T,$),IS($,T),B(T.containerInfo),T.current=$,NM($),Nh(),ct=ae,rt=ve,_n.transition=le}else T.current=$;if(Rp&&(Rp=!1,Oa=T,Mp=re),le=T.pendingLanes,le===0&&(Ma=null),function(me){if(ar&&typeof ar.onCommitFiberRoot=="function")try{ar.onCommitFiberRoot(Ol,me,void 0,(128&me.current.flags)==128)}catch{}}($.stateNode),ri(T,gn()),k!==null)for(K=T.onRecoverableError,$=0;$<k.length;$++)re=k[$],K(re.value,{componentStack:re.stack,digest:re.digest});if(kp)throw kp=!1,T=G0,G0=null,T;1&Mp&&T.tag!==0&&Bl(),le=T.pendingLanes,1&le?T===V0?qh++:(qh=0,V0=T):qh=0,Fn()}(l,c,m,y)}finally{_n.transition=x,rt=y}return null}function Bl(){if(Oa!==null){var l=op(Mp),c=_n.transition,m=rt;try{if(_n.transition=null,rt=16>l?16:l,Oa===null)var y=!1;else{if(l=Oa,Oa=null,Mp=0,(6&ct)!=0)throw Error(s(331));var x=ct;for(ct|=4,Ae=l.current;Ae!==null;){var T=Ae,k=T.child;if(16&Ae.flags){var $=T.deletions;if($!==null){for(var K=0;K<$.length;K++){var re=$[K];for(Ae=re;Ae!==null;){var le=Ae;switch(le.tag){case 0:case 11:case 15:Wh(8,le,T)}var ve=le.child;if(ve!==null)ve.return=le,Ae=ve;else for(;Ae!==null;){var ae=(le=Ae).sibling,me=le.return;if(ES(le),le===re){Ae=null;break}if(ae!==null){ae.return=me,Ae=ae;break}Ae=me}}}var Pe=T.alternate;if(Pe!==null){var tt=Pe.child;if(tt!==null){Pe.child=null;do{var ue=tt.sibling;tt.sibling=null,tt=ue}while(tt!==null)}}Ae=T}}if(2064&T.subtreeFlags&&k!==null)k.return=T,Ae=k;else e:for(;Ae!==null;){if(2048&(T=Ae).flags)switch(T.tag){case 0:case 11:case 15:Wh(9,T,T.return)}var X=T.sibling;if(X!==null){X.return=T.return,Ae=X;break e}Ae=T.return}}var ne=l.current;for(Ae=ne;Ae!==null;){var he=(k=Ae).child;if(2064&k.subtreeFlags&&he!==null)he.return=k,Ae=he;else e:for(k=ne;Ae!==null;){if(2048&($=Ae).flags)try{switch($.tag){case 0:case 11:case 15:bp(9,$)}}catch(Ct){Zt($,$.return,Ct)}if($===k){Ae=null;break e}var Oe=$.sibling;if(Oe!==null){Oe.return=$.return,Ae=Oe;break e}Ae=$.return}}if(ct=x,Fn(),ar&&typeof ar.onPostCommitFiberRoot=="function")try{ar.onPostCommitFiberRoot(Ol,l)}catch{}y=!0}return y}finally{rt=m,_n.transition=c}}return!1}function HS(l,c,m){l=Gi(l,c=iS(0,c=Gu(m,c),1),1),c=Cr(),l!==null&&(lo(l,1,c),ri(l,c))}function Zt(l,c,m){if(l.tag===3)HS(l,l,m);else for(;c!==null;){if(c.tag===3){HS(c,l,m);break}if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Ma===null||!Ma.has(y))){c=Gi(c,l=sS(c,l=Gu(m,l),1),1),l=Cr(),c!==null&&(lo(c,1,l),ri(c,l));break}}c=c.return}}function BM(l,c,m){var y=l.pingCache;y!==null&&y.delete(c),c=Cr(),l.pingedLanes|=l.suspendedLanes&m,Kn===l&&(ur&m)===m&&($n===4||$n===3&&(130023424&ur)===ur&&500>gn()-j0?Fl(l,0):H0|=m),ri(l,c)}function jS(l,c){c===0&&(1&l.mode?(c=Ta,!(130023424&(Ta<<=1))&&(Ta=4194304)):c=1);var m=Cr();(l=$r(l,c))!==null&&(lo(l,c,m),ri(l,m))}function UM(l){var c=l.memoizedState,m=0;c!==null&&(m=c.retryLane),jS(l,m)}function zM(l,c){var m=0;switch(l.tag){case 13:var y=l.stateNode,x=l.memoizedState;x!==null&&(m=x.retryLane);break;case 19:y=l.stateNode;break;default:throw Error(s(314))}y!==null&&y.delete(c),jS(l,m)}function WS(l,c){return uo(l,c)}function $M(l,c,m,y){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(l,c,m,y){return new $M(l,c,m,y)}function K0(l){return!(!(l=l.prototype)||!l.isReactComponent)}function La(l,c){var m=l.alternate;return m===null?((m=Yi(l.tag,c,l.key,l.mode)).elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=c,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=14680064&l.flags,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,c=l.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m}function Lp(l,c,m,y,x,T){var k=2;if(y=l,typeof l=="function")K0(l)&&(k=1);else if(typeof l=="string")k=5;else e:switch(l){case h:return Ul(m.children,x,T,c);case d:k=8,x|=8;break;case p:return(l=Yi(12,m,c,2|x)).elementType=p,l.lanes=T,l;case w:return(l=Yi(13,m,c,x)).elementType=w,l.lanes=T,l;case C:return(l=Yi(19,m,c,x)).elementType=C,l.lanes=T,l;case _:return Fp(m,x,T,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case f:k=10;break e;case g:k=9;break e;case v:k=11;break e;case b:k=14;break e;case S:k=16,y=null;break e}throw Error(s(130,l==null?l:typeof l,""))}return(c=Yi(k,m,c,x)).elementType=l,c.type=y,c.lanes=T,c}function Ul(l,c,m,y){return(l=Yi(7,l,y,c)).lanes=m,l}function Fp(l,c,m,y){return(l=Yi(22,l,y,c)).elementType=_,l.lanes=m,l.stateNode={isHidden:!1},l}function Z0(l,c,m){return(l=Yi(6,l,null,c)).lanes=m,l}function J0(l,c,m){return(c=Yi(4,l.children!==null?l.children:[],l.key,c)).lanes=m,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function HM(l,c,m,y,x){this.tag=c,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=St,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ao(0),this.expirationTimes=ao(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ao(0),this.identifierPrefix=y,this.onRecoverableError=x,nt&&(this.mutableSourceEagerHydrationData=null)}function GS(l,c,m,y,x,T,k,$,K){return l=new HM(l,c,m,$,K),c===1?(c=1,T===!0&&(c|=8)):c=0,T=Yi(3,null,null,c),l.current=T,T.stateNode=l,T.memoizedState={element:y,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hu(T),l}function VS(l){if(!l)return $i;e:{if(D(l=l._reactInternals)!==l||l.tag!==1)throw Error(s(170));var c=l;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(wr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(s(171))}if(l.tag===1){var m=l.type;if(wr(m))return rp(l,m,c)}return c}function XS(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return(l=H(c))===null?null:l.stateNode}function qS(l,c){if((l=l.memoizedState)!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<c?m:c}}function Bp(l,c){qS(l,c),(l=l.alternate)&&qS(l,c)}function jM(l){return(l=H(l))===null?null:l.stateNode}function WM(){return null}return NS=function(l,c,m){if(l!==null)if(l.memoizedProps!==c.pendingProps||or.current)ti=!0;else{if(!(l.lanes&m)&&!(128&c.flags))return ti=!1,function(ve,ae,me){switch(ae.tag){case 3:mS(ae),ho();break;case 5:Vt(ae);break;case 1:wr(ae.type)&&Pl(ae);break;case 4:xt(ae,ae.stateNode.containerInfo);break;case 10:Bh(0,ae.type._context,ae.memoizedProps.value);break;case 13:var Pe=ae.memoizedState;if(Pe!==null)return Pe.dehydrated!==null?(Et(et,1&et.current),ae.flags|=128,null):me&ae.child.childLanes?yS(ve,ae,me):(Et(et,1&et.current),(ve=qo(ve,ae,me))!==null?ve.sibling:null);Et(et,1&et.current);break;case 19:if(Pe=(me&ae.childLanes)!=0,(128&ve.flags)!=0){if(Pe)return xS(ve,ae,me);ae.flags|=128}var tt=ae.memoizedState;if(tt!==null&&(tt.rendering=null,tt.tail=null,tt.lastEffect=null),Et(et,et.current),Pe)break;return null;case 22:case 23:return ae.lanes=0,dS(ve,ae,me)}return qo(ve,ae,me)}(l,c,m);ti=(131072&l.flags)!=0}else ti=!1,vt&&1048576&c.flags&&cp(c,Tt,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;_p(l,c),l=c.pendingProps;var x=oo(c,$t.current);Vo(c,m),x=x0(null,c,y,l,x,m);var T=_0();return c.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,wr(y)?(T=!0,Pl(c)):T=!1,c.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Hu(c),x.updater=R,c.stateNode=x,x._reactInternals=c,se(c,y,l,m),c=I0(null,c,y,!0,T,m)):(c.tag=0,vt&&T&&Dh(c),ni(null,c,x,m),c=c.child),c;case 16:y=c.elementType;e:{switch(_p(l,c),l=c.pendingProps,y=(x=y._init)(y._payload),c.type=y,x=c.tag=function(ve){if(typeof ve=="function")return K0(ve)?1:0;if(ve!=null){if((ve=ve.$$typeof)===v)return 11;if(ve===b)return 14}return 2}(y),l=Kr(y,l),x){case 0:c=A0(null,c,y,l,m);break e;case 1:c=pS(null,c,y,l,m);break e;case 11:c=uS(null,c,y,l,m);break e;case 14:c=cS(null,c,y,Kr(y.type,l),m);break e}throw Error(s(306,y,""))}return c;case 0:return y=c.type,x=c.pendingProps,A0(l,c,y,x=c.elementType===y?x:Kr(y,x),m);case 1:return y=c.type,x=c.pendingProps,pS(l,c,y,x=c.elementType===y?x:Kr(y,x),m);case 3:e:{if(mS(c),l===null)throw Error(s(387));y=c.pendingProps,x=(T=c.memoizedState).element,ln(l,c),ju(c,y,null,m);var k=c.memoizedState;if(y=k.element,nt&&T.isDehydrated){if(T={element:y,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},c.updateQueue.baseState=T,c.memoizedState=T,256&c.flags){c=gS(l,c,y,m,x=Gu(Error(s(423)),c));break e}if(y!==x){c=gS(l,c,y,m,x=Gu(Error(s(424)),c));break e}for(nt&&(xn=m0(c.stateNode.containerInfo),an=c,vt=!0,vi=null,ji=!1),m=$e(c,null,y,m),c.child=m;m;)m.flags=-3&m.flags|4096,m=m.sibling}else{if(ho(),y===x){c=qo(l,c,m);break e}ni(l,c,y,m)}c=c.child}return c;case 5:return Vt(c),l===null&&Lu(c),y=c.type,x=c.pendingProps,T=l!==null?l.memoizedProps:null,k=x.children,je(y,x)?k=null:T!==null&&je(y,T)&&(c.flags|=32),fS(l,c),ni(l,c,k,m),c.child;case 6:return l===null&&Lu(c),null;case 13:return yS(l,c,m);case 4:return xt(c,c.stateNode.containerInfo),y=c.pendingProps,l===null?c.child=Ee(c,null,y,m):ni(l,c,y,m),c.child;case 11:return y=c.type,x=c.pendingProps,uS(l,c,y,x=c.elementType===y?x:Kr(y,x),m);case 7:return ni(l,c,c.pendingProps,m),c.child;case 8:case 12:return ni(l,c,c.pendingProps.children,m),c.child;case 10:e:{if(y=c.type._context,x=c.pendingProps,T=c.memoizedProps,Bh(0,y,k=x.value),T!==null)if(qn(T.value,k)){if(T.children===x.children&&!or.current){c=qo(l,c,m);break e}}else for((T=c.child)!==null&&(T.return=c);T!==null;){var $=T.dependencies;if($!==null){k=T.child;for(var K=$.firstContext;K!==null;){if(K.context===y){if(T.tag===1){(K=Wi(-1,m&-m)).tag=2;var re=T.updateQueue;if(re!==null){var le=(re=re.shared).pending;le===null?K.next=K:(K.next=le.next,le.next=K),re.pending=K}}T.lanes|=m,(K=T.alternate)!==null&&(K.lanes|=m),zu(T.return,m,c),$.lanes|=m;break}K=K.next}}else if(T.tag===10)k=T.type===c.type?null:T.child;else if(T.tag===18){if((k=T.return)===null)throw Error(s(341));k.lanes|=m,($=k.alternate)!==null&&($.lanes|=m),zu(k,m,c),k=T.sibling}else k=T.child;if(k!==null)k.return=T;else for(k=T;k!==null;){if(k===c){k=null;break}if((T=k.sibling)!==null){T.return=k.return,k=T;break}k=k.return}T=k}ni(l,c,x.children,m),c=c.child}return c;case 9:return x=c.type,y=c.pendingProps.children,Vo(c,m),y=y(x=Zr(x)),c.flags|=1,ni(l,c,y,m),c.child;case 14:return x=Kr(y=c.type,c.pendingProps),cS(l,c,y,x=Kr(y.type,x),m);case 15:return hS(l,c,c.type,c.pendingProps,m);case 17:return y=c.type,x=c.pendingProps,x=c.elementType===y?x:Kr(y,x),_p(l,c),c.tag=1,wr(y)?(l=!0,Pl(c)):l=!1,Vo(c,m),z(c,y,x),se(c,y,x,m),I0(null,c,y,!0,l,m);case 19:return xS(l,c,m);case 22:return dS(l,c,m)}throw Error(s(156,c.tag))},e.attemptContinuousHydration=function(l){if(l.tag===13){var c=$r(l,134217728);c!==null&&qi(c,l,134217728,Cr()),Bp(l,134217728)}},e.attemptDiscreteHydration=function(l){if(l.tag===13){var c=$r(l,1);c!==null&&qi(c,l,1,Cr()),Bp(l,1)}},e.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var c=Na(l),m=$r(l,c);m!==null&&qi(m,l,c,Cr()),Bp(l,c)}},e.attemptSynchronousHydration=function(l){switch(l.tag){case 3:var c=l.stateNode;if(c.current.memoizedState.isDehydrated){var m=kl(c.pendingLanes);m!==0&&(Rl(c,1|m),ri(c,gn()),!(6&ct)&&(qu(),Fn()))}break;case 13:FS(function(){var y=$r(l,1);if(y!==null){var x=Cr();qi(y,l,1,x)}}),Bp(l,1)}},e.batchedUpdates=function(l,c){var m=ct;ct|=1;try{return l(c)}finally{(ct=m)===0&&(qu(),Nl&&Fn())}},e.createComponentSelector=function(l){return{$$typeof:Sp,value:l}},e.createContainer=function(l,c,m,y,x,T,k){return GS(l,c,!1,null,0,y,0,T,k)},e.createHasPseudoClassSelector=function(l){return{$$typeof:Ep,value:l}},e.createHydrationContainer=function(l,c,m,y,x,T,k,$,K){return(l=GS(m,y,!0,l,0,T,0,$,K)).context=VS(null),m=l.current,(T=Wi(y=Cr(),x=Na(m))).callback=c??null,Gi(m,T,x),l.current.lanes=x,lo(l,x,y),ri(l,y),l},e.createPortal=function(l,c,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:y==null?null:""+y,children:l,containerInfo:c,implementation:m}},e.createRoleSelector=function(l){return{$$typeof:Tp,value:l}},e.createTestNameSelector=function(l){return{$$typeof:Cp,value:l}},e.createTextSelector=function(l){return{$$typeof:Ap,value:l}},e.deferredUpdates=function(l){var c=rt,m=_n.transition;try{return _n.transition=null,rt=16,l()}finally{rt=c,_n.transition=m}},e.discreteUpdates=function(l,c,m,y,x){var T=rt,k=_n.transition;try{return _n.transition=null,rt=1,l(c,m,y,x)}finally{rt=T,_n.transition=k,ct===0&&qu()}},e.findAllNodes=z0,e.findBoundingRects=function(l,c){if(!xr)throw Error(s(363));c=z0(l,c),l=[];for(var m=0;m<c.length;m++)l.push(Xe(c[m]));for(c=l.length-1;0<c;c--)for(var y=(m=l[c]).x,x=y+m.width,T=m.y,k=T+m.height,$=c-1;0<=$;$--)if(c!==$){var K=l[$],re=K.x,le=re+K.width,ve=K.y,ae=ve+K.height;if(y>=re&&T>=ve&&x<=le&&k<=ae){l.splice(c,1);break}if(!(y!==re||m.width!==K.width||ae<T||ve>k)){ve>T&&(K.height+=ve-T,K.y=T),ae<k&&(K.height=k-ve),l.splice(c,1);break}if(!(T!==ve||m.height!==K.height||le<y||re>x)){re>y&&(K.width+=re-y,K.x=y),le<x&&(K.width=x-re),l.splice(c,1);break}}return l},e.findHostInstance=XS,e.findHostInstanceWithNoPortals=function(l){return(l=(l=G(l))!==null?V(l):null)===null?null:l.stateNode},e.findHostInstanceWithWarning=function(l){return XS(l)},e.flushControlled=function(l){var c=ct;ct|=1;var m=_n.transition,y=rt;try{_n.transition=null,rt=1,l()}finally{rt=y,_n.transition=m,(ct=c)===0&&(qu(),Fn())}},e.flushPassiveEffects=Bl,e.flushSync=FS,e.focusWithin=function(l,c){if(!xr)throw Error(s(363));for(c=OS(l=F0(l),c),c=Array.from(c),l=0;l<c.length;){var m=c[l++];if(!mn(m)){if(m.tag===5&&sr(m.stateNode))return!0;for(m=m.child;m!==null;)c.push(m),m=m.sibling}}return!1},e.getCurrentUpdatePriority=function(){return rt},e.getFindAllNodesFailureDescription=function(l,c){if(!xr)throw Error(s(363));var m=0,y=[];l=[F0(l),0];for(var x=0;x<l.length;){var T=l[x++],k=l[x++],$=c[k];if((T.tag!==5||!mn(T))&&(B0(T,$)&&(y.push(U0($)),++k>m&&(m=k)),k<c.length))for(T=T.child;T!==null;)l.push(T,k),T=T.sibling}if(m<c.length){for(l=[];m<c.length;m++)l.push(U0(c[m]));return`findAllNodes was able to match part of the selector:
  `+y.join(" > ")+`

No matching component was found for:
  `+l.join(" > ")}return null},e.getPublicRootInstance=function(l){return(l=l.current).child?l.child.tag===5?ie(l.child.stateNode):l.child.stateNode:null},e.injectIntoDevTools=function(l){if(l={bundleType:l.bundleType,version:l.version,rendererPackageName:l.rendererPackageName,rendererConfig:l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:jM,findFiberByHostInstance:l.findFiberByHostInstance||WM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)l=!0;else{try{Ol=c.inject(l),ar=c}catch{}l=!!c.checkDCE}}return l},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(l,c,m,y){if(!xr)throw Error(s(363));l=z0(l,c);var x=Ys(l,m,y).disconnect;return{disconnect:function(){x()}}},e.registerMutableSourceForHydration=function(l,c){var m=c._getVersion;m=m(c._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[c,m]:l.mutableSourceEagerHydrationData.push(c,m)},e.runWithPriority=function(l,c){var m=rt;try{return rt=l,c()}finally{rt=m}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(l,c,m,y){var x=c.current,T=Cr(),k=Na(x);return m=VS(m),c.context===null?c.context=m:c.pendingContext=m,(c=Wi(T,k)).payload={element:l},(y=y===void 0?null:y)!==null&&(c.callback=y),(l=Gi(x,c,k))!==null&&(qi(l,x,k,T),po(l,x,k)),k},e}),FT}({get exports(){return u_},set exports(t){u_=t}}).exports=VU();var XU=xU(u_),pk={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:ci":"nx run-many --target=test:ci --all --parallel","test:ci:force":"nx run-many --target=test:ci --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},h_={},Im={get exports(){return h_},set exports(t){h_=t}};(function(){var t,e,n,r,i,s;typeof performance<"u"&&performance!==null&&performance.now?Im.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Im.exports=function(){return(t()-i)/1e6},e=process.hrtime,r=(t=function(){var o;return 1e9*(o=e())[0]+o[1]})(),s=1e9*process.uptime(),i=r-s):Date.now?(Im.exports=function(){return Date.now()-n},n=Date.now()):(Im.exports=function(){return new Date().getTime()-n},n=new Date().getTime())}).call(vU);var zT,Ic={},Hl={};({get exports(){return Ic},set exports(t){Ic=t}}).exports=(zT||(zT=1,Hl.ConcurrentRoot=1,Hl.ContinuousEventPriority=4,Hl.DefaultEventPriority=16,Hl.DiscreteEventPriority=1,Hl.IdleEventPriority=536870912,Hl.LegacyRoot=0),Hl);var qU={};function f1(t,e){t.addChild&&(t.addChild(e),typeof e.didMount=="function"&&e.didMount(e,t))}function mk(t,e){var n,r,i;(n=t.willUnmount)===null||n===void 0||n.call(t,t,e),((r=t.config)===null||r===void 0?void 0:r.destroyChildren)!==!1&&(i=t.children)!==null&&i!==void 0&&i.length&&ga(t.children).forEach(function(s){mk(s,t)})}function $T(t,e){var n;mk(e,t),t.removeChild(e);var r=(n=e.config)!==null&&n!==void 0?n:{},i=r.destroy,s=i===void 0||i,o=r.destroyChildren,a=o===void 0||o,u=r.destroyTexture,h=u!==void 0&&u,d=r.destroyBaseTexture,p=d!==void 0&&d;s&&e.destroy({children:a,texture:h,baseTexture:p})}function HT(t,e,n){vn(e!==n,"pixi-react: PixiFiber cannot insert node before itself"),t.children.indexOf(e)!==-1&&t.removeChild(e);var r=t.getChildIndex(n);t.addChildAt(e,r)}var jT=null,Ns=XU({getRootHostContext:function(){return qU},getChildHostContext:function(t){return t},getChildHostContextForEventComponent:function(t){return t},getPublicInstance:function(t){return t},getCurrentEventPriority:function(){return function(){var t,e;if(typeof window>"u")return Ic.DefaultEventPriority;switch((t=window)===null||t===void 0||(e=t.event)===null||e===void 0?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ic.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ic.ContinuousEventPriority;default:return Ic.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(t){var e,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=HU[t];if(typeof s=="function"&&(e=s(i,r)),!e){var o=fk[t];o&&((e=o.create(r,{root:i})).didMount=o.didMount?o.didMount.bind(e):void 0,e.willUnmount=o.willUnmount?o.willUnmount.bind(e):void 0,e.applyProps=o.applyProps?o.applyProps.bind(e):void 0,e.config=o.config)}return e&&(e.__reactpixi={root:i},(typeof((n=e)===null||n===void 0?void 0:n.applyProps)=="function"?e.applyProps:Fo)(e,{},r)),e},hideInstance:function(t){t.visible=!1},unhideInstance:function(t,e){var n=e==null||!e.hasOwnProperty("visible")||e.visible;t.visible=n},finalizeInitialChildren:function(t,e,n){return!1},prepareUpdate:function(t,e,n,r,i,s){return jT=function(o,a,u,h){var d=null;for(var p in u)!h.hasOwnProperty(p)&&u.hasOwnProperty(p)&&u[p]!==null&&(p===a_||(d||(d=[]),d.push(p,null)));for(var f in h){var g=h[f],v=u!==null?u[f]:void 0;!h.hasOwnProperty(f)||g===v||g===null&&v===null||f===a_||(d||(d=[]),d.push(f,g))}return d}(0,0,n,r)},shouldSetTextContent:function(t,e){return!1},shouldDeprioritizeSubtree:function(t,e){var n=e.alpha===void 0||e.alpha>0,r=e.renderable===void 0||e.renderable===!0,i=e.visible===void 0||e.visible===!0;return!(n&&r&&i)},createTextInstance:function(t,e,n){vn(!1,'pixi-react: Error trying to add text node "'.concat(t,'"'),"PixiFiber does not support text nodes as children of a Pixi component. To pass a string value to your component, use a property other than children. If you wish to display some text, you can use &lt;Text text={string} /&gt; instead.")},unhideTextInstance:function(t,e){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:h_,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=f1.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),s},appendChild:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=f1.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),s},appendChildToContainer:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=f1.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),s},removeChild:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=$T.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),s},removeChildFromContainer:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=$T.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),s},insertBefore:HT,insertInContainerBefore:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=HT.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),s},commitUpdate:function(t,e,n,r,i){var s,o,a=t&&t.applyProps;typeof a!="function"&&(a=Fo),(a(t,r,i)||jT)&&((s=t.__reactpixi)===null||s===void 0||(o=s.root)===null||o===void 0||o.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(t,e,n,r,i){},commitTextUpdate:function(t,e,n){},resetTextContent:function(t){},clearContainer:function(t){},getFundamentalComponentInstance:function(t){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(t){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(t){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(t){throw new Error("Not yet implemented.")},getInstanceFromNode:function(t){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(t){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(t){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(t){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(t){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(t){}}),YU=pk.dependencies["react-dom"].replace(/[^0-9.]/g,""),QU=pk.name;Ns.injectIntoDevTools({bundleType:0,version:YU,rendererPackageName:QU,findHostInstanceByFiber:Ns.findHostInstance});var hl=new Map;function gk(t){if(vn(ir.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `PIXI.Container`."),hl.has(t)){var e=hl.get(t).pixiFiberContainer;Ns.updateContainer(null,e,void 0,function(){hl.delete(t)})}}function yk(t){vn(ir.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `PIXI.Container`.");var e=hl.get(t);if(vn(!e,"Pixi React: createRoot should only be called once"),!e){var n=Ns.createContainer(t);e={pixiFiberContainer:n,reactRoot:{render:function(r){return Ns.updateContainer(r,n,void 0),Ns.getPublicRootInstance(n)},unmount:function(){gk(t),hl.delete(t)}}},hl.set(t,e)}return e.reactRoot}function KU(t,e,n){var r;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),n!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),hl.has(e)?r=hl.get(e).reactRoot:r=yk(e),r.render(t)}function ZU(t){gk(t)}function Ef(){return Ef=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ef.apply(this,arguments)}function JU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ez(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ck(r.key),r)}}function Zo(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yg(t,e){return Yg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Yg(t,e)}function tz(t,e){if(e&&(Mi(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zo(t)}function Qg(t){return Qg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qg(t)}var Yy=it.createContext(null),vk=Yy.Provider,xk=Yy.Consumer,nz=function(t){var e=it.forwardRef(function(n,r){return it.createElement(xk,null,function(i){return it.createElement(t,Ef({},n,{ref:r,app:i}))})});return e.displayName="withPIXIApp(".concat(t.displayName||t.name,")"),e};function rz(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Qg(t);if(e){var i=Qg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return tz(this,n)}}function WT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WT(Object(n),!0).forEach(function(r){wn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var GT=function(){},_k={width:qt.number,height:qt.number,onMount:qt.func,onUnmount:qt.func,raf:qt.bool,renderOnComponentChange:qt.bool,children:qt.node,options:qt.shape({autoStart:qt.bool,width:qt.number,height:qt.number,useContextAlpha:qt.bool,backgroundAlpha:qt.number,autoDensity:qt.bool,antialias:qt.bool,preserveDrawingBuffer:qt.bool,resolution:qt.number,forceCanvas:qt.bool,backgroundColor:qt.number,clearBeforeRender:qt.bool,powerPreference:qt.string,sharedTicker:qt.bool,sharedLoader:qt.bool,resizeTo:function(t,e){var n=t[e];n&&vn(n===window||n instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Mi(n),", expect `window` or an `HTMLElement`."))},view:function(t,e,n){var r=t[e];r&&vn(r instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Mi(r),", supplied to ").concat(n,", expected `<canvas> Element`"))}})},iz={width:800,height:600,onMount:GT,onUnmount:GT,raf:!0,renderOnComponentChange:!0},d_=function(t){(function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&Yg(s,o)})(i,it.Component);var e,n,r=rz(i);function i(){var s;JU(this,i);for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return wn(Zo(s=r.call.apply(r,[this].concat(a))),"_canvas",null),wn(Zo(s),"_mediaQuery",null),wn(Zo(s),"_ticker",null),wn(Zo(s),"_needsUpdate",!0),wn(Zo(s),"app",null),wn(Zo(s),"updateSize",function(){var h=s.props,d=h.width,p=h.height,f=h.options;f!=null&&f.resolution||(s.app.renderer.resolution=window.devicePixelRatio,s.resetInteractionManager()),s.app.renderer.resize(d,p)}),wn(Zo(s),"needsRenderUpdate",function(){s._needsUpdate=!0}),wn(Zo(s),"renderStage",function(){var h=s.props,d=h.renderOnComponentChange;!h.raf&&d&&s._needsUpdate&&(s._needsUpdate=!1,s.app.renderer.render(s.app.stage))}),s}return e=i,(n=[{key:"componentDidMount",value:function(){var s=this.props,o=s.onMount,a=s.width,u=s.height,h=s.options,d=s.raf,p=s.renderOnComponentChange;this.app=new Vf(Pm(Pm({width:a,height:u,view:this._canvas},h),{},{autoDensity:(h==null?void 0:h.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[d?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=Ns.createContainer(this.app.stage),Ns.updateContainer(this.getChildren(),this.mountNode,this),o(this.app),h!=null&&h.autoDensity&&window.matchMedia&&(h==null?void 0:h.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),p&&!d&&(this._ticker=new zt,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(s,o,a){var u,h=this.props,d=h.width,p=h.height,f=h.raf,g=h.renderOnComponentChange,v=h.options;(v==null?void 0:v.resolution)!==void 0&&(s==null?void 0:s.options.resolution)!==(v==null?void 0:v.resolution)&&(this.app.renderer.resolution=v.resolution,this.resetInteractionManager()),s.height===p&&s.width===d&&((u=s.options)===null||u===void 0?void 0:u.resolution)===(v==null?void 0:v.resolution)||this.updateSize(),s.raf!==f&&this.app.ticker[f?"start":"stop"](),Ns.updateContainer(this.getChildren(),this.mountNode,this),s.width===d&&s.height===p&&s.raf===f&&s.renderOnComponentChange===g&&s.options===v||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var s=this.app.renderer.plugins.interaction;s!=null&&s.resolution&&(s.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var s=this.props.children;return it.createElement(vk,{value:this.app},s)}},{key:"componentDidCatch",value:function(s,o){console.error("Error occurred in `Stage`."),console.error(s),console.error(o)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),Ns.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var s,o,a=this,u=this.props.options;return u&&u.view?(vn(u.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):it.createElement("canvas",Ef({},(s=this.props,o=[].concat(ga(Object.keys(_k)),ga(Object.keys(l_))),Object.keys(s).filter(function(h){return!o.includes(h)}).reduce(function(h,d){return Pm(Pm({},h),{},wn({},d,s[d]))},{})),{ref:function(h){return a._canvas=h}}))}}])&&ez(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();d_.propTypes=_k,d_.defaultProps=iz;var sz=d_;function wk(){var t=de.useContext(Yy);return vn(t instanceof Vf,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider"),t}function oz(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=wk();vn(typeof t=="function","`useTick` needs a callback function."),vn(n instanceof Vf,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider");var r=de.useRef(null);de.useEffect(function(){r.current=t},[t]),de.useEffect(function(){if(e){var i=function(s){return r.current.apply(n.ticker,[s,n.ticker])};return n.ticker.add(i),function(){n.ticker&&n.ticker.remove(i)}}},[e])}function az(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function f_(t,e,n){return f_=az()?Reflect.construct.bind():function(r,i,s){var o=[null];o.push.apply(o,i);var a=new(Function.bind.apply(r,o));return s&&Yg(a,s.prototype),a},f_.apply(null,arguments)}var lz=["children","apply"];function VT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function km(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VT(Object(n),!0).forEach(function(r){wn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var uz=function(t,e){vn(Mi(e)==="object","Second argument needs to be an indexed object with { prop: Filter }");var n=Object.keys(e),r=function(i){var s=i.children,o=i.apply,a=El(i,lz),u=de.useRef(de.useMemo(function(){return n.map(function(p){var f,g=(a==null||(f=a[p])===null||f===void 0?void 0:f.construct)||[];return f_(e[p],ga(g))})},[n])),h=de.useMemo(function(){return n.reduce(function(p,f,g){return km(km({},p),{},wn({},f,u.current[g]))},{})},[n]),d=de.useMemo(function(){return Object.keys(a).filter(dk(hk(n))).reduce(function(p,f){return km(km({},p),{},wn({},f,a[f]))},{})},[a,n]);return n.forEach(function(p,f){return Object.assign(u.current[f],a[p])}),o&&function(){for(var p=arguments.length,f=new Array(p),g=0;g<p;g++)f[g]=arguments[g];return f.every(function(v){return typeof v=="function"})}(o)&&o.call(t,h),it.createElement(t,Ef({},d,{filters:u.current}),s)};return r.displayName="FilterWrapper",r.propTypes={children:qt.node,apply:qt.func},r},cz=di.BitmapText,hz=di.Container,dz=di.Graphics,fz=di.NineSlicePlane,pz=di.ParticleContainer,mz=di.Sprite,gz=di.AnimatedSprite,yz=di.Text,vz=di.TilingSprite,xz=di.SimpleMesh,_z=di.SimpleRope;const wz=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:gz,AppConsumer:xk,AppContext:Yy,AppProvider:vk,BitmapText:cz,Container:hz,Graphics:dz,NineSlicePlane:fz,ParticleContainer:pz,PixiComponent:jU,PixiFiber:Ns,SimpleMesh:xz,SimpleRope:_z,Sprite:mz,Stage:sz,TYPES:di,Text:yz,TilingSprite:vz,applyDefaultProps:Fo,createRoot:yk,eventHandlers:qg,render:KU,unmountComponentAtNode:ZU,useApp:wk,useTick:oz,withFilters:uz,withPixiApp:nz},Symbol.toStringTag,{value:"Module"})),bz=H_(wz);qy.exports=bz;var Ii=qy.exports;const Sz=({textureUrl:t,spritesheetData:e,x:n,y:r,orientation:i,isMoving:s=!1,isThinking:o=!1,isSpeaking:a=!1,emoji:u="",isViewer:h=!1,speed:d=.1,onClick:p})=>{const[f,g]=de.useState();de.useEffect(()=>{(async()=>{const S=new Sf(Ge.from(t,{scaleMode:as.NEAREST}),e);await S.parse(),g(S)})()},[]);const v=Math.floor(i/90),w=["right","down","left","up"][v],C=de.useRef(null);return de.useEffect(()=>{var b;s&&((b=C.current)==null||b.play())},[w,s]),f?W.jsxs(Ii.Container,{x:n,y:r,interactive:!0,pointerdown:p,cursor:"pointer",children:[o&&W.jsx(Ii.Text,{x:-20,y:-10,scale:{x:-.8,y:.8},text:"💭",anchor:{x:.5,y:.5}}),a&&W.jsx(Ii.Text,{x:18,y:-10,scale:.8,text:"💬",anchor:{x:.5,y:.5}}),h&&W.jsx(Ez,{}),W.jsx(Ii.AnimatedSprite,{ref:C,isPlaying:s,textures:f.animations[w],animationSpeed:d,anchor:{x:.5,y:.5}}),u&&W.jsx(Ii.Text,{x:0,y:-24,scale:{x:-.8,y:.8},text:u,anchor:{x:.5,y:.5}})]}):null};function Ez(){const t=de.useCallback(e=>{e.clear(),e.beginFill(16776971,.5),e.drawRoundedRect(-10,10,20,10,100),e.endFill()},[]);return W.jsx(Ii.Graphics,{draw:t})}var ko=[],Ki=[],Tz=Uint8Array,p1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var nc=0,Cz=p1.length;nc<Cz;++nc)ko[nc]=p1[nc],Ki[p1.charCodeAt(nc)]=nc;Ki["-".charCodeAt(0)]=62;Ki["_".charCodeAt(0)]=63;function Az(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function Iz(t,e,n){return(e+n)*3/4-n}function Tf(t){var e,n=Az(t),r=n[0],i=n[1],s=new Tz(Iz(t,r,i)),o=0,a=i>0?r-4:r,u;for(u=0;u<a;u+=4)e=Ki[t.charCodeAt(u)]<<18|Ki[t.charCodeAt(u+1)]<<12|Ki[t.charCodeAt(u+2)]<<6|Ki[t.charCodeAt(u+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Ki[t.charCodeAt(u)]<<2|Ki[t.charCodeAt(u+1)]>>4,s[o++]=e&255),i===1&&(e=Ki[t.charCodeAt(u)]<<10|Ki[t.charCodeAt(u+1)]<<4|Ki[t.charCodeAt(u+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Pz(t){return ko[t>>18&63]+ko[t>>12&63]+ko[t>>6&63]+ko[t&63]}function kz(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(Pz(r));return i.join("")}function Cf(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(kz(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(ko[e>>2]+ko[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(ko[e>>10]+ko[e>>4&63]+ko[e<<2&63]+"=")),i.join("")}function rs(t){if(t===void 0)return{};if(!bk(t))throw new Error(`The arguments to a Convex function must be an object. Received: ${t}`);return t}function Rz(t){if(typeof t>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof t!="string")throw new Error(`Invalid deployment address: found ${t}".`);if(!(t.startsWith("http:")||t.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${t}".`);try{new URL(t)}catch{throw new Error(`Invalid deployment address: "${t}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(t.endsWith(".convex.site"))throw new Error(`Invalid deployment address: "${t}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function bk(t){var i;const e=typeof t=="object",n=Object.getPrototypeOf(t),r=n===null||n===Object.prototype||((i=n==null?void 0:n.constructor)==null?void 0:i.name)==="Object";return e&&r}const Sk=!0,uh=BigInt("-9223372036854775808"),ib=BigInt("9223372036854775807"),p_=BigInt("0"),Mz=BigInt("8"),Oz=BigInt("256");function Ek(t){return Number.isNaN(t)||!Number.isFinite(t)||Object.is(t,-0)}function Nz(t){t<p_&&(t-=uh+uh);let e=t.toString(16);e.length%2===1&&(e="0"+e);const n=new Uint8Array(new ArrayBuffer(8));let r=0;for(const i of e.match(/.{2}/g).reverse())n.set([parseInt(i,16)],r++),t>>=Mz;return Cf(n)}function Dz(t){const e=Tf(t);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);let n=p_,r=p_;for(const i of e)n+=BigInt(i)*Oz**r,r++;return n>ib&&(n+=uh+uh),n}function Lz(t){if(t<uh||ib<t)throw new Error(`BigInt ${t} does not fit into a 64-bit signed integer.`);const e=new ArrayBuffer(8);return new DataView(e).setBigInt64(0,t,!0),Cf(new Uint8Array(e))}function Fz(t){const e=Tf(t);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);return new DataView(e.buffer).getBigInt64(0,!0)}const Bz=DataView.prototype.setBigInt64?Lz:Nz,Uz=DataView.prototype.getBigInt64?Fz:Dz,XT=1024;function m_(t){if(t.length>XT)throw new Error(`Field name ${t} exceeds maximum field name length ${XT}.`);if(t.startsWith("$"))throw new Error(`Field name ${t} starts with a '$', which is reserved.`);for(let e=0;e<t.length;e+=1){const n=t.charCodeAt(e);if(n<32||n>=127)throw new Error(`Field name ${t} has invalid character '${t[e]}': Field names can only contain non-control ASCII characters`)}}function Fr(t){if(t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string")return t;if(Array.isArray(t))return t.map(r=>Fr(r));if(typeof t!="object")throw new Error(`Unexpected type of ${t}`);const e=Object.entries(t);if(e.length===1){const r=e[0][0];if(r==="$bytes"){if(typeof t.$bytes!="string")throw new Error(`Malformed $bytes field on ${t}`);return Tf(t.$bytes).buffer}if(r==="$integer"){if(typeof t.$integer!="string")throw new Error(`Malformed $integer field on ${t}`);return Uz(t.$integer)}if(r==="$float"){if(typeof t.$float!="string")throw new Error(`Malformed $float field on ${t}`);const i=Tf(t.$float);if(i.byteLength!==8)throw new Error(`Received ${i.byteLength} bytes, expected 8 for $float`);const o=new DataView(i.buffer).getFloat64(0,Sk);if(!Ek(o))throw new Error(`Float ${o} should be encoded as a number`);return o}if(r==="$set")throw new Error("Received a Set which is no longer supported as a Convex type.");if(r==="$map")throw new Error("Received a Map which is no longer supported as a Convex type.")}const n={};for(const[r,i]of Object.entries(t))m_(r),n[r]=Fr(i);return n}function Gc(t){return JSON.stringify(t,(e,n)=>n===void 0?"undefined":typeof n=="bigint"?`${n.toString()}n`:n)}function Af(t,e,n,r){var o;if(t===void 0){const a=n&&` (present at path ${n} in original object ${Gc(e)})`;throw new Error(`undefined is not a valid Convex value${a}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(t===null)return t;if(typeof t=="bigint"){if(t<uh||ib<t)throw new Error(`BigInt ${t} does not fit into a 64-bit signed integer.`);return{$integer:Bz(t)}}if(typeof t=="number")if(Ek(t)){const a=new ArrayBuffer(8);return new DataView(a).setFloat64(0,t,Sk),{$float:Cf(new Uint8Array(a))}}else return t;if(typeof t=="boolean"||typeof t=="string")return t;if(t instanceof ArrayBuffer)return{$bytes:Cf(new Uint8Array(t))};if(Array.isArray(t))return t.map((a,u)=>Af(a,e,n+`[${u}]`,!1));if(t instanceof Set)throw new Error(m1(n,"Set",[...t],e));if(t instanceof Map)throw new Error(m1(n,"Map",[...t],e));if(!bk(t)){const a=(o=t==null?void 0:t.constructor)==null?void 0:o.name,u=a?`${a} `:"";throw new Error(m1(n,u,t,e))}const i={},s=Object.entries(t);s.sort(([a,u],[h,d])=>a===h?0:a<h?-1:1);for(const[a,u]of s)u!==void 0?(m_(a),i[a]=Af(u,e,n+`.${a}`,!1)):r&&(m_(a),i[a]=Tk(u,e,n+`.${a}`));return i}function m1(t,e,n,r){return t?`${e}${Gc(n)} is not a supported Convex type (present at path ${t} in original object ${Gc(r)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${e}${Gc(n)} is not a supported Convex type.`}function Tk(t,e,n){if(t===void 0)return{$undefined:null};if(e===void 0)throw new Error(`Programming error. Current value is ${Gc(t)} but original value is undefined`);return Af(t,e,n,!1)}function Wt(t){return Af(t,t,"",!1)}function sb(t){return Tk(t,t,"")}function zz(t){return Af(t,t,"",!0)}var $z=Object.defineProperty,Hz=(t,e,n)=>e in t?$z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tn=(t,e,n)=>Hz(t,typeof e!="symbol"?e+"":e,n);class Fi{constructor({isOptional:e}){tn(this,"type"),tn(this,"fieldPaths"),tn(this,"isOptional"),tn(this,"isConvexValidator"),this.isOptional=e,this.isConvexValidator=!0}get optional(){return this.isOptional==="optional"}}class ob extends Fi{constructor({isOptional:e,tableName:n}){super({isOptional:e}),tn(this,"tableName"),tn(this,"kind","id"),this.tableName=n}get json(){return{type:"id",tableName:this.tableName}}asOptional(){return new ob({isOptional:"optional",tableName:this.tableName})}}class Kg extends Fi{constructor(){super(...arguments),tn(this,"kind","float64")}get json(){return{type:"number"}}asOptional(){return new Kg({isOptional:"optional"})}}class Zg extends Fi{constructor(){super(...arguments),tn(this,"kind","int64")}get json(){return{type:"bigint"}}asOptional(){return new Zg({isOptional:"optional"})}}class ab extends Fi{constructor(){super(...arguments),tn(this,"kind","boolean")}get json(){return{type:this.kind}}asOptional(){return new ab({isOptional:"optional"})}}class lb extends Fi{constructor(){super(...arguments),tn(this,"kind","bytes")}get json(){return{type:this.kind}}asOptional(){return new lb({isOptional:"optional"})}}class ub extends Fi{constructor(){super(...arguments),tn(this,"kind","string")}get json(){return{type:this.kind}}asOptional(){return new ub({isOptional:"optional"})}}class cb extends Fi{constructor(){super(...arguments),tn(this,"kind","null")}get json(){return{type:this.kind}}asOptional(){return new cb({isOptional:"optional"})}}class hb extends Fi{constructor(){super(...arguments),tn(this,"kind","any")}get json(){return{type:this.kind}}asOptional(){return new hb({isOptional:"optional"})}}class db extends Fi{constructor({isOptional:e,fields:n}){super({isOptional:e}),tn(this,"fields"),tn(this,"kind","object"),this.fields=n}get json(){return{type:this.kind,value:globalThis.Object.fromEntries(globalThis.Object.entries(this.fields).map(([e,n])=>[e,{fieldType:n.json,optional:n.isOptional==="optional"}]))}}asOptional(){return new db({isOptional:"optional",fields:this.fields})}}class fb extends Fi{constructor({isOptional:e,value:n}){super({isOptional:e}),tn(this,"value"),tn(this,"kind","literal"),this.value=n}get json(){return{type:this.kind,value:Wt(this.value)}}asOptional(){return new fb({isOptional:"optional",value:this.value})}}class pb extends Fi{constructor({isOptional:e,element:n}){super({isOptional:e}),tn(this,"element"),tn(this,"kind","array"),this.element=n}get json(){return{type:this.kind,value:this.element.json}}asOptional(){return new pb({isOptional:"optional",element:this.element})}}class mb extends Fi{constructor({isOptional:e,key:n,value:r}){if(super({isOptional:e}),tn(this,"key"),tn(this,"value"),tn(this,"kind","record"),n.isOptional==="optional")throw new Error("Record validator cannot have optional keys");if(r.isOptional==="optional")throw new Error("Record validator cannot have optional values");this.key=n,this.value=r}get json(){return{type:this.kind,keys:this.key.json,values:{fieldType:this.value.json,optional:!1}}}asOptional(){return new mb({isOptional:"optional",key:this.key,value:this.value})}}class gb extends Fi{constructor({isOptional:e,members:n}){super({isOptional:e}),tn(this,"members"),tn(this,"kind","union"),this.members=n}get json(){return{type:this.kind,value:this.members.map(e=>e.json)}}asOptional(){return new gb({isOptional:"optional",members:this.members})}}function Ck(t){return!!t.isConvexValidator}function Ak(t){return Ck(t)?t:j.object(t)}const j={id:t=>new ob({isOptional:"required",tableName:t}),null:()=>new cb({isOptional:"required"}),number:()=>new Kg({isOptional:"required"}),float64:()=>new Kg({isOptional:"required"}),bigint:()=>new Zg({isOptional:"required"}),int64:()=>new Zg({isOptional:"required"}),boolean:()=>new ab({isOptional:"required"}),string:()=>new ub({isOptional:"required"}),bytes:()=>new lb({isOptional:"required"}),literal:t=>new fb({isOptional:"required",value:t}),array:t=>new pb({isOptional:"required",element:t}),object:t=>new db({isOptional:"required",fields:t}),record:(t,e)=>new mb({isOptional:"required",key:t,value:e}),union:(...t)=>new gb({isOptional:"required",members:t}),any:()=>new hb({isOptional:"required"}),optional:t=>t.asOptional()};var jz=Object.defineProperty,Wz=(t,e,n)=>e in t?jz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,g1=(t,e,n)=>Wz(t,typeof e!="symbol"?e+"":e,n),qT,YT;const Gz=Symbol.for("ConvexError");class If extends(YT=Error,qT=Gz,YT){constructor(e){super(typeof e=="string"?e:Gc(e)),g1(this,"name","ConvexError"),g1(this,"data"),g1(this,qT,!0),this.data=e}}const yb=j.object({x:j.number(),y:j.number()}),Vz=j.object({dx:j.number(),dy:j.number()}),Xz=j.array(j.array(j.number()));function Rm(t,e){return Ik(t[e])}function jl(t){return[t.position.x,t.position.y,t.facing.dx,t.facing.dy,t.t]}function Ik(t){return{position:{x:t[0],y:t[1]},facing:{dx:t[2],dy:t[3]},t:t[4]}}function is(t,e){const n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function vb(t,e){return t.x==e.x&&t.y==e.y}function Mm(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function Pk(t,e){if(t.length<2)throw new Error(`Invalid path: ${JSON.stringify(t)}`);const n=Rm(t,0);if(e<n.t)return{position:n.position,facing:n.facing,velocity:0};const r=Rm(t,t.length-1);if(r.t<e)return{position:r.position,facing:r.facing,velocity:0};for(let i=0;i<t.length-1;i++){const s=Rm(t,i),o=Rm(t,i+1);if(s.t<=e&&e<=o.t){const a=(e-s.t)/(o.t-s.t);return{position:{x:s.position.x+a*(o.position.x-s.position.x),y:s.position.y+a*(o.position.y-s.position.y)},facing:s.facing,velocity:is(s.position,o.position)/(o.t-s.t)}}}throw new Error("Timestamp checks not exhaustive?")}const Jg=1e-4;function qz(t,e){const n=e.x-t.x,r=e.y-t.y;return{dx:n,dy:r}}function kk(t){return Math.sqrt(t.dx*t.dx+t.dy*t.dy)}function Yz(t){const e=kk(t);if(e<Jg)return null;const{dx:n,dy:r}=t;return{dx:n/e,dy:r/e}}function Qz(t){if(Math.sqrt(t.dx*t.dx+t.dy*t.dy)<Jg)throw new Error(`Can't compute the orientation of too small vector ${JSON.stringify(t)}`);const e=2*Math.PI;return(Math.atan2(t.dy,t.dx)+e)%e/e*360}function Kz(t){if(t.map(jl),t.length<=2)return t.map(jl);const e=[jl(t[0])];let n=t[0],r;for(const i of t.slice(1)){if(!r){r=i;continue}const{position:s,facing:o}=Pk([jl(n),jl(i)],r.t),a=is(s,r.position)<Jg,u={dx:o.dx-r.facing.dx,dy:o.dy-r.facing.dy},h=kk(u)<Jg;if(a&&h){r=i;continue}e.push(jl(r)),n=r,r=i}return r&&e.push(jl(r)),e}const Zz={frames:{left:{frame:{x:0,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left2:{frame:{x:32,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left3:{frame:{x:64,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right:{frame:{x:0,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right2:{frame:{x:32,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right3:{frame:{x:64,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up:{frame:{x:0,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up2:{frame:{x:32,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up3:{frame:{x:64,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down:{frame:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down2:{frame:{x:32,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down3:{frame:{x:64,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}}},meta:{scale:"1"},animations:{left:["left","left2","left3"],right:["right","right2","right3"],up:["up","up2","up3"],down:["down","down2","down3"]}},Jz={frames:{down:{frame:{x:96,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down2:{frame:{x:128,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down3:{frame:{x:160,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left:{frame:{x:96,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left2:{frame:{x:128,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left3:{frame:{x:160,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right:{frame:{x:96,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right2:{frame:{x:128,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right3:{frame:{x:160,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up:{frame:{x:96,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up2:{frame:{x:128,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up3:{frame:{x:160,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}}},meta:{scale:"1"},animations:{left:["left","left2","left3"],right:["right","right2","right3"],up:["up","up2","up3"],down:["down","down2","down3"]}},e8={frames:{down:{frame:{x:192,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down2:{frame:{x:224,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down3:{frame:{x:256,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left:{frame:{x:192,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left2:{frame:{x:224,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left3:{frame:{x:256,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right:{frame:{x:192,y:65,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right2:{frame:{x:224,y:65,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right3:{frame:{x:256,y:65,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up:{frame:{x:192,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up2:{frame:{x:224,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up3:{frame:{x:256,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}}},meta:{scale:"1"},animations:{left:["left","left2","left3"],right:["right","right2","right3"],up:["up","up2","up3"],down:["down","down2","down3"]}},t8={frames:{down:{frame:{x:288,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down2:{frame:{x:320,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down3:{frame:{x:352,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left:{frame:{x:288,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left2:{frame:{x:320,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left3:{frame:{x:352,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right:{frame:{x:288,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right2:{frame:{x:320,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right3:{frame:{x:352,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up:{frame:{x:288,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up2:{frame:{x:320,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up3:{frame:{x:352,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}}},meta:{scale:"1"},animations:{left:["left","left2","left3"],right:["right","right2","right3"],up:["up","up2","up3"],down:["down","down2","down3"]}},n8={frames:{down:{frame:{x:0,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down2:{frame:{x:32,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down3:{frame:{x:64,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left:{frame:{x:0,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left2:{frame:{x:32,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left3:{frame:{x:64,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right:{frame:{x:0,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right2:{frame:{x:32,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right3:{frame:{x:64,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up:{frame:{x:0,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up2:{frame:{x:32,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up3:{frame:{x:64,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}}},meta:{scale:"1"},animations:{left:["left","left2","left3"],right:["right","right2","right3"],up:["up","up2","up3"],down:["down","down2","down3"]}},r8={frames:{down:{frame:{x:96,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down2:{frame:{x:128,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down3:{frame:{x:160,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left:{frame:{x:96,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left2:{frame:{x:128,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left3:{frame:{x:160,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right:{frame:{x:96,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right2:{frame:{x:128,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right3:{frame:{x:160,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up:{frame:{x:96,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up2:{frame:{x:128,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up3:{frame:{x:160,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}}},meta:{scale:"1"},animations:{left:["left","left2","left3"],right:["right","right2","right3"],up:["up","up2","up3"],down:["down","down2","down3"]}},i8={frames:{down:{frame:{x:192,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down2:{frame:{x:224,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down3:{frame:{x:256,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left:{frame:{x:192,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left2:{frame:{x:224,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left3:{frame:{x:256,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right:{frame:{x:192,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right2:{frame:{x:224,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right3:{frame:{x:256,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up:{frame:{x:192,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up2:{frame:{x:224,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up3:{frame:{x:256,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}}},meta:{scale:"1"},animations:{left:["left","left2","left3"],right:["right","right2","right3"],up:["up","up2","up3"],down:["down","down2","down3"]}},s8={frames:{down:{frame:{x:288,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down2:{frame:{x:320,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down3:{frame:{x:352,y:128,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left:{frame:{x:288,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left2:{frame:{x:320,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left3:{frame:{x:352,y:160,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right:{frame:{x:288,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right2:{frame:{x:320,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right3:{frame:{x:352,y:192,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up:{frame:{x:288,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up2:{frame:{x:320,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up3:{frame:{x:352,y:224,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}}},meta:{scale:"1"},animations:{left:["left","left2","left3"],right:["right","right2","right3"],up:["up","up2","up3"],down:["down","down2","down3"]}},Rk=[{name:"f1",textureUrl:"/ai-town/assets/32x32folk.png",spritesheetData:Zz,speed:.1},{name:"f2",textureUrl:"/ai-town/assets/32x32folk.png",spritesheetData:Jz,speed:.1},{name:"f3",textureUrl:"/ai-town/assets/32x32folk.png",spritesheetData:e8,speed:.1},{name:"f4",textureUrl:"/ai-town/assets/32x32folk.png",spritesheetData:t8,speed:.1},{name:"f5",textureUrl:"/ai-town/assets/32x32folk.png",spritesheetData:n8,speed:.1},{name:"f6",textureUrl:"/ai-town/assets/32x32folk.png",spritesheetData:r8,speed:.1},{name:"f7",textureUrl:"/ai-town/assets/32x32folk.png",spritesheetData:i8,speed:.1},{name:"f8",textureUrl:"/ai-town/assets/32x32folk.png",spritesheetData:s8,speed:.1}],o8=.75;function Mk(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=Mk(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function tl(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=Mk(t))&&(r&&(r+=" "),r+=e);return r}const Wd=t=>typeof t=="number"&&!isNaN(t),Su=t=>typeof t=="string",li=t=>typeof t=="function",og=t=>Su(t)||li(t)?t:null,y1=t=>de.isValidElement(t)||Su(t)||li(t)||Wd(t);function a8(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)})})}function Qy(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:s=300}=t;return function(o){let{children:a,position:u,preventExitTransition:h,done:d,nodeRef:p,isIn:f}=o;const g=r?`${e}--${u}`:e,v=r?`${n}--${u}`:n,w=de.useRef(0);return de.useLayoutEffect(()=>{const C=p.current,b=g.split(" "),S=_=>{_.target===p.current&&(C.dispatchEvent(new Event("d")),C.removeEventListener("animationend",S),C.removeEventListener("animationcancel",S),w.current===0&&_.type!=="animationcancel"&&C.classList.remove(...b))};C.classList.add(...b),C.addEventListener("animationend",S),C.addEventListener("animationcancel",S)},[]),de.useEffect(()=>{const C=p.current,b=()=>{C.removeEventListener("animationend",b),i?a8(C,d,s):d()};f||(h?b():(w.current=1,C.className+=` ${v}`,C.addEventListener("animationend",b)))},[f]),it.createElement(it.Fragment,null,a)}}function QT(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const Zi={list:new Map,emitQueue:new Map,on(t,e){return this.list.has(t)||this.list.set(t,[]),this.list.get(t).push(e),this},off(t,e){if(e){const n=this.list.get(t).filter(r=>r!==e);return this.list.set(t,n),this}return this.list.delete(t),this},cancelEmit(t){const e=this.emitQueue.get(t);return e&&(e.forEach(clearTimeout),this.emitQueue.delete(t)),this},emit(t){this.list.has(t)&&this.list.get(t).forEach(e=>{const n=setTimeout(()=>{e(...[].slice.call(arguments,1))},0);this.emitQueue.has(t)||this.emitQueue.set(t,[]),this.emitQueue.get(t).push(n)})}},Om=t=>{let{theme:e,type:n,...r}=t;return it.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...r})},v1={info:function(t){return it.createElement(Om,{...t},it.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return it.createElement(Om,{...t},it.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return it.createElement(Om,{...t},it.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return it.createElement(Om,{...t},it.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return it.createElement("div",{className:"Toastify__spinner"})}};function l8(t){const[,e]=de.useReducer(g=>g+1,0),[n,r]=de.useState([]),i=de.useRef(null),s=de.useRef(new Map).current,o=g=>n.indexOf(g)!==-1,a=de.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:t,containerId:null,isToastActive:o,getToast:g=>s.get(g)}).current;function u(g){let{containerId:v}=g;const{limit:w}=a.props;!w||v&&a.containerId!==v||(a.count-=a.queue.length,a.queue=[])}function h(g){r(v=>g==null?[]:v.filter(w=>w!==g))}function d(){const{toastContent:g,toastProps:v,staleId:w}=a.queue.shift();f(g,v,w)}function p(g,v){let{delay:w,staleId:C,...b}=v;if(!y1(g)||function(J){return!i.current||a.props.enableMultiContainer&&J.containerId!==a.props.containerId||s.has(J.toastId)&&J.updateId==null}(b))return;const{toastId:S,updateId:_,data:A}=b,{props:P}=a,F=()=>h(S),N=_==null;N&&a.count++;const D={...P,style:P.toastStyle,key:a.toastKey++,...Object.fromEntries(Object.entries(b).filter(J=>{let[V,U]=J;return U!=null})),toastId:S,updateId:_,data:A,closeToast:F,isIn:!1,className:og(b.className||P.toastClassName),bodyClassName:og(b.bodyClassName||P.bodyClassName),progressClassName:og(b.progressClassName||P.progressClassName),autoClose:!b.isLoading&&(q=b.autoClose,G=P.autoClose,q===!1||Wd(q)&&q>0?q:G),deleteToast(){const J=QT(s.get(S),"removed");s.delete(S),Zi.emit(4,J);const V=a.queue.length;if(a.count=S==null?a.count-a.displayedToast:a.count-1,a.count<0&&(a.count=0),V>0){const U=S==null?a.props.limit:1;if(V===1||U===1)a.displayedToast++,d();else{const Z=U>V?V:U;a.displayedToast=Z;for(let ie=0;ie<Z;ie++)d()}}else e()}};var q,G;D.iconOut=function(J){let{theme:V,type:U,isLoading:Z,icon:ie}=J,O=null;const L={theme:V,type:U};return ie===!1||(li(ie)?O=ie(L):de.isValidElement(ie)?O=de.cloneElement(ie,L):Su(ie)||Wd(ie)?O=ie:Z?O=v1.spinner():(Q=>Q in v1)(U)&&(O=v1[U](L))),O}(D),li(b.onOpen)&&(D.onOpen=b.onOpen),li(b.onClose)&&(D.onClose=b.onClose),D.closeButton=P.closeButton,b.closeButton===!1||y1(b.closeButton)?D.closeButton=b.closeButton:b.closeButton===!0&&(D.closeButton=!y1(P.closeButton)||P.closeButton);let H=g;de.isValidElement(g)&&!Su(g.type)?H=de.cloneElement(g,{closeToast:F,toastProps:D,data:A}):li(g)&&(H=g({closeToast:F,toastProps:D,data:A})),P.limit&&P.limit>0&&a.count>P.limit&&N?a.queue.push({toastContent:H,toastProps:D,staleId:C}):Wd(w)?setTimeout(()=>{f(H,D,C)},w):f(H,D,C)}function f(g,v,w){const{toastId:C}=v;w&&s.delete(w);const b={content:g,props:v};s.set(C,b),r(S=>[...S,C].filter(_=>_!==w)),Zi.emit(4,QT(b,b.props.updateId==null?"added":"updated"))}return de.useEffect(()=>(a.containerId=t.containerId,Zi.cancelEmit(3).on(0,p).on(1,g=>i.current&&h(g)).on(5,u).emit(2,a),()=>{s.clear(),Zi.emit(3,a)}),[]),de.useEffect(()=>{a.props=t,a.isToastActive=o,a.displayedToast=n.length}),{getToastToRender:function(g){const v=new Map,w=Array.from(s.values());return t.newestOnTop&&w.reverse(),w.forEach(C=>{const{position:b}=C.props;v.has(b)||v.set(b,[]),v.get(b).push(C)}),Array.from(v,C=>g(C[0],C[1]))},containerRef:i,isToastActive:o}}function KT(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}function ZT(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY}function u8(t){const[e,n]=de.useState(!1),[r,i]=de.useState(!1),s=de.useRef(null),o=de.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,a=de.useRef(t),{autoClose:u,pauseOnHover:h,closeToast:d,onClick:p,closeOnClick:f}=t;function g(A){if(t.draggable){A.nativeEvent.type==="touchstart"&&A.nativeEvent.preventDefault(),o.didMove=!1,document.addEventListener("mousemove",b),document.addEventListener("mouseup",S),document.addEventListener("touchmove",b),document.addEventListener("touchend",S);const P=s.current;o.canCloseOnClick=!0,o.canDrag=!0,o.boundingRect=P.getBoundingClientRect(),P.style.transition="",o.x=KT(A.nativeEvent),o.y=ZT(A.nativeEvent),t.draggableDirection==="x"?(o.start=o.x,o.removalDistance=P.offsetWidth*(t.draggablePercent/100)):(o.start=o.y,o.removalDistance=P.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent/100))}}function v(A){if(o.boundingRect){const{top:P,bottom:F,left:N,right:D}=o.boundingRect;A.nativeEvent.type!=="touchend"&&t.pauseOnHover&&o.x>=N&&o.x<=D&&o.y>=P&&o.y<=F?C():w()}}function w(){n(!0)}function C(){n(!1)}function b(A){const P=s.current;o.canDrag&&P&&(o.didMove=!0,e&&C(),o.x=KT(A),o.y=ZT(A),o.delta=t.draggableDirection==="x"?o.x-o.start:o.y-o.start,o.start!==o.x&&(o.canCloseOnClick=!1),P.style.transform=`translate${t.draggableDirection}(${o.delta}px)`,P.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function S(){document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",S),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",S);const A=s.current;if(o.canDrag&&o.didMove&&A){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),void t.closeToast();A.style.transition="transform 0.2s, opacity 0.2s",A.style.transform=`translate${t.draggableDirection}(0)`,A.style.opacity="1"}}de.useEffect(()=>{a.current=t}),de.useEffect(()=>(s.current&&s.current.addEventListener("d",w,{once:!0}),li(t.onOpen)&&t.onOpen(de.isValidElement(t.children)&&t.children.props),()=>{const A=a.current;li(A.onClose)&&A.onClose(de.isValidElement(A.children)&&A.children.props)}),[]),de.useEffect(()=>(t.pauseOnFocusLoss&&(document.hasFocus()||C(),window.addEventListener("focus",w),window.addEventListener("blur",C)),()=>{t.pauseOnFocusLoss&&(window.removeEventListener("focus",w),window.removeEventListener("blur",C))}),[t.pauseOnFocusLoss]);const _={onMouseDown:g,onTouchStart:g,onMouseUp:v,onTouchEnd:v};return u&&h&&(_.onMouseEnter=C,_.onMouseLeave=w),f&&(_.onClick=A=>{p&&p(A),o.canCloseOnClick&&d()}),{playToast:w,pauseToast:C,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:_}}function Ok(t){let{closeToast:e,theme:n,ariaLabel:r="close"}=t;return it.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:i=>{i.stopPropagation(),e(i)},"aria-label":r},it.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},it.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function c8(t){let{delay:e,isRunning:n,closeToast:r,type:i="default",hide:s,className:o,style:a,controlledProgress:u,progress:h,rtl:d,isIn:p,theme:f}=t;const g=s||u&&h===0,v={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused",opacity:g?0:1};u&&(v.transform=`scaleX(${h})`);const w=tl("Toastify__progress-bar",u?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":d}),C=li(o)?o({rtl:d,type:i,defaultClassName:w}):tl(w,o);return it.createElement("div",{role:"progressbar","aria-hidden":g?"true":"false","aria-label":"notification timer",className:C,style:v,[u&&h>=1?"onTransitionEnd":"onAnimationEnd"]:u&&h<1?null:()=>{p&&r()}})}const h8=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:i}=u8(t),{closeButton:s,children:o,autoClose:a,onClick:u,type:h,hideProgressBar:d,closeToast:p,transition:f,position:g,className:v,style:w,bodyClassName:C,bodyStyle:b,progressClassName:S,progressStyle:_,updateId:A,role:P,progress:F,rtl:N,toastId:D,deleteToast:q,isIn:G,isLoading:H,iconOut:J,closeOnClick:V,theme:U}=t,Z=tl("Toastify__toast",`Toastify__toast-theme--${U}`,`Toastify__toast--${h}`,{"Toastify__toast--rtl":N},{"Toastify__toast--close-on-click":V}),ie=li(v)?v({rtl:N,position:g,type:h,defaultClassName:Z}):tl(Z,v),O=!!F||!a,L={closeToast:p,type:h,theme:U};let Q=null;return s===!1||(Q=li(s)?s(L):de.isValidElement(s)?de.cloneElement(s,L):Ok(L)),it.createElement(f,{isIn:G,done:q,position:g,preventExitTransition:n,nodeRef:r},it.createElement("div",{id:D,onClick:u,className:ie,...i,style:w,ref:r},it.createElement("div",{...G&&{role:P},className:li(C)?C({type:h}):tl("Toastify__toast-body",C),style:b},J!=null&&it.createElement("div",{className:tl("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!H})},J),it.createElement("div",null,o)),Q,it.createElement(c8,{...A&&!O?{key:`pb-${A}`}:{},rtl:N,theme:U,delay:a,isRunning:e,isIn:G,closeToast:p,hide:d,type:h,style:_,className:S,controlledProgress:O,progress:F||0})))},Ky=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},d8=Qy(Ky("bounce",!0));Qy(Ky("slide",!0));Qy(Ky("zoom"));Qy(Ky("flip"));const g_=de.forwardRef((t,e)=>{const{getToastToRender:n,containerRef:r,isToastActive:i}=l8(t),{className:s,style:o,rtl:a,containerId:u}=t;function h(d){const p=tl("Toastify__toast-container",`Toastify__toast-container--${d}`,{"Toastify__toast-container--rtl":a});return li(s)?s({position:d,rtl:a,defaultClassName:p}):tl(p,og(s))}return de.useEffect(()=>{e&&(e.current=r.current)},[]),it.createElement("div",{ref:r,className:"Toastify",id:u},n((d,p)=>{const f=p.length?{...o}:{...o,pointerEvents:"none"};return it.createElement("div",{className:h(d),style:f,key:`container-${d}`},p.map((g,v)=>{let{content:w,props:C}=g;return it.createElement(h8,{...C,isIn:i(C.toastId),style:{...C.style,"--nth":v+1,"--len":p.length},key:`toast-${C.key}`},w)}))}))});g_.displayName="ToastContainer",g_.defaultProps={position:"top-right",transition:d8,autoClose:5e3,closeButton:Ok,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let x1,Ql=new Map,Td=[],f8=1;function Nk(){return""+f8++}function p8(t){return t&&(Su(t.toastId)||Wd(t.toastId))?t.toastId:Nk()}function Gd(t,e){return Ql.size>0?Zi.emit(0,t,e):Td.push({content:t,options:e}),e.toastId}function ey(t,e){return{...e,type:e&&e.type||t,toastId:p8(e)}}function Nm(t){return(e,n)=>Gd(e,ey(t,n))}function Bt(t,e){return Gd(t,ey("default",e))}Bt.loading=(t,e)=>Gd(t,ey("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),Bt.promise=function(t,e,n){let r,{pending:i,error:s,success:o}=e;i&&(r=Su(i)?Bt.loading(i,n):Bt.loading(i.render,{...n,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=(d,p,f)=>{if(p==null)return void Bt.dismiss(r);const g={type:d,...a,...n,data:f},v=Su(p)?{render:p}:p;return r?Bt.update(r,{...g,...v}):Bt(v.render,{...g,...v}),f},h=li(t)?t():t;return h.then(d=>u("success",o,d)).catch(d=>u("error",s,d)),h},Bt.success=Nm("success"),Bt.info=Nm("info"),Bt.error=Nm("error"),Bt.warning=Nm("warning"),Bt.warn=Bt.warning,Bt.dark=(t,e)=>Gd(t,ey("default",{theme:"dark",...e})),Bt.dismiss=t=>{Ql.size>0?Zi.emit(1,t):Td=Td.filter(e=>t!=null&&e.options.toastId!==t)},Bt.clearWaitingQueue=function(t){return t===void 0&&(t={}),Zi.emit(5,t)},Bt.isActive=t=>{let e=!1;return Ql.forEach(n=>{n.isToastActive&&n.isToastActive(t)&&(e=!0)}),e},Bt.update=function(t,e){e===void 0&&(e={}),setTimeout(()=>{const n=function(r,i){let{containerId:s}=i;const o=Ql.get(s||x1);return o&&o.getToast(r)}(t,e);if(n){const{props:r,content:i}=n,s={delay:100,...r,...e,toastId:e.toastId||t,updateId:Nk()};s.toastId!==t&&(s.staleId=t);const o=s.render||i;delete s.render,Gd(o,s)}},0)},Bt.done=t=>{Bt.update(t,{progress:1})},Bt.onChange=t=>(Zi.on(4,t),()=>{Zi.off(4,t)}),Bt.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Bt.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Zi.on(2,t=>{x1=t.containerId||t,Ql.set(x1,t),Td.forEach(e=>{Zi.emit(0,e.content,e.options)}),Td=[]}).on(3,t=>{Ql.delete(t.containerId||t),Ql.size===0&&Zi.off(0).off(1).off(5)});const m8=[{name:"x",precision:8},{name:"y",precision:8},{name:"dx",precision:8},{name:"dy",precision:8},{name:"speed",precision:16}];function g8(t){return{x:t.position.x,y:t.position.y,dx:t.facing.dx,dy:t.facing.dy,speed:t.speed}}const rc=2654435761,ic=2246822519,Dm=3266489917,JT=668265263,eC=374761393;function y8(t){const e=[];for(let n=0,r=t.length;n<r;++n){const i=t.charCodeAt(n);if(i<128)e.push(i);else if(i<2048)e.push(192|i>>6,128|i&63);else if(i<55296||i>=57344)e.push(224|i>>12,128|i>>6&63,128|i&63);else{const s=65536+((i&1023)<<10|t.charCodeAt(++n)&1023);e.push(240|s>>18&7,128|s>>12&63,128|s>>6&63,128|s&63)}}return new Uint8Array(e)}function v8(t,e=0){t=typeof t=="string"?y8(t):t;const n=t;let r=e+eC&4294967295,i=0;if(n.length>=16){const o=[e+rc+ic&4294967295,e+ic&4294967295,e+0&4294967295,e-rc&4294967295],a=t,u=a.length-16;let h=0;for(i=0;(i&4294967280)<=u;i+=4){const d=i,p=a[d+0]+(a[d+1]<<8),f=a[d+2]+(a[d+3]<<8),g=p*ic+(f*ic<<16);let v=o[h]+g&4294967295;v=v<<13|v>>>19;const w=v&65535,C=v>>>16;o[h]=w*rc+(C*rc<<16)&4294967295,h=h+1&3}r=(o[0]<<1|o[0]>>>31)+(o[1]<<7|o[1]>>>25)+(o[2]<<12|o[2]>>>20)+(o[3]<<18|o[3]>>>14)&4294967295}r=r+t.length&4294967295;const s=t.length-4;for(;i<=s;i+=4){const o=i,a=n[o+0]+(n[o+1]<<8),u=n[o+2]+(n[o+3]<<8),h=a*Dm+(u*Dm<<16);r=r+h&4294967295,r=r<<17|r>>>15,r=(r&65535)*JT+((r>>>16)*JT<<16)&4294967295}for(;i<n.length;++i){const o=n[i];r=r+o*eC,r=r<<11|r>>>21,r=(r&65535)*rc+((r>>>16)*rc<<16)&4294967295}return r=r^r>>>15,r=((r&65535)*ic&4294967295)+((r>>>16)*ic<<16),r=r^r>>>13,r=((r&65535)*Dm&4294967295)+((r>>>16)*Dm<<16),r=r^r>>>16,r<0?r+4294967296:r}function cd(t){return t>>1^-(t&1)}function tC(t){for(var e=[],n=new Int8Array(t),r=n.length,i=0;r>i;){var s=n[i++],o=s&127;if(s>=0){e.push(cd(o));continue}if(s=n[i++],o|=(s&127)<<7,s>=0){e.push(cd(o));continue}if(s=n[i++],o|=(s&127)<<14,s>=0){e.push(cd(o));continue}if(s=n[i++],o|=(s&127)<<21,s>=0){e.push(cd(o));continue}s=n[i++],o|=s<<28,e.push(cd(o))}return e}function x8(t,e){const n=1/(1<<e);return t.map(r=>r*n)}function nC(t,e=0){let n=e;const r=[];for(const i of t){const s=n+i;r.push(s),n=s}return r}function rC(t){if(t.length%2!==0)throw new Error(`Invalid RLE encoded length: ${t.length}`);const e=[];for(let n=0;n<t.length;n+=2){const r=t[n],i=t[n+1];for(let s=0;s<i;s++)e.push(r)}return e}const _8=1;function w8(t){const e=new ArrayBuffer(1024),n=new DataView(e);let r=0;n.setUint8(r,_8),r+=1;const i=new TextEncoder;for(const s of t){const o=i.encode(s.name);n.setUint8(r,o.length),r+=1,new Uint8Array(e,r,o.length).set(o),r+=o.length,n.setUint8(r,s.precision),r+=1}return e.slice(0,r)}function b8(t,e){const n=new DataView(e);let r=0;const i=S8(t),s=v8(new Uint8Array(w8(i))),o=n.getUint32(r,!0);if(r+=4,o!==s)throw new Error(`Config hash mismatch: ${o} !== ${s}`);const a={};for(;r<e.byteLength;){const u=n.getUint8(r);r+=1;const h=u&15,d=(u&16)!==0,p=i[h];if(!p)throw new Error(`Invalid field number: ${h}`);const f=Number(n.getBigUint64(r,!0));r+=8;const g=n.getUint16(r,!0);r+=2;const v=e.slice(r,r+g);r+=g;const w=[f,...nC(rC(tC(v)),f)],C=n.getUint16(r,!0);r+=2;const b=e.slice(r,r+C);r+=C;const S=tC(b),_=d?rC(S):S,A=nC(_),P=x8(A,p.precision);if(w.length+1!==P.length)throw new Error(`Invalid sample record: ${w.length} + 1 !== ${P.length}`);const F=P[0],N=[];for(let q=0;q<w.length;q++){const G=w[q],H=P[q+1];N.push({value:H,time:G})}const D={initialValue:F,samples:N};a[p.name]=D}return a}function S8(t){return t.map(e=>typeof e=="string"?{name:e,precision:0}:e)}function E8(t,e,n,r){const i=de.useRef(new T8),s=de.useMemo(()=>{if(!(!n||!r)){if(!(r instanceof ArrayBuffer))throw new Error(`Expected ArrayBuffer, found ${typeof r}`);return b8(t,r)}},[n&&r]);if(s&&i.current.receive(s),n===void 0)return;if(!e)return n;const o=i.current.query(e);return{...n,...o}}class T8{constructor(){this.histories={}}receive(e){for(const[n,r]of Object.entries(e)){let i=this.histories[n];i||(i=[],this.histories[n]=i),i[i.length-1]!=r&&i.push(r)}}query(e){const n={};for(const[r,i]of Object.entries(this.histories)){if(i.length==0)continue;let s=null,o=i[0].initialValue;for(let a=0;a<i.length;a++){const u=i[a];for(const h of u.samples){if(h.time>e){s=a;break}o=h.value}if(s!==null)break}s!==null&&(this.histories[r]=i.slice(s)),n[r]=o}return n}}const iC=new Set,C8=({game:t,isViewer:e,player:n,onClick:r,historicalTime:i})=>{var g,v,w;const s=(g=t.playerDescriptions.get(n.id))==null?void 0:g.character;if(!s)throw new Error(`Player ${n.id} has no character`);const o=Rk.find(C=>C.name===s),a=(v=t.world.historicalLocations)==null?void 0:v.get(n.id),u=E8(m8,i,g8(n),a);if(!o)return iC.has(s)||(iC.add(s),Bt.error(`Unknown character ${s}`)),null;if(!u)return null;const h=!![...t.world.conversations.values()].find(C=>{var b;return((b=C.isTyping)==null?void 0:b.playerId)===n.id}),d=!h&&!![...t.world.agents.values()].find(C=>C.playerId===n.id&&!!C.inProgressOperation),p=t.worldMap.tileDim,f={dx:u.dx,dy:u.dy};return W.jsx(W.Fragment,{children:W.jsx(Sz,{x:u.x*p+p/2,y:u.y*p+p/2,orientation:Qz(f),isMoving:u.speed>0,isThinking:d,isSpeaking:h,emoji:n.activity&&n.activity.until>(i??Date.now())?(w=n.activity)==null?void 0:w.emoji:void 0,isViewer:e,textureUrl:o.textureUrl,spritesheetData:o.spritesheetData,speed:o.speed,onClick:()=>{r({kind:"player",id:n.id})}})})},Dk={"pixels_large1.png":{frame:{x:0,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"pixels_large2.png":{frame:{x:32,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"pixels_large3.png":{frame:{x:64,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"pixels_large4.png":{frame:{x:96,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}}},Lk={pixels_large:["pixels_large1.png","pixels_large2.png","pixels_large3.png","pixels_large4.png"]},Fk={image:"./spritesheets/campfire.png",format:"RGBA8888",size:{w:128,h:32},scale:"1"},A8={frames:Dk,animations:Lk,meta:Fk},I8=Object.freeze(Object.defineProperty({__proto__:null,animations:Lk,default:A8,frames:Dk,meta:Fk},Symbol.toStringTag,{value:"Module"})),Bk={"pixels_large1.png":{frame:{x:0,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"pixels_large2.png":{frame:{x:32,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"pixels_large3.png":{frame:{x:64,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}}},Uk={pixels_large:["pixels_large1.png","pixels_large2.png","pixels_large3.png"]},zk={image:"./spritesheets/gentlesparkle32.png",format:"RGBA8888",size:{w:192,h:320},scale:"1"},P8={frames:Bk,animations:Uk,meta:zk},k8=Object.freeze(Object.defineProperty({__proto__:null,animations:Uk,default:P8,frames:Bk,meta:zk},Symbol.toStringTag,{value:"Module"})),$k={"pixels_large1.png":{frame:{x:0,y:32,w:32,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:96},sourceSize:{w:32,h:96}},"pixels_large2.png":{frame:{x:32,y:32,w:32,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:96},sourceSize:{w:32,h:96}},"pixels_large3.png":{frame:{x:64,y:32,w:32,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:96},sourceSize:{w:32,h:96}},"pixels_large4.png":{frame:{x:96,y:32,w:32,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:96},sourceSize:{w:32,h:96}},"pixels_large5.png":{frame:{x:128,y:32,w:32,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:96},sourceSize:{w:32,h:96}},"pixels_large6.png":{frame:{x:160,y:32,w:32,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:96},sourceSize:{w:32,h:96}}},Hk={pixels_large:["pixels_large1.png","pixels_large2.png","pixels_large3.png","pixels_large4.png","pixels_large5.png","pixels_large6.png"]},jk={image:"./spritesheets/gentlewaterfall32.png",format:"RGBA8888",size:{w:192,h:320},scale:"1"},R8={frames:$k,animations:Hk,meta:jk},M8=Object.freeze(Object.defineProperty({__proto__:null,animations:Hk,default:R8,frames:$k,meta:jk},Symbol.toStringTag,{value:"Module"})),Wk={"pixels_large1.png":{frame:{x:0,y:192,w:32,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:64},sourceSize:{w:32,h:64}},"pixels_large2.png":{frame:{x:32,y:192,w:32,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:64},sourceSize:{w:32,h:64}},"pixels_large3.png":{frame:{x:64,y:192,w:32,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:64},sourceSize:{w:32,h:64}},"pixels_large4.png":{frame:{x:64,y:192,w:32,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:64},sourceSize:{w:32,h:64}},"pixels_large5.png":{frame:{x:128,y:192,w:32,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:64},sourceSize:{w:32,h:64}},"pixels_large6.png":{frame:{x:160,y:192,w:32,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:64},sourceSize:{w:32,h:64}}},Gk={pixels_large:["pixels_large1.png","pixels_large2.png","pixels_large3.png","pixels_large4.png","pixels_large5.png","pixels_large6.png"]},Vk={image:"./spritesheets/gentlewaterfall32.png",format:"RGBA8888",size:{w:192,h:320},scale:"1"},O8={frames:Wk,animations:Gk,meta:Vk},N8=Object.freeze(Object.defineProperty({__proto__:null,animations:Gk,default:O8,frames:Wk,meta:Vk},Symbol.toStringTag,{value:"Module"})),Xk={"pixels_large1.png":{frame:{x:0,y:0,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large2.png":{frame:{x:208,y:0,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large3.png":{frame:{x:416,y:0,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large4.png":{frame:{x:0,y:208,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large5.png":{frame:{x:208,y:208,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large6.png":{frame:{x:416,y:208,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large7.png":{frame:{x:0,y:416,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large8.png":{frame:{x:208,y:416,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}}},qk={pixels_large:["pixels_large1.png","pixels_large2.png","pixels_large3.png","pixels_large4.png","pixels_large5.png","pixels_large6.png","pixels_large7.png","pixels_large8.png"]},Yk={image:"./spritesheets/windmill.png",format:"RGBA8888",size:{w:624,h:624},scale:"1"},D8={frames:Xk,animations:qk,meta:Yk},L8=Object.freeze(Object.defineProperty({__proto__:null,animations:qk,default:D8,frames:Xk,meta:Yk},Symbol.toStringTag,{value:"Module"})),F8={"campfire.json":{spritesheet:I8,url:"/ai-town/assets/spritesheets/campfire.png"},"gentlesparkle.json":{spritesheet:k8,url:"/ai-town/assets/spritesheets/gentlesparkle32.png"},"gentlewaterfall.json":{spritesheet:M8,url:"/ai-town/assets/spritesheets/gentlewaterfall32.png"},"windmill.json":{spritesheet:L8,url:"/ai-town/assets/spritesheets/windmill.png"},"gentlesplash.json":{spritesheet:N8,url:"/ai-town/assets/spritesheets/gentlewaterfall32.png"}},B8=Ii.PixiComponent("StaticMap",{create:t=>{const e=t.map,n=Math.floor(e.tileSetDimX/e.tileDim),r=Math.floor(e.tileSetDimY/e.tileDim),i=Ge.from(e.tileSetUrl,{scaleMode:as.NEAREST}),s=[];for(let p=0;p<n;p++)for(let f=0;f<r;f++)s[p+f*n]=new _e(i,new Ye(p*e.tileDim,f*e.tileDim,e.tileDim,e.tileDim));const o=e.bgTiles[0].length,a=e.bgTiles[0][0].length,u=new ir,h=[...e.bgTiles,...e.objectTiles];for(let p=0;p<o*a;p++){const f=p%o,g=Math.floor(p/o),v=f*e.tileDim,w=g*e.tileDim;for(const C of h){const b=C[f][g];if(b===-1)continue;const S=new Ws(s[b]);S.x=v,S.y=w,u.addChild(S)}}const d=new Map;for(const p of e.animatedSprites){const f=p.sheet;d.has(f)||d.set(f,[]),d.get(f).push(p)}for(const[p,f]of d.entries()){const g=F8[p];if(!g){console.error("Could not find animation",p);continue}const{spritesheet:v,url:w}=g,C=Ge.from(w,{scaleMode:as.NEAREST}),b=new Sf(C,v);b.parse().then(()=>{for(const S of f){const _=b.animations[S.animation];if(!_){console.error("Failed to load animation",S);continue}const A=new lh(_);A.animationSpeed=.1,A.autoUpdate=!0,A.x=S.x,A.y=S.y,A.width=S.w,A.height=S.h,u.addChild(A),A.play()}})}return u.x=0,u.y=0,u.interactive=!0,u.hitArea=new Ye(0,0,o*e.tileDim,a*e.tileDim),u},applyProps:(t,e,n)=>{Ii.applyDefaultProps(t,e,n)}});var U8=Object.defineProperty,z8=(t,e,n)=>e in t?U8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oe=(t,e,n)=>(z8(t,typeof e!="symbol"?e+"":e,n),n);class fs{constructor(e){oe(this,"parent"),oe(this,"paused"),this.parent=e,this.paused=!1}destroy(){}down(e){return!1}move(e){return!1}up(e){return!1}wheel(e){return!1}update(e){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}var $8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qk={exports:{}};(function(t,e){(function(){var n,r;r=function(i){return t.exports=i},n={linear:function(i,s,o,a){return o*i/a+s},easeInQuad:function(i,s,o,a){return o*(i/=a)*i+s},easeOutQuad:function(i,s,o,a){return-o*(i/=a)*(i-2)+s},easeInOutQuad:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i+s:-o/2*(--i*(i-2)-1)+s},easeInCubic:function(i,s,o,a){return o*(i/=a)*i*i+s},easeOutCubic:function(i,s,o,a){return o*((i=i/a-1)*i*i+1)+s},easeInOutCubic:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i+s:o/2*((i-=2)*i*i+2)+s},easeInQuart:function(i,s,o,a){return o*(i/=a)*i*i*i+s},easeOutQuart:function(i,s,o,a){return-o*((i=i/a-1)*i*i*i-1)+s},easeInOutQuart:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i*i+s:-o/2*((i-=2)*i*i*i-2)+s},easeInQuint:function(i,s,o,a){return o*(i/=a)*i*i*i*i+s},easeOutQuint:function(i,s,o,a){return o*((i=i/a-1)*i*i*i*i+1)+s},easeInOutQuint:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i*i*i+s:o/2*((i-=2)*i*i*i*i+2)+s},easeInSine:function(i,s,o,a){return-o*Math.cos(i/a*(Math.PI/2))+o+s},easeOutSine:function(i,s,o,a){return o*Math.sin(i/a*(Math.PI/2))+s},easeInOutSine:function(i,s,o,a){return-o/2*(Math.cos(Math.PI*i/a)-1)+s},easeInExpo:function(i,s,o,a){return i===0?s:o*Math.pow(2,10*(i/a-1))+s},easeOutExpo:function(i,s,o,a){return i===a?s+o:o*(-Math.pow(2,-10*i/a)+1)+s},easeInOutExpo:function(i,s,o,a){return(i/=a/2)<1?o/2*Math.pow(2,10*(i-1))+s:o/2*(-Math.pow(2,-10*--i)+2)+s},easeInCirc:function(i,s,o,a){return-o*(Math.sqrt(1-(i/=a)*i)-1)+s},easeOutCirc:function(i,s,o,a){return o*Math.sqrt(1-(i=i/a-1)*i)+s},easeInOutCirc:function(i,s,o,a){return(i/=a/2)<1?-o/2*(Math.sqrt(1-i*i)-1)+s:o/2*(Math.sqrt(1-(i-=2)*i)+1)+s},easeInElastic:function(i,s,o,a){var u,h,d;return d=1.70158,h=0,u=o,i===0||(i/=a),h||(h=a*.3),u<Math.abs(o)?(u=o,d=h/4):d=h/(2*Math.PI)*Math.asin(o/u),-(u*Math.pow(2,10*(i-=1))*Math.sin((i*a-d)*(2*Math.PI)/h))+s},easeOutElastic:function(i,s,o,a){var u,h,d;return d=1.70158,h=0,u=o,i===0||(i/=a),h||(h=a*.3),u<Math.abs(o)?(u=o,d=h/4):d=h/(2*Math.PI)*Math.asin(o/u),u*Math.pow(2,-10*i)*Math.sin((i*a-d)*(2*Math.PI)/h)+o+s},easeInOutElastic:function(i,s,o,a){var u,h,d;return d=1.70158,h=0,u=o,i===0||(i/=a/2),h||(h=a*(.3*1.5)),u<Math.abs(o)?(u=o,d=h/4):d=h/(2*Math.PI)*Math.asin(o/u),i<1?-.5*(u*Math.pow(2,10*(i-=1))*Math.sin((i*a-d)*(2*Math.PI)/h))+s:u*Math.pow(2,-10*(i-=1))*Math.sin((i*a-d)*(2*Math.PI)/h)*.5+o+s},easeInBack:function(i,s,o,a,u){return u===void 0&&(u=1.70158),o*(i/=a)*i*((u+1)*i-u)+s},easeOutBack:function(i,s,o,a,u){return u===void 0&&(u=1.70158),o*((i=i/a-1)*i*((u+1)*i+u)+1)+s},easeInOutBack:function(i,s,o,a,u){return u===void 0&&(u=1.70158),(i/=a/2)<1?o/2*(i*i*(((u*=1.525)+1)*i-u))+s:o/2*((i-=2)*i*(((u*=1.525)+1)*i+u)+2)+s},easeInBounce:function(i,s,o,a){var u;return u=n.easeOutBounce(a-i,0,o,a),o-u+s},easeOutBounce:function(i,s,o,a){return(i/=a)<1/2.75?o*(7.5625*i*i)+s:i<2/2.75?o*(7.5625*(i-=1.5/2.75)*i+.75)+s:i<2.5/2.75?o*(7.5625*(i-=2.25/2.75)*i+.9375)+s:o*(7.5625*(i-=2.625/2.75)*i+.984375)+s},easeInOutBounce:function(i,s,o,a){var u;return i<a/2?(u=n.easeInBounce(i*2,0,o,a),u*.5+s):(u=n.easeOutBounce(i*2-a,0,o,a),u*.5+o*.5+s)}},r(n)}).call($8)})(Qk);const sC=Qk.exports;function Zy(t,e){if(t){if(typeof t=="function")return t;if(typeof t=="string")return sC[t]}else return sC[e]}const H8={removeOnInterrupt:!1,ease:"linear",time:1e3};class j8 extends fs{constructor(e,n={}){super(e),oe(this,"options"),oe(this,"startX"),oe(this,"startY"),oe(this,"deltaX"),oe(this,"deltaY"),oe(this,"keepCenter"),oe(this,"startWidth",null),oe(this,"startHeight",null),oe(this,"deltaWidth",null),oe(this,"deltaHeight",null),oe(this,"width",null),oe(this,"height",null),oe(this,"time",0),this.options=Object.assign({},H8,n),this.options.ease=Zy(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(e){if(this.paused)return;this.time+=e;const n=new Fe(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const r=this.parent.width,i=this.parent.height;this.complete(),(r!==this.parent.width||i!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}else{const r=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){const i=this.startWidth,s=this.deltaWidth;this.parent.fitWidth(i+s*r,this.keepCenter,this.height===null)}if(this.height!==null){const i=this.startHeight,s=this.deltaHeight;this.parent.fitHeight(i+s*r,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const i=this.startX,s=this.startY,o=this.deltaX,a=this.deltaY,u=new Fe(this.parent.x,this.parent.y);this.parent.moveCenter(i+o*r,s+a*r),this.parent.emit("moved",{viewport:this.parent,original:u,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}}}const W8={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class G8 extends fs{constructor(e,n={}){super(e),oe(this,"options"),oe(this,"left"),oe(this,"top"),oe(this,"right"),oe(this,"bottom"),oe(this,"underflowX"),oe(this,"underflowY"),oe(this,"ease"),oe(this,"toX"),oe(this,"toY"),this.options=Object.assign({},W8,n),this.ease=Zy(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;const r=this.options.underflow.toLowerCase();r==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=r.indexOf("left")!==-1?-1:r.indexOf("right")!==-1?1:0,this.underflowY=r.indexOf("top")!==-1?-1:r.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(e){if(!this.paused){if(this.bounce(),this.toX){const n=this.toX;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),n.time>=this.options.time?(this.parent.x=n.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(n.time,n.start,n.delta,this.options.time)}if(this.toY){const n=this.toY;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),n.time>=this.options.time?(this.parent.y=n.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(n.time,n.start,n.delta,this.options.time)}}}calcUnderflowX(){let e;switch(this.underflowX){case-1:e=0;break;case 1:e=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:e=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return e}calcUnderflowY(){let e;switch(this.underflowY){case-1:e=0;break;case 1:e=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:e=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return e}oob(){const e=this.options.bounceBox;if(e){const n=typeof e.x>"u"?0:e.x,r=typeof e.y>"u"?0:e.y,i=typeof e.width>"u"?this.parent.worldWidth:e.width,s=typeof e.height>"u"?this.parent.worldHeight:e.height;return{left:this.parent.left<n,right:this.parent.right>i,top:this.parent.top<r,bottom:this.parent.bottom>s,topLeft:new Fe(n*this.parent.scale.x,r*this.parent.scale.y),bottomRight:new Fe(i*this.parent.scale.x-this.parent.screenWidth,s*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new Fe(0,0),bottomRight:new Fe(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){var e,n;if(this.paused)return;let r,i=this.parent.plugins.get("decelerate",!0);i&&(i.x||i.y)&&(i.x&&i.percentChangeX===((e=i.options)==null?void 0:e.friction)||i.y&&i.percentChangeY===((n=i.options)==null?void 0:n.friction))&&(r=this.oob(),(r.left&&this.left||r.right&&this.right)&&(i.percentChangeX=this.options.friction),(r.top&&this.top||r.bottom&&this.bottom)&&(i.percentChangeY=this.options.friction));const s=this.parent.plugins.get("drag",!0)||{},o=this.parent.plugins.get("pinch",!0)||{};if(i=i||{},!(s!=null&&s.active)&&!(o!=null&&o.active)&&(!this.toX||!this.toY)&&(!i.x||!i.y)){r=r||this.oob();const a=r.topLeft,u=r.bottomRight;if(!this.toX&&!i.x){let h=null;r.left&&this.left?h=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-a.x:r.right&&this.right&&(h=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-u.x),h!==null&&this.parent.x!==h&&(this.toX={time:0,start:this.parent.x,delta:h-this.parent.x,end:h},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!i.y){let h=null;r.top&&this.top?h=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-a.y:r.bottom&&this.bottom&&(h=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-u.y),h!==null&&this.parent.y!==h&&(this.toY={time:0,start:this.parent.y,delta:h-this.parent.y,end:h},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const V8={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class X8 extends fs{constructor(e,n={}){super(e),oe(this,"options"),oe(this,"last"),oe(this,"noUnderflow"),oe(this,"underflowX"),oe(this,"underflowY"),this.options=Object.assign({},V8,n),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="none"?this.noUnderflow=!0:e==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=e.indexOf("left")!==-1?-1:e.indexOf("right")!==-1?1:0,this.underflowY=e.indexOf("top")!==-1?-1:e.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const e=new Fe(this.parent.x,this.parent.y),n=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,r=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,r=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,r=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,n.x=0,r=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,n.x=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,r=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,r=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,r=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,n.y=0,r=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,n.y=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const q8={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class Y8 extends fs{constructor(e,n={}){super(e),oe(this,"options"),this.options=Object.assign({},q8,n),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&e<this.options.minWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&e>this.options.maxWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&n<this.options.minHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&n>this.options.maxHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const e={x:null,y:null},n={x:null,y:null};if(typeof this.options.minScale=="number")e.x=this.options.minScale,e.y=this.options.minScale;else if(this.options.minScale!==null){const s=this.options.minScale;e.x=typeof s.x>"u"?null:s.x,e.y=typeof s.y>"u"?null:s.y}if(typeof this.options.maxScale=="number")n.x=this.options.maxScale,n.y=this.options.maxScale;else if(this.options.maxScale!==null){const s=this.options.maxScale;n.x=typeof s.x>"u"?null:s.x,n.y=typeof s.y>"u"?null:s.y}let r=this.parent.scale.x,i=this.parent.scale.y;e.x!==null&&r<e.x&&(r=e.x),n.x!==null&&r>n.x&&(r=n.x),e.y!==null&&i<e.y&&(i=e.y),n.y!==null&&i>n.y&&(i=n.y),(r!==this.parent.scale.x||i!==this.parent.scale.y)&&(this.parent.scale.set(r,i),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}}const Q8={friction:.98,bounce:.8,minSpeed:.01},za=16;class K8 extends fs{constructor(e,n={}){super(e),oe(this,"options"),oe(this,"x"),oe(this,"y"),oe(this,"percentChangeX"),oe(this,"percentChangeY"),oe(this,"saved"),oe(this,"timeSinceRelease"),this.options=Object.assign({},Q8,n),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",r=>this.handleMoved(r))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;const e=this.parent.input.count();return(e===1||e>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}handleMoved(e){if(this.saved.length){const n=this.saved[this.saved.length-1];e.type==="clamp-x"&&e.original?n.x===e.original.x&&(n.x=this.parent.x):e.type==="clamp-y"&&e.original&&n.y===e.original.y&&(n.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const e=performance.now();for(const n of this.saved)if(n.time>=e-100){const r=e-n.time;this.x=(this.parent.x-n.x)/r,this.y=(this.parent.y-n.y)/r,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(e){e=e||{},typeof e.x<"u"&&(this.x=e.x,this.percentChangeX=this.options.friction),typeof e.y<"u"&&(this.y=e.y,this.percentChangeY=this.options.friction)}update(e){if(this.paused)return;const n=this.x||this.y,r=this.timeSinceRelease,i=this.timeSinceRelease+e;if(this.x){const s=this.percentChangeX,o=Math.log(s);this.parent.x+=this.x*za/o*(Math.pow(s,i/za)-Math.pow(s,r/za)),this.x*=Math.pow(this.percentChangeX,e/za)}if(this.y){const s=this.percentChangeY,o=Math.log(s);this.parent.y+=this.y*za/o*(Math.pow(s,i/za)-Math.pow(s,r/za)),this.y*=Math.pow(this.percentChangeY,e/za)}this.timeSinceRelease+=e,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),n&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const Z8={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class J8 extends fs{constructor(e,n={}){super(e),oe(this,"options"),oe(this,"moved"),oe(this,"reverse"),oe(this,"xDirection"),oe(this,"yDirection"),oe(this,"keyIsPressed"),oe(this,"mouse"),oe(this,"underflowX"),oe(this,"underflowY"),oe(this,"last"),oe(this,"current"),oe(this,"windowEventHandlers",[]),this.options=Object.assign({},Z8,n),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){const n=i=>{e.includes(i.code)&&(this.keyIsPressed=!0)},r=i=>{e.includes(i.code)&&(this.keyIsPressed=!1)};this.addWindowEventHandler("keyup",r),this.addWindowEventHandler("keydown",n)}addWindowEventHandler(e,n){window.addEventListener(e,n),this.windowEventHandlers.push({event:e,handler:n})}destroy(){this.windowEventHandlers.forEach(({event:e,handler:n})=>{window.removeEventListener(e,n)})}mouseButtons(e){!e||e==="all"?this.mouse=[!0,!0,!0]:this.mouse=[e.indexOf("left")!==-1,e.indexOf("middle")!==-1,e.indexOf("right")!==-1]}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="center"?(this.underflowX=0,this.underflowY=0):(e.includes("left")?this.underflowX=-1:e.includes("right")?this.underflowX=1:this.underflowX=0,e.includes("top")?this.underflowY=-1:e.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(e){const n=e.pointerType==="mouse",r=this.parent.input.count();return!!((r===1||r>1&&!this.parent.plugins.get("pinch",!0))&&(!n||this.mouse[e.button]))}checkKeyPress(e){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&e.data.pointerType==="touch"}down(e){return this.paused||!this.options.pressDrag?!1:this.checkButtons(e)&&this.checkKeyPress(e)?(this.last={x:e.global.x,y:e.global.y},this.current=e.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(e){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===e.data.pointerId){const n=e.global.x,r=e.global.y,i=this.parent.input.count();if(i===1||i>1&&!this.parent.plugins.get("pinch",!0)){const s=n-this.last.x,o=r-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(s)||this.yDirection&&this.parent.input.checkThreshold(o)){const a={x:n,y:r};return this.xDirection&&(this.parent.x+=(a.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(a.y-this.last.y)*this.options.factor),this.last=a,this.moved||this.parent.emit("drag-start",{event:e,screen:new Fe(this.last.x,this.last.y),world:this.parent.toWorld(new Fe(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}return!1}up(e){if(this.paused)return!1;const n=this.parent.input.touches;if(n.length===1){const r=n[0];return r.last&&(this.last={x:r.last.x,y:r.last.y},this.current=r.id),this.moved=!1,!0}else if(this.last&&this.moved){const r=new Fe(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:e,screen:r,world:this.parent.toWorld(r),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(e){if(this.paused)return!1;if(this.options.wheel){const n=this.parent.plugins.get("wheel",!0);if(!n||!n.options.wheelZoom&&!e.ctrlKey){const r=e.deltaMode?this.options.lineHeight:1,i=[e.deltaX,e.deltaY],[s,o]=this.options.wheelSwapAxes?i.reverse():i;return this.xDirection&&(this.parent.x+=s*r*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=o*r*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||e.preventDefault(),this.parent.options.stopPropagation&&e.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const e=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,e.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,e.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,e.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,e.y=0)}}const e$={speed:0,acceleration:null,radius:null};class t$ extends fs{constructor(e,n,r={}){super(e),oe(this,"options"),oe(this,"target"),oe(this,"velocity"),this.target=n,this.options=Object.assign({},e$,r),this.velocity={x:0,y:0}}update(e){if(this.paused)return;const n=this.parent.center;let r=this.target.x,i=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-n.y,2)+Math.pow(this.target.x-n.x,2))>this.options.radius){const a=Math.atan2(this.target.y-n.y,this.target.x-n.x);r=this.target.x-Math.cos(a)*this.options.radius,i=this.target.y-Math.sin(a)*this.options.radius}else return;const s=r-n.x,o=i-n.y;if(s||o)if(this.options.speed)if(this.options.acceleration){const a=Math.atan2(i-n.y,r-n.x),u=Math.sqrt(Math.pow(s,2)+Math.pow(o,2));if(u){const h=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);u>h?this.velocity={x:Math.min(this.velocity.x+(this.options.acceleration*e,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration*e,this.options.speed))}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const d=Math.cos(a)*this.velocity.x,p=Math.sin(a)*this.velocity.y,f=Math.abs(d)>Math.abs(s)?r:n.x+d,g=Math.abs(p)>Math.abs(o)?i:n.y+p;this.parent.moveCenter(f,g),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const a=Math.atan2(i-n.y,r-n.x),u=Math.cos(a)*this.options.speed,h=Math.sin(a)*this.options.speed,d=Math.abs(u)>Math.abs(s)?r:n.x+u,p=Math.abs(h)>Math.abs(o)?i:n.y+h;this.parent.moveCenter(d,p),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(r,i),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const n$={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class r$ extends fs{constructor(e,n={}){super(e),oe(this,"options"),oe(this,"reverse"),oe(this,"radiusSquared"),oe(this,"left"),oe(this,"top"),oe(this,"right"),oe(this,"bottom"),oe(this,"horizontal"),oe(this,"vertical"),this.options=Object.assign({},n$,n),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){const e=this.options.distance;e!==null?(this.left=e,this.top=e,this.right=this.parent.screenWidth-e,this.bottom=this.parent.screenHeight-e):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.screenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(e){if(this.paused||e.pointerType!=="mouse"&&e.pointerId!==1||!this.options.allowButtons&&e.buttons!==0)return!1;const n=e.global.x,r=e.global.y;if(this.radiusSquared){const i=this.parent.toScreen(this.parent.center);if(Math.pow(i.x-n,2)+Math.pow(i.y-r,2)>=this.radiusSquared){const s=Math.atan2(i.y-r,i.x-n);this.options.linear?(this.horizontal=Math.round(Math.cos(s))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(s))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(s)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(s)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&n<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&n>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&r<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&r>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const e=this.parent.plugins.get("decelerate",!0);this.horizontal&&e&&!this.options.noDecelerate&&e.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const e=this.parent.plugins.get("decelerate",!0);this.vertical&&e&&!this.options.noDecelerate&&e.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const e=this.parent.center;this.horizontal&&(e.x+=this.horizontal*this.options.speed),this.vertical&&(e.y+=this.vertical*this.options.speed),this.parent.moveCenter(e),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const i$={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class s$ extends fs{constructor(e,n={}){super(e),oe(this,"options"),oe(this,"active",!1),oe(this,"pinching",!1),oe(this,"moved",!1),oe(this,"lastCenter"),this.options=Object.assign({},i$,n)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(e){if(this.paused||!this.active)return!1;const n=e.global.x,r=e.global.y,i=this.parent.input.touches;if(i.length>=2){const s=i[0],o=i[1],a=s.last&&o.last?Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2)):null;if(s.id===e.pointerId?s.last={x:n,y:r,data:e}:o.id===e.pointerId&&(o.last={x:n,y:r,data:e}),a){let u;const h=new Fe(s.last.x+(o.last.x-s.last.x)/2,s.last.y+(o.last.y-s.last.y)/2);this.options.center||(u=this.parent.toLocal(h));let d=Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2));d=d===0?d=1e-10:d;const p=(1-a/d)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=p),this.isAxisY()&&(this.parent.scale.y+=p),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:h});const f=this.parent.plugins.get("clamp-zoom",!0);if(f&&f.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const g=this.parent.toGlobal(u);this.parent.x+=(h.x-g.x)*this.options.factor,this.parent.y+=(h.y-g.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(h.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(h.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=h,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}}const o$={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class a$ extends fs{constructor(e,n,r,i={}){super(e),oe(this,"options"),oe(this,"ease"),oe(this,"x"),oe(this,"y"),oe(this,"percent"),oe(this,"snapping"),oe(this,"deltaX"),oe(this,"deltaY"),oe(this,"startX"),oe(this,"startY"),this.options=Object.assign({},o$,i),this.ease=Zy(i.ease,"easeInOutSine"),this.x=n,this.y=r,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const e=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-e.x,this.deltaY=this.y-e.y,this.startX=e.x,this.startY=e.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){const e=this.parent.plugins.get("decelerate",!0);e&&(e.x||e.y)&&(e.percentChangeX=e.percentChangeY=this.options.friction)}return!1}update(e){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const n=this.snapping;n.time+=e;let r,i,s;const o=this.startX,a=this.startY,u=this.deltaX,h=this.deltaY;if(n.time>this.options.time)r=!0,i=o+u,s=a+h;else{const d=this.ease(n.time,0,1,this.options.time);i=o+u*d,s=a+h*d}this.options.topLeft?this.parent.moveCorner(i,s):this.parent.moveCenter(i,s),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),r&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const n=this.options.topLeft?this.parent.corner:this.parent.center;(n.x!==this.x||n.y!==this.y)&&this.snapStart()}}}const l$={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class u$ extends fs{constructor(e,n={}){super(e),oe(this,"options"),oe(this,"ease"),oe(this,"xScale"),oe(this,"yScale"),oe(this,"xIndependent"),oe(this,"yIndependent"),oe(this,"snapping"),this.options=Object.assign({},l$,n),this.ease=Zy(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=e.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=e.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(e.container.scale.x=this.xScale,e.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):n.forceStart&&this.createSnapping()}createSnapping(){const e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,r=this.parent.screenWidth/this.xScale,i=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:e,startY:n,deltaX:r-e,deltaY:i-n},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(e){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let n;if(!this.options.center&&!this.options.noMove&&(n=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const r=this.snapping;if(r.time+=e,r.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const s=this.snapping,o=this.ease(s.time,s.startX,s.deltaX,this.options.time),a=this.ease(s.time,s.startY,s.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/o,this.parent.scale.y=this.parent.screenHeight/a}const i=this.parent.plugins.get("clamp-zoom",!0);i&&i.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(n))}}resume(){this.snapping=null,super.resume()}}const c$={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class h$ extends fs{constructor(e,n={}){super(e),oe(this,"options"),oe(this,"smoothing"),oe(this,"smoothingCenter"),oe(this,"smoothingCount"),oe(this,"keyIsPressed"),this.options=Object.assign({},c$,n),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){window.addEventListener("keydown",n=>{e.includes(n.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",n=>{e.includes(n.code)&&(this.keyIsPressed=!1)})}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const e=this.smoothingCenter,n=this.smoothing;let r;this.options.center||(r=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x+=n.x),this.isAxisY()&&(this.parent.scale.y+=n.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const i=this.parent.plugins.get("clamp-zoom",!0);if(i&&i.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const s=this.parent.toGlobal(r);this.parent.x+=e.x-s.x,this.parent.y+=e.y-s.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(e){if(this.paused)return;const n=this.parent.input.getPointerPosition(e),r=-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/200,i=Math.pow(2,(1+this.options.percent)*r);let s;this.options.center||(s=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=n.x-a.x,this.parent.y+=n.y-a.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}wheel(e){if(this.paused||!this.checkKeyPress())return!1;if(e.ctrlKey&&this.options.trackpadPinch)this.pinch(e);else if(this.options.wheelZoom){const n=this.parent.input.getPointerPosition(e),r=(this.options.reverse?-1:1)*-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/500,i=Math.pow(2,(1+this.options.percent)*r);if(this.options.smooth){const s={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+s.x)*i-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+s.y)*i-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=n}else{let s;this.options.center||(s=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=n.x-a.x,this.parent.y+=n.y-a.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}return!this.parent.options.passiveWheel}}class d${constructor(e){oe(this,"viewport"),oe(this,"clickedAvailable"),oe(this,"isMouseDown"),oe(this,"last"),oe(this,"wheelFunction"),oe(this,"touches"),this.viewport=e,this.touches=[],this.addListeners()}addListeners(){this.viewport.interactive=!0,this.viewport.forceHitArea||(this.viewport.hitArea=new Ye(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=e=>this.handleWheel(e),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){this.viewport.options.events.domElement.removeEventListener("wheel",this.wheelFunction)}down(e){if(!(this.viewport.pause||!this.viewport.worldVisible)){if(e.pointerType==="mouse"?this.isMouseDown=!0:this.get(e.pointerId)||this.touches.push({id:e.pointerId,last:null}),this.count()===1){this.last=e.global.clone();const n=this.viewport.plugins.get("decelerate",!0),r=this.viewport.plugins.get("bounce",!0);(!n||!n.isActive())&&(!r||!r.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(e)&&this.viewport.options.stopPropagation&&e.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(e){return Math.abs(e)>=this.viewport.threshold}move(e){if(this.viewport.pause||!this.viewport.worldVisible)return;const n=this.viewport.plugins.move(e);if(this.clickedAvailable&&this.last){const r=e.global.x-this.last.x,i=e.global.y-this.last.y;(this.checkThreshold(r)||this.checkThreshold(i))&&(this.clickedAvailable=!1)}n&&this.viewport.options.stopPropagation&&e.stopPropagation()}up(e){if(this.viewport.pause||!this.viewport.worldVisible)return;e.pointerType==="mouse"&&(this.isMouseDown=!1),e.pointerType!=="mouse"&&this.remove(e.pointerId);const n=this.viewport.plugins.up(e);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:e,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),n&&this.viewport.options.stopPropagation&&e.stopPropagation()}getPointerPosition(e){const n=new Fe;return this.viewport.options.events.mapPositionToPoint(n,e.clientX,e.clientY),n}handleWheel(e){if(this.viewport.pause||!this.viewport.worldVisible)return;const n=this.viewport.toLocal(this.getPointerPosition(e));this.viewport.left<=n.x&&n.x<=this.viewport.right&&this.viewport.top<=n.y&&n.y<=this.viewport.bottom&&this.viewport.plugins.wheel(e)&&!this.viewport.options.passiveWheel&&e.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(e){for(const n of this.touches)if(n.id===e)return n;return null}remove(e){for(let n=0;n<this.touches.length;n++)if(this.touches[n].id===e){this.touches.splice(n,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}const hd=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class f${constructor(e){oe(this,"plugins"),oe(this,"list"),oe(this,"viewport"),this.viewport=e,this.list=[],this.plugins={}}add(e,n,r=hd.length){const i=this.plugins[e];i&&i.destroy(),this.plugins[e]=n;const s=hd.indexOf(e);s!==-1&&hd.splice(s,1),hd.splice(r,0,e),this.sort()}get(e,n){var r;return n&&(r=this.plugins[e])!=null&&r.paused?null:this.plugins[e]}update(e){for(const n of this.list)n.update(e)}resize(){for(const e of this.list)e.resize()}reset(){for(const e of this.list)e.reset()}removeAll(){this.list.forEach(e=>{e.destroy()}),this.plugins={},this.sort()}remove(e){var n;this.plugins[e]&&((n=this.plugins[e])==null||n.destroy(),delete this.plugins[e],this.viewport.emit("plugin-remove",e),this.sort())}pause(e){var n;(n=this.plugins[e])==null||n.pause()}resume(e){var n;(n=this.plugins[e])==null||n.resume()}sort(){this.list=[];for(const e of hd)this.plugins[e]&&this.list.push(this.plugins[e])}down(e){let n=!1;for(const r of this.list)r.down(e)&&(n=!0);return n}move(e){let n=!1;for(const r of this.viewport.plugins.list)r.move(e)&&(n=!0);return n}up(e){let n=!1;for(const r of this.list)r.up(e)&&(n=!0);return n}wheel(e){let n=!1;for(const r of this.list)r.wheel(e)&&(n=!0);return n}}const p$={screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:zt.shared,allowPreserveDragOutside:!1};class m$ extends ir{constructor(e){super(),oe(this,"moving"),oe(this,"screenWidth"),oe(this,"screenHeight"),oe(this,"threshold"),oe(this,"input"),oe(this,"plugins"),oe(this,"zooming"),oe(this,"lastViewport"),oe(this,"options"),oe(this,"_dirty"),oe(this,"_forceHitArea"),oe(this,"_hitAreaDefault"),oe(this,"_pause"),oe(this,"tickerFunction"),oe(this,"_worldWidth"),oe(this,"_worldHeight"),oe(this,"_disableOnContextMenu",n=>n.preventDefault()),this.options={...p$,...e},this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new d$(this),this.plugins=new f$(this)}destroy(e){!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&this.options.events.domElement.removeEventListener("contextmenu",this._disableOnContextMenu),this.input.destroy(),super.destroy(e)}update(e){this.pause||(this.plugins.update(e),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new Ye(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(e=window.innerWidth,n=window.innerHeight,r,i){this.screenWidth=e,this.screenHeight=n,typeof r<"u"&&(this._worldWidth=r),typeof i<"u"&&(this._worldHeight=i),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(e){this._worldWidth=e,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(e){this._worldHeight=e,this.plugins.resize()}getVisibleBounds(){return new Ye(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(e,n){return arguments.length===2?this.toLocal(new Fe(e,n)):this.toLocal(e)}toScreen(e,n){return arguments.length===2?this.toGlobal(new Fe(e,n)):this.toGlobal(e)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new Fe(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(e){this.moveCenter(e)}moveCenter(...e){let n,r;typeof e[0]=="number"?(n=e[0],r=e[1]):(n=e[0].x,r=e[0].y);const i=(this.worldScreenWidth/2-n)*this.scale.x,s=(this.worldScreenHeight/2-r)*this.scale.y;return(this.x!==i||this.y!==s)&&(this.position.set(i,s),this.plugins.reset(),this.dirty=!0),this}get corner(){return new Fe(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(e){this.moveCorner(e)}moveCorner(...e){let n,r;return e.length===1?(n=-e[0].x*this.scale.x,r=-e[0].y*this.scale.y):(n=-e[0]*this.scale.x,r=-e[1]*this.scale.y),(n!==this.x||r!==this.y)&&(this.position.set(n,r),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(e){return this.screenWidth/e}findFitHeight(e){return this.screenHeight/e}findFit(e,n){const r=this.screenWidth/e,i=this.screenHeight/n;return Math.min(r,i)}findCover(e,n){const r=this.screenWidth/e,i=this.screenHeight/n;return Math.max(r,i)}fitWidth(e=this.worldWidth,n,r=!0,i){let s;n&&(s=this.center),this.scale.x=this.screenWidth/e,r&&(this.scale.y=this.scale.x);const o=this.plugins.get("clamp-zoom",!0);return!i&&o&&o.clamp(),n&&s&&this.moveCenter(s),this}fitHeight(e=this.worldHeight,n,r=!0,i){let s;n&&(s=this.center),this.scale.y=this.screenHeight/e,r&&(this.scale.x=this.scale.y);const o=this.plugins.get("clamp-zoom",!0);return!i&&o&&o.clamp(),n&&s&&this.moveCenter(s),this}fitWorld(e){let n;e&&(n=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),e&&n&&this.moveCenter(n),this}fit(e,n=this.worldWidth,r=this.worldHeight){let i;e&&(i=this.center),this.scale.x=this.screenWidth/n,this.scale.y=this.screenHeight/r,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const s=this.plugins.get("clamp-zoom",!0);return s&&s.clamp(),e&&i&&this.moveCenter(i),this}setZoom(e,n){let r;n&&(r=this.center),this.scale.set(e);const i=this.plugins.get("clamp-zoom",!0);return i&&i.clamp(),n&&r&&this.moveCenter(r),this}zoomPercent(e,n){return this.setZoom(this.scale.x+this.scale.x*e,n)}zoom(e,n){return this.fitWidth(e+this.worldScreenWidth,n),this}get scaled(){return this.scale.x}set scaled(e){this.setZoom(e,!0)}snapZoom(e){return this.plugins.add("snap-zoom",new u$(this,e)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new Fe(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(e){this.x=-e*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(e){this.x=-e*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(e){this.y=-e*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(e){this.y=-e*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(e){this._dirty=e}get forceHitArea(){return this._forceHitArea}set forceHitArea(e){e?(this._forceHitArea=e,this.hitArea=e):(this._forceHitArea=null,this.hitArea=new Ye(0,0,this.worldWidth,this.worldHeight))}drag(e){return this.plugins.add("drag",new J8(this,e)),this}clamp(e){return this.plugins.add("clamp",new X8(this,e)),this}decelerate(e){return this.plugins.add("decelerate",new K8(this,e)),this}bounce(e){return this.plugins.add("bounce",new G8(this,e)),this}pinch(e){return this.plugins.add("pinch",new s$(this,e)),this}snap(e,n,r){return this.plugins.add("snap",new a$(this,e,n,r)),this}follow(e,n){return this.plugins.add("follow",new t$(this,e,n)),this}wheel(e){return this.plugins.add("wheel",new h$(this,e)),this}animate(e){return this.plugins.add("animate",new j8(this,e)),this}clampZoom(e){return this.plugins.add("clamp-zoom",new Y8(this,e)),this}mouseEdges(e){return this.plugins.add("mouse-edges",new r$(this,e)),this}get pause(){return!!this._pause}set pause(e){this._pause=e,this.lastViewport=null,this.moving=!1,this.zooming=!1,e&&this.input.pause()}ensureVisible(e,n,r,i,s){s&&(r>this.worldScreenWidth||i>this.worldScreenHeight)&&(this.fit(!0,r,i),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let o=!1;e<this.left?(this.left=e,o=!0):e+r>this.right&&(this.right=e+r,o=!0),n<this.top?(this.top=n,o=!0):n+i>this.bottom&&(this.bottom=n+i,o=!0),o&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}const g$=Ii.PixiComponent("Viewport",{create(t){const{app:e,children:n,viewportRef:r,...i}=t,s=new m$({events:e.renderer.events,passiveWheel:!1,...i});return r&&(r.current=s),s.drag().pinch({}).wheel().decelerate().clamp({direction:"all",underflow:"center"}).setZoom(-10).clampZoom({minScale:1.04*t.screenWidth/(t.worldWidth/2),maxScale:3}),s},applyProps(t,e,n){Object.keys(n).forEach(r=>{r!=="app"&&r!=="viewportRef"&&r!=="children"&&e[r]!==n[r]&&(t[r]=n[r])})}}),Hs="1.19.2";var y$=Object.defineProperty,v$=(t,e,n)=>e in t?y$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oC=(t,e,n)=>v$(t,typeof e!="symbol"?e+"":e,n);const x$="color:rgb(0, 145, 255)";function Kk(t){switch(t){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}class _${constructor(e){oC(this,"_onLogLineFuncs"),oC(this,"_verbose"),this._onLogLineFuncs={},this._verbose=e.verbose}addLogLineListener(e){let n=Math.random().toString(36).substring(2,15);for(let r=0;r<10&&this._onLogLineFuncs[n]!==void 0;r++)n=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[n]=e,()=>{delete this._onLogLineFuncs[n]}}logVerbose(...e){if(this._verbose)for(const n of Object.values(this._onLogLineFuncs))n("debug",`${new Date().toISOString()}`,...e)}log(...e){for(const n of Object.values(this._onLogLineFuncs))n("info",...e)}warn(...e){for(const n of Object.values(this._onLogLineFuncs))n("warn",...e)}error(...e){for(const n of Object.values(this._onLogLineFuncs))n("error",...e)}}function Zk(t){const e=new _$(t);return e.addLogLineListener((n,...r)=>{switch(n){case"debug":console.debug(...r);break;case"info":console.log(...r);break;case"warn":console.warn(...r);break;case"error":console.error(...r);break;default:console.log(...r)}}),e}function ty(t,e,n,r,i){const s=Kk(n);if(typeof i=="object"&&(i=`ConvexError ${JSON.stringify(i.errorData,null,2)}`),e==="info"){const o=i.match(/^\[.*?\] /);if(o===null){t.error(`[CONVEX ${s}(${r})] Could not parse console.log`);return}const a=i.slice(1,o[0].length-2),u=i.slice(o[0].length);t.log(`%c[CONVEX ${s}(${r})] [${a}]`,x$,u)}else t.error(`[CONVEX ${s}(${r})] ${i}`)}function w$(t,e){const n=`[CONVEX FATAL ERROR] ${e}`;return t.error(n),new Error(n)}function Pc(t,e,n){return`[CONVEX ${Kk(t)}(${e})] ${n.errorMessage}
  Called by client`}function y_(t,e){return e.data=t.errorData,e}function ny(t){const e=t.split(":");let n,r;return e.length===1?(n=e[0],r="default"):(n=e.slice(0,e.length-1).join(":"),r=e[e.length-1]),n.endsWith(".js")&&(n=n.slice(0,-3)),`${n}:${r}`}function fu(t,e){return JSON.stringify({udfPath:ny(t),args:Wt(e)})}var b$=Object.defineProperty,S$=(t,e,n)=>e in t?b$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bo=(t,e,n)=>S$(t,typeof e!="symbol"?e+"":e,n);class E${constructor(){bo(this,"nextQueryId"),bo(this,"querySetVersion"),bo(this,"querySet"),bo(this,"queryIdToToken"),bo(this,"identityVersion"),bo(this,"auth"),bo(this,"outstandingQueriesOlderThanRestart"),bo(this,"outstandingAuthOlderThanRestart"),bo(this,"paused"),bo(this,"pendingQuerySetModifications"),this.nextQueryId=0,this.querySetVersion=0,this.identityVersion=0,this.querySet=new Map,this.queryIdToToken=new Map,this.outstandingQueriesOlderThanRestart=new Set,this.outstandingAuthOlderThanRestart=!1,this.paused=!1,this.pendingQuerySetModifications=new Map}hasSyncedPastLastReconnect(){return this.outstandingQueriesOlderThanRestart.size===0&&!this.outstandingAuthOlderThanRestart}markAuthCompletion(){this.outstandingAuthOlderThanRestart=!1}subscribe(e,n,r,i){const s=ny(e),o=fu(s,n),a=this.querySet.get(o);if(a!==void 0)return a.numSubscribers+=1,{queryToken:o,modification:null,unsubscribe:()=>this.removeSubscriber(o)};{const u=this.nextQueryId++,h={id:u,canonicalizedUdfPath:s,args:n,numSubscribers:1,journal:r,componentPath:i};this.querySet.set(o,h),this.queryIdToToken.set(u,o);const d=this.querySetVersion,p=this.querySetVersion+1,f={type:"Add",queryId:u,udfPath:s,args:[Wt(n)],journal:r,componentPath:i};return this.paused?this.pendingQuerySetModifications.set(u,f):this.querySetVersion=p,{queryToken:o,modification:{type:"ModifyQuerySet",baseVersion:d,newVersion:p,modifications:[f]},unsubscribe:()=>this.removeSubscriber(o)}}}transition(e){for(const n of e.modifications)switch(n.type){case"QueryUpdated":case"QueryFailed":{this.outstandingQueriesOlderThanRestart.delete(n.queryId);const r=n.journal;if(r!==void 0){const i=this.queryIdToToken.get(n.queryId);i!==void 0&&(this.querySet.get(i).journal=r)}break}case"QueryRemoved":{this.outstandingQueriesOlderThanRestart.delete(n.queryId);break}default:throw new Error(`Invalid modification ${n.type}`)}}queryId(e,n){const r=ny(e),i=fu(r,n),s=this.querySet.get(i);return s!==void 0?s.id:null}isCurrentOrNewerAuthVersion(e){return e>=this.identityVersion}setAuth(e){this.auth={tokenType:"User",value:e};const n=this.identityVersion;return this.paused||(this.identityVersion=n+1),{type:"Authenticate",baseVersion:n,...this.auth}}setAdminAuth(e,n){const r={tokenType:"Admin",value:e,impersonating:n};this.auth=r;const i=this.identityVersion;return this.paused||(this.identityVersion=i+1),{type:"Authenticate",baseVersion:i,...r}}clearAuth(){this.auth=void 0,this.markAuthCompletion();const e=this.identityVersion;return this.paused||(this.identityVersion=e+1),{type:"Authenticate",tokenType:"None",baseVersion:e}}hasAuth(){return!!this.auth}isNewAuth(e){var n;return((n=this.auth)==null?void 0:n.value)!==e}queryPath(e){const n=this.queryIdToToken.get(e);return n?this.querySet.get(n).canonicalizedUdfPath:null}queryArgs(e){const n=this.queryIdToToken.get(e);return n?this.querySet.get(n).args:null}queryToken(e){return this.queryIdToToken.get(e)??null}queryJournal(e){var n;return(n=this.querySet.get(e))==null?void 0:n.journal}restart(e){this.unpause(),this.outstandingQueriesOlderThanRestart.clear();const n=[];for(const s of this.querySet.values()){const o={type:"Add",queryId:s.id,udfPath:s.canonicalizedUdfPath,args:[Wt(s.args)],journal:s.journal,componentPath:s.componentPath};n.push(o),e.has(s.id)||this.outstandingQueriesOlderThanRestart.add(s.id)}this.querySetVersion=1;const r={type:"ModifyQuerySet",baseVersion:0,newVersion:1,modifications:n};if(!this.auth)return this.identityVersion=0,[r,void 0];this.outstandingAuthOlderThanRestart=!0;const i={type:"Authenticate",baseVersion:0,...this.auth};return this.identityVersion=1,[r,i]}pause(){this.paused=!0}resume(){const e=this.pendingQuerySetModifications.size>0?{type:"ModifyQuerySet",baseVersion:this.querySetVersion,newVersion:++this.querySetVersion,modifications:Array.from(this.pendingQuerySetModifications.values())}:void 0,n=this.auth!==void 0?{type:"Authenticate",baseVersion:this.identityVersion++,...this.auth}:void 0;return this.unpause(),[e,n]}unpause(){this.paused=!1,this.pendingQuerySetModifications.clear()}removeSubscriber(e){const n=this.querySet.get(e);if(n.numSubscribers>1)return n.numSubscribers-=1,null;{this.querySet.delete(e),this.queryIdToToken.delete(n.id),this.outstandingQueriesOlderThanRestart.delete(n.id);const r=this.querySetVersion,i=this.querySetVersion+1,s={type:"Remove",queryId:n.id};return this.paused?this.pendingQuerySetModifications.has(n.id)?this.pendingQuerySetModifications.delete(n.id):this.pendingQuerySetModifications.set(n.id,s):this.querySetVersion=i,{type:"ModifyQuerySet",baseVersion:r,newVersion:i,modifications:[s]}}}}var T$=Object.defineProperty,C$=(t,e,n)=>e in t?T$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aC=(t,e,n)=>C$(t,typeof e!="symbol"?e+"":e,n);class A${constructor(e){this.logger=e,aC(this,"inflightRequests"),aC(this,"requestsOlderThanRestart"),this.inflightRequests=new Map,this.requestsOlderThanRestart=new Set}request(e,n){return new Promise(i=>{const s=n?"Requested":"NotSent";this.inflightRequests.set(e.requestId,{message:e,status:{status:s,requestedAt:new Date,onResult:i}})})}onResponse(e){const n=this.inflightRequests.get(e.requestId);if(n===void 0||n.status.status==="Completed")return null;const r=n.message.type==="Mutation"?"mutation":"action",i=n.message.udfPath;for(const u of e.logLines)ty(this.logger,"info",r,i,u);const s=n.status;let o,a;if(e.success)o={success:!0,logLines:e.logLines,value:Fr(e.result)},a=()=>s.onResult(o);else{const u=e.result,{errorData:h}=e;ty(this.logger,"error",r,i,u),o={success:!1,errorMessage:u,errorData:h!==void 0?Fr(h):void 0,logLines:e.logLines},a=()=>s.onResult(o)}return e.type==="ActionResponse"||!e.success?(a(),this.inflightRequests.delete(e.requestId),this.requestsOlderThanRestart.delete(e.requestId),{requestId:e.requestId,result:o}):(n.status={status:"Completed",result:o,ts:e.ts,onResolve:a},null)}removeCompleted(e){const n=new Map;for(const[r,i]of this.inflightRequests.entries()){const s=i.status;s.status==="Completed"&&s.ts.lessThanOrEqual(e)&&(s.onResolve(),n.set(r,s.result),this.inflightRequests.delete(r),this.requestsOlderThanRestart.delete(r))}return n}restart(){this.requestsOlderThanRestart=new Set(this.inflightRequests.keys());const e=[];for(const[n,r]of this.inflightRequests){if(r.status.status==="NotSent"){r.status.status="Requested",e.push(r.message);continue}if(r.message.type==="Mutation")e.push(r.message);else{if(this.inflightRequests.delete(n),this.requestsOlderThanRestart.delete(n),r.status.status==="Completed")throw new Error("Action should never be in 'Completed' state");r.status.onResult({success:!1,errorMessage:"Connection lost while action was in flight",logLines:[]})}}return e}resume(){const e=[];for(const[,n]of this.inflightRequests)if(n.status.status==="NotSent"){n.status.status="Requested",e.push(n.message);continue}return e}hasIncompleteRequests(){for(const e of this.inflightRequests.values())if(e.status.status==="Requested")return!0;return!1}hasInflightRequests(){return this.inflightRequests.size>0}hasSyncedPastLastReconnect(){return this.requestsOlderThanRestart.size===0}timeOfOldestInflightRequest(){if(this.inflightRequests.size===0)return null;let e=Date.now();for(const n of this.inflightRequests.values())n.status.status!=="Completed"&&n.status.requestedAt.getTime()<e&&(e=n.status.requestedAt.getTime());return new Date(e)}}const Pf=Symbol.for("functionName"),I$=Symbol.for("toReferencePath");function P$(t){return t[I$]??null}function k$(t){return t.startsWith("function://")}function Jy(t){let e;if(typeof t=="string")k$(t)?e={functionHandle:t}:e={name:t};else if(t[Pf])e={name:t[Pf]};else{const n=P$(t);if(!n)throw new Error(`${t} is not a functionReference`);e={reference:n}}return e}function ki(t){const e=Jy(t);if(e.name===void 0)throw e.functionHandle!==void 0?new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${e.functionHandle}`):e.reference!==void 0?new Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${e.reference}`):new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(e)}`);if(typeof t=="string")return t;const n=t[Pf];if(!n)throw new Error(`${t} is not a functionReference`);return n}function Jk(t){return{[Pf]:t}}function eR(t=[]){const e={get(n,r){if(typeof r=="string"){const i=[...t,r];return eR(i)}else if(r===Pf){if(t.length<2){const o=["api",...t].join(".");throw new Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${o}\``)}const i=t.slice(0,-1).join("/"),s=t[t.length-1];return s==="default"?i:i+":"+s}else return r===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},e)}const R$=eR();var M$=Object.defineProperty,O$=(t,e,n)=>e in t?M$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ry=(t,e,n)=>O$(t,typeof e!="symbol"?e+"":e,n);class kf{constructor(e){ry(this,"queryResults"),ry(this,"modifiedQueries"),this.queryResults=e,this.modifiedQueries=[]}getQuery(e,...n){const r=rs(n[0]),i=ki(e),s=this.queryResults.get(fu(i,r));if(s!==void 0)return kf.queryValue(s.result)}getAllQueries(e){const n=[],r=ki(e);for(const i of this.queryResults.values())i.udfPath===ny(r)&&n.push({args:i.args,value:kf.queryValue(i.result)});return n}setQuery(e,n,r){const i=rs(n),s=ki(e),o=fu(s,i);let a;r===void 0?a=void 0:a={success:!0,value:r,logLines:[]};const u={udfPath:s,args:i,result:a};this.queryResults.set(o,u),this.modifiedQueries.push(o)}static queryValue(e){if(e!==void 0)return e.success?e.value:void 0}}class N${constructor(){ry(this,"queryResults"),ry(this,"optimisticUpdates"),this.queryResults=new Map,this.optimisticUpdates=[]}ingestQueryResultsFromServer(e,n){this.optimisticUpdates=this.optimisticUpdates.filter(o=>!n.has(o.mutationId));const r=this.queryResults;this.queryResults=new Map(e);const i=new kf(this.queryResults);for(const o of this.optimisticUpdates)o.update(i);const s=[];for(const[o,a]of this.queryResults){const u=r.get(o);(u===void 0||u.result!==a.result)&&s.push(o)}return s}applyOptimisticUpdate(e,n){this.optimisticUpdates.push({update:e,mutationId:n});const r=new kf(this.queryResults);return e(r),r.modifiedQueries}queryResult(e){const n=this.queryResults.get(e);if(n===void 0)return;const r=n.result;if(r!==void 0){if(r.success)return r.value;throw r.errorData!==void 0?y_(r,new If(Pc("query",n.udfPath,r))):new Error(Pc("query",n.udfPath,r))}}hasQueryResult(e){return this.queryResults.get(e)!==void 0}queryLogs(e){var r;const n=this.queryResults.get(e);return(r=n==null?void 0:n.result)==null?void 0:r.logLines}}var D$=Object.defineProperty,L$=(t,e,n)=>e in t?D$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_1=(t,e,n)=>L$(t,typeof e!="symbol"?e+"":e,n);class Ai{constructor(e,n){_1(this,"low"),_1(this,"high"),_1(this,"__isUnsignedLong__"),this.low=e|0,this.high=n|0,this.__isUnsignedLong__=!0}static isLong(e){return(e&&e.__isUnsignedLong__)===!0}static fromBytesLE(e){return new Ai(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24)}toBytesLE(){const e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}static fromNumber(e){return isNaN(e)||e<0?lC:e>=F$?B$:new Ai(e%Vd|0,e/Vd|0)}toString(){return(BigInt(this.high)*BigInt(Vd)+BigInt(this.low)).toString()}equals(e){return Ai.isLong(e)||(e=Ai.fromValue(e)),this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}notEquals(e){return!this.equals(e)}comp(e){return Ai.isLong(e)||(e=Ai.fromValue(e)),this.equals(e)?0:e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1}lessThanOrEqual(e){return this.comp(e)<=0}static fromValue(e){return typeof e=="number"?Ai.fromNumber(e):new Ai(e.low,e.high)}}const lC=new Ai(0,0),uC=65536,Vd=uC*uC,F$=Vd*Vd,B$=new Ai(-1,-1);var U$=Object.defineProperty,z$=(t,e,n)=>e in t?U$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lm=(t,e,n)=>z$(t,typeof e!="symbol"?e+"":e,n);class cC{constructor(e,n){Lm(this,"version"),Lm(this,"remoteQuerySet"),Lm(this,"queryPath"),Lm(this,"logger"),this.version={querySet:0,ts:Ai.fromNumber(0),identity:0},this.remoteQuerySet=new Map,this.queryPath=e,this.logger=n}transition(e){const n=e.startVersion;if(this.version.querySet!==n.querySet||this.version.ts.notEquals(n.ts)||this.version.identity!==n.identity)throw new Error(`Invalid start version: ${n.ts.toString()}:${n.querySet}`);for(const r of e.modifications)switch(r.type){case"QueryUpdated":{const i=this.queryPath(r.queryId);if(i)for(const o of r.logLines)ty(this.logger,"info","query",i,o);const s=Fr(r.value??null);this.remoteQuerySet.set(r.queryId,{success:!0,value:s,logLines:r.logLines});break}case"QueryFailed":{const i=this.queryPath(r.queryId);if(i)for(const o of r.logLines)ty(this.logger,"info","query",i,o);const{errorData:s}=r;this.remoteQuerySet.set(r.queryId,{success:!1,errorMessage:r.errorMessage,errorData:s!==void 0?Fr(s):void 0,logLines:r.logLines});break}case"QueryRemoved":{this.remoteQuerySet.delete(r.queryId);break}default:throw new Error(`Invalid modification ${r.type}`)}this.version=e.endVersion}remoteQueryResults(){return this.remoteQuerySet}timestamp(){return this.version.ts}}function w1(t){const e=Tf(t);return Ai.fromBytesLE(Array.from(e))}function $$(t){const e=new Uint8Array(t.toBytesLE());return Cf(e)}function H$(t){switch(t.type){case"FatalError":case"AuthError":case"ActionResponse":case"Ping":return{...t};case"MutationResponse":return t.success?{...t,ts:w1(t.ts)}:{...t};case"Transition":return{...t,startVersion:{...t.startVersion,ts:w1(t.startVersion.ts)},endVersion:{...t.endVersion,ts:w1(t.endVersion.ts)}}}}function j$(t){switch(t.type){case"Authenticate":case"ModifyQuerySet":case"Mutation":case"Action":case"Event":return{...t};case"Connect":return t.maxObservedTimestamp!==void 0?{...t,maxObservedTimestamp:$$(t.maxObservedTimestamp)}:{...t,maxObservedTimestamp:void 0}}}var W$=Object.defineProperty,G$=(t,e,n)=>e in t?W$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ii=(t,e,n)=>G$(t,typeof e!="symbol"?e+"":e,n);const V$=1e3,X$=1001,q$=1005,Y$=4040;class Q${constructor(e,n,r,i){ii(this,"socket"),ii(this,"connectionCount"),ii(this,"lastCloseReason"),ii(this,"initialBackoff"),ii(this,"maxBackoff"),ii(this,"retries"),ii(this,"serverInactivityThreshold"),ii(this,"reconnectDueToServerInactivityTimeout"),ii(this,"uri"),ii(this,"onOpen"),ii(this,"onResume"),ii(this,"onMessage"),ii(this,"webSocketConstructor"),ii(this,"logger"),this.webSocketConstructor=r,this.socket={state:"disconnected"},this.connectionCount=0,this.lastCloseReason="InitialConnect",this.initialBackoff=100,this.maxBackoff=16e3,this.retries=0,this.serverInactivityThreshold=3e4,this.reconnectDueToServerInactivityTimeout=null,this.uri=e,this.onOpen=n.onOpen,this.onResume=n.onResume,this.onMessage=n.onMessage,this.logger=i,this.connect()}connect(){if(this.socket.state==="terminated")return;if(this.socket.state!=="disconnected"&&this.socket.state!=="stopped")throw new Error("Didn't start connection from disconnected state: "+this.socket.state);const e=new this.webSocketConstructor(this.uri);this._logVerbose("constructed WebSocket"),this.socket={state:"connecting",ws:e,paused:"no"},this.resetServerInactivityTimeout(),e.onopen=()=>{if(this.logger.logVerbose("begin ws.onopen"),this.socket.state!=="connecting")throw new Error("onopen called with socket not in connecting state");this.socket={state:"ready",ws:e,paused:this.socket.paused==="yes"?"uninitialized":"no"},this.resetServerInactivityTimeout(),this.socket.paused==="no"&&this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason}),this.lastCloseReason!=="InitialConnect"&&this.logger.log("WebSocket reconnected"),this.connectionCount+=1,this.lastCloseReason=null},e.onerror=n=>{const r=n.message;this.logger.log(`WebSocket error: ${r}`)},e.onmessage=n=>{this.resetServerInactivityTimeout();const r=H$(JSON.parse(n.data));this._logVerbose(`received ws message with type ${r.type}`),this.onMessage(r).hasSyncedPastLastReconnect&&(this.retries=0)},e.onclose=n=>{if(this._logVerbose("begin ws.onclose"),this.lastCloseReason===null&&(this.lastCloseReason=n.reason??"OnCloseInvoked"),n.code!==V$&&n.code!==X$&&n.code!==q$&&n.code!==Y$){let r=`WebSocket closed with code ${n.code}`;n.reason&&(r+=`: ${n.reason}`),this.logger.log(r)}this.scheduleReconnect()}}socketState(){return this.socket.state}sendMessage(e){if(this._logVerbose(`sending message with type ${e.type}`),this.socket.state==="ready"&&this.socket.paused==="no"){const n=j$(e),r=JSON.stringify(n);try{this.socket.ws.send(r)}catch(i){this.logger.log(`Failed to send message on WebSocket, reconnecting: ${i}`),this.closeAndReconnect("FailedToSendMessage")}return!0}return!1}resetServerInactivityTimeout(){this.socket.state!=="terminated"&&(this.reconnectDueToServerInactivityTimeout!==null&&(clearTimeout(this.reconnectDueToServerInactivityTimeout),this.reconnectDueToServerInactivityTimeout=null),this.reconnectDueToServerInactivityTimeout=setTimeout(()=>{this.closeAndReconnect("InactiveServer")},this.serverInactivityThreshold))}scheduleReconnect(){this.socket={state:"disconnected"};const e=this.nextBackoff();this.logger.log(`Attempting reconnect in ${e}ms`),setTimeout(()=>this.connect(),e)}closeAndReconnect(e){switch(this._logVerbose(`begin closeAndReconnect with reason ${e}`),this.socket.state){case"disconnected":case"terminated":case"stopped":return;case"connecting":case"ready":{this.lastCloseReason=e,this.close(),this.scheduleReconnect();return}default:this.socket}}close(){switch(this.socket.state){case"disconnected":case"terminated":case"stopped":return Promise.resolve();case"connecting":{const e=this.socket.ws;return new Promise(n=>{e.onclose=()=>{this._logVerbose("Closed after connecting"),n()},e.onopen=()=>{this._logVerbose("Opened after connecting"),e.close()}})}case"ready":{this._logVerbose("ws.close called");const e=this.socket.ws,n=new Promise(r=>{e.onclose=()=>{r()}});return e.close(),n}default:return this.socket,Promise.resolve()}}terminate(){switch(this.reconnectDueToServerInactivityTimeout&&clearTimeout(this.reconnectDueToServerInactivityTimeout),this.socket.state){case"terminated":case"stopped":case"disconnected":case"connecting":case"ready":{const e=this.close();return this.socket={state:"terminated"},e}default:throw this.socket,new Error(`Invalid websocket state: ${this.socket.state}`)}}stop(){switch(this.socket.state){case"terminated":return Promise.resolve();case"connecting":case"stopped":case"disconnected":case"ready":{const e=this.close();return this.socket={state:"stopped"},e}default:return this.socket,Promise.resolve()}}restart(){switch(this.socket.state){case"stopped":break;case"terminated":return;case"connecting":case"ready":case"disconnected":throw new Error("`restart()` is only valid after `stop()`");default:this.socket}this.connect()}pause(){switch(this.socket.state){case"disconnected":case"stopped":case"terminated":return;case"connecting":case"ready":{this.socket={...this.socket,paused:"yes"};return}default:{this.socket;return}}}resume(){switch(this.socket.state){case"connecting":this.socket={...this.socket,paused:"no"};return;case"ready":this.socket.paused==="uninitialized"?(this.socket={...this.socket,paused:"no"},this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason})):this.socket.paused==="yes"&&(this.socket={...this.socket,paused:"no"},this.onResume());return;case"terminated":case"stopped":case"disconnected":return;default:this.socket}this.connect()}_logVerbose(e){this.logger.logVerbose(e)}nextBackoff(){const e=this.initialBackoff*Math.pow(2,this.retries);this.retries+=1;const n=Math.min(e,this.maxBackoff),r=n*(Math.random()-.5);return n+r}}function K$(){return Z$()}function Z$(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function v_(t){this.message=t}v_.prototype=new Error,v_.prototype.name="InvalidCharacterError";var hC=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new v_("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,s=0,o="";r=e.charAt(s++);~r&&(n=i%4?64*n+r:r,i++%4)?o+=String.fromCharCode(255&n>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return o};function J$(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(n){return decodeURIComponent(hC(n).replace(/(.)/g,function(r,i){var s=i.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}(e)}catch{return hC(e)}}function iy(t){this.message=t}function e7(t,e){if(typeof t!="string")throw new iy("Invalid token specified");var n=(e=e||{}).header===!0?0:1;try{return JSON.parse(J$(t.split(".")[n]))}catch(r){throw new iy("Invalid token specified: "+r.message)}}iy.prototype=new Error,iy.prototype.name="InvalidTokenError";var t7=Object.defineProperty,n7=(t,e,n)=>e in t?t7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xs=(t,e,n)=>n7(t,typeof e!="symbol"?e+"":e,n);const r7=20*24*60*60*1e3;class i7{constructor(e,n,r){xs(this,"authState",{state:"noAuth"}),xs(this,"configVersion",0),xs(this,"syncState"),xs(this,"authenticate"),xs(this,"stopSocket"),xs(this,"restartSocket"),xs(this,"pauseSocket"),xs(this,"resumeSocket"),xs(this,"clearAuth"),xs(this,"logger"),xs(this,"refreshTokenLeewaySeconds"),this.syncState=e,this.authenticate=n.authenticate,this.stopSocket=n.stopSocket,this.restartSocket=n.restartSocket,this.pauseSocket=n.pauseSocket,this.resumeSocket=n.resumeSocket,this.clearAuth=n.clearAuth,this.logger=r.logger,this.refreshTokenLeewaySeconds=r.refreshTokenLeewaySeconds}async setConfig(e,n){this.resetAuthState(),this._logVerbose("pausing WS for auth token fetch"),this.pauseSocket();const r=await this.fetchTokenAndGuardAgainstRace(e,{forceRefreshToken:!1});r.isFromOutdatedConfig||(r.value?(this.setAuthState({state:"waitingForServerConfirmationOfCachedToken",config:{fetchToken:e,onAuthChange:n},hasRetried:!1}),this.authenticate(r.value),this._logVerbose("resuming WS after auth token fetch"),this.resumeSocket()):(this.setAuthState({state:"initialRefetch",config:{fetchToken:e,onAuthChange:n}}),await this.refetchToken()))}onTransition(e){if(this.syncState.isCurrentOrNewerAuthVersion(e.endVersion.identity)&&!(e.endVersion.identity<=e.startVersion.identity)){if(this.authState.state==="waitingForServerConfirmationOfCachedToken"){this._logVerbose("server confirmed auth token is valid"),this.refetchToken(),this.authState.config.onAuthChange(!0);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this._logVerbose("server confirmed new auth token is valid"),this.scheduleTokenRefetch(this.authState.token),this.authState.hadAuth||this.authState.config.onAuthChange(!0))}}onAuthError(e){const{baseVersion:n}=e;if(n!=null){if(!this.syncState.isCurrentOrNewerAuthVersion(n+1)){this._logVerbose("ignoring auth error for previous auth attempt");return}this.tryToReauthenticate(e);return}this.tryToReauthenticate(e)}async tryToReauthenticate(e){if(this.authState.state==="noAuth"||this.authState.state==="waitingForServerConfirmationOfFreshToken"){this.logger.error(`Failed to authenticate: "${e.error}", check your server auth config`),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.authState.state!=="noAuth"&&this.setAndReportAuthFailed(this.authState.config.onAuthChange);return}this._logVerbose("attempting to reauthenticate"),await this.stopSocket();const n=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});n.isFromOutdatedConfig||(n.value&&this.syncState.isNewAuth(n.value)?(this.authenticate(n.value),this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",config:this.authState.config,token:n.value,hadAuth:this.authState.state==="notRefetching"||this.authState.state==="waitingForScheduledRefetch"})):(this._logVerbose("reauthentication failed, could not fetch a new token"),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this.restartSocket())}async refetchToken(){if(this.authState.state==="noAuth")return;this._logVerbose("refetching auth token");const e=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});e.isFromOutdatedConfig||(e.value?this.syncState.isNewAuth(e.value)?(this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",hadAuth:this.syncState.hasAuth(),token:e.value,config:this.authState.config}),this.authenticate(e.value)):this.setAuthState({state:"notRefetching",config:this.authState.config}):(this._logVerbose("refetching token failed"),this.syncState.hasAuth()&&this.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this._logVerbose("resuming WS after auth token fetch (if currently paused)"),this.resumeSocket())}scheduleTokenRefetch(e){if(this.authState.state==="noAuth")return;const n=this.decodeToken(e);if(!n){this.logger.error("Auth token is not a valid JWT, cannot refetch the token");return}const{iat:r,exp:i}=n;if(!r||!i){this.logger.error("Auth token does not have required fields, cannot refetch the token");return}const s=i-r;if(s<=2){this.logger.error("Auth token does not live long enough, cannot refetch the token");return}let o=Math.min(r7,(s-this.refreshTokenLeewaySeconds)*1e3);o<=0&&(this.logger.warn(`Refetching auth token immediately, configured leeway ${this.refreshTokenLeewaySeconds}s is larger than the token's lifetime ${s}s`),o=0);const a=setTimeout(()=>{this.refetchToken()},o);this.setAuthState({state:"waitingForScheduledRefetch",refetchTokenTimeoutId:a,config:this.authState.config}),this._logVerbose(`scheduled preemptive auth token refetching in ${o}ms`)}async fetchTokenAndGuardAgainstRace(e,n){const r=++this.configVersion,i=await e(n);return this.configVersion!==r?{isFromOutdatedConfig:!0}:{isFromOutdatedConfig:!1,value:i}}stop(){this.resetAuthState(),this.configVersion++}setAndReportAuthFailed(e){e(!1),this.resetAuthState()}resetAuthState(){this.setAuthState({state:"noAuth"})}setAuthState(e){this.authState.state==="waitingForScheduledRefetch"&&(clearTimeout(this.authState.refetchTokenTimeoutId),this.syncState.markAuthCompletion()),this.authState=e}decodeToken(e){try{return e7(e)}catch(n){return this._logVerbose(`Error decoding token: ${n instanceof Error?n.message:"Unknown error"}`),null}}_logVerbose(e){this.logger.logVerbose(`${e} [v${this.configVersion}]`)}}const s7=["convexClientConstructed","convexWebSocketOpen","convexFirstMessageReceived"];function o7(t,e){const n={sessionId:e};typeof performance>"u"||!performance.mark||performance.mark(t,{detail:n})}function a7(t){let e=t.name.slice(6);return e=e.charAt(0).toLowerCase()+e.slice(1),{name:e,startTime:t.startTime}}function l7(t){if(typeof performance>"u"||!performance.getEntriesByName)return[];const e=[];for(const n of s7){const r=performance.getEntriesByName(n).filter(i=>i.entryType==="mark").filter(i=>i.detail.sessionId===t);e.push(...r)}return e.map(a7)}var u7=Object.defineProperty,c7=(t,e,n)=>e in t?u7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pr=(t,e,n)=>c7(t,typeof e!="symbol"?e+"":e,n);class h7{constructor(e,n,r){if(Pr(this,"address"),Pr(this,"state"),Pr(this,"requestManager"),Pr(this,"webSocketManager"),Pr(this,"authenticationManager"),Pr(this,"remoteQuerySet"),Pr(this,"optimisticQueryResults"),Pr(this,"_transitionHandlerCounter",0),Pr(this,"_nextRequestId"),Pr(this,"_onTransitionFns",new Map),Pr(this,"_sessionId"),Pr(this,"firstMessageReceived",!1),Pr(this,"debug"),Pr(this,"logger"),Pr(this,"maxObservedTimestamp"),Pr(this,"mark",f=>{this.debug&&o7(f,this.sessionId)}),typeof e=="object")throw new Error("Passing a ClientConfig object is no longer supported. Pass the URL of the Convex deployment as a string directly.");(r==null?void 0:r.skipConvexDeploymentUrlCheck)!==!0&&Rz(e),r={...r};const i=r.authRefreshTokenLeewaySeconds??2;let s=r.webSocketConstructor;if(!s&&typeof WebSocket>"u")throw new Error("No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient");s=s||WebSocket,this.debug=r.reportDebugInfoToConvex??!1,this.address=e,this.logger=r.logger??Zk({verbose:r.verbose??!1});const o=e.search("://");if(o===-1)throw new Error("Provided address was not an absolute URL.");const a=e.substring(o+3),u=e.substring(0,o);let h;if(u==="http")h="ws";else if(u==="https")h="wss";else throw new Error(`Unknown parent protocol ${u}`);const d=`${h}://${a}/api/${Hs}/sync`;this.state=new E$,this.remoteQuerySet=new cC(f=>this.state.queryPath(f),this.logger),this.requestManager=new A$(this.logger),this.authenticationManager=new i7(this.state,{authenticate:f=>{const g=this.state.setAuth(f);this.webSocketManager.sendMessage(g)},stopSocket:()=>this.webSocketManager.stop(),restartSocket:()=>this.webSocketManager.restart(),pauseSocket:()=>{this.webSocketManager.pause(),this.state.pause()},resumeSocket:()=>this.webSocketManager.resume(),clearAuth:()=>{this.clearAuth()}},{logger:this.logger,refreshTokenLeewaySeconds:i}),this.optimisticQueryResults=new N$,this.addOnTransitionHandler(f=>{n(f.queries.map(g=>g.token))}),this._nextRequestId=0,this._sessionId=K$();const{unsavedChangesWarning:p}=r;if(typeof window>"u"||typeof window.addEventListener>"u"){if(p===!0)throw new Error("unsavedChangesWarning requested, but window.addEventListener not found! Remove {unsavedChangesWarning: true} from Convex client options.")}else p!==!1&&window.addEventListener("beforeunload",f=>{if(this.requestManager.hasIncompleteRequests()){f.preventDefault();const g="Are you sure you want to leave? Your changes may not be saved.";return(f||window.event).returnValue=g,g}});this.webSocketManager=new Q$(d,{onOpen:f=>{this.mark("convexWebSocketOpen"),this.webSocketManager.sendMessage({...f,type:"Connect",sessionId:this._sessionId,maxObservedTimestamp:this.maxObservedTimestamp});const g=new Set(this.remoteQuerySet.remoteQueryResults().keys());this.remoteQuerySet=new cC(C=>this.state.queryPath(C),this.logger);const[v,w]=this.state.restart(g);w&&this.webSocketManager.sendMessage(w),this.webSocketManager.sendMessage(v);for(const C of this.requestManager.restart())this.webSocketManager.sendMessage(C)},onResume:()=>{const[f,g]=this.state.resume();g&&this.webSocketManager.sendMessage(g),f&&this.webSocketManager.sendMessage(f);for(const v of this.requestManager.resume())this.webSocketManager.sendMessage(v)},onMessage:f=>{switch(this.firstMessageReceived||(this.firstMessageReceived=!0,this.mark("convexFirstMessageReceived"),this.reportMarks()),f.type){case"Transition":{this.observedTimestamp(f.endVersion.ts),this.authenticationManager.onTransition(f),this.remoteQuerySet.transition(f),this.state.transition(f);const g=this.requestManager.removeCompleted(this.remoteQuerySet.timestamp());this.notifyOnQueryResultChanges(g);break}case"MutationResponse":{f.success&&this.observedTimestamp(f.ts);const g=this.requestManager.onResponse(f);g!==null&&this.notifyOnQueryResultChanges(new Map([[g.requestId,g.result]]));break}case"ActionResponse":{this.requestManager.onResponse(f);break}case"AuthError":{this.authenticationManager.onAuthError(f);break}case"FatalError":{const g=w$(this.logger,f.error);throw this.webSocketManager.terminate(),g}}return{hasSyncedPastLastReconnect:this.hasSyncedPastLastReconnect()}}},s,this.logger),this.mark("convexClientConstructed")}hasSyncedPastLastReconnect(){return this.requestManager.hasSyncedPastLastReconnect()||this.state.hasSyncedPastLastReconnect()}observedTimestamp(e){(this.maxObservedTimestamp===void 0||this.maxObservedTimestamp.lessThanOrEqual(e))&&(this.maxObservedTimestamp=e)}getMaxObservedTimestamp(){return this.maxObservedTimestamp}notifyOnQueryResultChanges(e){const n=this.remoteQuerySet.remoteQueryResults(),r=new Map;for(const[s,o]of n){const a=this.state.queryToken(s);if(a!==null){const u={result:o,udfPath:this.state.queryPath(s),args:this.state.queryArgs(s)};r.set(a,u)}}const i=this.optimisticQueryResults.ingestQueryResultsFromServer(r,new Set(e.keys()));this.handleTransition({queries:i.map(s=>({token:s,modification:{kind:"Updated",result:r.get(s).result}})),reflectedMutations:Array.from(e).map(([s,o])=>({requestId:s,result:o})),timestamp:this.remoteQuerySet.timestamp()})}handleTransition(e){for(const n of this._onTransitionFns.values())n(e)}addOnTransitionHandler(e){const n=this._transitionHandlerCounter++;return this._onTransitionFns.set(n,e),()=>this._onTransitionFns.delete(n)}setAuth(e,n){this.authenticationManager.setConfig(e,n)}hasAuth(){return this.state.hasAuth()}setAdminAuth(e,n){const r=this.state.setAdminAuth(e,n);this.webSocketManager.sendMessage(r)}clearAuth(){const e=this.state.clearAuth();this.webSocketManager.sendMessage(e)}subscribe(e,n,r){const i=rs(n),{modification:s,queryToken:o,unsubscribe:a}=this.state.subscribe(e,i,r==null?void 0:r.journal,r==null?void 0:r.componentPath);return s!==null&&this.webSocketManager.sendMessage(s),{queryToken:o,unsubscribe:()=>{const u=a();u&&this.webSocketManager.sendMessage(u)}}}localQueryResult(e,n){const r=rs(n),i=fu(e,r);return this.optimisticQueryResults.queryResult(i)}localQueryResultByToken(e){return this.optimisticQueryResults.queryResult(e)}hasLocalQueryResultByToken(e){return this.optimisticQueryResults.hasQueryResult(e)}localQueryLogs(e,n){const r=rs(n),i=fu(e,r);return this.optimisticQueryResults.queryLogs(i)}queryJournal(e,n){const r=rs(n),i=fu(e,r);return this.state.queryJournal(i)}connectionState(){return{hasInflightRequests:this.requestManager.hasInflightRequests(),isWebSocketConnected:this.webSocketManager.socketState()==="ready",timeOfOldestInflightRequest:this.requestManager.timeOfOldestInflightRequest()}}async mutation(e,n,r){const i=await this.mutationInternal(e,n,r);if(!i.success)throw i.errorData!==void 0?y_(i,new If(Pc("mutation",e,i))):new Error(Pc("mutation",e,i));return i.value}async mutationInternal(e,n,r,i){const{mutationPromise:s}=this.enqueueMutation(e,n,r,i);return s}enqueueMutation(e,n,r,i){const s=rs(n);this.tryReportLongDisconnect();const o=this.nextRequestId;if(this._nextRequestId++,r!==void 0){const d=r.optimisticUpdate;if(d!==void 0){const p=v=>{d(v,s)},g=this.optimisticQueryResults.applyOptimisticUpdate(p,o).map(v=>{const w=this.localQueryResultByToken(v);return{token:v,modification:{kind:"Updated",result:w===void 0?void 0:{success:!0,value:w,logLines:[]}}}});this.handleTransition({queries:g,reflectedMutations:[],timestamp:this.remoteQuerySet.timestamp()})}}const a={type:"Mutation",requestId:o,udfPath:e,componentPath:i,args:[Wt(s)]},u=this.webSocketManager.sendMessage(a),h=this.requestManager.request(a,u);return{requestId:o,mutationPromise:h}}async action(e,n){const r=await this.actionInternal(e,n);if(!r.success)throw r.errorData!==void 0?y_(r,new If(Pc("action",e,r))):new Error(Pc("action",e,r));return r.value}async actionInternal(e,n,r){const i=rs(n),s=this.nextRequestId;this._nextRequestId++,this.tryReportLongDisconnect();const o={type:"Action",requestId:s,udfPath:e,componentPath:r,args:[Wt(i)]},a=this.webSocketManager.sendMessage(o);return this.requestManager.request(o,a)}async close(){return this.authenticationManager.stop(),this.webSocketManager.terminate()}get url(){return this.address}get nextRequestId(){return this._nextRequestId}get sessionId(){return this._sessionId}reportMarks(){if(this.debug){const e=l7(this.sessionId);this.webSocketManager.sendMessage({type:"Event",eventType:"ClientConnect",event:e})}}tryReportLongDisconnect(){if(!this.debug)return;const e=this.connectionState().timeOfOldestInflightRequest;if(e===null||Date.now()-e.getTime()<=60*1e3)return;const n=`${this.address}/api/debug_event`;fetch(n,{method:"POST",headers:{"Content-Type":"application/json","Convex-Client":`npm-${Hs}`},body:JSON.stringify({event:"LongWebsocketDisconnect"})}).then(r=>{r.ok||this.logger.warn("Analytics request failed with response:",r.body)}).catch(r=>{this.logger.warn("Analytics response failed with error:",r)})}}var d7=Object.defineProperty,f7=(t,e,n)=>e in t?d7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$a=(t,e,n)=>f7(t,typeof e!="symbol"?e+"":e,n);if(typeof it>"u")throw new Error("Required dependency 'react' not found");if(typeof RP>"u")throw new Error("Required dependency 'react-dom' not found");function tR(t,e,n){function r(i){return m7(i),e.mutation(t,i,{optimisticUpdate:n})}return r.withOptimisticUpdate=function(s){if(n!==void 0)throw new Error(`Already specified optimistic update for mutation ${ki(t)}`);return tR(t,e,s)},r}class p7{constructor(e,n){if($a(this,"address"),$a(this,"cachedSync"),$a(this,"listeners"),$a(this,"options"),$a(this,"closed",!1),$a(this,"_logger"),$a(this,"adminAuth"),$a(this,"fakeUserIdentity"),e===void 0)throw new Error("No address provided to ConvexReactClient.\nIf trying to deploy to production, make sure to follow all the instructions found at https://docs.convex.dev/production/hosting/\nIf running locally, make sure to run `convex dev` and ensure the .env.local file is populated.");if(typeof e!="string")throw new Error(`ConvexReactClient requires a URL like 'https://happy-otter-123.convex.cloud', received something of type ${typeof e} instead.`);if(!e.includes("://"))throw new Error("Provided address was not an absolute URL.");this.address=e,this.listeners=new Map,this._logger=(n==null?void 0:n.logger)??Zk({verbose:(n==null?void 0:n.verbose)??!1}),this.options={...n,logger:this._logger}}get sync(){if(this.closed)throw new Error("ConvexReactClient has already been closed.");return this.cachedSync?this.cachedSync:(this.cachedSync=new h7(this.address,e=>this.transition(e),this.options),this.adminAuth&&this.cachedSync.setAdminAuth(this.adminAuth,this.fakeUserIdentity),this.cachedSync)}setAuth(e,n){if(typeof e=="string")throw new Error("Passing a string to ConvexReactClient.setAuth is no longer supported, please upgrade to passing in an async function to handle reauthentication.");this.sync.setAuth(e,n??(()=>{}))}clearAuth(){this.sync.clearAuth()}setAdminAuth(e,n){if(this.adminAuth=e,this.fakeUserIdentity=n,this.closed)throw new Error("ConvexReactClient has already been closed.");this.cachedSync&&this.sync.setAdminAuth(e,n)}watchQuery(e,...n){const[r,i]=n,s=ki(e);return{onUpdate:o=>{const{queryToken:a,unsubscribe:u}=this.sync.subscribe(s,r,i),h=this.listeners.get(a);return h!==void 0?h.add(o):this.listeners.set(a,new Set([o])),()=>{if(this.closed)return;const d=this.listeners.get(a);d.delete(o),d.size===0&&this.listeners.delete(a),u()}},localQueryResult:()=>{if(this.cachedSync)return this.cachedSync.localQueryResult(s,r)},localQueryLogs:()=>{if(this.cachedSync)return this.cachedSync.localQueryLogs(s,r)},journal:()=>{if(this.cachedSync)return this.cachedSync.queryJournal(s,r)}}}mutation(e,...n){const[r,i]=n,s=ki(e);return this.sync.mutation(s,r,i)}action(e,...n){const r=ki(e);return this.sync.action(r,...n)}query(e,...n){const r=this.watchQuery(e,...n),i=r.localQueryResult();return i!==void 0?Promise.resolve(i):new Promise((s,o)=>{const a=r.onUpdate(()=>{a();try{s(r.localQueryResult())}catch(u){o(u)}})})}connectionState(){return this.sync.connectionState()}get logger(){return this._logger}async close(){if(this.closed=!0,this.listeners=new Map,this.cachedSync){const e=this.cachedSync;this.cachedSync=void 0,await e.close()}}transition(e){RP.unstable_batchedUpdates(()=>{for(const n of e){const r=this.listeners.get(n);if(r)for(const i of r)i()}})}}const xb=it.createContext(void 0);function e0(){return de.useContext(xb)}const nR=({client:t,children:e})=>it.createElement(xb.Provider,{value:t},e);function Br(t,...e){const n=e[0]==="skip",r=e[0]==="skip"?{}:rs(e[0]),i=typeof t=="string"?Jk(t):t,s=ki(i),o=de.useMemo(()=>n?{}:{query:{query:i,args:r}},[JSON.stringify(Wt(r)),s,n]),u=_7(o).query;if(u instanceof Error)throw u;return u}function ch(t){const e=typeof t=="string"?Jk(t):t,n=de.useContext(xb);if(n===void 0)throw new Error("Could not find Convex client! `useMutation` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return de.useMemo(()=>tR(e,n),[n,ki(e)])}function m7(t){if(typeof t=="object"&&t!==null&&"bubbles"in t&&"persist"in t&&"isDefaultPrevented"in t)throw new Error("Convex function called with SyntheticEvent object. Did you use a Convex function as an event handler directly? Event handlers like onClick receive an event object as their first argument. These SyntheticEvent objects are not valid Convex values. Try wrapping the function like `const handler = () => myMutation();` and using `handler` in the event handler.")}var g7=Object.defineProperty,y7=(t,e,n)=>e in t?g7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,b1=(t,e,n)=>y7(t,typeof e!="symbol"?e+"":e,n);class v7{constructor(e){b1(this,"createWatch"),b1(this,"queries"),b1(this,"listeners"),this.createWatch=e,this.queries={},this.listeners=new Set}setQueries(e){for(const n of Object.keys(e)){const{query:r,args:i}=e[n];if(ki(r),this.queries[n]===void 0)this.addQuery(n,r,i);else{const s=this.queries[n];(ki(r)!==ki(s.query)||JSON.stringify(Wt(i))!==JSON.stringify(Wt(s.args)))&&(this.removeQuery(n),this.addQuery(n,r,i))}}for(const n of Object.keys(this.queries))e[n]===void 0&&this.removeQuery(n)}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}getLocalResults(e){const n={};for(const r of Object.keys(e)){const{query:i,args:s}=e[r];ki(i);const o=this.createWatch(i,s);let a;try{a=o.localQueryResult()}catch(u){if(u instanceof Error)a=u;else throw u}n[r]=a}return n}setCreateWatch(e){this.createWatch=e;for(const n of Object.keys(this.queries)){const{query:r,args:i,watch:s}=this.queries[n],o=s.journal();this.removeQuery(n),this.addQuery(n,r,i,o)}}destroy(){for(const e of Object.keys(this.queries))this.removeQuery(e);this.listeners=new Set}addQuery(e,n,r,i){if(this.queries[e]!==void 0)throw new Error(`Tried to add a new query with identifier ${e} when it already exists.`);const s=this.createWatch(n,r,i),o=s.onUpdate(()=>this.notifyListeners());this.queries[e]={query:n,args:r,watch:s,unsubscribe:o}}removeQuery(e){const n=this.queries[e];if(n===void 0)throw new Error(`No query found with identifier ${e}.`);n.unsubscribe(),delete this.queries[e]}notifyListeners(){for(const e of this.listeners)e()}}function x7({getCurrentValue:t,subscribe:e}){const[n,r]=de.useState(()=>({getCurrentValue:t,subscribe:e,value:t()}));let i=n.value;return(n.getCurrentValue!==t||n.subscribe!==e)&&(i=t(),r({getCurrentValue:t,subscribe:e,value:i})),de.useEffect(()=>{let s=!1;const o=()=>{s||r(u=>{if(u.getCurrentValue!==t||u.subscribe!==e)return u;const h=t();return u.value===h?u:{...u,value:h}})},a=e(o);return o(),()=>{s=!0,a()}},[t,e]),i}function _7(t){const e=e0();if(e===void 0)throw new Error("Could not find Convex client! `useQuery` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");const n=de.useMemo(()=>(r,i,s)=>e.watchQuery(r,i,{journal:s}),[e]);return w7(t,n)}function w7(t,e){const[n]=de.useState(()=>new v7(e));n.createWatch!==e&&n.setCreateWatch(e),de.useEffect(()=>()=>n.destroy(),[n]);const r=de.useMemo(()=>({getCurrentValue:()=>n.getLocalResults(t),subscribe:i=>(n.setQueries(t),n.subscribe(i))}),[n,t]);return x7(r)}function x_(t,e){if(typeof Convex>"u"||Convex.syscall===void 0)throw new Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");const n=Convex.syscall(t,JSON.stringify(e));return JSON.parse(n)}async function yr(t,e){if(typeof Convex>"u"||Convex.asyncSyscall===void 0)throw new Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");let n;try{n=await Convex.asyncSyscall(t,JSON.stringify(e))}catch(r){if(r.data!==void 0){const i=new If(r.message);throw i.data=Fr(r.data),i}throw new Error(r.message)}return JSON.parse(n)}function en(t,e,n,r){if(t===void 0)throw new TypeError(`Must provide arg ${e} \`${r}\` to \`${n}\``)}function b7(t,e,n,r){if(!Number.isInteger(t)||t<0)throw new TypeError(`Arg ${e} \`${r}\` to \`${n}\` must be a non-negative integer`)}function rR(t){return{getUserIdentity:async()=>await yr("1.0/getUserIdentity",{requestId:t})}}var S7=Object.defineProperty,E7=(t,e,n)=>e in t?S7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dC=(t,e,n)=>E7(t,typeof e!="symbol"?e+"":e,n);class T7{constructor(){dC(this,"_isExpression"),dC(this,"_value")}}var C7=Object.defineProperty,A7=(t,e,n)=>e in t?C7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I7=(t,e,n)=>A7(t,typeof e!="symbol"?e+"":e,n);class hr extends T7{constructor(e){super(),I7(this,"inner"),this.inner=e}serialize(){return this.inner}}function Ft(t){return t instanceof hr?t.serialize():{$literal:sb(t)}}const P7={eq(t,e){return new hr({$eq:[Ft(t),Ft(e)]})},neq(t,e){return new hr({$neq:[Ft(t),Ft(e)]})},lt(t,e){return new hr({$lt:[Ft(t),Ft(e)]})},lte(t,e){return new hr({$lte:[Ft(t),Ft(e)]})},gt(t,e){return new hr({$gt:[Ft(t),Ft(e)]})},gte(t,e){return new hr({$gte:[Ft(t),Ft(e)]})},add(t,e){return new hr({$add:[Ft(t),Ft(e)]})},sub(t,e){return new hr({$sub:[Ft(t),Ft(e)]})},mul(t,e){return new hr({$mul:[Ft(t),Ft(e)]})},div(t,e){return new hr({$div:[Ft(t),Ft(e)]})},mod(t,e){return new hr({$mod:[Ft(t),Ft(e)]})},neg(t){return new hr({$neg:Ft(t)})},and(...t){return new hr({$and:t.map(Ft)})},or(...t){return new hr({$or:t.map(Ft)})},not(t){return new hr({$not:Ft(t)})},field(t){return new hr({$field:t})}};var k7=Object.defineProperty,R7=(t,e,n)=>e in t?k7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,M7=(t,e,n)=>R7(t,typeof e!="symbol"?e+"":e,n);class O7{constructor(){M7(this,"_isIndexRange")}}var N7=Object.defineProperty,D7=(t,e,n)=>e in t?N7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fC=(t,e,n)=>D7(t,typeof e!="symbol"?e+"":e,n);class Ga extends O7{constructor(e){super(),fC(this,"rangeExpressions"),fC(this,"isConsumed"),this.rangeExpressions=e,this.isConsumed=!1}static new(){return new Ga([])}consume(){if(this.isConsumed)throw new Error("IndexRangeBuilder has already been used! Chain your method calls like `q => q.eq(...).eq(...)`. See https://docs.convex.dev/using/indexes");this.isConsumed=!0}eq(e,n){return this.consume(),new Ga(this.rangeExpressions.concat({type:"Eq",fieldPath:e,value:sb(n)}))}gt(e,n){return this.consume(),new Ga(this.rangeExpressions.concat({type:"Gt",fieldPath:e,value:Wt(n)}))}gte(e,n){return this.consume(),new Ga(this.rangeExpressions.concat({type:"Gte",fieldPath:e,value:Wt(n)}))}lt(e,n){return this.consume(),new Ga(this.rangeExpressions.concat({type:"Lt",fieldPath:e,value:Wt(n)}))}lte(e,n){return this.consume(),new Ga(this.rangeExpressions.concat({type:"Lte",fieldPath:e,value:Wt(n)}))}export(){return this.consume(),this.rangeExpressions}}var L7=Object.defineProperty,F7=(t,e,n)=>e in t?L7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,B7=(t,e,n)=>F7(t,typeof e!="symbol"?e+"":e,n);class U7{constructor(){B7(this,"_isSearchFilter")}}var z7=Object.defineProperty,$7=(t,e,n)=>e in t?z7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pC=(t,e,n)=>$7(t,typeof e!="symbol"?e+"":e,n);class Xd extends U7{constructor(e){super(),pC(this,"filters"),pC(this,"isConsumed"),this.filters=e,this.isConsumed=!1}static new(){return new Xd([])}consume(){if(this.isConsumed)throw new Error("SearchFilterBuilder has already been used! Chain your method calls like `q => q.search(...).eq(...)`.");this.isConsumed=!0}search(e,n){return en(e,1,"search","fieldName"),en(n,2,"search","query"),this.consume(),new Xd(this.filters.concat({type:"Search",fieldPath:e,value:n}))}eq(e,n){return en(e,1,"eq","fieldName"),arguments.length!==2&&en(n,2,"search","value"),this.consume(),new Xd(this.filters.concat({type:"Eq",fieldPath:e,value:sb(n)}))}export(){return this.consume(),this.filters}}var H7=Object.defineProperty,j7=(t,e,n)=>e in t?H7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iR=(t,e,n)=>j7(t,typeof e!="symbol"?e+"":e,n);class sR{constructor(e){iR(this,"tableName"),this.tableName=e}withIndex(e,n){en(e,1,"withIndex","indexName");let r=Ga.new();return n!==void 0&&(r=n(r)),new dl({source:{type:"IndexRange",indexName:this.tableName+"."+e,range:r.export(),order:null},operators:[]})}withSearchIndex(e,n){en(e,1,"withSearchIndex","indexName"),en(n,2,"withSearchIndex","searchFilter");const r=Xd.new();return new dl({source:{type:"Search",indexName:this.tableName+"."+e,filters:n(r).export()},operators:[]})}fullTableScan(){return new dl({source:{type:"FullTableScan",tableName:this.tableName,order:null},operators:[]})}order(e){return this.fullTableScan().order(e)}async count(){const e=await yr("1.0/count",{table:this.tableName});return Fr(e)}filter(e){return this.fullTableScan().filter(e)}limit(e){return this.fullTableScan().limit(e)}collect(){return this.fullTableScan().collect()}take(e){return this.fullTableScan().take(e)}paginate(e){return this.fullTableScan().paginate(e)}first(){return this.fullTableScan().first()}unique(){return this.fullTableScan().unique()}[Symbol.asyncIterator](){return this.fullTableScan()[Symbol.asyncIterator]()}}function mC(t){throw new Error(t==="consumed"?"This query is closed and can't emit any more values.":"This query has been chained with another operator and can't be reused.")}class dl{constructor(e){iR(this,"state"),this.state={type:"preparing",query:e}}takeQuery(){if(this.state.type!=="preparing")throw new Error("A query can only be chained once and can't be chained after iteration begins.");const e=this.state.query;return this.state={type:"closed"},e}startQuery(){if(this.state.type==="executing")throw new Error("Iteration can only begin on a query once.");(this.state.type==="closed"||this.state.type==="consumed")&&mC(this.state.type);const e=this.state.query,{queryId:n}=x_("1.0/queryStream",{query:e,version:Hs});return this.state={type:"executing",queryId:n},n}closeQuery(){if(this.state.type==="executing"){const e=this.state.queryId;x_("1.0/queryCleanup",{queryId:e})}this.state={type:"consumed"}}order(e){en(e,1,"order","order");const n=this.takeQuery();if(n.source.type==="Search")throw new Error("Search queries must always be in relevance order. Can not set order manually.");if(n.source.order!==null)throw new Error("Queries may only specify order at most once");return n.source.order=e,new dl(n)}filter(e){en(e,1,"filter","predicate");const n=this.takeQuery();return n.operators.push({filter:Ft(e(P7))}),new dl(n)}limit(e){en(e,1,"limit","n");const n=this.takeQuery();return n.operators.push({limit:e}),new dl(n)}[Symbol.asyncIterator](){return this.startQuery(),this}async next(){(this.state.type==="closed"||this.state.type==="consumed")&&mC(this.state.type);const e=this.state.type==="preparing"?this.startQuery():this.state.queryId,{value:n,done:r}=await yr("1.0/queryStreamNext",{queryId:e});return r&&this.closeQuery(),{value:Fr(n),done:r}}return(){return this.closeQuery(),Promise.resolve({done:!0,value:void 0})}async paginate(e){if(en(e,1,"paginate","options"),typeof(e==null?void 0:e.numItems)!="number"||e.numItems<0)throw new Error(`\`options.numItems\` must be a positive number. Received \`${e==null?void 0:e.numItems}\`.`);const n=this.takeQuery(),r=e.numItems,i=e.cursor,s=(e==null?void 0:e.endCursor)??null,o=e.maximumRowsRead??null,{page:a,isDone:u,continueCursor:h,splitCursor:d,pageStatus:p}=await yr("1.0/queryPage",{query:n,cursor:i,endCursor:s,pageSize:r,maximumRowsRead:o,maximumBytesRead:e.maximumBytesRead,version:Hs});return{page:a.map(f=>Fr(f)),isDone:u,continueCursor:h,splitCursor:d,pageStatus:p}}async collect(){const e=[];for await(const n of this)e.push(n);return e}async take(e){return en(e,1,"take","n"),b7(e,1,"take","n"),this.limit(e).collect()}async first(){const e=await this.take(1);return e.length===0?null:e[0]}async unique(){const e=await this.take(2);if(e.length===0)return null;if(e.length===2)throw new Error("unique() query returned more than one result");return e[0]}}async function oR(t,e){if(en(t,1,"get","id"),typeof t!="string")throw new Error(`Invalid argument \`id\` for \`db.get\`, expected string but got '${typeof t}': ${t}`);const n={id:Wt(t),isSystem:e,version:Hs},r=await yr("1.0/get",n);return Fr(r)}function aR(){const t=(i=!1)=>({get:async s=>await oR(s,i),query:s=>new __(s,i).query(),normalizeId:(s,o)=>{en(s,1,"normalizeId","tableName"),en(o,2,"normalizeId","id");const a=s.startsWith("_");if(a!==i)throw new Error(`${a?"System":"User"} tables can only be accessed from db.${i?"":"system."}normalizeId().`);const u=x_("1.0/db/normalizeId",{table:s,idString:o});return Fr(u).id},system:null,table:s=>new __(s,i)}),{system:e,...n}=t(!0),r=t();return r.system=n,r}async function lR(t,e){if(t.startsWith("_"))throw new Error("System tables (prefixed with `_`) are read-only.");en(t,1,"insert","table"),en(e,2,"insert","value");const n=await yr("1.0/insert",{table:t,value:Wt(e)});return Fr(n)._id}async function uR(t,e){en(t,1,"patch","id"),en(e,2,"patch","value"),await yr("1.0/shallowMerge",{id:Wt(t),value:zz(e)})}async function cR(t,e){en(t,1,"replace","id"),en(e,2,"replace","value"),await yr("1.0/replace",{id:Wt(t),value:Wt(e)})}async function hR(t){en(t,1,"delete","id"),await yr("1.0/remove",{id:Wt(t)})}function W7(){const t=aR();return{get:t.get,query:t.query,normalizeId:t.normalizeId,system:t.system,insert:async(e,n)=>await lR(e,n),patch:async(e,n)=>await uR(e,n),replace:async(e,n)=>await cR(e,n),delete:async e=>await hR(e),table:e=>new G7(e,!1)}}class __{constructor(e,n){this.tableName=e,this.isSystem=n}async get(e){return oR(e,this.isSystem)}query(){const e=this.tableName.startsWith("_");if(e!==this.isSystem)throw new Error(`${e?"System":"User"} tables can only be accessed from db.${this.isSystem?"":"system."}query().`);return new sR(this.tableName)}}class G7 extends __{async insert(e){return lR(this.tableName,e)}async patch(e,n){return uR(e,n)}async replace(e,n){return cR(e,n)}async delete(e){return hR(e)}}function V7(){return{runAfter:async(t,e,n)=>{const r=X7(t,e,n);return await yr("1.0/schedule",r)},runAt:async(t,e,n)=>{const r=q7(t,e,n);return await yr("1.0/schedule",r)},cancel:async t=>{en(t,1,"cancel","id");const e={id:Wt(t)};await yr("1.0/cancel_job",e)}}}function X7(t,e,n){if(typeof t!="number")throw new Error("`delayMs` must be a number");if(!isFinite(t))throw new Error("`delayMs` must be a finite number");if(t<0)throw new Error("`delayMs` must be non-negative");const r=rs(n),i=Jy(e),s=(Date.now()+t)/1e3;return{...i,ts:s,args:Wt(r),version:Hs}}function q7(t,e,n){let r;if(t instanceof Date)r=t.valueOf()/1e3;else if(typeof t=="number")r=t/1e3;else throw new Error("The invoke time must a Date or a timestamp");const i=Jy(e),s=rs(n);return{...i,ts:r,args:Wt(s),version:Hs}}function dR(t){return{getUrl:async e=>(en(e,1,"getUrl","storageId"),await yr("1.0/storageGetUrl",{requestId:t,version:Hs,storageId:e})),getMetadata:async e=>await yr("1.0/storageGetMetadata",{requestId:t,version:Hs,storageId:e})}}function Y7(t){const e=dR(t);return{generateUploadUrl:async()=>await yr("1.0/storageGenerateUploadUrl",{requestId:t,version:Hs}),delete:async n=>{await yr("1.0/storageDelete",{requestId:t,version:Hs,storageId:n})},getUrl:e.getUrl,getMetadata:e.getMetadata}}async function Q7(t,e){const n="",r=Fr(JSON.parse(e)),i={db:W7(),auth:rR(n),storage:Y7(n),scheduler:V7(),runQuery:(o,a)=>w_("query",o,a),runMutation:(o,a)=>w_("mutation",o,a)},s=await pR(t,i,r);return fR(s),JSON.stringify(Wt(s===void 0?null:s))}function fR(t){if(t instanceof sR||t instanceof dl)throw new Error("Return value is a Query. Results must be retrieved with `.collect()`, `.take(n), `.unique()`, or `.first()`.")}async function pR(t,e,n){let r;try{r=await Promise.resolve(t(e,...n))}catch(i){throw K7(i)}return r}function mR(t,e){return(n,r)=>(globalThis.console.warn(`Convex functions should not directly call other Convex functions. Consider calling a helper function instead. e.g. \`export const foo = ${t}(...); await foo(ctx);\` is not supported. See https://docs.convex.dev/production/best-practices/#use-helper-functions-to-write-shared-code`),e(n,r))}function K7(t){if(typeof t=="object"&&t!==null&&Symbol.for("ConvexError")in t){const e=t;return e.data=JSON.stringify(Wt(e.data===void 0?null:e.data)),e.ConvexErrorSymbol=Symbol.for("ConvexError"),e}else return t}function gR(){var e,n;if(typeof window>"u"||!window.__convexAllowFunctionsInBrowser)return;if(((n=(e=Object.getOwnPropertyDescriptor(globalThis,"window"))==null?void 0:e.get)==null?void 0:n.toString().includes("[native code]"))??!1)throw new Error("Convex functions should not be imported in the browser.")}function yR(t){return()=>{let e=j.any();return typeof t=="object"&&t.args!==void 0&&(e=Ak(t.args)),JSON.stringify(e.json)}}function vR(t){return()=>{let e;return typeof t=="object"&&t.returns!==void 0&&(e=Ak(t.returns)),JSON.stringify(e?e.json:null)}}const Z7=t=>{const e=typeof t=="function"?t:t.handler,n=mR("internalMutation",e);return gR(),n.isMutation=!0,n.isInternal=!0,n.invokeMutation=r=>Q7(e,r),n.exportArgs=yR(t),n.exportReturns=vR(t),n._handler=e,n};async function J7(t,e){const n="",r=Fr(JSON.parse(e)),i={db:aR(),auth:rR(n),storage:dR(n),runQuery:(o,a)=>w_("query",o,a)},s=await pR(t,i,r);return fR(s),JSON.stringify(Wt(s===void 0?null:s))}const eH=t=>{const e=typeof t=="function"?t:t.handler,n=mR("internalQuery",e);return gR(),n.isQuery=!0,n.isInternal=!0,n.invokeQuery=r=>J7(e,r),n.exportArgs=yR(t),n.exportReturns=vR(t),n._handler=e,n};async function w_(t,e,n){const r=rs(n),i={udfType:t,args:Wt(r),...Jy(e)},s=await yr("1.0/runUdf",i);return Fr(s)}var tH=Object.defineProperty,nH=(t,e,n)=>e in t?tH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ou=(t,e,n)=>nH(t,typeof e!="symbol"?e+"":e,n);class gC{constructor(e){ou(this,"indexes"),ou(this,"searchIndexes"),ou(this,"vectorIndexes"),ou(this,"validator"),this.indexes=[],this.searchIndexes=[],this.vectorIndexes=[],this.validator=e}index(e,n){return this.indexes.push({indexDescriptor:e,fields:n}),this}searchIndex(e,n){return this.searchIndexes.push({indexDescriptor:e,searchField:n.searchField,filterFields:n.filterFields||[]}),this}vectorIndex(e,n){return this.vectorIndexes.push({indexDescriptor:e,vectorField:n.vectorField,dimensions:n.dimensions,filterFields:n.filterFields||[]}),this}self(){return this}export(){return{indexes:this.indexes,searchIndexes:this.searchIndexes,vectorIndexes:this.vectorIndexes,documentType:this.validator.json}}}function sy(t){return Ck(t)?new gC(t):new gC(j.object(t))}class rH{constructor(e,n){ou(this,"tables"),ou(this,"strictTableNameTypes"),ou(this,"schemaValidation"),this.tables=e,this.schemaValidation=(n==null?void 0:n.schemaValidation)===void 0?!0:n.schemaValidation}export(){return JSON.stringify({tables:Object.entries(this.tables).map(([e,n])=>{const{indexes:r,searchIndexes:i,vectorIndexes:s,documentType:o}=n.export();return{tableName:e,indexes:r,searchIndexes:i,vectorIndexes:s,documentType:o}}),schemaValidation:this.schemaValidation})}}function iH(t,e){return new rH(t,e)}iH({_scheduled_functions:sy({name:j.string(),args:j.array(j.any()),scheduledTime:j.float64(),completedTime:j.optional(j.float64()),state:j.union(j.object({kind:j.literal("pending")}),j.object({kind:j.literal("inProgress")}),j.object({kind:j.literal("success")}),j.object({kind:j.literal("failed"),error:j.string()}),j.object({kind:j.literal("canceled")}))}),_storage:sy({sha256:j.string(),size:j.float64(),contentType:j.optional(j.string())})});const nn=R$;async function xR(t,e){const n=t.watchQuery(nn.aiTown.main.inputStatus,{inputId:e});let r=n.localQueryResult();if(r==null){let i;try{await new Promise((s,o)=>{i=n.onUpdate(()=>{try{r=n.localQueryResult()}catch(a){o(a);return}r!=null&&s()})})}finally{i&&i()}}if(!r)throw new Error(`Input ${e} was never processed.`);if(r.kind==="error")throw new Error(r.message);return r.value}function kc(t,e){const n=e0();return async r=>{const i=await n.mutation(nn.world.sendWorldInput,{engineId:t,name:e,args:r});return await xR(n,i)}}async function Cd(t){try{return await t}catch(e){throw Bt.error(e.message),e}}function sH({player:t,tileDim:e}){var i;const n=((i=t.pathfinding)==null?void 0:i.state.kind)=="moving"&&t.pathfinding.state.path,r=de.useCallback(s=>{if(s.clear(),!n)return;let o=!0;for(const a of n){const{position:u}=Ik(a),h=u.x*e+e/2,d=u.y*e+e/2;o?(s.moveTo(h,d),s.lineStyle(2,oH(t.id),.5),o=!1):s.lineTo(h,d)}},[n]);return n?W.jsx(Ii.Graphics,{draw:r}):null}function oH(t){return{h:0,s:50,l:90}}const yC=500,aH=.25;function lH(t){const{destination:e,tileDim:n}=t,r=i=>{i.clear();const s=Date.now();if(e.t+yC<=s)return;const o=(s-e.t)/yC,a=e.x*n,u=e.y*n;i.lineStyle(1.5,{h:0,s:50,l:90},.5),i.drawCircle(a,u,aH*o*n)};return W.jsx(Ii.Graphics,{draw:r})}const uH=t=>{var w;const e=Ii.useApp(),n=de.useRef(),r=Br(nn.world.userStatus,{worldId:t.worldId})??null,i=(w=[...t.game.world.players.values()].find(C=>C.human===r))==null?void 0:w.id,s=kc(t.engineId,"moveTo"),o=de.useRef(null),a=C=>{o.current={screenX:C.screenX,screenY:C.screenY}},[u,h]=de.useState(null),d=async C=>{if(o.current){const{screenX:F,screenY:N}=o.current;o.current=null;const[D,q]=[F-C.screenX,N-C.screenY],G=Math.sqrt(D*D+q*q);if(G>10){console.log(`Skipping navigation on drag event (${G}px)`);return}}if(!i)return;const b=n.current;if(!b)return;const S=b.toWorld(C.screenX,C.screenY),_=t.game.worldMap.tileDim,A={x:S.x/_,y:S.y/_};h({t:Date.now(),...A});const P={x:Math.floor(A.x),y:Math.floor(A.y)};console.log(`Moving to ${JSON.stringify(P)}`),await Cd(s({playerId:i,destination:P}))},{width:p,height:f,tileDim:g}=t.game.worldMap,v=[...t.game.world.players.values()];return de.useEffect(()=>{if(!n.current||i===void 0)return;const C=t.game.world.players.get(i);n.current.animate({position:new Fe(C.position.x*g,C.position.y*g),scale:1.5})},[i]),W.jsxs(g$,{app:e,screenWidth:t.width,screenHeight:t.height,worldWidth:p*g,worldHeight:f*g,viewportRef:n,children:[W.jsx(B8,{map:t.game.worldMap,onpointerup:d,onpointerdown:a}),v.map(C=>(uM||C.id===i)&&W.jsx(sH,{player:C,tileDim:g},`path-${C.id}`)),u&&W.jsx(lH,{destination:u,tileDim:g}),v.map(C=>W.jsx(C8,{game:t.game,player:C,isViewer:C.id===i,onClick:t.setSelectedElement,historicalTime:t.historicalTime},`player-${C.id}`))]})};globalThis&&globalThis.__awaiter;function cH(){const[t,e]=de.useState(null),[n,r]=de.useState({width:0,height:0}),i=de.useCallback(()=>{r({width:(t==null?void 0:t.offsetWidth)||0,height:(t==null?void 0:t.offsetHeight)||0})},[t==null?void 0:t.offsetHeight,t==null?void 0:t.offsetWidth]);return hH("resize",i),_R(()=>{i()},[t==null?void 0:t.offsetHeight,t==null?void 0:t.offsetWidth]),[e,n]}function hH(t,e,n,r){const i=de.useRef(e);_R(()=>{i.current=e},[e]),de.useEffect(()=>{var s;const o=(s=n==null?void 0:n.current)!==null&&s!==void 0?s:window;if(!(o&&o.addEventListener))return;const a=u=>i.current(u);return o.addEventListener(t,a,r),()=>{o.removeEventListener(t,a,r)}},[t,n,r])}globalThis&&globalThis.__awaiter;const _R=typeof window<"u"?de.useLayoutEffect:de.useEffect,dH="/ai-town/assets/close-964dab82.svg";function wR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=wR(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function oy(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=wR(t))&&(r&&(r+=" "),r+=e);return r}function fH({worldId:t,engineId:e,humanPlayer:n,conversation:r}){var f;const i=Br(nn.world.gameDescriptions,{worldId:t}),s=(f=i==null?void 0:i.playerDescriptions.find(g=>g.playerId===n.id))==null?void 0:f.name,o=de.useRef(null),a=de.useRef(),u=ch(nn.messages.writeMessage),h=kc(e,"startTyping"),d=r.isTyping,p=async g=>{if(g.stopPropagation(),g.key!=="Enter"){if(console.log(a.current),d||a.current!==void 0)return;a.current=crypto.randomUUID();try{await h({playerId:n.id,conversationId:r.id,messageUuid:a.current})}finally{a.current=void 0}return}if(g.preventDefault(),!o.current)return;const v=o.current.innerText;if(o.current.innerText="",!v)return;let w=a.current;d&&d.playerId===n.id&&(w=d.messageUuid),w=w||crypto.randomUUID(),await u({worldId:t,playerId:n.id,conversationId:r.id,text:v,messageUuid:w})};return W.jsxs("div",{className:"leading-tight mb-6",children:[W.jsx("div",{className:"flex gap-4",children:W.jsx("span",{className:"uppercase flex-grow",children:s})}),W.jsx("div",{className:oy("bubble","bubble-mine"),children:W.jsx("p",{className:"bg-white -mx-3 -my-1",ref:o,contentEditable:!0,style:{outline:"none"},tabIndex:0,placeholder:"Type here",onKeyDown:g=>p(g)})})]})}function vC({worldId:t,engineId:e,conversation:n,inConversationWithMe:r,humanPlayer:i,scrollViewRef:s}){var b,S,_;const o=i==null?void 0:i.id,a=Br(nn.world.gameDescriptions,{worldId:t}),u=Br(nn.messages.listMessages,{worldId:t,conversationId:n.doc.id});let h=n.kind==="active"?n.doc.isTyping:void 0;u!==void 0&&h&&u.find(A=>A.messageUuid===h.messageUuid)&&(h=void 0);const d=h&&((b=a==null?void 0:a.playerDescriptions.find(A=>A.playerId===(h==null?void 0:h.playerId)))==null?void 0:b.name),p=s.current,f=de.useRef(!1);if(de.useEffect(()=>{if(!p)return;const A=()=>{f.current=!!(p&&p.scrollHeight-p.scrollTop-50<=p.clientHeight)};return p.addEventListener("scroll",A),()=>p.removeEventListener("scroll",A)},[p]),de.useEffect(()=>{var A;f.current&&((A=s.current)==null||A.scrollTo({top:s.current.scrollHeight,behavior:"smooth"}))},[u,h]),u===void 0||u.length===0&&!r)return null;const g=u.map(A=>({node:W.jsxs("div",{className:"leading-tight mb-6",children:[W.jsxs("div",{className:"flex gap-4",children:[W.jsx("span",{className:"uppercase flex-grow",children:A.authorName}),W.jsx("time",{dateTime:A._creationTime.toString(),children:new Date(A._creationTime).toLocaleString()})]}),W.jsx("div",{className:oy("bubble",A.author===o&&"bubble-mine"),children:W.jsx("p",{className:"bg-white -mx-3 -my-1",children:A.text})})]},`text-${A._id}`),time:A._creationTime})),v=u.map(A=>A._creationTime).reduce((A,P)=>Math.max(A,P),0),w=[];if(n.kind==="active")for(const[A,P]of n.doc.participants){const F=(S=a==null?void 0:a.playerDescriptions.find(D=>D.playerId===A))==null?void 0:S.name;let N;P.status.kind==="participating"&&(N=P.status.started),N&&w.push({node:W.jsx("div",{className:"leading-tight mb-6",children:W.jsxs("p",{className:"text-brown-700 text-center",children:[F," joined the conversation."]})},`joined-${A}`),time:N})}else for(const A of n.doc.participants){const P=(_=a==null?void 0:a.playerDescriptions.find(D=>D.playerId===A))==null?void 0:_.name,F=n.doc.created;w.push({node:W.jsx("div",{className:"leading-tight mb-6",children:W.jsxs("p",{className:"text-brown-700 text-center",children:[P," joined the conversation."]})},`joined-${A}`),time:F});const N=n.doc.ended;w.push({node:W.jsx("div",{className:"leading-tight mb-6",children:W.jsxs("p",{className:"text-brown-700 text-center",children:[P," left the conversation."]})},`left-${A}`),time:Math.max(v+1,N)})}const C=[...g,...w];return C.sort((A,P)=>A.time-P.time),W.jsx("div",{className:"chats text-base sm:text-sm",children:W.jsxs("div",{className:"bg-brown-200 text-black p-2",children:[C.length>0&&C.map(A=>A.node),h&&h.playerId!==o&&W.jsxs("div",{className:"leading-tight mb-6",children:[W.jsxs("div",{className:"flex gap-4",children:[W.jsx("span",{className:"uppercase flex-grow",children:d}),W.jsx("time",{dateTime:h.since.toString(),children:new Date(h.since).toLocaleString()})]}),W.jsx("div",{className:oy("bubble"),children:W.jsx("p",{className:"bg-white -mx-3 -my-1",children:W.jsx("i",{children:"typing..."})})})]},"typing"),i&&r&&n.kind==="active"&&W.jsx(fH,{worldId:t,engineId:e,conversation:n.doc,humanPlayer:i})]})})}function pH({worldId:t,engineId:e,game:n,playerId:r,setSelectedElement:i,scrollViewRef:s}){var ie,O,L;const o=Br(nn.world.userStatus,{worldId:t}),u=[...n.world.players.values()].find(Q=>Q.human===o),h=u?n.world.playerConversation(u):void 0;u&&h&&(r=[...h.participants.keys()].filter(B=>B!==u.id)[0]);const d=r&&n.world.players.get(r),p=d&&n.world.playerConversation(d),f=Br(nn.world.previousConversation,r?{worldId:t,playerId:r}:"skip"),g=r&&n.playerDescriptions.get(r),v=kc(e,"startConversation"),w=kc(e,"acceptInvite"),C=kc(e,"rejectInvite"),b=kc(e,"leaveConversation");if(!r)return W.jsx("div",{className:"h-full text-xl flex text-center items-center p-4",children:"Click on an agent on the map to see chat history."});if(!d)return null;const S=u&&d.id===u.id,_=!S&&!p&&u&&!h,A=!S&&u&&h&&p&&h.id===p.id,P=u&&h&&((ie=h.participants.get(u.id))==null?void 0:ie.status),F=p&&((O=p.participants.get(r))==null?void 0:O.status),N=A&&(P==null?void 0:P.kind)==="invited",D=A&&((L=p.participants.get(r))==null?void 0:L.status.kind)==="invited",q=A&&(F==null?void 0:F.kind)==="walkingOver"&&(P==null?void 0:P.kind)==="walkingOver",G=A&&(F==null?void 0:F.kind)==="participating"&&(P==null?void 0:P.kind)==="participating",H=async()=>{!u||!r||(console.log("Starting conversation"),await Cd(v({playerId:u.id,invitee:r})))},J=async()=>{!u||!h||!r||await Cd(w({playerId:u.id,conversationId:h.id}))},V=async()=>{!u||!h||await Cd(C({playerId:u.id,conversationId:h.id}))},U=async()=>{!u||!G||!h||await Cd(b({playerId:u.id,conversationId:h.id}))},Z=Q=>"";return W.jsxs(W.Fragment,{children:[W.jsxs("div",{className:"flex gap-4",children:[W.jsx("div",{className:"box w-3/4 sm:w-full mr-auto",children:W.jsx("h2",{className:"bg-brown-700 p-2 font-display text-2xl sm:text-4xl tracking-wider shadow-solid text-center",children:g==null?void 0:g.name})}),W.jsx("a",{className:"button text-white shadow-solid text-2xl cursor-pointer pointer-events-auto",onClick:()=>i(void 0),children:W.jsx("h2",{className:"h-full bg-clay-700",children:W.jsx("img",{className:"w-4 h-4 sm:w-5 sm:h-5",src:dH})})})]}),_&&W.jsx("a",{className:"mt-6 button text-white shadow-solid text-xl cursor-pointer pointer-events-auto"+Z(),onClick:H,children:W.jsx("div",{className:"h-full bg-clay-700 text-center",children:W.jsx("span",{children:"Start conversation"})})}),D&&W.jsx("a",{className:"mt-6 button text-white shadow-solid text-xl cursor-pointer pointer-events-auto opacity-50",children:W.jsx("div",{className:"h-full bg-clay-700 text-center",children:W.jsx("span",{children:"Waiting for accept..."})})}),q&&W.jsx("a",{className:"mt-6 button text-white shadow-solid text-xl cursor-pointer pointer-events-auto opacity-50",children:W.jsx("div",{className:"h-full bg-clay-700 text-center",children:W.jsx("span",{children:"Walking over..."})})}),G&&W.jsx("a",{className:"mt-6 button text-white shadow-solid text-xl cursor-pointer pointer-events-auto"+Z(),onClick:U,children:W.jsx("div",{className:"h-full bg-clay-700 text-center",children:W.jsx("span",{children:"Leave conversation"})})}),N&&W.jsxs(W.Fragment,{children:[W.jsx("a",{className:"mt-6 button text-white shadow-solid text-xl cursor-pointer pointer-events-auto"+Z(),onClick:J,children:W.jsx("div",{className:"h-full bg-clay-700 text-center",children:W.jsx("span",{children:"Accept"})})}),W.jsx("a",{className:"mt-6 button text-white shadow-solid text-xl cursor-pointer pointer-events-auto"+Z(),onClick:V,children:W.jsx("div",{className:"h-full bg-clay-700 text-center",children:W.jsx("span",{children:"Reject"})})})]}),!p&&d.activity&&d.activity.until>Date.now()&&W.jsx("div",{className:"box flex-grow mt-6",children:W.jsx("h2",{className:"bg-brown-700 text-base sm:text-lg text-center",children:d.activity.description})}),W.jsx("div",{className:"desc my-6",children:W.jsxs("p",{className:"leading-tight -m-4 bg-brown-700 text-base sm:text-sm",children:[!S&&(g==null?void 0:g.description),S&&W.jsx("i",{children:"This is you!"}),!S&&G&&W.jsxs(W.Fragment,{children:[W.jsx("br",{}),W.jsx("br",{}),"(",W.jsx("i",{children:"Conversing with you!"}),")"]})]})}),!S&&p&&(F==null?void 0:F.kind)==="participating"&&W.jsx(vC,{worldId:t,engineId:e,inConversationWithMe:G??!1,conversation:{kind:"active",doc:p},humanPlayer:u,scrollViewRef:s}),!p&&f&&W.jsxs(W.Fragment,{children:[W.jsx("div",{className:"box flex-grow",children:W.jsx("h2",{className:"bg-brown-700 text-lg text-center",children:"Previous conversation"})}),W.jsx(vC,{worldId:t,engineId:e,inConversationWithMe:!1,conversation:{kind:"archived",doc:f},humanPlayer:u,scrollViewRef:s})]})]})}const mH=12e4,xC=60*1e3,gH=60*1e3,yH=1e3,bR=1.3,vH=4,xH=15*1e3,_H=.75,b_=8,wH=15e3,bH=6e4,SH=.8,EH=6e4,_C=6e4,TH=10*6e4,CH=8,AH=2e3,IH=5*60*1e3,wC=16;function PH(){const t=Br(nn.world.defaultWorldStatus),e=t==null?void 0:t.worldId,n=ch(nn.world.heartbeatWorld);de.useEffect(()=>{const r=()=>{t&&(Date.now()-xC/2<t.lastViewed||n({worldId:t.worldId}))};r();const i=setInterval(r,xC);return()=>clearInterval(i)},[e,n])}function kH(t){const e=de.useRef(new RH),n=de.useRef(),[r,i]=de.useState(void 0);t&&e.current.receive(t);const s=o=>{const a=Date.now();i(e.current.historicalServerTime(a)),n.current=requestAnimationFrame(s)};return de.useEffect(()=>(n.current=requestAnimationFrame(s),()=>cancelAnimationFrame(n.current)),[]),{historicalTime:r,timeManager:e.current}}class RH{constructor(){this.intervals=[],this.totalDuration=0}receive(e){if(this.latestEngineStatus=e,!e.currentTime||!e.lastStepTs)return;const n=this.intervals[this.intervals.length-1];if(n){if(n.endTs===e.currentTime)return;if(n.endTs>e.currentTime)throw new Error("Received out-of-order engine status")}const r={startTs:e.lastStepTs,endTs:e.currentTime};this.intervals.push(r),this.totalDuration+=r.endTs-r.startTs}historicalServerTime(e){if(this.intervals.length==0)return;if(e===this.prevClientTs)return this.prevServerTs;const n=this.prevClientTs??e,r=this.prevServerTs??this.intervals[0].startTs,i=this.intervals[this.intervals.length-1].endTs,s=i-r;let o=1;s<NH?o=.8:s>OH&&(o=1.2);let a=Math.max(r+(e-n)*o,i-MH),u=null;for(let d=0;d<this.intervals.length;d++){const p=this.intervals[d];if(!(p.endTs<a)){if(a>=p.startTs){u=d;break}a<p.startTs&&(a=p.startTs,u=d)}}u===null&&(a=this.intervals.at(-1).endTs,u=this.intervals.length-1);const h=Math.max(u-1,0);if(h>0){for(const d of this.intervals.slice(0,h))this.totalDuration-=d.endTs-d.startTs;this.intervals=this.intervals.slice(h)}return this.prevClientTs=e,this.prevServerTs=a,a}bufferHealth(){if(!this.intervals.length)return 0;const e=this.prevServerTs??this.intervals[0].startTs;return this.intervals[this.intervals.length-1].endTs-e}clockSkew(){return!this.prevClientTs||!this.prevServerTs?0:this.prevClientTs-this.prevServerTs}}const MH=1500,OH=1250,NH=250,DH=!0,Xn="u-",LH="uplot",FH=Xn+"hz",BH=Xn+"vt",UH=Xn+"title",zH=Xn+"wrap",$H=Xn+"under",HH=Xn+"over",jH=Xn+"axis",tu=Xn+"off",WH=Xn+"select",GH=Xn+"cursor-x",VH=Xn+"cursor-y",XH=Xn+"cursor-pt",qH=Xn+"legend",YH=Xn+"live",QH=Xn+"inline",KH=Xn+"series",ZH=Xn+"marker",bC=Xn+"label",JH=Xn+"value",Ad="width",Id="height",dd="top",SC="bottom",sc="left",S1="right",_b="#000",EC=_b+"0",TC="mousemove",CC="mousedown",E1="mouseup",AC="mouseenter",IC="mouseleave",PC="dblclick",e9="resize",t9="scroll",kC="change",ay="dppxchange",wb="--",Sh=typeof window<"u",S_=Sh?document:null,Vc=Sh?window:null,n9=Sh?navigator:null;let bt,Fm;function E_(){let t=devicePixelRatio;bt!=t&&(bt=t,Fm&&C_(kC,Fm,E_),Fm=matchMedia(`(min-resolution: ${bt-.001}dppx) and (max-resolution: ${bt+.001}dppx)`),pu(kC,Fm,E_),Vc.dispatchEvent(new CustomEvent(ay)))}function Ei(t,e){if(e!=null){let n=t.classList;!n.contains(e)&&n.add(e)}}function T_(t,e){let n=t.classList;n.contains(e)&&n.remove(e)}function Yt(t,e,n){t.style[e]=n+"px"}function bs(t,e,n,r){let i=S_.createElement(t);return e!=null&&Ei(i,e),n!=null&&n.insertBefore(i,r),i}function Qi(t,e){return bs("div",t,e)}const RC=new WeakMap;function So(t,e,n,r,i){let s="translate("+e+"px,"+n+"px)",o=RC.get(t);s!=o&&(t.style.transform=s,RC.set(t,s),e<0||n<0||e>r||n>i?Ei(t,tu):T_(t,tu))}const MC=new WeakMap;function OC(t,e,n){let r=e+n,i=MC.get(t);r!=i&&(MC.set(t,r),t.style.background=e,t.style.borderColor=n)}const NC=new WeakMap;function DC(t,e,n,r){let i=e+""+n,s=NC.get(t);i!=s&&(NC.set(t,i),t.style.height=n+"px",t.style.width=e+"px",t.style.marginLeft=r?-e/2+"px":0,t.style.marginTop=r?-n/2+"px":0)}const bb={passive:!0},r9={...bb,capture:!0};function pu(t,e,n,r){e.addEventListener(t,n,r?r9:bb)}function C_(t,e,n,r){e.removeEventListener(t,n,bb)}Sh&&E_();function Is(t,e,n,r){let i;n=n||0,r=r||e.length-1;let s=r<=2147483647;for(;r-n>1;)i=s?n+r>>1:Oi((n+r)/2),e[i]<t?n=i:r=i;return t-e[n]<=e[r]-t?n:r}function hh(t,e,n,r){for(let i=r==1?e:n;i>=e&&i<=n;i+=r)if(t[i]!=null)return i;return-1}function i9(t,e,n,r){let i=lt,s=-lt;if(r==1)i=t[e],s=t[n];else if(r==-1)i=t[n],s=t[e];else for(let o=e;o<=n;o++){let a=t[o];a!=null&&(a<i&&(i=a),a>s&&(s=a))}return[i,s]}function s9(t,e,n){let r=lt,i=-lt;for(let s=e;s<=n;s++){let o=t[s];o!=null&&o>0&&(o<r&&(r=o),o>i&&(i=o))}return[r,i]}function t0(t,e,n,r){let i=BC(t),s=BC(e);t==e&&(i==-1?(t*=n,e/=n):(t/=n,e*=n));let o=n==10?ua:SR,a=i==1?Oi:Ji,u=s==1?Ji:Oi,h=a(o(Gn(t))),d=u(o(Gn(e))),p=dh(n,h),f=dh(n,d);return n==10&&(h<0&&(p=Ut(p,-h)),d<0&&(f=Ut(f,-d))),r||n==2?(t=p*i,e=f*s):(t=CR(t,p),e=n0(e,f)),[t,e]}function Sb(t,e,n,r){let i=t0(t,e,n,r);return t==0&&(i[0]=0),e==0&&(i[1]=0),i}const Eb=.1,LC={mode:3,pad:Eb},qd={pad:0,soft:null,mode:0},o9={min:qd,max:qd};function ly(t,e,n,r){return r0(n)?FC(t,e,n):(qd.pad=n,qd.soft=r?0:null,qd.mode=r?3:0,FC(t,e,o9))}function wt(t,e){return t??e}function a9(t,e,n){for(e=wt(e,0),n=wt(n,t.length-1);e<=n;){if(t[e]!=null)return!0;e++}return!1}function FC(t,e,n){let r=n.min,i=n.max,s=wt(r.pad,0),o=wt(i.pad,0),a=wt(r.hard,-lt),u=wt(i.hard,lt),h=wt(r.soft,lt),d=wt(i.soft,-lt),p=wt(r.mode,0),f=wt(i.mode,0),g=e-t,v=ua(g),w=Or(Gn(t),Gn(e)),C=ua(w),b=Gn(C-v);(g<1e-24||b>10)&&(g=0,(t==0||e==0)&&(g=1e-24,p==2&&h!=lt&&(s=0),f==2&&d!=-lt&&(o=0)));let S=g||w||1e3,_=ua(S),A=dh(10,Oi(_)),P=S*(g==0?t==0?.1:1:s),F=Ut(CR(t-P,A/10),24),N=t>=h&&(p==1||p==3&&F<=h||p==2&&F>=h)?h:lt,D=Or(a,F<N&&t>=N?N:ss(N,F)),q=S*(g==0?e==0?.1:1:o),G=Ut(n0(e+q,A/10),24),H=e<=d&&(f==1||f==3&&G>=d||f==2&&G<=d)?d:-lt,J=ss(u,G>H&&e<=H?H:Or(H,G));return D==J&&D==0&&(J=100),[D,J]}const l9=new Intl.NumberFormat(Sh?n9.language:"en-US"),Tb=t=>l9.format(t),Bi=Math,ag=Bi.PI,Gn=Bi.abs,Oi=Bi.floor,jn=Bi.round,Ji=Bi.ceil,ss=Bi.min,Or=Bi.max,dh=Bi.pow,BC=Bi.sign,ua=Bi.log10,SR=Bi.log2,u9=(t,e=1)=>Bi.sinh(t)*e,T1=(t,e=1)=>Bi.asinh(t/e),lt=1/0;function UC(t){return(ua((t^t>>31)-(t>>31))|0)+1}function A_(t,e,n){return ss(Or(t,e),n)}function st(t){return typeof t=="function"?t:()=>t}const c9=()=>{},ER=t=>t,TR=(t,e)=>e,h9=t=>null,zC=t=>!0,$C=(t,e)=>t==e,d9=/\.\d*?(?=9{6,}|0{6,})/gm,Eu=t=>{if(IR(t)||xl.has(t))return t;const e=`${t}`,n=e.match(d9);if(n==null)return t;let r=n[0].length-1;if(e.indexOf("e-")!=-1){let[i,s]=e.split("e");return+`${Eu(i)}e${s}`}return Ut(t,r)};function Kl(t,e){return Eu(Ut(Eu(t/e))*e)}function n0(t,e){return Eu(Ji(Eu(t/e))*e)}function CR(t,e){return Eu(Oi(Eu(t/e))*e)}function Ut(t,e=0){if(IR(t))return t;let n=10**e,r=t*n*(1+Number.EPSILON);return jn(r)/n}const xl=new Map;function AR(t){return((""+t).split(".")[1]||"").length}function Rf(t,e,n,r){let i=[],s=r.map(AR);for(let o=e;o<n;o++){let a=Gn(o),u=Ut(dh(t,o),a);for(let h=0;h<r.length;h++){let d=t==10?+`${r[h]}e${o}`:r[h]*u,p=(o>=0?0:a)+(o>=s[h]?0:s[h]),f=t==10?d:Ut(d,p);i.push(f),xl.set(f,p)}}return i}const Yd={},Cb=[],fh=[null,null],Va=Array.isArray,IR=Number.isInteger,f9=t=>t===void 0;function HC(t){return typeof t=="string"}function r0(t){let e=!1;if(t!=null){let n=t.constructor;e=n==null||n==Object}return e}function p9(t){return t!=null&&typeof t=="object"}const m9=Object.getPrototypeOf(Uint8Array),PR="__proto__";function ph(t,e=r0){let n;if(Va(t)){let r=t.find(i=>i!=null);if(Va(r)||e(r)){n=Array(t.length);for(let i=0;i<t.length;i++)n[i]=ph(t[i],e)}else n=t.slice()}else if(t instanceof m9)n=t.slice();else if(e(t)){n={};for(let r in t)r!=PR&&(n[r]=ph(t[r],e))}else n=t;return n}function Pn(t){let e=arguments;for(let n=1;n<e.length;n++){let r=e[n];for(let i in r)i!=PR&&(r0(t[i])?Pn(t[i],ph(r[i])):t[i]=ph(r[i]))}return t}const g9=0,y9=1,v9=2;function x9(t,e,n){for(let r=0,i,s=-1;r<e.length;r++){let o=e[r];if(o>s){for(i=o-1;i>=0&&t[i]==null;)t[i--]=null;for(i=o+1;i<n&&t[i]==null;)t[s=i++]=null}}}function _9(t,e){if(S9(t)){let o=t[0].slice();for(let a=1;a<t.length;a++)o.push(...t[a].slice(1));return E9(o[0])||(o=b9(o)),o}let n=new Set;for(let o=0;o<t.length;o++){let u=t[o][0],h=u.length;for(let d=0;d<h;d++)n.add(u[d])}let r=[Array.from(n).sort((o,a)=>o-a)],i=r[0].length,s=new Map;for(let o=0;o<i;o++)s.set(r[0][o],o);for(let o=0;o<t.length;o++){let a=t[o],u=a[0];for(let h=1;h<a.length;h++){let d=a[h],p=Array(i).fill(void 0),f=e?e[o][h]:y9,g=[];for(let v=0;v<d.length;v++){let w=d[v],C=s.get(u[v]);w===null?f!=g9&&(p[C]=w,f==v9&&g.push(C)):p[C]=w}x9(p,g,i),r.push(p)}}return r}const w9=typeof queueMicrotask>"u"?t=>Promise.resolve().then(t):queueMicrotask;function b9(t){let e=t[0],n=e.length,r=Array(n);for(let s=0;s<r.length;s++)r[s]=s;r.sort((s,o)=>e[s]-e[o]);let i=[];for(let s=0;s<t.length;s++){let o=t[s],a=Array(n);for(let u=0;u<n;u++)a[u]=o[r[u]];i.push(a)}return i}function S9(t){let e=t[0][0],n=e.length;for(let r=1;r<t.length;r++){let i=t[r][0];if(i.length!=n)return!1;if(i!=e){for(let s=0;s<n;s++)if(i[s]!=e[s])return!1}}return!0}function E9(t,e=100){const n=t.length;if(n<=1)return!0;let r=0,i=n-1;for(;r<=i&&t[r]==null;)r++;for(;i>=r&&t[i]==null;)i--;if(i<=r)return!0;const s=Or(1,Oi((i-r+1)/e));for(let o=t[r],a=r+s;a<=i;a+=s){const u=t[a];if(u!=null){if(u<=o)return!1;o=u}}return!0}const kR=["January","February","March","April","May","June","July","August","September","October","November","December"],RR=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function MR(t){return t.slice(0,3)}const T9=RR.map(MR),C9=kR.map(MR),A9={MMMM:kR,MMM:C9,WWWW:RR,WWW:T9};function fd(t){return(t<10?"0":"")+t}function I9(t){return(t<10?"00":t<100?"0":"")+t}const P9={YYYY:t=>t.getFullYear(),YY:t=>(t.getFullYear()+"").slice(2),MMMM:(t,e)=>e.MMMM[t.getMonth()],MMM:(t,e)=>e.MMM[t.getMonth()],MM:t=>fd(t.getMonth()+1),M:t=>t.getMonth()+1,DD:t=>fd(t.getDate()),D:t=>t.getDate(),WWWW:(t,e)=>e.WWWW[t.getDay()],WWW:(t,e)=>e.WWW[t.getDay()],HH:t=>fd(t.getHours()),H:t=>t.getHours(),h:t=>{let e=t.getHours();return e==0?12:e>12?e-12:e},AA:t=>t.getHours()>=12?"PM":"AM",aa:t=>t.getHours()>=12?"pm":"am",a:t=>t.getHours()>=12?"p":"a",mm:t=>fd(t.getMinutes()),m:t=>t.getMinutes(),ss:t=>fd(t.getSeconds()),s:t=>t.getSeconds(),fff:t=>I9(t.getMilliseconds())};function Ab(t,e){e=e||A9;let n=[],r=/\{([a-z]+)\}|[^{]+/gi,i;for(;i=r.exec(t);)n.push(i[0][0]=="{"?P9[i[1]]:i[0]);return s=>{let o="";for(let a=0;a<n.length;a++)o+=typeof n[a]=="string"?n[a]:n[a](s,e);return o}}const k9=new Intl.DateTimeFormat().resolvedOptions().timeZone;function R9(t,e){let n;return e=="UTC"||e=="Etc/UTC"?n=new Date(+t+t.getTimezoneOffset()*6e4):e==k9?n=t:(n=new Date(t.toLocaleString("en-US",{timeZone:e})),n.setMilliseconds(t.getMilliseconds())),n}const OR=t=>t%1==0,uy=[1,2,2.5,5],M9=Rf(10,-32,0,uy),NR=Rf(10,0,32,uy),O9=NR.filter(OR),Zl=M9.concat(NR),Ib=`
`,DR="{YYYY}",jC=Ib+DR,LR="{M}/{D}",Pd=Ib+LR,Bm=Pd+"/{YY}",FR="{aa}",N9="{h}:{mm}",dc=N9+FR,WC=Ib+dc,GC=":{ss}",It=null;function BR(t){let e=t*1e3,n=e*60,r=n*60,i=r*24,s=i*30,o=i*365,u=(t==1?Rf(10,0,3,uy).filter(OR):Rf(10,-3,0,uy)).concat([e,e*5,e*10,e*15,e*30,n,n*5,n*10,n*15,n*30,r,r*2,r*3,r*4,r*6,r*8,r*12,i,i*2,i*3,i*4,i*5,i*6,i*7,i*8,i*9,i*10,i*15,s,s*2,s*3,s*4,s*6,o,o*2,o*5,o*10,o*25,o*50,o*100]);const h=[[o,DR,It,It,It,It,It,It,1],[i*28,"{MMM}",jC,It,It,It,It,It,1],[i,LR,jC,It,It,It,It,It,1],[r,"{h}"+FR,Bm,It,Pd,It,It,It,1],[n,dc,Bm,It,Pd,It,It,It,1],[e,GC,Bm+" "+dc,It,Pd+" "+dc,It,WC,It,1],[t,GC+".{fff}",Bm+" "+dc,It,Pd+" "+dc,It,WC,It,1]];function d(p){return(f,g,v,w,C,b)=>{let S=[],_=C>=o,A=C>=s&&C<o,P=p(v),F=Ut(P*t,3),N=C1(P.getFullYear(),_?0:P.getMonth(),A||_?1:P.getDate()),D=Ut(N*t,3);if(A||_){let q=A?C/s:0,G=_?C/o:0,H=F==D?F:Ut(C1(N.getFullYear()+G,N.getMonth()+q,1)*t,3),J=new Date(jn(H/t)),V=J.getFullYear(),U=J.getMonth();for(let Z=0;H<=w;Z++){let ie=C1(V+G*Z,U+q*Z,1),O=ie-p(Ut(ie*t,3));H=Ut((+ie+O)*t,3),H<=w&&S.push(H)}}else{let q=C>=i?i:C,G=Oi(v)-Oi(F),H=D+G+n0(F-D,q);S.push(H);let J=p(H),V=J.getHours()+J.getMinutes()/n+J.getSeconds()/r,U=C/r,Z=f.axes[g]._space,ie=b/Z;for(;H=Ut(H+C,t==1?0:3),!(H>w);)if(U>1){let O=Oi(Ut(V+U,6))%24,B=p(H).getHours()-O;B>1&&(B=-1),H-=B*r,V=(V+U)%24;let ee=S[S.length-1];Ut((H-ee)/C,3)*ie>=.7&&S.push(H)}else S.push(H)}return S}}return[u,h,d]}const[D9,L9,F9]=BR(1),[B9,U9,z9]=BR(.001);Rf(2,-53,53,[1]);function VC(t,e){return t.map(n=>n.map((r,i)=>i==0||i==8||r==null?r:e(i==1||n[8]==0?r:n[1]+r)))}function XC(t,e){return(n,r,i,s,o)=>{let a=e.find(v=>o>=v[0])||e[e.length-1],u,h,d,p,f,g;return r.map(v=>{let w=t(v),C=w.getFullYear(),b=w.getMonth(),S=w.getDate(),_=w.getHours(),A=w.getMinutes(),P=w.getSeconds(),F=C!=u&&a[2]||b!=h&&a[3]||S!=d&&a[4]||_!=p&&a[5]||A!=f&&a[6]||P!=g&&a[7]||a[1];return u=C,h=b,d=S,p=_,f=A,g=P,F(w)})}}function $9(t,e){let n=Ab(e);return(r,i,s,o,a)=>i.map(u=>n(t(u)))}function C1(t,e,n){return new Date(t,e,n)}function qC(t,e){return e(t)}const H9="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function YC(t,e){return(n,r,i,s)=>s==null?wb:e(t(r))}function j9(t,e){let n=t.series[e];return n.width?n.stroke(t,e):n.points.width?n.points.stroke(t,e):null}function W9(t,e){return t.series[e].fill(t,e)}const G9={show:!0,live:!0,isolate:!1,mount:c9,markers:{show:!0,width:2,stroke:j9,fill:W9,dash:"solid"},idx:null,idxs:null,values:[]};function V9(t,e){let n=t.cursor.points,r=Qi(),i=n.size(t,e);Yt(r,Ad,i),Yt(r,Id,i);let s=i/-2;Yt(r,"marginLeft",s),Yt(r,"marginTop",s);let o=n.width(t,e,i);return o&&Yt(r,"borderWidth",o),r}function X9(t,e){let n=t.series[e].points;return n._fill||n._stroke}function q9(t,e){let n=t.series[e].points;return n._stroke||n._fill}function Y9(t,e){return t.series[e].points.size}const A1=[0,0];function Q9(t,e,n){return A1[0]=e,A1[1]=n,A1}function Um(t,e,n,r=!0){return i=>{i.button==0&&(!r||i.target==e)&&n(i)}}function I1(t,e,n,r=!0){return i=>{(!r||i.target==e)&&n(i)}}const K9={show:!0,x:!0,y:!0,lock:!1,move:Q9,points:{one:!1,show:V9,size:Y9,width:0,stroke:q9,fill:X9},bind:{mousedown:Um,mouseup:Um,click:Um,dblclick:Um,mousemove:I1,mouseleave:I1,mouseenter:I1},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(t,e)=>{e.stopPropagation(),e.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(t,e,n,r,i)=>r-i,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},UR={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Pb=Pn({},UR,{filter:TR}),zR=Pn({},Pb,{size:10}),$R=Pn({},UR,{show:!1}),kb='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',HR="bold "+kb,jR=1.5,QC={show:!0,scale:"x",stroke:_b,space:50,gap:5,size:50,labelGap:0,labelSize:30,labelFont:HR,side:2,grid:Pb,ticks:zR,border:$R,font:kb,lineGap:jR,rotate:0},Z9="Value",J9="Time",KC={show:!0,scale:"x",auto:!1,sorted:1,min:lt,max:-lt,idxs:[]};function ej(t,e,n,r,i){return e.map(s=>s==null?"":Tb(s))}function tj(t,e,n,r,i,s,o){let a=[],u=xl.get(i)||0;n=o?n:Ut(n0(n,i),u);for(let h=n;h<=r;h=Ut(h+i,u))a.push(Object.is(h,-0)?0:h);return a}function I_(t,e,n,r,i,s,o){const a=[],u=t.scales[t.axes[e].scale].log,h=u==10?ua:SR,d=Oi(h(n));i=dh(u,d),u==10&&(i=Zl[Is(i,Zl)]);let p=n,f=i*u;u==10&&(f=Zl[Is(f,Zl)]);do a.push(p),p=p+i,u==10&&!xl.has(p)&&(p=Ut(p,xl.get(i))),p>=f&&(i=p,f=i*u,u==10&&(f=Zl[Is(f,Zl)]));while(p<=r);return a}function nj(t,e,n,r,i,s,o){let u=t.scales[t.axes[e].scale].asinh,h=r>u?I_(t,e,Or(u,n),r,i):[u],d=r>=0&&n<=0?[0]:[];return(n<-u?I_(t,e,Or(u,-r),-n,i):[u]).reverse().map(f=>-f).concat(d,h)}const WR=/./,rj=/[12357]/,ij=/[125]/,ZC=/1/,P_=(t,e,n,r)=>t.map((i,s)=>e==4&&i==0||s%r==0&&n.test(i.toExponential()[i<0?1:0])?i:null);function sj(t,e,n,r,i){let s=t.axes[n],o=s.scale,a=t.scales[o],u=t.valToPos,h=s._space,d=u(10,o),p=u(9,o)-d>=h?WR:u(7,o)-d>=h?rj:u(5,o)-d>=h?ij:ZC;if(p==ZC){let f=Gn(u(1,o)-d);if(f<h)return P_(e.slice().reverse(),a.distr,p,Ji(h/f)).reverse()}return P_(e,a.distr,p,1)}function oj(t,e,n,r,i){let s=t.axes[n],o=s.scale,a=s._space,u=t.valToPos,h=Gn(u(1,o)-u(2,o));return h<a?P_(e.slice().reverse(),3,WR,Ji(a/h)).reverse():e}function aj(t,e,n,r){return r==null?wb:e==null?"":Tb(e)}const JC={show:!0,scale:"y",stroke:_b,space:30,gap:5,size:50,labelGap:0,labelSize:30,labelFont:HR,side:3,grid:Pb,ticks:zR,border:$R,font:kb,lineGap:jR,rotate:0};function lj(t,e){let n=3+(t||1)*2;return Ut(n*e,3)}function uj(t,e){let{scale:n,idxs:r}=t.series[0],i=t._data[0],s=t.valToPos(i[r[0]],n,!0),o=t.valToPos(i[r[1]],n,!0),a=Gn(o-s),u=t.series[e],h=a/(u.points.space*bt);return r[1]-r[0]<=h}const eA={scale:null,auto:!0,sorted:0,min:lt,max:-lt},GR=(t,e,n,r,i)=>i,tA={show:!0,auto:!0,sorted:0,gaps:GR,alpha:1,facets:[Pn({},eA,{scale:"x"}),Pn({},eA,{scale:"y"})]},nA={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:GR,alpha:1,points:{show:uj,filter:null},values:null,min:lt,max:-lt,idxs:[],path:null,clip:null};function cj(t,e,n,r,i){return n/10}const VR={time:DH,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},hj=Pn({},VR,{time:!1,ori:1}),rA={};function XR(t,e){let n=rA[t];return n||(n={key:t,plots:[],sub(r){n.plots.push(r)},unsub(r){n.plots=n.plots.filter(i=>i!=r)},pub(r,i,s,o,a,u,h){for(let d=0;d<n.plots.length;d++)n.plots[d]!=i&&n.plots[d].pub(r,i,s,o,a,u,h)}},t!=null&&(rA[t]=n)),n}const mh=1,k_=2;function Ru(t,e,n){const r=t.mode,i=t.series[e],s=r==2?t._data[e]:t._data,o=t.scales,a=t.bbox;let u=s[0],h=r==2?s[1]:s[e],d=r==2?o[i.facets[0].scale]:o[t.series[0].scale],p=r==2?o[i.facets[1].scale]:o[i.scale],f=a.left,g=a.top,v=a.width,w=a.height,C=t.valToPosH,b=t.valToPosV;return d.ori==0?n(i,u,h,d,p,C,b,f,g,v,w,s0,Eh,a0,YR,KR):n(i,u,h,d,p,b,C,g,f,w,v,o0,Th,Ob,QR,ZR)}function Rb(t,e){let n=0,r=0,i=wt(t.bands,Cb);for(let s=0;s<i.length;s++){let o=i[s];o.series[0]==e?n=o.dir:o.series[1]==e&&(o.dir==1?r|=1:r|=2)}return[n,r==1?-1:r==2?1:r==3?2:0]}function dj(t,e,n,r,i){let s=t.mode,o=t.series[e],a=s==2?o.facets[1].scale:o.scale,u=t.scales[a];return i==-1?u.min:i==1?u.max:u.distr==3?u.dir==1?u.min:u.max:0}function ca(t,e,n,r,i,s){return Ru(t,e,(o,a,u,h,d,p,f,g,v,w,C)=>{let b=o.pxRound;const S=h.dir*(h.ori==0?1:-1),_=h.ori==0?Eh:Th;let A,P;S==1?(A=n,P=r):(A=r,P=n);let F=b(p(a[A],h,w,g)),N=b(f(u[A],d,C,v)),D=b(p(a[P],h,w,g)),q=b(f(s==1?d.max:d.min,d,C,v)),G=new Path2D(i);return _(G,D,q),_(G,F,q),_(G,F,N),G})}function i0(t,e,n,r,i,s){let o=null;if(t.length>0){o=new Path2D;const a=e==0?a0:Ob;let u=n;for(let p=0;p<t.length;p++){let f=t[p];if(f[1]>f[0]){let g=f[0]-u;g>0&&a(o,u,r,g,r+s),u=f[1]}}let h=n+i-u,d=10;h>0&&a(o,u,r-d/2,h,r+s+d)}return o}function fj(t,e,n){let r=t[t.length-1];r&&r[0]==e?r[1]=n:t.push([e,n])}function Mb(t,e,n,r,i,s,o){let a=[],u=t.length;for(let h=i==1?n:r;h>=n&&h<=r;h+=i)if(e[h]===null){let p=h,f=h;if(i==1)for(;++h<=r&&e[h]===null;)f=h;else for(;--h>=n&&e[h]===null;)f=h;let g=s(t[p]),v=f==p?g:s(t[f]),w=p-i;g=o<=0&&w>=0&&w<u?s(t[w]):g;let b=f+i;v=o>=0&&b>=0&&b<u?s(t[b]):v,v>=g&&a.push([g,v])}return a}function iA(t){return t==0?ER:t==1?jn:e=>Kl(e,t)}function qR(t){let e=t==0?s0:o0,n=t==0?(i,s,o,a,u,h)=>{i.arcTo(s,o,a,u,h)}:(i,s,o,a,u,h)=>{i.arcTo(o,s,u,a,h)},r=t==0?(i,s,o,a,u)=>{i.rect(s,o,a,u)}:(i,s,o,a,u)=>{i.rect(o,s,u,a)};return(i,s,o,a,u,h=0,d=0)=>{h==0&&d==0?r(i,s,o,a,u):(h=ss(h,a/2,u/2),d=ss(d,a/2,u/2),e(i,s+h,o),n(i,s+a,o,s+a,o+u,h),n(i,s+a,o+u,s,o+u,d),n(i,s,o+u,s,o,d),n(i,s,o,s+a,o,h),i.closePath())}}const s0=(t,e,n)=>{t.moveTo(e,n)},o0=(t,e,n)=>{t.moveTo(n,e)},Eh=(t,e,n)=>{t.lineTo(e,n)},Th=(t,e,n)=>{t.lineTo(n,e)},a0=qR(0),Ob=qR(1),YR=(t,e,n,r,i,s)=>{t.arc(e,n,r,i,s)},QR=(t,e,n,r,i,s)=>{t.arc(n,e,r,i,s)},KR=(t,e,n,r,i,s,o)=>{t.bezierCurveTo(e,n,r,i,s,o)},ZR=(t,e,n,r,i,s,o)=>{t.bezierCurveTo(n,e,i,r,o,s)};function JR(t){return(e,n,r,i,s)=>Ru(e,n,(o,a,u,h,d,p,f,g,v,w,C)=>{let{pxRound:b,points:S}=o,_,A;h.ori==0?(_=s0,A=YR):(_=o0,A=QR);const P=Ut(S.width*bt,3);let F=(S.size-S.width)/2*bt,N=Ut(F*2,3),D=new Path2D,q=new Path2D,{left:G,top:H,width:J,height:V}=e.bbox;a0(q,G-N,H-N,J+N*2,V+N*2);const U=Z=>{if(u[Z]!=null){let ie=b(p(a[Z],h,w,g)),O=b(f(u[Z],d,C,v));_(D,ie+F,O),A(D,ie,O,F,0,ag*2)}};if(s)s.forEach(U);else for(let Z=r;Z<=i;Z++)U(Z);return{stroke:P>0?D:null,fill:D,clip:q,flags:mh|k_}})}function eM(t){return(e,n,r,i,s,o)=>{r!=i&&(s!=r&&o!=r&&t(e,n,r),s!=i&&o!=i&&t(e,n,i),t(e,n,o))}}const pj=eM(Eh),mj=eM(Th);function tM(t){const e=wt(t==null?void 0:t.alignGaps,0);return(n,r,i,s)=>Ru(n,r,(o,a,u,h,d,p,f,g,v,w,C)=>{let b=o.pxRound,S=te=>b(p(te,h,w,g)),_=te=>b(f(te,d,C,v)),A,P;h.ori==0?(A=Eh,P=pj):(A=Th,P=mj);const F=h.dir*(h.ori==0?1:-1),N={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:mh},D=N.stroke;let q=lt,G=-lt,H,J,V,U=S(a[F==1?i:s]),Z=hh(u,i,s,1*F),ie=hh(u,i,s,-1*F),O=S(a[Z]),L=S(a[ie]),Q=!1;for(let te=F==1?i:s;te>=i&&te<=s;te+=F){let be=S(a[te]),ge=u[te];be==U?ge!=null?(J=_(ge),q==lt&&(A(D,be,J),H=J),q=ss(J,q),G=Or(J,G)):ge===null&&(Q=!0):(q!=lt&&(P(D,U,q,G,H,J),V=U),ge!=null?(J=_(ge),A(D,be,J),q=G=H=J):(q=lt,G=-lt,ge===null&&(Q=!0)),U=be)}q!=lt&&q!=G&&V!=U&&P(D,U,q,G,H,J);let[B,ee]=Rb(n,r);if(o.fill!=null||B!=0){let te=N.fill=new Path2D(D),be=o.fillTo(n,r,o.min,o.max,B),ge=_(be);A(te,L,ge),A(te,O,ge)}if(!o.spanGaps){let te=[];Q&&te.push(...Mb(a,u,i,s,F,S,e)),N.gaps=te=o.gaps(n,r,i,s,te),N.clip=i0(te,h.ori,g,v,w,C)}return ee!=0&&(N.band=ee==2?[ca(n,r,i,s,D,-1),ca(n,r,i,s,D,1)]:ca(n,r,i,s,D,ee)),N})}function gj(t){const e=wt(t.align,1),n=wt(t.ascDesc,!1),r=wt(t.alignGaps,0),i=wt(t.extend,!1);return(s,o,a,u)=>Ru(s,o,(h,d,p,f,g,v,w,C,b,S,_)=>{let A=h.pxRound,{left:P,width:F}=s.bbox,N=B=>A(v(B,f,S,C)),D=B=>A(w(B,g,_,b)),q=f.ori==0?Eh:Th;const G={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:mh},H=G.stroke,J=f.dir*(f.ori==0?1:-1);a=hh(p,a,u,1),u=hh(p,a,u,-1);let V=D(p[J==1?a:u]),U=N(d[J==1?a:u]),Z=U,ie=U;i&&e==-1&&(ie=P,q(H,ie,V)),q(H,U,V);for(let B=J==1?a:u;B>=a&&B<=u;B+=J){let ee=p[B];if(ee==null)continue;let te=N(d[B]),be=D(ee);e==1?q(H,te,V):q(H,Z,be),q(H,te,be),V=be,Z=te}let O=Z;i&&e==1&&(O=P+F,q(H,O,V));let[L,Q]=Rb(s,o);if(h.fill!=null||L!=0){let B=G.fill=new Path2D(H),ee=h.fillTo(s,o,h.min,h.max,L),te=D(ee);q(B,O,te),q(B,ie,te)}if(!h.spanGaps){let B=[];B.push(...Mb(d,p,a,u,J,N,r));let ee=h.width*bt/2,te=n||e==1?ee:-ee,be=n||e==-1?-ee:ee;B.forEach(ge=>{ge[0]+=te,ge[1]+=be}),G.gaps=B=h.gaps(s,o,a,u,B),G.clip=i0(B,f.ori,C,b,S,_)}return Q!=0&&(G.band=Q==2?[ca(s,o,a,u,H,-1),ca(s,o,a,u,H,1)]:ca(s,o,a,u,H,Q)),G})}function sA(t,e,n,r,i,s,o=lt){if(t.length>1){let a=null;for(let u=0,h=1/0;u<t.length;u++)if(e[u]!==void 0){if(a!=null){let d=Gn(t[u]-t[a]);d<h&&(h=d,o=Gn(n(t[u],r,i,s)-n(t[a],r,i,s)))}a=u}}return o}function yj(t){t=t||Yd;const e=wt(t.size,[.6,lt,1]),n=t.align||0,r=t.gap||0;let i=t.radius;i=i==null?[0,0]:typeof i=="number"?[i,0]:i;const s=st(i),o=1-e[0],a=wt(e[1],lt),u=wt(e[2],1),h=wt(t.disp,Yd),d=wt(t.each,g=>{}),{fill:p,stroke:f}=h;return(g,v,w,C)=>Ru(g,v,(b,S,_,A,P,F,N,D,q,G,H)=>{let J=b.pxRound,V=n,U=r*bt,Z=a*bt,ie=u*bt,O,L;A.ori==0?[O,L]=s(g,v):[L,O]=s(g,v);const Q=A.dir*(A.ori==0?1:-1);let B=A.ori==0?a0:Ob,ee=A.ori==0?d:(qe,sr,Ys,Uo,Qs,_r,mi)=>{d(qe,sr,Ys,Qs,Uo,mi,_r)},te=wt(g.bands,Cb).find(qe=>qe.series[0]==v),be=te!=null?te.dir:0,ge=b.fillTo(g,v,b.min,b.max,be),je=J(N(ge,P,H,q)),We,Ne,mt,St=G,Qe=J(b.width*bt),De=!1,ht=null,nt=null,En=null,On=null;p!=null&&(Qe==0||f!=null)&&(De=!0,ht=p.values(g,v,w,C),nt=new Map,new Set(ht).forEach(qe=>{qe!=null&&nt.set(qe,new Path2D)}),Qe>0&&(En=f.values(g,v,w,C),On=new Map,new Set(En).forEach(qe=>{qe!=null&&On.set(qe,new Path2D)})));let{x0:fi,size:pi}=h;if(fi!=null&&pi!=null){V=1,S=fi.values(g,v,w,C),fi.unit==2&&(S=S.map(Ys=>g.posToVal(D+Ys*G,A.key,!0)));let qe=pi.values(g,v,w,C);pi.unit==2?Ne=qe[0]*G:Ne=F(qe[0],A,G,D)-F(0,A,G,D),St=sA(S,_,F,A,G,D,St),mt=St-Ne+U}else St=sA(S,_,F,A,G,D,St),mt=St*o+U,Ne=St-mt;mt<1&&(mt=0),Qe>=Ne/2&&(Qe=0),mt<5&&(J=ER);let Nn=mt>0,Mu=St-mt-(Nn?Qe:0);Ne=J(A_(Mu,ie,Z)),We=(V==0?Ne/2:V==Q?0:Ne)-V*Q*((V==0?U/2:0)+(Nn?Qe/2:0));const xr={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},qs=De?null:new Path2D;let Xe=null;if(te!=null)Xe=g.data[te.series[1]];else{let{y0:qe,y1:sr}=h;qe!=null&&sr!=null&&(_=sr.values(g,v,w,C),Xe=qe.values(g,v,w,C))}let Ze=O*Ne,mn=L*Ne;for(let qe=Q==1?w:C;qe>=w&&qe<=C;qe+=Q){let sr=_[qe];if(sr==null)continue;if(Xe!=null){let Ui=Xe[qe]??0;if(sr-Ui==0)continue;je=N(Ui,P,H,q)}let Ys=A.distr!=2||h!=null?S[qe]:qe,Uo=F(Ys,A,G,D),Qs=N(wt(sr,ge),P,H,q),_r=J(Uo-We),mi=J(Or(Qs,je)),Ur=J(ss(Qs,je)),Yr=mi-Ur;if(sr!=null){let Ui=sr<0?mn:Ze,Ks=sr<0?Ze:mn;De?(Qe>0&&En[qe]!=null&&B(On.get(En[qe]),_r,Ur+Oi(Qe/2),Ne,Or(0,Yr-Qe),Ui,Ks),ht[qe]!=null&&B(nt.get(ht[qe]),_r,Ur+Oi(Qe/2),Ne,Or(0,Yr-Qe),Ui,Ks)):B(qs,_r,Ur+Oi(Qe/2),Ne,Or(0,Yr-Qe),Ui,Ks),ee(g,v,qe,_r-Qe/2,Ur,Ne+Qe,Yr)}}return Qe>0?xr.stroke=De?On:qs:De||(xr._fill=b.width==0?b._fill:b._stroke??b._fill,xr.width=0),xr.fill=De?nt:qs,xr})}function vj(t,e){const n=wt(e==null?void 0:e.alignGaps,0);return(r,i,s,o)=>Ru(r,i,(a,u,h,d,p,f,g,v,w,C,b)=>{let S=a.pxRound,_=O=>S(f(O,d,C,v)),A=O=>S(g(O,p,b,w)),P,F,N;d.ori==0?(P=s0,N=Eh,F=KR):(P=o0,N=Th,F=ZR);const D=d.dir*(d.ori==0?1:-1);s=hh(h,s,o,1),o=hh(h,s,o,-1);let q=_(u[D==1?s:o]),G=q,H=[],J=[];for(let O=D==1?s:o;O>=s&&O<=o;O+=D)if(h[O]!=null){let Q=u[O],B=_(Q);H.push(G=B),J.push(A(h[O]))}const V={stroke:t(H,J,P,N,F,S),fill:null,clip:null,band:null,gaps:null,flags:mh},U=V.stroke;let[Z,ie]=Rb(r,i);if(a.fill!=null||Z!=0){let O=V.fill=new Path2D(U),L=a.fillTo(r,i,a.min,a.max,Z),Q=A(L);N(O,G,Q),N(O,q,Q)}if(!a.spanGaps){let O=[];O.push(...Mb(u,h,s,o,D,_,n)),V.gaps=O=a.gaps(r,i,s,o,O),V.clip=i0(O,d.ori,v,w,C,b)}return ie!=0&&(V.band=ie==2?[ca(r,i,s,o,U,-1),ca(r,i,s,o,U,1)]:ca(r,i,s,o,U,ie)),V})}function xj(t){return vj(_j,t)}function _j(t,e,n,r,i,s){const o=t.length;if(o<2)return null;const a=new Path2D;if(n(a,t[0],e[0]),o==2)r(a,t[1],e[1]);else{let u=Array(o),h=Array(o-1),d=Array(o-1),p=Array(o-1);for(let f=0;f<o-1;f++)d[f]=e[f+1]-e[f],p[f]=t[f+1]-t[f],h[f]=d[f]/p[f];u[0]=h[0];for(let f=1;f<o-1;f++)h[f]===0||h[f-1]===0||h[f-1]>0!=h[f]>0?u[f]=0:(u[f]=3*(p[f-1]+p[f])/((2*p[f]+p[f-1])/h[f-1]+(p[f]+2*p[f-1])/h[f]),isFinite(u[f])||(u[f]=0));u[o-1]=h[o-2];for(let f=0;f<o-1;f++)i(a,t[f]+p[f]/3,e[f]+u[f]*p[f]/3,t[f+1]-p[f]/3,e[f+1]-u[f+1]*p[f]/3,t[f+1],e[f+1])}return a}const R_=new Set;function oA(){for(let t of R_)t.syncRect(!0)}Sh&&(pu(e9,Vc,oA),pu(t9,Vc,oA,!0),pu(ay,Vc,()=>{Nr.pxRatio=bt}));const wj=tM(),bj=JR();function aA(t,e,n,r){return(r?[t[0],t[1]].concat(t.slice(2)):[t[0]].concat(t.slice(1))).map((s,o)=>M_(s,o,e,n))}function Sj(t,e){return t.map((n,r)=>r==0?{}:Pn({},e,n))}function M_(t,e,n,r){return Pn({},e==0?n:r,t)}function nM(t,e,n){return e==null?fh:[e,n]}const Ej=nM;function Tj(t,e,n){return e==null?fh:ly(e,n,Eb,!0)}function rM(t,e,n,r){return e==null?fh:t0(e,n,t.scales[r].log,!1)}const Cj=rM;function iM(t,e,n,r){return e==null?fh:Sb(e,n,t.scales[r].log,!1)}const Aj=iM;function Ij(t,e,n,r,i){let s=Or(UC(t),UC(e)),o=e-t,a=Is(i/r*o,n);do{let u=n[a],h=r*u/o;if(h>=i&&s+(u<5?xl.get(u):0)<=17)return[u,h]}while(++a<n.length);return[0,0]}function lA(t){let e,n;return t=t.replace(/(\d+)px/,(r,i)=>(e=jn((n=+i)*bt))+"px"),[t,e,n]}function Pj(t){t.show&&[t.font,t.labelFont].forEach(e=>{let n=Ut(e[2]*bt,1);e[0]=e[0].replace(/[0-9.]+px/,n+"px"),e[1]=n})}function Nr(t,e,n){const r={mode:wt(t.mode,1)},i=r.mode;function s(E,I){return((I.distr==3?ua(E>0?E:I.clamp(r,E,I.min,I.max,I.key)):I.distr==4?T1(E,I.asinh):I.distr==100?I.fwd(E):E)-I._min)/(I._max-I._min)}function o(E,I,R,M){let z=s(E,I);return M+R*(I.dir==-1?1-z:z)}function a(E,I,R,M){let z=s(E,I);return M+R*(I.dir==-1?z:1-z)}function u(E,I,R,M){return I.ori==0?o(E,I,R,M):a(E,I,R,M)}r.valToPosH=o,r.valToPosV=a;let h=!1;r.status=0;const d=r.root=Qi(LH);if(t.id!=null&&(d.id=t.id),Ei(d,t.class),t.title){let E=Qi(UH,d);E.textContent=t.title}const p=bs("canvas"),f=r.ctx=p.getContext("2d"),g=Qi(zH,d);pu("click",g,E=>{E.target===w&&(Pt!=ar||Dt!=qn)&&Kt.click(r,E)},!0);const v=r.under=Qi($H,g);g.appendChild(p);const w=r.over=Qi(HH,g);t=ph(t);const C=+wt(t.pxAlign,1),b=iA(C);(t.plugins||[]).forEach(E=>{E.opts&&(t=E.opts(r,t)||t)});const S=t.ms||.001,_=r.series=i==1?aA(t.series||[],KC,nA,!1):Sj(t.series||[null],tA),A=r.axes=aA(t.axes||[],QC,JC,!0),P=r.scales={},F=r.bands=t.bands||[];F.forEach(E=>{E.fill=st(E.fill||null),E.dir=wt(E.dir,-1)});const N=i==2?_[1].facets[0].scale:_[0].scale,D={axes:sp,series:rp},q=(t.drawOrder||["axes","series"]).map(E=>D[E]);function G(E){let I=P[E];if(I==null){let R=(t.scales||Yd)[E]||Yd;if(R.from!=null)G(R.from),P[E]=Pn({},P[R.from],R,{key:E});else{I=P[E]=Pn({},E==N?VR:hj,R),I.key=E;let M=I.time,z=I.range,Y=Va(z);if((E!=N||i==2&&!M)&&(Y&&(z[0]==null||z[1]==null)&&(z={min:z[0]==null?LC:{mode:1,hard:z[0],soft:z[0]},max:z[1]==null?LC:{mode:1,hard:z[1],soft:z[1]}},Y=!1),!Y&&r0(z))){let se=z;z=(ce,pe,xe)=>pe==null?fh:ly(pe,xe,se)}I.range=st(z||(M?Ej:E==N?I.distr==3?Cj:I.distr==4?Aj:nM:I.distr==3?rM:I.distr==4?iM:Tj)),I.auto=st(Y?!1:I.auto),I.clamp=st(I.clamp||cj),I._min=I._max=null}}}G("x"),G("y"),i==1&&_.forEach(E=>{G(E.scale)}),A.forEach(E=>{G(E.scale)});for(let E in t.scales)G(E);const H=P[N],J=H.distr;let V,U;H.ori==0?(Ei(d,FH),V=o,U=a):(Ei(d,BH),V=a,U=o);const Z={};for(let E in P){let I=P[E];(I.min!=null||I.max!=null)&&(Z[E]={min:I.min,max:I.max},I.min=I.max=null)}const ie=t.tzDate||(E=>new Date(jn(E/S))),O=t.fmtDate||Ab,L=S==1?F9(ie):z9(ie),Q=XC(ie,VC(S==1?L9:U9,O)),B=YC(ie,qC(H9,O)),ee=[],te=r.legend=Pn({},G9,t.legend),be=te.show,ge=te.markers;te.idxs=ee,ge.width=st(ge.width),ge.dash=st(ge.dash),ge.stroke=st(ge.stroke),ge.fill=st(ge.fill);let je,We,Ne,mt=[],St=[],Qe,De=!1,ht={};if(te.live){const E=_[1]?_[1].values:null;De=E!=null,Qe=De?E(r,1,0):{_:0};for(let I in Qe)ht[I]=wb}if(be)if(je=bs("table",qH,d),Ne=bs("tbody",null,je),te.mount(r,je),De){We=bs("thead",null,je,Ne);let E=bs("tr",null,We);bs("th",null,E);for(var nt in Qe)bs("th",bC,E).textContent=nt}else Ei(je,QH),te.live&&Ei(je,YH);const En={show:!0},On={show:!1};function fi(E,I){if(I==0&&(De||!te.live||i==2))return fh;let R=[],M=bs("tr",KH,Ne,Ne.childNodes[I]);Ei(M,E.class),E.show||Ei(M,tu);let z=bs("th",null,M);if(ge.show){let ce=Qi(ZH,z);if(I>0){let pe=ge.width(r,I);pe&&(ce.style.border=pe+"px "+ge.dash(r,I)+" "+ge.stroke(r,I)),ce.style.background=ge.fill(r,I)}}let Y=Qi(bC,z);Y.textContent=E.label,I>0&&(ge.show||(Y.style.color=E.width>0?ge.stroke(r,I):ge.fill(r,I)),Nn("click",z,ce=>{if(Le._lock)return;Js(ce);let pe=_.indexOf(E);if((ce.ctrlKey||ce.metaKey)!=te.isolate){let xe=_.some((Se,Ee)=>Ee>0&&Ee!=pe&&Se.show);_.forEach((Se,Ee)=>{Ee>0&&An(Ee,xe?Ee==pe?En:On:En,!0,ln.setSeries)})}else An(pe,{show:!E.show},!0,ln.setSeries)},!1),_a&&Nn(AC,z,ce=>{Le._lock||(Js(ce),An(_.indexOf(E),ji,!0,ln.setSeries))},!1));for(var se in Qe){let ce=bs("td",JH,M);ce.textContent="--",R.push(ce)}return[M,R]}const pi=new Map;function Nn(E,I,R,M=!0){const z=pi.get(I)||{},Y=Le.bind[E](r,I,R,M);Y&&(pu(E,I,z[E]=Y),pi.set(I,z))}function Mu(E,I,R){const M=pi.get(I)||{};for(let z in M)(E==null||z==E)&&(C_(z,I,M[z]),delete M[z]);E==null&&pi.delete(I)}let xr=0,qs=0,Xe=0,Ze=0,mn=0,qe=0,sr=mn,Ys=qe,Uo=Xe,Qs=Ze,_r=0,mi=0,Ur=0,Yr=0;r.bbox={};let Ui=!1,Ks=!1,xa=!1,Zs=!1,Ou=!1,Qr=!1;function Ih(E,I,R){(R||E!=r.width||I!=r.height)&&Qf(E,I),ao(!1),xa=!0,Ks=!0,uo()}function Qf(E,I){r.width=xr=Xe=E,r.height=qs=Ze=I,mn=qe=0,Zf(),f0();let R=r.bbox;_r=R.left=Kl(mn*bt,.5),mi=R.top=Kl(qe*bt,.5),Ur=R.width=Kl(Xe*bt,.5),Yr=R.height=Kl(Ze*bt,.5)}const h0=3;function d0(){let E=!1,I=0;for(;!E;){I++;let R=y0(I),M=Oh(I);E=I==h0||R&&M,E||(Qf(r.width,r.height),Ks=!0)}}function Kf({width:E,height:I}){Ih(E,I)}r.setSize=Kf;function Zf(){let E=!1,I=!1,R=!1,M=!1;A.forEach((z,Y)=>{if(z.show&&z._show){let{side:se,_size:ce}=z,pe=se%2,xe=z.label!=null?z.labelSize:0,Se=ce+xe;Se>0&&(pe?(Xe-=Se,se==3?(mn+=Se,M=!0):R=!0):(Ze-=Se,se==0?(qe+=Se,E=!0):I=!0))}}),zo[0]=E,zo[1]=R,zo[2]=I,zo[3]=M,Xe-=no[1]+no[3],mn+=no[3],Ze-=no[2]+no[0],qe+=no[0]}function f0(){let E=mn+Xe,I=qe+Ze,R=mn,M=qe;function z(Y,se){switch(Y){case 1:return E+=se,E-se;case 2:return I+=se,I-se;case 3:return R-=se,R+se;case 0:return M-=se,M+se}}A.forEach((Y,se)=>{if(Y.show&&Y._show){let ce=Y.side;Y._pos=z(ce,Y._size),Y.label!=null&&(Y._lpos=z(ce,Y.labelSize))}})}const Le=r.cursor=Pn({},K9,{drag:{y:i==2}},t.cursor);if(Le.dataIdx==null){let E=Le.hover,I=E.skip=new Set(E.skip??[]);I.add(void 0);let R=E.prox=st(E.prox),M=E.bias??(E.bias=0);Le.dataIdx=(z,Y,se,ce)=>{if(Y==0)return se;let pe=se,xe=R(z,Y,se,ce)??lt,Se=xe>=0&&xe<lt,Ee=H.ori==0?Xe:Ze,$e=Le.left,gt=e[0],He=e[Y];if(I.has(He[se])){pe=null;let Je=null,ze=null,Ce;if(M==0||M==-1)for(Ce=se;Je==null&&Ce-- >0;)I.has(He[Ce])||(Je=Ce);if(M==0||M==1)for(Ce=se;ze==null&&Ce++<He.length;)I.has(He[Ce])||(ze=Ce);if(Je!=null||ze!=null)if(Se){let xt=Je==null?-1/0:V(gt[Je],H,Ee,0),Nt=ze==null?1/0:V(gt[ze],H,Ee,0),Vt=$e-xt,kt=Nt-$e;Vt<=kt?Vt<=xe&&(pe=Je):kt<=xe&&(pe=ze)}else pe=ze==null?Je:Je==null?ze:se-Je<=ze-se?Je:ze}else Se&&Gn($e-V(gt[se],H,Ee,0))>xe&&(pe=null);return pe}}const Js=E=>{Le.event=E};Le.idxs=ee,Le._lock=!1;let Dn=Le.points;Dn.show=st(Dn.show),Dn.size=st(Dn.size),Dn.stroke=st(Dn.stroke),Dn.width=st(Dn.width),Dn.fill=st(Dn.fill);const eo=r.focus=Pn({},t.focus||{alpha:.3},Le.focus),_a=eo.prox>=0,wa=_a&&Dn.one;let zr=[],to=[],ba=[];function Jf(E,I){let R=Dn.show(r,I);if(R)return Ei(R,XH),Ei(R,E.class),So(R,-10,-10,Xe,Ze),w.insertBefore(R,zr[I]),R}function Tl(E,I){if(i==1||I>0){let R=i==1&&P[E.scale].time,M=E.value;E.value=R?HC(M)?YC(ie,qC(M,O)):M||B:M||aj,E.label=E.label||(R?J9:Z9)}if(wa||I>0){E.width=E.width==null?1:E.width,E.paths=E.paths||wj||h9,E.fillTo=st(E.fillTo||dj),E.pxAlign=+wt(E.pxAlign,C),E.pxRound=iA(E.pxAlign),E.stroke=st(E.stroke||null),E.fill=st(E.fill||null),E._stroke=E._fill=E._paths=E._focus=null;let R=lj(Or(1,E.width),1),M=E.points=Pn({},{size:R,width:Or(1,R*.2),stroke:E.stroke,space:R*2,paths:bj,_stroke:null,_fill:null},E.points);M.show=st(M.show),M.filter=st(M.filter),M.fill=st(M.fill),M.stroke=st(M.stroke),M.paths=st(M.paths),M.pxAlign=E.pxAlign}if(be){let R=fi(E,I);mt.splice(I,0,R[0]),St.splice(I,0,R[1]),te.values.push(null)}if(Le.show){ee.splice(I,0,null);let R=null;wa?I==0&&(R=Jf(E,I)):I>0&&(R=Jf(E,I)),zr.splice(I,0,R),to.splice(I,0,0),ba.splice(I,0,0)}Lt("addSeries",I)}function p0(E,I){I=I??_.length,E=i==1?M_(E,I,KC,nA):M_(E,I,{},tA),_.splice(I,0,E),Tl(_[I],I)}r.addSeries=p0;function m0(E){if(_.splice(E,1),be){te.values.splice(E,1),St.splice(E,1);let I=mt.splice(E,1)[0];Mu(null,I.firstChild),I.remove()}Le.show&&(ee.splice(E,1),zr.splice(E,1)[0].remove(),to.splice(E,1),ba.splice(E,1)),Lt("delSeries",E)}r.delSeries=m0;const zo=[!1,!1,!1,!1];function g0(E,I){if(E._show=E.show,E.show){let R=E.side%2,M=P[E.scale];M==null&&(E.scale=R?_[1].scale:N,M=P[E.scale]);let z=M.time;E.size=st(E.size),E.space=st(E.space),E.rotate=st(E.rotate),Va(E.incrs)&&E.incrs.forEach(se=>{!xl.has(se)&&xl.set(se,AR(se))}),E.incrs=st(E.incrs||(M.distr==2?O9:z?S==1?D9:B9:Zl)),E.splits=st(E.splits||(z&&M.distr==1?L:M.distr==3?I_:M.distr==4?nj:tj)),E.stroke=st(E.stroke),E.grid.stroke=st(E.grid.stroke),E.ticks.stroke=st(E.ticks.stroke),E.border.stroke=st(E.border.stroke);let Y=E.values;E.values=Va(Y)&&!Va(Y[0])?st(Y):z?Va(Y)?XC(ie,VC(Y,O)):HC(Y)?$9(ie,Y):Y||Q:Y||ej,E.filter=st(E.filter||(M.distr>=3&&M.log==10?sj:M.distr==3&&M.log==2?oj:TR)),E.font=lA(E.font),E.labelFont=lA(E.labelFont),E._size=E.size(r,null,I,0),E._space=E._rotate=E._incrs=E._found=E._splits=E._values=null,E._size>0&&(zo[I]=!0,E._el=Qi(jH,g))}}function Cl(E,I,R,M){let[z,Y,se,ce]=R,pe=I%2,xe=0;return pe==0&&(ce||Y)&&(xe=I==0&&!z||I==2&&!se?jn(QC.size/3):0),pe==1&&(z||se)&&(xe=I==1&&!Y||I==3&&!ce?jn(JC.size/2):0),xe}const ep=r.padding=(t.padding||[Cl,Cl,Cl,Cl]).map(E=>st(wt(E,Cl))),no=r._padding=ep.map((E,I)=>E(r,I,zo,0));let Ln,Tn=null,Cn=null;const Nu=i==1?_[0].idxs:null;let gi=null,Al=!1;function tp(E,I){if(e=E??[],r.data=r._data=e,i==2){Ln=0;for(let R=1;R<_.length;R++)Ln+=e[R][0].length}else{e.length==0&&(r.data=r._data=e=[[]]),gi=e[0],Ln=gi.length;let R=e;if(J==2){R=e.slice();let M=R[0]=Array(Ln);for(let z=0;z<Ln;z++)M[z]=z}r._data=e=R}if(ao(!0),Lt("setData"),J==2&&(xa=!0),I!==!1){let R=H;R.auto(r,Al)?$o():Un(N,R.min,R.max),Zs=Zs||Le.left>=0,Qr=!0,uo()}}r.setData=tp;function $o(){Al=!0;let E,I;i==1&&(Ln>0?(Tn=Nu[0]=0,Cn=Nu[1]=Ln-1,E=e[0][Tn],I=e[0][Cn],J==2?(E=Tn,I=Cn):E==I&&(J==3?[E,I]=t0(E,E,H.log,!1):J==4?[E,I]=Sb(E,E,H.log,!1):H.time?I=E+jn(86400/S):[E,I]=ly(E,I,Eb,!0))):(Tn=Nu[0]=E=null,Cn=Nu[1]=I=null)),Un(N,E,I)}let Sa,ro,Ph,Il,io,zi,Ot,Et,$i,$t;function or(E,I,R,M,z,Y){E??(E=EC),R??(R=Cb),M??(M="butt"),z??(z=EC),Y??(Y="round"),E!=Sa&&(f.strokeStyle=Sa=E),z!=ro&&(f.fillStyle=ro=z),I!=Ph&&(f.lineWidth=Ph=I),Y!=io&&(f.lineJoin=io=Y),M!=zi&&(f.lineCap=zi=M),R!=Il&&f.setLineDash(Il=R)}function so(E,I,R,M){I!=ro&&(f.fillStyle=ro=I),E!=Ot&&(f.font=Ot=E),R!=Et&&(f.textAlign=Et=R),M!=$i&&(f.textBaseline=$i=M)}function oo(E,I,R,M,z=0){if(M.length>0&&E.auto(r,Al)&&(I==null||I.min==null)){let Y=wt(Tn,0),se=wt(Cn,M.length-1),ce=R.min==null?E.distr==3?s9(M,Y,se):i9(M,Y,se,z):[R.min,R.max];E.min=ss(E.min,R.min=ce[0]),E.max=Or(E.max,R.max=ce[1])}}const wr={min:null,max:null};function kh(){for(let M in P){let z=P[M];Z[M]==null&&(z.min==null||Z[N]!=null&&z.auto(r,Al))&&(Z[M]=wr)}for(let M in P){let z=P[M];Z[M]==null&&z.from!=null&&Z[z.from]!=null&&(Z[M]=wr)}Z[N]!=null&&ao(!0);let E={};for(let M in Z){let z=Z[M];if(z!=null){let Y=E[M]=ph(P[M],p9);if(z.min!=null)Pn(Y,z);else if(M!=N||i==2)if(Ln==0&&Y.from==null){let se=Y.range(r,null,null,M);Y.min=se[0],Y.max=se[1]}else Y.min=lt,Y.max=-lt}}if(Ln>0){_.forEach((M,z)=>{if(i==1){let Y=M.scale,se=Z[Y];if(se==null)return;let ce=E[Y];if(z==0){let pe=ce.range(r,ce.min,ce.max,Y);ce.min=pe[0],ce.max=pe[1],Tn=Is(ce.min,e[0]),Cn=Is(ce.max,e[0]),Cn-Tn>1&&(e[0][Tn]<ce.min&&Tn++,e[0][Cn]>ce.max&&Cn--),M.min=gi[Tn],M.max=gi[Cn]}else M.show&&M.auto&&oo(ce,se,M,e[z],M.sorted);M.idxs[0]=Tn,M.idxs[1]=Cn}else if(z>0&&M.show&&M.auto){let[Y,se]=M.facets,ce=Y.scale,pe=se.scale,[xe,Se]=e[z],Ee=E[ce],$e=E[pe];Ee!=null&&oo(Ee,Z[ce],Y,xe,Y.sorted),$e!=null&&oo($e,Z[pe],se,Se,se.sorted),M.min=se.min,M.max=se.max}});for(let M in E){let z=E[M],Y=Z[M];if(z.from==null&&(Y==null||Y.min==null)){let se=z.range(r,z.min==lt?null:z.min,z.max==-lt?null:z.max,M);z.min=se[0],z.max=se[1]}}}for(let M in E){let z=E[M];if(z.from!=null){let Y=E[z.from];if(Y.min==null)z.min=z.max=null;else{let se=z.range(r,Y.min,Y.max,M);z.min=se[0],z.max=se[1]}}}let I={},R=!1;for(let M in E){let z=E[M],Y=P[M];if(Y.min!=z.min||Y.max!=z.max){Y.min=z.min,Y.max=z.max;let se=Y.distr;Y._min=se==3?ua(Y.min):se==4?T1(Y.min,Y.asinh):se==100?Y.fwd(Y.min):Y.min,Y._max=se==3?ua(Y.max):se==4?T1(Y.max,Y.asinh):se==100?Y.fwd(Y.max):Y.max,I[M]=R=!0}}if(R){_.forEach((M,z)=>{i==2?z>0&&I.y&&(M._paths=null):I[M.scale]&&(M._paths=null)});for(let M in I)xa=!0,Lt("setScale",M);Le.show&&Le.left>=0&&(Zs=Qr=!0)}for(let M in Z)Z[M]=null}function np(E){let I=A_(Tn-1,0,Ln-1),R=A_(Cn+1,0,Ln-1);for(;E[I]==null&&I>0;)I--;for(;E[R]==null&&R<Ln-1;)R++;return[I,R]}function rp(){Ln>0&&(_.forEach((E,I)=>{if(I>0&&E.show&&(Pl(I,!1),Pl(I,!0),E._paths==null)){$t!=E.alpha&&(f.globalAlpha=$t=E.alpha);let R=i==2?[0,e[I][0].length-1]:np(e[I]);E._paths=E.paths(r,I,R[0],R[1]),$t!=1&&(f.globalAlpha=$t=1)}}),_.forEach((E,I)=>{if(I>0&&E.show){$t!=E.alpha&&(f.globalAlpha=$t=E.alpha),E._paths!=null&&Rh(I,!1);{let R=E._paths!=null?E._paths.gaps:null,M=E.points.show(r,I,Tn,Cn,R),z=E.points.filter(r,I,M,R);(M||z)&&(E.points._paths=E.points.paths(r,I,Tn,Cn,z),Rh(I,!0))}$t!=1&&(f.globalAlpha=$t=1),Lt("drawSeries",I)}}))}function Pl(E,I){let R=I?_[E].points:_[E];R._stroke=R.stroke(r,E),R._fill=R.fill(r,E)}function Rh(E,I){let R=I?_[E].points:_[E],{stroke:M,fill:z,clip:Y,flags:se,_stroke:ce=R._stroke,_fill:pe=R._fill,_width:xe=R.width}=R._paths;xe=Ut(xe*bt,3);let Se=null,Ee=xe%2/2;I&&pe==null&&(pe=xe>0?"#fff":ce);let $e=R.pxAlign==1&&Ee>0;if($e&&f.translate(Ee,Ee),!I){let gt=_r-xe/2,He=mi-xe/2,Je=Ur+xe,ze=Yr+xe;Se=new Path2D,Se.rect(gt,He,Je,ze)}I?Mh(ce,xe,R.dash,R.cap,pe,M,z,se,Y):yi(E,ce,xe,R.dash,R.cap,pe,M,z,se,Se,Y),$e&&f.translate(-Ee,-Ee)}function yi(E,I,R,M,z,Y,se,ce,pe,xe,Se){let Ee=!1;pe!=0&&F.forEach(($e,gt)=>{if($e.series[0]==E){let He=_[$e.series[1]],Je=e[$e.series[1]],ze=(He._paths||Yd).band;Va(ze)&&(ze=$e.dir==1?ze[0]:ze[1]);let Ce,xt=null;He.show&&ze&&a9(Je,Tn,Cn)?(xt=$e.fill(r,gt)||Y,Ce=He._paths.clip):ze=null,Mh(I,R,M,z,xt,se,ce,pe,xe,Se,Ce,ze),Ee=!0}}),Ee||Mh(I,R,M,z,Y,se,ce,pe,xe,Se)}const ip=mh|k_;function Mh(E,I,R,M,z,Y,se,ce,pe,xe,Se,Ee){or(E,I,R,M,z),(pe||xe||Ee)&&(f.save(),pe&&f.clip(pe),xe&&f.clip(xe)),Ee?(ce&ip)==ip?(f.clip(Ee),Se&&f.clip(Se),Ta(z,se),Ea(E,Y,I)):ce&k_?(Ta(z,se),f.clip(Ee),Ea(E,Y,I)):ce&mh&&(f.save(),f.clip(Ee),Se&&f.clip(Se),Ta(z,se),f.restore(),Ea(E,Y,I)):(Ta(z,se),Ea(E,Y,I)),(pe||xe||Ee)&&f.restore()}function Ea(E,I,R){R>0&&(I instanceof Map?I.forEach((M,z)=>{f.strokeStyle=Sa=z,f.stroke(M)}):I!=null&&E&&f.stroke(I))}function Ta(E,I){I instanceof Map?I.forEach((R,M)=>{f.fillStyle=ro=M,f.fill(R)}):I!=null&&E&&f.fill(I)}function kl(E,I,R,M){let z=A[E],Y;if(M<=0)Y=[0,0];else{let se=z._space=z.space(r,E,I,R,M),ce=z._incrs=z.incrs(r,E,I,R,M,se);Y=Ij(I,R,ce,M,se)}return z._found=Y}function Ca(E,I,R,M,z,Y,se,ce,pe,xe){let Se=se%2/2;C==1&&f.translate(Se,Se),or(ce,se,pe,xe,ce),f.beginPath();let Ee,$e,gt,He,Je=z+(M==0||M==3?-Y:Y);R==0?($e=z,He=Je):(Ee=z,gt=Je);for(let ze=0;ze<E.length;ze++)I[ze]!=null&&(R==0?Ee=gt=E[ze]:$e=He=E[ze],f.moveTo(Ee,$e),f.lineTo(gt,He));f.stroke(),C==1&&f.translate(-Se,-Se)}function y0(E){let I=!0;return A.forEach((R,M)=>{if(!R.show)return;let z=P[R.scale];if(z.min==null){R._show&&(I=!1,R._show=!1,ao(!1));return}else R._show||(I=!1,R._show=!0,ao(!1));let Y=R.side,se=Y%2,{min:ce,max:pe}=z,[xe,Se]=kl(M,ce,pe,se==0?Xe:Ze);if(Se==0)return;let Ee=z.distr==2,$e=R._splits=R.splits(r,M,ce,pe,xe,Se,Ee),gt=z.distr==2?$e.map(Ce=>gi[Ce]):$e,He=z.distr==2?gi[$e[1]]-gi[$e[0]]:xe,Je=R._values=R.values(r,R.filter(r,gt,M,Se,He),M,Se,He);R._rotate=Y==2?R.rotate(r,Je,M,Se):0;let ze=R._size;R._size=Ji(R.size(r,Je,M,E)),ze!=null&&R._size!=ze&&(I=!1)}),I}function Oh(E){let I=!0;return ep.forEach((R,M)=>{let z=R(r,M,zo,E);z!=no[M]&&(I=!1),no[M]=z}),I}function sp(){for(let E=0;E<A.length;E++){let I=A[E];if(!I.show||!I._show)continue;let R=I.side,M=R%2,z,Y,se=I.stroke(r,E),ce=R==0||R==3?-1:1;if(I.label){let pt=I.labelGap*ce,Qn=jn((I._lpos+pt)*bt);so(I.labelFont[0],se,"center",R==2?dd:SC),f.save(),M==1?(z=Y=0,f.translate(Qn,jn(mi+Yr/2)),f.rotate((R==3?-ag:ag)/2)):(z=jn(_r+Ur/2),Y=Qn),f.fillText(I.label,z,Y),f.restore()}let[pe,xe]=I._found;if(xe==0)continue;let Se=P[I.scale],Ee=M==0?Ur:Yr,$e=M==0?_r:mi,gt=jn(I.gap*bt),He=I._splits,Je=Se.distr==2?He.map(pt=>gi[pt]):He,ze=Se.distr==2?gi[He[1]]-gi[He[0]]:pe,Ce=I.ticks,xt=I.border,Nt=Ce.show?jn(Ce.size*bt):0,Vt=I._rotate*-ag/180,kt=b(I._pos*bt),et=(Nt+gt)*ce,zn=kt+et;Y=M==0?zn:0,z=M==1?zn:0;let Yn=I.font[0],br=I.align==1?sc:I.align==2?S1:Vt>0?sc:Vt<0?S1:M==0?"center":R==3?S1:sc,Sr=Vt||M==1?"middle":R==2?dd:SC;so(Yn,se,br,Sr);let Hr=I.font[1]*I.lineGap,un=He.map(pt=>b(u(pt,Se,Ee,$e))),dt=I._values;for(let pt=0;pt<dt.length;pt++){let Qn=dt[pt];if(Qn!=null){M==0?z=un[pt]:Y=un[pt],Qn=""+Qn;let Vi=Qn.indexOf(`
`)==-1?[Qn]:Qn.split(/\n/gm);for(let Jr=0;Jr<Vi.length;Jr++){let ei=Vi[Jr];Vt?(f.save(),f.translate(z,Y+Jr*Hr),f.rotate(Vt),f.fillText(ei,0,0),f.restore()):f.fillText(ei,z,Y+Jr*Hr)}}}Ce.show&&Ca(un,Ce.filter(r,Je,E,xe,ze),M,R,kt,Nt,Ut(Ce.width*bt,3),Ce.stroke(r,E),Ce.dash,Ce.cap);let ft=I.grid;ft.show&&Ca(un,ft.filter(r,Je,E,xe,ze),M,M==0?2:1,M==0?mi:_r,M==0?Yr:Ur,Ut(ft.width*bt,3),ft.stroke(r,E),ft.dash,ft.cap),xt.show&&Ca([kt],[1],M==0?1:0,M==0?1:2,M==1?mi:_r,M==1?Yr:Ur,Ut(xt.width*bt,3),xt.stroke(r,E),xt.dash,xt.cap)}Lt("drawAxes")}function ao(E){_.forEach((I,R)=>{R>0&&(I._paths=null,E&&(i==1?(I.min=null,I.max=null):I.facets.forEach(M=>{M.min=null,M.max=null})))})}let lo=!1,Rl=!1,rt=[];function op(){Rl=!1;for(let E=0;E<rt.length;E++)Lt(...rt[E]);rt.length=0}function uo(){lo||(w9(lp),lo=!0)}function ap(E,I=!1){lo=!0,Rl=I,E(r),lp(),I&&rt.length>0&&queueMicrotask(op)}r.batch=ap;function lp(){if(Ui&&(kh(),Ui=!1),xa&&(d0(),xa=!1),Ks){if(Yt(v,sc,mn),Yt(v,dd,qe),Yt(v,Ad,Xe),Yt(v,Id,Ze),Yt(w,sc,mn),Yt(w,dd,qe),Yt(w,Ad,Xe),Yt(w,Id,Ze),Yt(g,Ad,xr),Yt(g,Id,qs),p.width=jn(xr*bt),p.height=jn(qs*bt),A.forEach(({_el:E,_show:I,_size:R,_pos:M,side:z})=>{if(E!=null)if(I){let Y=z===3||z===0?R:0,se=z%2==1;Yt(E,se?"left":"top",M-Y),Yt(E,se?"width":"height",R),Yt(E,se?"top":"left",se?qe:mn),Yt(E,se?"height":"width",se?Ze:Xe),T_(E,tu)}else Ei(E,tu)}),Sa=ro=Ph=io=zi=Ot=Et=$i=Il=null,$t=1,Dl(!0),mn!=sr||qe!=Ys||Xe!=Uo||Ze!=Qs){ao(!1);let E=Xe/Uo,I=Ze/Qs;if(Le.show&&!Zs&&Le.left>=0){Le.left*=E,Le.top*=I,Aa&&So(Aa,jn(Le.left),0,Xe,Ze),Ho&&So(Ho,0,jn(Le.top),Xe,Ze);for(let R=0;R<zr.length;R++){let M=zr[R];M!=null&&(to[R]*=E,ba[R]*=I,So(M,Ji(to[R]),Ji(ba[R]),Xe,Ze))}}if(Tt.show&&!Ou&&Tt.left>=0&&Tt.width>0){Tt.left*=E,Tt.width*=E,Tt.top*=I,Tt.height*=I;for(let R in ka)Yt(Bn,R,Tt[R])}sr=mn,Ys=qe,Uo=Xe,Qs=Ze}Lt("setSize"),Ks=!1}xr>0&&qs>0&&(f.clearRect(0,0,p.width,p.height),Lt("drawClear"),q.forEach(E=>E()),Lt("draw")),Tt.show&&Ou&&(lr(Tt),Ou=!1),Le.show&&Zs&&(Go(null,!0,!1),Zs=!1),te.show&&te.live&&Qr&&(ho(),Qr=!1),h||(h=!0,r.status=1,Lt("ready")),Al=!1,lo=!1}r.redraw=(E,I)=>{xa=I||!1,E!==!1?Un(N,H.min,H.max):uo()};function Nh(E,I){let R=P[E];if(R.from==null){if(Ln==0){let M=R.range(r,I.min,I.max,E);I.min=M[0],I.max=M[1]}if(I.min>I.max){let M=I.min;I.min=I.max,I.max=M}if(Ln>1&&I.min!=null&&I.max!=null&&I.max-I.min<1e-16)return;E==N&&R.distr==2&&Ln>0&&(I.min=Is(I.min,e[0]),I.max=Is(I.max,e[0]),I.min==I.max&&I.max++),Z[E]=I,Ui=!0,uo()}}r.setScale=Nh;let gn,Ml,Aa,Ho,up,Ol,ar,qn,Hi,Nl,Pt,Dt,Fn=!1;const Kt=Le.drag;let Gt=Kt.x,on=Kt.y;Le.show&&(Le.x&&(gn=Qi(GH,w)),Le.y&&(Ml=Qi(VH,w)),H.ori==0?(Aa=gn,Ho=Ml):(Aa=Ml,Ho=gn),Pt=Le.left,Dt=Le.top);const Tt=r.select=Pn({show:!0,over:!0,left:0,width:0,top:0,height:0},t.select),Bn=Tt.show?Qi(WH,Tt.over?w:v):null;function lr(E,I){if(Tt.show){for(let R in E)Tt[R]=E[R],R in ka&&Yt(Bn,R,E[R]);I!==!1&&Lt("setSelect")}}r.setSelect=lr;function jo(E,I){let R=_[E],M=be?mt[E]:null;if(R.show)M&&T_(M,tu);else{M&&Ei(M,tu);let z=wa?zr[0]:zr[E];So(z,-10,-10,Xe,Ze)}}function Un(E,I,R){Nh(E,{min:I,max:R})}function An(E,I,R,M){I.focus!=null&&vi(E),I.show!=null&&_.forEach((z,Y)=>{Y>0&&(E==Y||E==null)&&(z.show=I.show,jo(Y,I.show),i==2?(Un(z.facets[0].scale,null,null),Un(z.facets[1].scale,null,null)):Un(z.scale,null,null),uo())}),R!==!1&&Lt("setSeries",E,I),M&&po("setSeries",r,E,I)}r.setSeries=An;function Wo(E,I){Pn(F[E],I)}function cp(E,I){E.fill=st(E.fill||null),E.dir=wt(E.dir,-1),I=I??F.length,F.splice(I,0,E)}function Dh(E){E==null?F.length=0:F.splice(E,1)}r.addBand=cp,r.setBand=Wo,r.delBand=Dh;function Lh(E,I){_[E].alpha=I,Le.show&&zr[E]&&(zr[E].style.opacity=I),be&&mt[E]&&(mt[E].style.opacity=I)}let an,xn,vt;const ji={focus:!0};function vi(E){if(E!=vt){let I=E==null,R=eo.alpha!=1;_.forEach((M,z)=>{if(i==1||z>0){let Y=I||z==0||z==E;M._focus=I?null:Y,R&&Lh(z,Y?1:eo.alpha)}}),vt=E,R&&uo()}}be&&_a&&Nn(IC,je,E=>{Le._lock||(Js(E),vt!=null&&An(null,ji,!0,ln.setSeries))});function xi(E,I,R){let M=P[I];R&&(E=E/bt-(M.ori==1?qe:mn));let z=Xe;M.ori==1&&(z=Ze,E=z-E),M.dir==-1&&(E=z-E);let Y=M._min,se=M._max,ce=E/z,pe=Y+(se-Y)*ce,xe=M.distr;return xe==3?dh(10,pe):xe==4?u9(pe,M.asinh):xe==100?M.bwd(pe):pe}function hp(E,I){let R=xi(E,N,I);return Is(R,e[0],Tn,Cn)}r.valToIdx=E=>Is(E,e[0]),r.posToIdx=hp,r.posToVal=xi,r.valToPos=(E,I,R)=>P[I].ori==0?o(E,P[I],R?Ur:Xe,R?_r:0):a(E,P[I],R?Yr:Ze,R?mi:0),r.setCursor=(E,I,R)=>{Pt=E.left,Dt=E.top,Go(null,I,R)};function Du(E,I){Yt(Bn,sc,Tt.left=E),Yt(Bn,Ad,Tt.width=I)}function Lu(E,I){Yt(Bn,dd,Tt.top=E),Yt(Bn,Id,Tt.height=I)}let Ia=H.ori==0?Du:Lu,co=H.ori==1?Du:Lu;function dp(){if(be&&te.live)for(let E=i==2?1:0;E<_.length;E++){if(E==0&&De)continue;let I=te.values[E],R=0;for(let M in I)St[E][R++].firstChild.nodeValue=I[M]}}function ho(E,I){if(E!=null&&(E.idxs?E.idxs.forEach((R,M)=>{ee[M]=R}):f9(E.idx)||ee.fill(E.idx),te.idx=ee[0]),be&&te.live){for(let R=0;R<_.length;R++)(R>0||i==1&&!De)&&Fh(R,ee[R]);dp()}Qr=!1,I!==!1&&Lt("setLegend")}r.setLegend=ho;function Fh(E,I){let R=_[E],M=E==0&&J==2?gi:e[E],z;De?z=R.values(r,E,I)??ht:(z=R.value(r,I==null?null:M[I],E,I),z=z==null?ht:{_:z}),te.values[E]=z}function Go(E,I,R){Hi=Pt,Nl=Dt,[Pt,Dt]=Le.move(r,Pt,Dt),Le.left=Pt,Le.top=Dt,Le.show&&(Aa&&So(Aa,jn(Pt),0,Xe,Ze),Ho&&So(Ho,0,jn(Dt),Xe,Ze));let M,z=Tn>Cn;an=lt,xn=null;let Y=H.ori==0?Xe:Ze,se=H.ori==1?Xe:Ze;if(Pt<0||Ln==0||z){M=Le.idx=null;for(let ce=0;ce<_.length;ce++){let pe=zr[ce];pe!=null&&So(pe,-10,-10,Xe,Ze)}_a&&An(null,ji,!0,E==null&&ln.setSeries),te.live&&(ee.fill(M),Qr=!0)}else{let ce,pe,xe;i==1&&(ce=H.ori==0?Pt:Dt,pe=xi(ce,N),M=Le.idx=Is(pe,e[0],Tn,Cn),xe=V(e[0][M],H,Y,0));let Se=-10,Ee=-10,$e=0,gt=0,He=!0,Je="",ze="";for(let Ce=i==2?1:0;Ce<_.length;Ce++){let xt=_[Ce],Nt=ee[Ce],Vt=Nt==null?null:i==1?e[Ce][Nt]:e[Ce][1][Nt],kt=Le.dataIdx(r,Ce,M,pe),et=kt==null?null:i==1?e[Ce][kt]:e[Ce][1][kt];Qr=Qr||et!=Vt||kt!=Nt,ee[Ce]=kt;let zn=kt==M?xe:V(i==1?e[0][kt]:e[Ce][0][kt],H,Y,0);if(Ce>0&&xt.show){let Yn=et==null?-10:U(et,i==1?P[xt.scale]:P[xt.facets[1].scale],se,0);if(_a&&et!=null){let br=H.ori==1?Pt:Dt,Sr=Gn(eo.dist(r,Ce,kt,Yn,br));if(Sr<an){let Hr=eo.bias;if(Hr!=0){let un=xi(br,xt.scale),dt=et>=0?1:-1,ft=un>=0?1:-1;ft==dt&&(ft==1?Hr==1?et>=un:et<=un:Hr==1?et<=un:et>=un)&&(an=Sr,xn=Ce)}else an=Sr,xn=Ce}}if(Qr||wa){let br,Sr;H.ori==0?(br=zn,Sr=Yn):(br=Yn,Sr=zn);let Hr,un,dt,ft,pt,Qn,Vi=!0,Jr=Dn.bbox;if(Jr!=null){Vi=!1;let ei=Jr(r,Ce);dt=ei.left,ft=ei.top,Hr=ei.width,un=ei.height}else dt=br,ft=Sr,Hr=un=Dn.size(r,Ce);if(Qn=Dn.fill(r,Ce),pt=Dn.stroke(r,Ce),wa)Ce==xn&&an<=eo.prox&&(Se=dt,Ee=ft,$e=Hr,gt=un,He=Vi,Je=Qn,ze=pt);else{let ei=zr[Ce];ei!=null&&(to[Ce]=dt,ba[Ce]=ft,DC(ei,Hr,un,Vi),OC(ei,Qn,pt),So(ei,Ji(dt),Ji(ft),Xe,Ze))}}}}if(wa){let Ce=eo.prox,xt=vt==null?an<=Ce:an>Ce||xn!=vt;if(Qr||xt){let Nt=zr[0];to[0]=Se,ba[0]=Ee,DC(Nt,$e,gt,He),OC(Nt,Je,ze),So(Nt,Ji(Se),Ji(Ee),Xe,Ze)}}}if(Tt.show&&Fn)if(E!=null){let[ce,pe]=ln.scales,[xe,Se]=ln.match,[Ee,$e]=E.cursor.sync.scales,gt=E.cursor.drag;if(Gt=gt._x,on=gt._y,Gt||on){let{left:He,top:Je,width:ze,height:Ce}=E.select,xt=E.scales[Ee].ori,Nt=E.posToVal,Vt,kt,et,zn,Yn,br=ce!=null&&xe(ce,Ee),Sr=pe!=null&&Se(pe,$e);br&&Gt?(xt==0?(Vt=He,kt=ze):(Vt=Je,kt=Ce),et=P[ce],zn=V(Nt(Vt,Ee),et,Y,0),Yn=V(Nt(Vt+kt,Ee),et,Y,0),Ia(ss(zn,Yn),Gn(Yn-zn))):Ia(0,Y),Sr&&on?(xt==1?(Vt=He,kt=ze):(Vt=Je,kt=Ce),et=P[pe],zn=U(Nt(Vt,$e),et,se,0),Yn=U(Nt(Vt+kt,$e),et,se,0),co(ss(zn,Yn),Gn(Yn-zn))):co(0,se)}else ps()}else{let ce=Gn(Hi-up),pe=Gn(Nl-Ol);if(H.ori==1){let $e=ce;ce=pe,pe=$e}Gt=Kt.x&&ce>=Kt.dist,on=Kt.y&&pe>=Kt.dist;let xe=Kt.uni;xe!=null?Gt&&on&&(Gt=ce>=xe,on=pe>=xe,!Gt&&!on&&(pe>ce?on=!0:Gt=!0)):Kt.x&&Kt.y&&(Gt||on)&&(Gt=on=!0);let Se,Ee;Gt&&(H.ori==0?(Se=ar,Ee=Pt):(Se=qn,Ee=Dt),Ia(ss(Se,Ee),Gn(Ee-Se)),on||co(0,se)),on&&(H.ori==1?(Se=ar,Ee=Pt):(Se=qn,Ee=Dt),co(ss(Se,Ee),Gn(Ee-Se)),Gt||Ia(0,Y)),!Gt&&!on&&(Ia(0,0),co(0,0))}if(Kt._x=Gt,Kt._y=on,E==null){if(R){if(Wi!=null){let[ce,pe]=ln.scales;ln.values[0]=ce!=null?xi(H.ori==0?Pt:Dt,ce):null,ln.values[1]=pe!=null?xi(H.ori==1?Pt:Dt,pe):null}po(TC,r,Pt,Dt,Xe,Ze,M)}if(_a){let ce=R&&ln.setSeries,pe=eo.prox;vt==null?an<=pe&&An(xn,ji,!0,ce):an>pe?An(null,ji,!0,ce):xn!=vt&&An(xn,ji,!0,ce)}}Qr&&(te.idx=M,ho()),I!==!1&&Lt("setCursor")}let _i=null;Object.defineProperty(r,"rect",{get(){return _i==null&&Dl(!1),_i}});function Dl(E=!1){E?_i=null:(_i=w.getBoundingClientRect(),Lt("syncRect",_i))}function Kr(E,I,R,M,z,Y,se){Le._lock||Fn&&E!=null&&E.movementX==0&&E.movementY==0||(Pa(E,I,R,M,z,Y,se,!1,E!=null),E!=null?Go(null,!0,!0):Go(I,!0,!1))}function Pa(E,I,R,M,z,Y,se,ce,pe){if(_i==null&&Dl(!1),Js(E),E!=null)R=E.clientX-_i.left,M=E.clientY-_i.top;else{if(R<0||M<0){Pt=-10,Dt=-10;return}let[xe,Se]=ln.scales,Ee=I.cursor.sync,[$e,gt]=Ee.values,[He,Je]=Ee.scales,[ze,Ce]=ln.match,xt=I.axes[0].side%2==1,Nt=H.ori==0?Xe:Ze,Vt=H.ori==1?Xe:Ze,kt=xt?Y:z,et=xt?z:Y,zn=xt?M:R,Yn=xt?R:M;if(He!=null?R=ze(xe,He)?u($e,P[xe],Nt,0):-10:R=Nt*(zn/kt),Je!=null?M=Ce(Se,Je)?u(gt,P[Se],Vt,0):-10:M=Vt*(Yn/et),H.ori==1){let br=R;R=M,M=br}}pe&&((R<=1||R>=Xe-1)&&(R=Kl(R,Xe)),(M<=1||M>=Ze-1)&&(M=Kl(M,Ze))),ce?(up=R,Ol=M,[ar,qn]=Le.move(r,R,M)):(Pt=R,Dt=M)}const ka={width:0,height:0,left:0,top:0};function ps(){lr(ka,!1)}let Fu,Bu,Bh,Uu;function zu(E,I,R,M,z,Y,se){Fn=!0,Gt=on=Kt._x=Kt._y=!1,Pa(E,I,R,M,z,Y,se,!0,!1),E!=null&&(Nn(E1,S_,Vo,!1),po(CC,r,ar,qn,Xe,Ze,null));let{left:ce,top:pe,width:xe,height:Se}=Tt;Fu=ce,Bu=pe,Bh=xe,Uu=Se,ps()}function Vo(E,I,R,M,z,Y,se){Fn=Kt._x=Kt._y=!1,Pa(E,I,R,M,z,Y,se,!1,!0);let{left:ce,top:pe,width:xe,height:Se}=Tt,Ee=xe>0||Se>0,$e=Fu!=ce||Bu!=pe||Bh!=xe||Uu!=Se;if(Ee&&$e&&lr(Tt),Kt.setScale&&Ee&&$e){let gt=ce,He=xe,Je=pe,ze=Se;if(H.ori==1&&(gt=pe,He=Se,Je=ce,ze=xe),Gt&&Un(N,xi(gt,N),xi(gt+He,N)),on)for(let Ce in P){let xt=P[Ce];Ce!=N&&xt.from==null&&xt.min!=lt&&Un(Ce,xi(Je+ze,Ce),xi(Je,Ce))}ps()}else Le.lock&&(Le._lock=!Le._lock,Go(null,!0,!1));E!=null&&(Mu(E1,S_),po(E1,r,Pt,Dt,Xe,Ze,null))}function Zr(E,I,R,M,z,Y,se){if(Le._lock)return;Js(E);let ce=Fn;if(Fn){let pe=!0,xe=!0,Se=10,Ee,$e;H.ori==0?(Ee=Gt,$e=on):(Ee=on,$e=Gt),Ee&&$e&&(pe=Pt<=Se||Pt>=Xe-Se,xe=Dt<=Se||Dt>=Ze-Se),Ee&&pe&&(Pt=Pt<ar?0:Xe),$e&&xe&&(Dt=Dt<qn?0:Ze),Go(null,!0,!0),Fn=!1}Pt=-10,Dt=-10,Go(null,!0,!0),ce&&(Fn=ce)}function fo(E,I,R,M,z,Y,se){Le._lock||(Js(E),$o(),ps(),E!=null&&po(PC,r,Pt,Dt,Xe,Ze,null))}function $u(){A.forEach(Pj),Ih(r.width,r.height,!0)}pu(ay,Vc,$u);const Xo={};Xo.mousedown=zu,Xo.mousemove=Kr,Xo.mouseup=Vo,Xo.dblclick=fo,Xo.setSeries=(E,I,R,M)=>{let z=ln.match[2];R=z(r,I,R),R!=-1&&An(R,M,!0,!1)},Le.show&&(Nn(CC,w,zu),Nn(TC,w,Kr),Nn(AC,w,E=>{Js(E),Dl(!1)}),Nn(IC,w,Zr),Nn(PC,w,fo),R_.add(r),r.syncRect=Dl);const $r=r.hooks=t.hooks||{};function Lt(E,I,R){Rl?rt.push([E,I,R]):E in $r&&$r[E].forEach(M=>{M.call(null,r,I,R)})}(t.plugins||[]).forEach(E=>{for(let I in E.hooks)$r[I]=($r[I]||[]).concat(E.hooks[I])});const Hu=(E,I,R)=>R,ln=Pn({key:null,setSeries:!1,filters:{pub:zC,sub:zC},scales:[N,_[1]?_[1].scale:null],match:[$C,$C,Hu],values:[null,null]},Le.sync);ln.match.length==2&&ln.match.push(Hu),Le.sync=ln;const Wi=ln.key,Gi=XR(Wi);function po(E,I,R,M,z,Y,se){ln.filters.pub(E,I,R,M,z,Y,se)&&Gi.pub(E,I,R,M,z,Y,se)}Gi.sub(r);function fp(E,I,R,M,z,Y,se){ln.filters.sub(E,I,R,M,z,Y,se)&&Xo[E](null,I,R,M,z,Y,se)}r.pub=fp;function ju(){Gi.unsub(r),R_.delete(r),pi.clear(),C_(ay,Vc,$u),d.remove(),je==null||je.remove(),Lt("destroy")}r.destroy=ju;function Wu(){Lt("init",t,e),tp(e||t.data,!1),Z[N]?Nh(N,Z[N]):$o(),Ou=Tt.show&&(Tt.width>0||Tt.height>0),Zs=Qr=!0,Ih(t.width,t.height)}return _.forEach(Tl),A.forEach(g0),n?n instanceof HTMLElement?(n.appendChild(d),Wu()):n(r,Wu):Wu(),r}Nr.assign=Pn;Nr.fmtNum=Tb;Nr.rangeNum=ly;Nr.rangeLog=t0;Nr.rangeAsinh=Sb;Nr.orient=Ru;Nr.pxRatio=bt;Nr.join=_9;Nr.fmtDate=Ab,Nr.tzDate=R9;Nr.sync=XR;{Nr.addGap=fj,Nr.clipGaps=i0;let t=Nr.paths={points:JR};t.linear=tM,t.stepped=gj,t.bars=yj,t.spline=xj}const P1=1e4;function kj(t){var d;const[e,n]=de.useState(null),[r,i]=de.useState();de.useLayoutEffect(()=>{if(!e)return;const p={width:t.width,height:t.height,series:[{},{stroke:"white",spanGaps:!0,pxAlign:0,points:{show:!1},label:"Buffer health"}],scales:{y:{distr:1}},axes:[{side:0,show:!1},{ticks:{size:0},side:1,stroke:"white"}],legend:{show:!1}},f=[[],[]],g=new Nr(p,f,e);i(g)},[e,t.width,t.height]);const s=t.timeManager,[o,a]=de.useState([...s.intervals]);de.useEffect(()=>{let p=0;const f={t:[],bufferHealth:[]},g=()=>{if(r){f.t.length>P1&&(f.t=f.t.slice(-P1),f.bufferHealth=f.bufferHealth.slice(-P1));const v=Date.now()/1e3;f.t.push(v),f.bufferHealth.push(s.bufferHealth()),a([...s.intervals]),r.setData([f.t,f.bufferHealth],!0),r.setScale("x",{min:v-10,max:v})}p=requestAnimationFrame(g)};return g(),()=>cancelAnimationFrame(p)},[r,s]);let u=null;if(o.length>0){const p=o[0].startTs,f=Date.now()-p;u=W.jsxs("div",{style:{fontSize:"12px"},children:[o.length," ",o.length>1?"intervals":"interval",":",W.jsxs("div",{style:{fontSize:"9px",height:"48px"},children:[W.jsxs("p",{children:["Base: ",pd(f),"s ago"]}),o.map(g=>{const v=s.prevServerTs&&g.startTs<s.prevServerTs&&s.prevServerTs<=g.endTs;let w=null;return v&&(w=` (server: ${pd((s.prevServerTs??p)-p)})`),W.jsxs("div",{style:{paddingRight:"3px",fontWeight:v?"bold":""},children:[pd(g.startTs-p)," - ",pd(g.endTs-p),w]},g.startTs)})]})]})}let h=null;if(s.latestEngineStatus){const p=s.latestEngineStatus;let f=p.running?"Running":"Stopped";h=W.jsxs("div",{style:{fontSize:"12px",paddingTop:"8px"},children:[W.jsxs("p",{children:["Generation number: ",p.generationNumber]}),W.jsxs("p",{children:["Input number: ",p.processedInputNumber]}),W.jsxs("p",{children:["Status: ",f]}),W.jsxs("p",{children:["Client skew: ",pd(s.clockSkew()),"s"]})]})}return(d=s.latestEngineStatus)==null||d.generationNumber,W.jsxs("div",{style:{background:"rgb(53, 59, 89)",position:"fixed",top:"20px",left:"20px",padding:"10px",border:"1px solid rgb(23, 20, 33)",color:"white",zIndex:1},children:[W.jsx("div",{style:{height:"20px",width:"100%",textAlign:"center"},children:"Engine stats"}),h,W.jsx("div",{ref:n}),u]})}"4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab".match(/.{6}/g).map(t=>`#${t}`);const pd=t=>(t/1e3).toFixed(2),Rj={agents:"a",conversations:"c",players:"p",operations:"o"};function Ht(t,e){const n=e[0],r=Object.entries(Rj).find(([s,o])=>o===n);if(!r||r[0]!==t)throw new Error(`Invalid game ID type: ${n}`);const i=parseInt(e.slice(2),10);if(isNaN(i)||!Number.isInteger(i)||i<0)throw new Error(`Invalid game ID number: ${e}`);return e}const Qa=j.string(),nr=j.string(),Nb=j.string();j.string();class Mj{constructor(e){Ve(this,"agentId");Ve(this,"identity");Ve(this,"plan");const{agentId:n,identity:r,plan:i}=e;this.agentId=Ht("agents",n),this.identity=r,this.plan=i}serialize(){const{agentId:e,identity:n,plan:r}=this;return{agentId:e,identity:n,plan:r}}}j.string(),j.string();j.string(),j.string(),j.string();class sM{constructor(e){Ve(this,"playerId");Ve(this,"name");Ve(this,"description");Ve(this,"character");const{playerId:n,name:r,description:i,character:s}=e;this.playerId=Ht("players",n),this.name=r,this.description=i,this.character=s}serialize(){const{playerId:e,name:n,description:r,character:i}=this;return{playerId:e,name:n,description:r,character:i}}}function Oj(t){const e=[null];let n=1;return{peek:()=>e[1],length:()=>n-1,push:r=>{let i=n++,s;for(;(s=i>>1)>0;){const o=e[s];if(t(r,o))break;e[i]=o,i=s}e[i]=r},pop:()=>{if(n==1)return;n--;const r=e[1],i=e[n];let s=1,o;for(;(o=s<<1)<n;){o+1<=n&&t(e[o],e[o+1])&&o++;const a=e[o];if(t(a,i))break;e[s]=a,s=o}return e[s]=i,r}}}function Xc(t){delete t.pathfinding,t.speed=0}function cy(t,e,n,r,i){if(Math.floor(r.x)!==r.x||Math.floor(r.y)!==r.y)throw new Error(`Non-integral destination: ${JSON.stringify(r)}`);const{position:s}=n;if(vb(s,r))return;if([...t.world.conversations.values()].some(a=>{var u;return((u=a.participants.get(n.id))==null?void 0:u.status.kind)==="participating"})&&!i)throw new Error("Can't move when in a conversation. Leave the conversation first!");n.pathfinding={destination:r,started:e,state:{kind:"needsPath"}}}function Nj(t,e,n,r){const i=[],s=v=>{var _,A;const{x:w,y:C}=v.position,b=[];w!==Math.floor(w)&&b.push({position:{x:Math.floor(w),y:C},facing:{dx:-1,dy:0}},{position:{x:Math.floor(w)+1,y:C},facing:{dx:1,dy:0}}),C!==Math.floor(C)&&b.push({position:{x:w,y:Math.floor(C)},facing:{dx:0,dy:-1}},{position:{x:w,y:Math.floor(C)+1},facing:{dx:0,dy:1}}),w==Math.floor(w)&&C==Math.floor(C)&&b.push({position:{x:w+1,y:C},facing:{dx:1,dy:0}},{position:{x:w-1,y:C},facing:{dx:-1,dy:0}},{position:{x:w,y:C+1},facing:{dx:0,dy:1}},{position:{x:w,y:C-1},facing:{dx:0,dy:-1}});const S=[];for(const{position:P,facing:F}of b){const N=is(v.position,P),D=v.length+N;if(Mf(t,e,P,n.id))continue;const q=Mm(P,r),G={position:P,facing:F,t:v.t+N/o8*1e3,length:D,cost:D+q,prev:v},H=(_=i[P.y])==null?void 0:_[P.x];H&&H.cost<=G.cost||(i[A=P.y]??(i[A]=[]),i[P.y][P.x]=G,S.push(G))}return S},o=n.position,a={x:o.x,y:o.y};let u={position:a,facing:n.facing,t:e,length:0,cost:Mm(a,r),prev:void 0},h=u;const d=Oj((v,w)=>v.cost>w.cost);for(;u&&!vb(u.position,r);){Mm(u.position,r)<Mm(h.position,r)&&(h=u);for(const v of s(u))d.push(v);u=d.pop()}let p=null;if(!u){if(h.length===0)return null;u=h,p=u.position}const f=[];let g=u.facing;for(;u;)f.push({position:u.position,t:u.t,facing:g}),g=u.facing,u=u.prev;return f.reverse(),{path:Kz(f),newDestination:p}}function Mf(t,e,n,r){const i=[...t.world.players.values()].filter(s=>s.id!==r).map(s=>s.position);return Dj(n,i,t.worldMap)}function Dj(t,e,n){if(isNaN(t.x)||isNaN(t.y))throw new Error(`NaN position in ${JSON.stringify(t)}`);if(t.x<0||t.y<0||t.x>=n.width||t.y>=n.height)return"out of bounds";for(const r of n.objectTiles)if(r[Math.floor(t.x)][Math.floor(t.y)]!==-1)return"world blocked";for(const r of e)if(is(r,t)<_H)return"player";return null}const Lj={playerId:nr,invited:j.number(),status:j.union(j.object({kind:j.literal("invited")}),j.object({kind:j.literal("walkingOver")}),j.object({kind:j.literal("participating"),started:j.number()}))};class Fj{constructor(e){Ve(this,"playerId");Ve(this,"invited");Ve(this,"status");const{playerId:n,invited:r,status:i}=e;this.playerId=Ht("players",n),this.invited=r,this.status=i}serialize(){const{playerId:e,invited:n,status:r}=this;return{playerId:e,invited:n,status:r}}}function qc(t,e,n){const r=new Map;for(const i of t){const s=new e(i),o=n(s);if(r.has(o))throw new Error(`Duplicate ID ${o}`);r.set(o,s)}return r}function Bj(t){return[...t.values()].map(e=>e.serialize())}class l0{constructor(e){Ve(this,"id");Ve(this,"creator");Ve(this,"created");Ve(this,"isTyping");Ve(this,"lastMessage");Ve(this,"numMessages");Ve(this,"participants");const{id:n,creator:r,created:i,isTyping:s,lastMessage:o,numMessages:a,participants:u}=e;this.id=Ht("conversations",n),this.creator=Ht("players",r),this.created=i,this.isTyping=s&&{playerId:Ht("players",s.playerId),messageUuid:s.messageUuid,since:s.since},this.lastMessage=o&&{author:Ht("players",o.author),timestamp:o.timestamp},this.numMessages=a,this.participants=qc(u,Fj,h=>h.playerId)}tick(e,n){if(this.isTyping&&this.isTyping.since+xH<n&&delete this.isTyping,this.participants.size!==2){console.warn(`Conversation ${this.id} has ${this.participants.size} participants`);return}const[r,i]=[...this.participants.keys()],s=this.participants.get(r),o=this.participants.get(i),a=e.world.players.get(r),u=e.world.players.get(i),h=is(a==null?void 0:a.position,u==null?void 0:u.position);if(s.status.kind==="walkingOver"&&o.status.kind==="walkingOver"&&h<bR){console.log(`Starting conversation between ${a.id} and ${u.id}`),Xc(a),Xc(u),s.status={kind:"participating",started:n},o.status={kind:"participating",started:n};const d=g=>[{x:g.x+1,y:g.y},{x:g.x-1,y:g.y},{x:g.x,y:g.y+1},{x:g.x,y:g.y-1}],p={x:Math.floor(a.position.x),y:Math.floor(a.position.y)},f=d(p).filter(g=>!Mf(e,n,g,a.id));if(f.sort((g,v)=>is(g,u.position)-is(v,u.position)),f.length>0){const g=f[0],v=d(g).filter(w=>!Mf(e,n,w,u.id));if(v.sort((w,C)=>is(w,u.position)-is(C,u.position)),v.length>0){const w=v[0];cy(e,n,a,g,!0),cy(e,n,u,w,!0)}}}if(s.status.kind==="participating"&&o.status.kind==="participating"){const d=Yz(qz(a.position,u.position));!a.pathfinding&&d&&(a.facing=d),!u.pathfinding&&d&&(u.facing.dx=-d.dx,u.facing.dy=-d.dy)}}static start(e,n,r,i){if(r.id===i.id)throw new Error("Can't invite yourself to a conversation");if([...e.world.conversations.values()].find(o=>o.participants.has(r.id))){const o=`Player ${r.id} is already in a conversation`;return console.log(o),{error:o}}if([...e.world.conversations.values()].find(o=>o.participants.has(i.id))){const o=`Player ${r.id} is already in a conversation`;return console.log(o),{error:o}}const s=e.allocId("conversations");return console.log(`Creating conversation ${s}`),e.world.conversations.set(s,new l0({id:s,created:n,creator:r.id,numMessages:0,participants:[{playerId:r.id,invited:n,status:{kind:"walkingOver"}},{playerId:i.id,invited:n,status:{kind:"invited"}}]})),{conversationId:s}}setIsTyping(e,n,r){if(this.isTyping){if(this.isTyping.playerId!==n.id)throw new Error(`Player ${this.isTyping.playerId} is already typing in ${this.id}`);return}this.isTyping={playerId:n.id,messageUuid:r,since:e}}acceptInvite(e,n){const r=this.participants.get(n.id);if(!r)throw new Error(`Player ${n.id} not in conversation ${this.id}`);if(r.status.kind!=="invited")throw new Error(`Invalid membership status for ${n.id}:${this.id}: ${JSON.stringify(r)}`);r.status={kind:"walkingOver"}}rejectInvite(e,n,r){const i=this.participants.get(r.id);if(!i)throw new Error(`Player ${r.id} not in conversation ${this.id}`);if(i.status.kind!=="invited")throw new Error(`Rejecting invite in wrong membership state: ${this.id}:${r.id}: ${JSON.stringify(i)}`);this.stop(e,n)}stop(e,n){delete this.isTyping;for(const[r,i]of this.participants.entries()){const s=[...e.world.agents.values()].find(o=>o.playerId===r);s&&(s.lastConversation=n,s.toRemember=this.id)}e.world.conversations.delete(this.id)}leave(e,n,r){if(!this.participants.get(r.id))throw new Error(`Couldn't find membership for ${this.id}:${r.id}`);this.stop(e,n)}serialize(){const{id:e,creator:n,created:r,isTyping:i,lastMessage:s,numMessages:o}=this;return{id:e,creator:n,created:r,isTyping:i,lastMessage:s,numMessages:o,participants:Bj(this.participants)}}}const Uj={id:Qa,creator:nr,created:j.number(),isTyping:j.optional(j.object({playerId:nr,messageUuid:j.string(),since:j.number()})),lastMessage:j.optional(j.object({author:nr,timestamp:j.number()})),numMessages:j.number(),participants:j.array(j.object(Lj))};j.string(),j.number();const zj=j.object({destination:yb,started:j.number(),state:j.union(j.object({kind:j.literal("needsPath")}),j.object({kind:j.literal("waiting"),until:j.number()}),j.object({kind:j.literal("moving"),path:Xz}))}),$j=j.object({description:j.string(),emoji:j.optional(j.string()),until:j.number()}),O_={id:nr,human:j.optional(j.string()),pathfinding:j.optional(zj),activity:j.optional($j),lastInput:j.number(),position:yb,facing:Vz,speed:j.number()};class u0{constructor(e){Ve(this,"id");Ve(this,"human");Ve(this,"pathfinding");Ve(this,"activity");Ve(this,"lastInput");Ve(this,"position");Ve(this,"facing");Ve(this,"speed");const{id:n,human:r,pathfinding:i,activity:s,lastInput:o,position:a,facing:u,speed:h}=e;this.id=Ht("players",n),this.human=r,this.pathfinding=i,this.activity=s,this.lastInput=o,this.position=a,this.facing=u,this.speed=h}tick(e,n){this.human&&this.lastInput<n-IH&&this.leave(e,n)}tickPathfinding(e,n){const{pathfinding:r,position:i}=this;if(r&&(r.state.kind==="moving"&&vb(r.destination,i)&&Xc(this),r.started+gH<n&&(console.warn(`Timing out pathfinding for ${this.id}`),Xc(this)),r.state.kind==="waiting"&&r.state.until<n&&(r.state={kind:"needsPath"}),r.state.kind==="needsPath"&&e.numPathfinds<wC)){e.numPathfinds++,e.numPathfinds===wC&&console.warn("Reached max pathfinds for this step");const s=Nj(e,n,this,r.destination);s===null?(console.log(`Failed to route to ${JSON.stringify(r.destination)}`),Xc(this)):(s.newDestination&&(console.warn(`Updating destination from ${JSON.stringify(r.destination)} to ${JSON.stringify(s.newDestination)}`),r.destination=s.newDestination),r.state={kind:"moving",path:s.path})}}tickPosition(e,n){if(!this.pathfinding||this.pathfinding.state.kind!=="moving"){this.speed=0;return}const r=Pk(this.pathfinding.state.path,n);if(!r){console.warn(`Path out of range of ${n} for ${this.id}`);return}const{position:i,facing:s,velocity:o}=r,a=Mf(e,n,i,this.id);if(a!==null){const u=Math.random()*yH;console.warn(`Stopping path for ${this.id}, waiting for ${u}ms: ${a}`),this.pathfinding.state={kind:"waiting",until:n+u};return}this.position=i,this.facing=s,this.speed=o}static join(e,n,r,i,s,o){if(o){let p=0;for(const f of e.world.players.values())if(f.human&&p++,f.human===o)throw new Error("You are already in this game!");if(p>=b_)throw new Error(`Only ${b_} human players allowed at once.`)}let a;for(let p=0;p<10;p++){const f={x:Math.floor(Math.random()*e.worldMap.width),y:Math.floor(Math.random()*e.worldMap.height)};if(!Mf(e,n,f)){a=f;break}}if(!a)throw new Error("Failed to find a free position!");const u=[{dx:1,dy:0},{dx:-1,dy:0},{dx:0,dy:1},{dx:0,dy:-1}],h=u[Math.floor(Math.random()*u.length)];if(!Rk.find(p=>p.name===i))throw new Error(`Invalid character: ${i}`);const d=e.allocId("players");return e.world.players.set(d,new u0({id:d,human:o,lastInput:n,position:a,facing:h,speed:0})),e.playerDescriptions.set(d,new sM({playerId:d,character:i,description:s,name:r})),e.descriptionsModified=!0,d}leave(e,n){const r=[...e.world.conversations.values()].find(i=>i.participants.has(this.id));r&&r.stop(e,n),e.world.players.delete(this.id)}serialize(){const{id:e,human:n,pathfinding:r,activity:i,lastInput:s,position:o,facing:a,speed:u}=this;return{id:e,human:n,pathfinding:r,activity:i,lastInput:s,position:o,facing:a,speed:u}}}j.string(),j.string(),j.string(),j.optional(j.string()),j.union(yb,j.null());const oM=eH,Hj=Z7,jj=j.object({engineId:j.id("engines"),number:j.number(),name:j.string(),args:j.any(),returnValue:j.optional(j.union(j.object({kind:j.literal("ok"),value:j.any()}),j.object({kind:j.literal("error"),message:j.string()}))),received:j.number()}),aM=j.object({currentTime:j.optional(j.number()),lastStepTs:j.optional(j.number()),processedInputNumber:j.optional(j.number()),running:j.boolean(),generationNumber:j.number()});sy(jj).index("byInputNumber",["engineId","number"]),sy(aM);const Wj=j.object({inputId:j.id("inputs"),returnValue:j.union(j.object({kind:j.literal("ok"),value:j.any()}),j.object({kind:j.literal("error"),message:j.string()}))});j.object({engine:aM,expectedGenerationNumber:j.number(),completedInputs:j.array(Wj)});async function Gj(t,e,n,r){const i=Date.now(),s=await t.db.query("inputs").withIndex("byInputNumber",u=>u.eq("engineId",e)).order("desc").first(),o=s?s.number+1:0;return await t.db.insert("inputs",{engineId:e,number:o,name:n,args:r,received:i})}oM({args:{engineId:j.id("engines"),processedInputNumber:j.optional(j.number()),max:j.number()},handler:async(t,e)=>await t.db.query("inputs").withIndex("byInputNumber",n=>n.eq("engineId",e.engineId).gt("number",e.processedInputNumber??-1)).order("asc").take(e.max)});async function Vj(t,e,n,r){const i=await t.db.query("worldStatus").withIndex("worldId",s=>s.eq("worldId",e)).unique();if(!i)throw new Error(`World for engine ${e} not found`);return await Gj(t,i.engineId,n,r)}class Xj{constructor(e){Ve(this,"id");Ve(this,"playerId");Ve(this,"toRemember");Ve(this,"lastConversation");Ve(this,"lastInviteAttempt");Ve(this,"inProgressOperation");const{id:n,lastConversation:r,lastInviteAttempt:i,inProgressOperation:s}=e,o=Ht("players",e.playerId);this.id=Ht("agents",n),this.playerId=o,this.toRemember=e.toRemember!==void 0?Ht("conversations",e.toRemember):void 0,this.lastConversation=r,this.lastInviteAttempt=i,this.inProgressOperation=s}tick(e,n){const r=e.world.players.get(this.playerId);if(!r)throw new Error(`Invalid player ID ${this.playerId}`);if(this.inProgressOperation){if(n<this.inProgressOperation.started+mH)return;console.log(`Timing out ${JSON.stringify(this.inProgressOperation)}`),delete this.inProgressOperation}const i=e.world.playerConversation(r),s=i==null?void 0:i.participants.get(r.id),o=this.lastInviteAttempt&&n<this.lastInviteAttempt+wH,a=r.activity&&r.activity.until>n;if(a&&(i||r.pathfinding)&&(r.activity.until=n),!i&&!a&&(!r.pathfinding||!o)){this.startOperation(e,n,"agentDoSomething",{worldId:e.worldId,player:r.serialize(),otherFreePlayers:[...e.world.players.values()].filter(u=>u.id!==r.id).filter(u=>![...e.world.conversations.values()].find(h=>h.participants.has(u.id))).map(u=>u.serialize()),agent:this.serialize(),map:e.worldMap.serialize()});return}if(this.toRemember){console.log(`Agent ${this.id} remembering conversation ${this.toRemember}`),this.startOperation(e,n,"agentRememberConversation",{worldId:e.worldId,playerId:this.playerId,agentId:this.id,conversationId:this.toRemember}),delete this.toRemember;return}if(i&&s){const[u,h]=[...i.participants.entries()].find(([p])=>p!==r.id),d=e.world.players.get(u);if(s.status.kind==="invited"){d.human||Math.random()<SH?(console.log(`Agent ${r.id} accepting invite from ${d.id}`),i.acceptInvite(e,r),r.pathfinding&&delete r.pathfinding):(console.log(`Agent ${r.id} rejecting invite from ${d.id}`),i.rejectInvite(e,n,r));return}if(s.status.kind==="walkingOver"){if(s.invited+EH<n){console.log(`Giving up on invite to ${d.id}`),i.leave(e,n,r);return}const p=is(r.position,d.position);if(p<bR)return;if(!r.pathfinding){let f;p<vH?f={x:Math.floor(d.position.x),y:Math.floor(d.position.y)}:f={x:Math.floor((r.position.x+d.position.x)/2),y:Math.floor((r.position.y+d.position.y)/2)},console.log(`Agent ${r.id} walking towards ${d.id}...`,f),cy(e,n,r,f)}return}if(s.status.kind==="participating"){const p=s.status.started;if(i.isTyping&&i.isTyping.playerId!==r.id)return;if(!i.lastMessage){const w=i.creator===r.id,C=p+_C;if(w||C<n){console.log(`${r.id} initiating conversation with ${d.id}.`);const b=crypto.randomUUID();i.setIsTyping(n,r,b),this.startOperation(e,n,"agentGenerateMessage",{worldId:e.worldId,playerId:r.id,agentId:this.id,conversationId:i.id,otherPlayerId:d.id,messageUuid:b,type:"start"});return}else return}if(p+TH<n||i.numMessages>CH){console.log(`${r.id} leaving conversation with ${d.id}.`);const w=crypto.randomUUID();i.setIsTyping(n,r,w),this.startOperation(e,n,"agentGenerateMessage",{worldId:e.worldId,playerId:r.id,agentId:this.id,conversationId:i.id,otherPlayerId:d.id,messageUuid:w,type:"leave"});return}if(i.lastMessage.author===r.id){const w=i.lastMessage.timestamp+_C;if(n<w)return}const g=i.lastMessage.timestamp+AH;if(n<g)return;console.log(`${r.id} continuing conversation with ${d.id}.`);const v=crypto.randomUUID();i.setIsTyping(n,r,v),this.startOperation(e,n,"agentGenerateMessage",{worldId:e.worldId,playerId:r.id,agentId:this.id,conversationId:i.id,otherPlayerId:d.id,messageUuid:v,type:"continue"});return}}}startOperation(e,n,r,i){if(this.inProgressOperation)throw new Error(`Agent ${this.id} already has an operation: ${JSON.stringify(this.inProgressOperation)}`);const s=e.allocId("operations");console.log(`Agent ${this.id} starting operation ${r} (${s})`),e.scheduleOperation(r,{operationId:s,...i}),this.inProgressOperation={name:r,operationId:s,started:n}}serialize(){return{id:this.id,playerId:this.playerId,toRemember:this.toRemember,lastConversation:this.lastConversation,lastInviteAttempt:this.lastInviteAttempt,inProgressOperation:this.inProgressOperation}}}const qj={id:Nb,playerId:nr,toRemember:j.optional(Qa),lastConversation:j.optional(j.number()),lastInviteAttempt:j.optional(j.number()),inProgressOperation:j.optional(j.object({name:j.string(),operationId:j.string(),started:j.number()}))};Hj({args:{worldId:j.id("worlds"),conversationId:Qa,agentId:Nb,playerId:nr,text:j.string(),messageUuid:j.string(),leaveConversation:j.boolean(),operationId:j.string()},handler:async(t,e)=>{await t.db.insert("messages",{conversationId:e.conversationId,author:e.playerId,text:e.text,messageUuid:e.messageUuid,worldId:e.worldId}),await Vj(t,e.worldId,"agentFinishSendingMessage",{conversationId:e.conversationId,agentId:e.agentId,timestamp:Date.now(),leaveConversation:e.leaveConversation,operationId:e.operationId})}});oM({args:{now:j.number(),worldId:j.id("worlds"),player:j.object(O_),otherFreePlayers:j.array(j.object(O_))},handler:async(t,{now:e,worldId:n,player:r,otherFreePlayers:i})=>{var a;const{position:s}=r,o=[];for(const u of i){const h=await t.db.query("participatedTogether").withIndex("edge",d=>d.eq("worldId",n).eq("player1",r.id).eq("player2",u.id)).order("desc").first();h&&e<h.ended+bH||o.push({id:u.id,position:s})}return o.sort((u,h)=>is(u.position,s)-is(h.position,s)),(a=o[0])==null?void 0:a.id}});const Yj=j.array(j.object({playerId:nr,location:j.bytes()}));j.number(),j.array(j.object(Uj)),j.array(j.object(O_)),j.array(j.object(qj)),j.optional(Yj);class Qj{constructor(e){Ve(this,"nextId");Ve(this,"conversations");Ve(this,"players");Ve(this,"agents");Ve(this,"historicalLocations");const{nextId:n,historicalLocations:r}=e;if(this.nextId=n,this.conversations=qc(e.conversations,l0,i=>i.id),this.players=qc(e.players,u0,i=>i.id),this.agents=qc(e.agents,Xj,i=>i.id),r){this.historicalLocations=new Map;for(const{playerId:i,location:s}of r)this.historicalLocations.set(Ht("players",i),s)}}playerConversation(e){return[...this.conversations.values()].find(n=>n.participants.has(e.id))}serialize(){return{nextId:this.nextId,conversations:[...this.conversations.values()].map(e=>e.serialize()),players:[...this.players.values()].map(e=>e.serialize()),agents:[...this.agents.values()].map(e=>e.serialize()),historicalLocations:this.historicalLocations&&[...this.historicalLocations.entries()].map(([e,n])=>({playerId:e,location:n}))}}}const Kj=j.array(j.array(j.number())),Zj={x:j.number(),y:j.number(),w:j.number(),h:j.number(),layer:j.number(),sheet:j.string(),animation:j.string()};j.number(),j.number(),j.string(),j.number(),j.number(),j.number(),j.array(j.array(j.array(j.number()))),j.array(Kj),j.array(j.object(Zj));class Jj{constructor(e){Ve(this,"width");Ve(this,"height");Ve(this,"tileSetUrl");Ve(this,"tileSetDimX");Ve(this,"tileSetDimY");Ve(this,"tileDim");Ve(this,"bgTiles");Ve(this,"objectTiles");Ve(this,"animatedSprites");this.width=e.width,this.height=e.height,this.tileSetUrl=e.tileSetUrl,this.tileSetDimX=e.tileSetDimX,this.tileSetDimY=e.tileSetDimY,this.tileDim=e.tileDim,this.bgTiles=e.bgTiles,this.objectTiles=e.objectTiles,this.animatedSprites=e.animatedSprites}serialize(){return{width:this.width,height:this.height,tileSetUrl:this.tileSetUrl,tileSetDimX:this.tileSetDimX,tileSetDimY:this.tileSetDimY,tileDim:this.tileDim,bgTiles:this.bgTiles,objectTiles:this.objectTiles,animatedSprites:this.animatedSprites}}}function lM(t){const e=Br(nn.world.worldState,t?{worldId:t}:"skip"),n=Br(nn.world.gameDescriptions,t?{worldId:t}:"skip");return de.useMemo(()=>{if(!(!e||!n))return{world:new Qj(e.world),agentDescriptions:qc(n.agentDescriptions,Mj,i=>i.agentId),playerDescriptions:qc(n.playerDescriptions,sM,i=>i.playerId),worldMap:new Jj(n.worldMap)}},[e,n])}const uM=!!{}.VITE_SHOW_DEBUG_UI;function eW(){const t=e0(),[e,n]=de.useState(),[r,{width:i,height:s}]=cH(),o=Br(nn.world.defaultWorldStatus),a=o==null?void 0:o.worldId,u=o==null?void 0:o.engineId,h=lM(a);PH();const d=Br(nn.world.worldState,a?{worldId:a}:"skip"),{historicalTime:p,timeManager:f}=kH(d==null?void 0:d.engine),g=de.useRef(null);return!a||!u||!h?null:W.jsxs(W.Fragment,{children:[uM&&W.jsx(kj,{timeManager:f,width:200,height:100}),W.jsxs("div",{className:"mx-auto w-full max-w grid grid-rows-[240px_1fr] lg:grid-rows-[1fr] lg:grid-cols-[1fr_auto] lg:grow max-w-[1400px] min-h-[480px] game-frame",children:[W.jsx("div",{className:"relative overflow-hidden bg-brown-900",ref:r,children:W.jsx("div",{className:"absolute inset-0",children:W.jsx("div",{className:"container",children:W.jsx(Ii.Stage,{width:i,height:s,options:{backgroundColor:8041983},children:W.jsx(nR,{client:t,children:W.jsx(uH,{game:h,worldId:a,engineId:u,width:i,height:s,historicalTime:p,setSelectedElement:n})})})})})}),W.jsx("div",{className:"flex flex-col overflow-y-auto shrink-0 px-4 py-6 sm:px-6 lg:w-96 xl:pr-6 border-t-8 sm:border-t-0 sm:border-l-8 border-brown-900  bg-brown-800 text-brown-100",ref:g,children:W.jsx(pH,{worldId:a,engineId:u,game:h,playerId:e==null?void 0:e.id,setSelectedElement:n,scrollViewRef:g})})]})]})}const tW="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAiOSURBVHgB7d0vlFxXAcfxO5v9g9liopqYRJEaXIpZDFARl1MXwTk4BIeqolJFFaieVlBVDqKupyhEWwwxtIqaBLWKYIhqRJvs7gxzBxCZeeW8yZs/9zf5fM4Z87JnMzsz+z377n33vtHX716bFIAAewUghGABMQQLiCFYQAzBAmIIFhBDsIAYggXEECwghmABMQQLiCFYQAzBAmIIFhBDsIAYggXEECwghmABMQQLiCFYQAzBAmIIFhBDsIAYggXEECwghmABMQQLiCFYQAzBAmIIFhBDsIAYggXEECwghmABMQQLiCFYQAzBAmIIFhBDsIAYggXEECwghmABMQQLiCFYQAzBAmIIFhBDsIAYggXEECwghmABMQQLiCFYQAzBAmIIFhBDsIAYggXEECwghmABMQQLiCFYQAzBAmIIFhBDsIAYggXEECwghmABMQQLiCFYQAzBAmIIFhBDsIAYggXEECwghmABMQQLiCFYQAzBAmIIFhBDsIAYggXEECwghmABMQQLiCFYQAzBAmIIFhBDsIAYggXEECwghmABMQQLiCFYQAzBAmIIFhBDsIAYggXEECwghmABMQQLiCFYQAzBAmIIFhBDsIAYggXEECwghmABMQQLiCFYQAzBAmIIFhBjvxDt8PaHZe/KD3p97dlnb5aLv39UtmWZ57ou51+8M3uQyV9YQAzBAmIIFhBDsIAYBt1DjF66WvZefnXxH45eKq1p+bmOLt8ol773+sLxbU5G0J9ghRgdXy0HP/5tSdDyc710/bXZY55gZXBKCMQQLCCGYAExBAuIETvoXpd51MHdbTr708/L+NH9smqHt96fzWYlGPo+jB/+tZz9+VdlHY5++pdBX3v+5QflYvqgHbHBqr8kdfp8q9Y1TX90vP2fradVvA+Tr/5Rtq3rZxg1eMnIi84pIRBDsIAYggXEcKX7AHvfMjBeB5JZNJugePLVM8cmjx6Udel6H9Y19lnHu0aXXym7qpXPtGANsH/y1sKxOoD85A8/LCw6v/f2Rj/4Tz++s3Bs/+Ybs8eq7V37SczSqefxzXvXSwucEgIxBAuIIVhADMECYsQOuq9rOUeXOhvYNcDepc4W1eUq8+oyj/Hpp32+xWxwuu9V9Psnd6fPb3dnp1at7ns1fvh5r6+dPN7+Ffg8KzZYzV46MA1N162sRg/6bxC31PrEucsE+P/qLG4LS4F4Pk4JgRiCBcQQLCCGK937mI4TdY17pGwBw/pNnj5ud2ysLhvaka1yBKuHOgjetdymzgZ2DbDz4hmfflKeTB8tqkuGum5tlsgpIRBDsIAYggXEECwgRuyg+8HJ3ensx3fLJkz+dX+2tIZh9m/+skweb3fwtw6OX/RcIhVnOhN40LGEbO/lV0tf9bUZNzp5UMUGa+/aaxu7rGB8fKUUwRqshRnV2aUHOxqseunC0NnAyXRGvK63bJVTQiCGYAExBAuIIVhAjOYH3dd1l5Nl1MHi7/zitJDv2z5PrdwVpq+hy21S7+7kLywghmABMQQLiCFYQIymBt27BhFHl2+UvupA4vif/e6IsozR8RX7Xq1AXfJRN7rblGUGpbu+dvzowezK722qqzm6ltbUz2Rf9YYtk8cPnzk2Cb15SVPBqjMfQ9RYnX32Zlm1GqvD24I11PmXv9/o3Y6WCVbXZ+/8i3fK+baDdXx18O/FxYOPml5uswynhEAMwQJiCBYQQ7CAGLH7YT39+M505mPutkprmvmoA8VdyxgObv2u7F1+pdCmrvds//s/K5emjxYd3np/qVnxeXWW/Okf7yz+Q+iMYJfYYNVYbfI+cJ3/1w59EHZR13vW9HT+0fHgTSmbvTfiijglBGIIFhBDsIAYblUPG1ZvFjHqmqyZHu+rjlXNTzrNL7/ZRYIFG1ZjdXj7wzJEXTa0K8ttluGUEIghWEAMwQJiCBYQI3bQ/eBHv1k4Nn74+WwwctXqIOnByd3O4/S3X1/DuSvN6yZ55/d+Xdaha2C77i+1SXUvq/nN9kbLzAY+ul/O7r3defxFFBusrh1A1zWtWz9gdhwdbtPrLlt4z+puoUOW29SlRJvc9LB1TgmBGIIFxBAsIEZTY1idW2PUZQw9BylHh8O35+h0dFw2aS0/Q/nvkpC+33s6dtJnK5aFPcmqJd6zssxzWqOhW9HMft4lBtN7a/j12YbR1+9em5SG7d98Y/ZIV+/m03cpRZ3d2vaA8eyOMc854/qfuwwNW3qyad+8d70MUe/QM/TuNi0b+vqsilNCIIZgATEEC4ghWECM5q90vzj9tHOGYv/kraWWOAxRl0Gc/+2DheN1MqCFGZzWjOtykukkw7wWXq/6eRqfflLI1HywaiwuOtZNzWYONxWs6fR21wzfpRuvC1aXhl+v2efpBdz4blc4JQRiCBYQQ7CAGIIFxGh+aQ7A//gLC4ghWEAMwQJiCBYQQ7CAGIIFxBAsIIZgATEEC4ghWEAMwQJiCBYQQ7CAGIIFxBAsIIZgATEEC4ghWEAMwQJiCBYQQ7CAGIIFxBAsIIZgATEEC4ghWEAMwQJiCBYQQ7CAGIIFxBAsIIZgATEEC4ghWEAMwQJiCBYQQ7CAGIIFxBAsIIZgATEEC4ghWEAMwQJiCBYQQ7CAGIIFxBAsIIZgATEEC4ghWEAMwQJiCBYQQ7CAGIIFxBAsIIZgATEEC4ghWEAMwQJiCBYQQ7CAGIIFxBAsIIZgATEEC4ghWEAMwQJiCBYQQ7CAGIIFxBAsIIZgATEEC4ghWEAMwQJiCBYQQ7CAGIIFxBAsIIZgATEEC4ghWEAMwQJiCBYQQ7CAGIIFxBAsIIZgATEEC4ghWEAMwQJiCBYQQ7CAGIIFxBAsIIZgATEEC4ghWEAMwQJiCBYQQ7CAGIIFxBAsIIZgATEEC4ghWEAMwQJiCBYQQ7CAGIIFxPg34jCnqz8w12MAAAAASUVORK5CYII=",nW="/ai-town/assets/convex-24c30eab.svg",rW="/ai-town/assets/star-35840d8c.svg",iW="/ai-town/assets/help-80bbbbb2.svg";var N_={exports:{}},Tu={},D_={exports:{}},Vs={},L_={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var n="none",r="contents",i=/input|select|textarea|button|object|iframe/;function s(p,f){return f.getPropertyValue("overflow")!=="visible"||p.scrollWidth<=0&&p.scrollHeight<=0}function o(p){var f=p.offsetWidth<=0&&p.offsetHeight<=0;if(f&&!p.innerHTML)return!0;try{var g=window.getComputedStyle(p),v=g.getPropertyValue("display");return f?v!==r&&s(p,g):v===n}catch{return console.warn("Failed to inspect element style"),!1}}function a(p){for(var f=p,g=p.getRootNode&&p.getRootNode();f&&f!==document.body;){if(g&&f===g&&(f=g.host.parentNode),o(f))return!1;f=f.parentNode}return!0}function u(p,f){var g=p.nodeName.toLowerCase(),v=i.test(g)&&!p.disabled||g==="a"&&p.href||f;return v&&a(p)}function h(p){var f=p.getAttribute("tabindex");f===null&&(f=void 0);var g=isNaN(f);return(g||f>=0)&&u(p,!g)}function d(p){var f=[].slice.call(p.querySelectorAll("*"),0).reduce(function(g,v){return g.concat(v.shadowRoot?d(v.shadowRoot):[v])},[]);return f.filter(h)}t.exports=e.default})(L_,L_.exports);var cM=L_.exports;Object.defineProperty(Vs,"__esModule",{value:!0});Vs.resetState=lW;Vs.log=uW;Vs.handleBlur=Of;Vs.handleFocus=Nf;Vs.markForFocusLater=cW;Vs.returnFocus=hW;Vs.popWithoutFocus=dW;Vs.setupScopedFocus=fW;Vs.teardownScopedFocus=pW;var sW=cM,oW=aW(sW);function aW(t){return t&&t.__esModule?t:{default:t}}var gh=[],Rc=null,F_=!1;function lW(){gh=[]}function uW(){}function Of(){F_=!0}function Nf(){if(F_){if(F_=!1,!Rc)return;setTimeout(function(){if(!Rc.contains(document.activeElement)){var t=(0,oW.default)(Rc)[0]||Rc;t.focus()}},0)}}function cW(){gh.push(document.activeElement)}function hW(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=null;try{gh.length!==0&&(e=gh.pop(),e.focus({preventScroll:t}));return}catch{console.warn(["You tried to return focus to",e,"but it is not in the DOM anymore"].join(" "))}}function dW(){gh.length>0&&gh.pop()}function fW(t){Rc=t,window.addEventListener?(window.addEventListener("blur",Of,!1),document.addEventListener("focus",Nf,!0)):(window.attachEvent("onBlur",Of),document.attachEvent("onFocus",Nf))}function pW(){Rc=null,window.addEventListener?(window.removeEventListener("blur",Of),document.removeEventListener("focus",Nf)):(window.detachEvent("onBlur",Of),document.detachEvent("onFocus",Nf))}var B_={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=cM,r=i(n);function i(a){return a&&a.__esModule?a:{default:a}}function s(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return a.activeElement.shadowRoot?s(a.activeElement.shadowRoot):a.activeElement}function o(a,u){var h=(0,r.default)(a);if(!h.length){u.preventDefault();return}var d=void 0,p=u.shiftKey,f=h[0],g=h[h.length-1],v=s();if(a===v){if(!p)return;d=g}if(g===v&&!p&&(d=f),f===v&&p&&(d=g),d){u.preventDefault(),d.focus();return}var w=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),C=w!=null&&w[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(C){var b=h.indexOf(v);if(b>-1&&(b+=p?-1:1),d=h[b],typeof d>"u"){u.preventDefault(),d=p?g:f,d.focus();return}u.preventDefault(),d.focus()}}t.exports=e.default})(B_,B_.exports);var mW=B_.exports,Xs={},gW=function(){},yW=gW,zs={},hM={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(t){(function(){var e=!!(typeof window<"u"&&window.document&&window.document.createElement),n={canUseDOM:e,canUseWorkers:typeof Worker<"u",canUseEventListeners:e&&!!(window.addEventListener||window.attachEvent),canUseViewport:e&&!!window.screen};t.exports?t.exports=n:window.ExecutionEnvironment=n})()})(hM);var vW=hM.exports;Object.defineProperty(zs,"__esModule",{value:!0});zs.canUseDOM=zs.SafeNodeList=zs.SafeHTMLCollection=void 0;var xW=vW,_W=wW(xW);function wW(t){return t&&t.__esModule?t:{default:t}}var c0=_W.default,bW=c0.canUseDOM?window.HTMLElement:{};zs.SafeHTMLCollection=c0.canUseDOM?window.HTMLCollection:{};zs.SafeNodeList=c0.canUseDOM?window.NodeList:{};zs.canUseDOM=c0.canUseDOM;zs.default=bW;Object.defineProperty(Xs,"__esModule",{value:!0});Xs.resetState=AW;Xs.log=IW;Xs.assertNodeList=dM;Xs.setElement=PW;Xs.validateElement=Db;Xs.hide=kW;Xs.show=RW;Xs.documentNotReadyOrSSRTesting=MW;var SW=yW,EW=CW(SW),TW=zs;function CW(t){return t&&t.__esModule?t:{default:t}}var es=null;function AW(){es&&(es.removeAttribute?es.removeAttribute("aria-hidden"):es.length!=null?es.forEach(function(t){return t.removeAttribute("aria-hidden")}):document.querySelectorAll(es).forEach(function(t){return t.removeAttribute("aria-hidden")})),es=null}function IW(){}function dM(t,e){if(!t||!t.length)throw new Error("react-modal: No elements were found for selector "+e+".")}function PW(t){var e=t;if(typeof e=="string"&&TW.canUseDOM){var n=document.querySelectorAll(e);dM(n,e),e=n}return es=e||es,es}function Db(t){var e=t||es;return e?Array.isArray(e)||e instanceof HTMLCollection||e instanceof NodeList?e:[e]:((0,EW.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function kW(t){var e=!0,n=!1,r=void 0;try{for(var i=Db(t)[Symbol.iterator](),s;!(e=(s=i.next()).done);e=!0){var o=s.value;o.setAttribute("aria-hidden","true")}}catch(a){n=!0,r=a}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}function RW(t){var e=!0,n=!1,r=void 0;try{for(var i=Db(t)[Symbol.iterator](),s;!(e=(s=i.next()).done);e=!0){var o=s.value;o.removeAttribute("aria-hidden")}}catch(a){n=!0,r=a}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}function MW(){es=null}var Ch={};Object.defineProperty(Ch,"__esModule",{value:!0});Ch.resetState=OW;Ch.log=NW;var Qd={},Kd={};function uA(t,e){t.classList.remove(e)}function OW(){var t=document.getElementsByTagName("html")[0];for(var e in Qd)uA(t,Qd[e]);var n=document.body;for(var r in Kd)uA(n,Kd[r]);Qd={},Kd={}}function NW(){}var DW=function(e,n){return e[n]||(e[n]=0),e[n]+=1,n},LW=function(e,n){return e[n]&&(e[n]-=1),n},FW=function(e,n,r){r.forEach(function(i){DW(n,i),e.add(i)})},BW=function(e,n,r){r.forEach(function(i){LW(n,i),n[i]===0&&e.remove(i)})};Ch.add=function(e,n){return FW(e.classList,e.nodeName.toLowerCase()=="html"?Qd:Kd,n.split(" "))};Ch.remove=function(e,n){return BW(e.classList,e.nodeName.toLowerCase()=="html"?Qd:Kd,n.split(" "))};var Ah={};Object.defineProperty(Ah,"__esModule",{value:!0});Ah.log=zW;Ah.resetState=$W;function UW(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var fM=function t(){var e=this;UW(this,t),this.register=function(n){e.openInstances.indexOf(n)===-1&&(e.openInstances.push(n),e.emit("register"))},this.deregister=function(n){var r=e.openInstances.indexOf(n);r!==-1&&(e.openInstances.splice(r,1),e.emit("deregister"))},this.subscribe=function(n){e.subscribers.push(n)},this.emit=function(n){e.subscribers.forEach(function(r){return r(n,e.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},hy=new fM;function zW(){console.log("portalOpenInstances ----------"),console.log(hy.openInstances.length),hy.openInstances.forEach(function(t){return console.log(t)}),console.log("end portalOpenInstances ----------")}function $W(){hy=new fM}Ah.default=hy;var Lb={};Object.defineProperty(Lb,"__esModule",{value:!0});Lb.resetState=GW;Lb.log=VW;var HW=Ah,jW=WW(HW);function WW(t){return t&&t.__esModule?t:{default:t}}var Rr=void 0,Cs=void 0,mu=[];function GW(){for(var t=[Rr,Cs],e=0;e<t.length;e++){var n=t[e];n&&n.parentNode&&n.parentNode.removeChild(n)}Rr=Cs=null,mu=[]}function VW(){console.log("bodyTrap ----------"),console.log(mu.length);for(var t=[Rr,Cs],e=0;e<t.length;e++){var n=t[e],r=n||{};console.log(r.nodeName,r.className,r.id)}console.log("edn bodyTrap ----------")}function cA(){mu.length!==0&&mu[mu.length-1].focusContent()}function XW(t,e){!Rr&&!Cs&&(Rr=document.createElement("div"),Rr.setAttribute("data-react-modal-body-trap",""),Rr.style.position="absolute",Rr.style.opacity="0",Rr.setAttribute("tabindex","0"),Rr.addEventListener("focus",cA),Cs=Rr.cloneNode(),Cs.addEventListener("focus",cA)),mu=e,mu.length>0?(document.body.firstChild!==Rr&&document.body.insertBefore(Rr,document.body.firstChild),document.body.lastChild!==Cs&&document.body.appendChild(Cs)):(Rr.parentElement&&Rr.parentElement.removeChild(Rr),Cs.parentElement&&Cs.parentElement.removeChild(Cs))}jW.default.subscribe(XW);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(U){for(var Z=1;Z<arguments.length;Z++){var ie=arguments[Z];for(var O in ie)Object.prototype.hasOwnProperty.call(ie,O)&&(U[O]=ie[O])}return U},r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},i=function(){function U(Z,ie){for(var O=0;O<ie.length;O++){var L=ie[O];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}return function(Z,ie,O){return ie&&U(Z.prototype,ie),O&&U(Z,O),Z}}(),s=de,o=rb,a=P(o),u=Vs,h=A(u),d=mW,p=P(d),f=Xs,g=A(f),v=Ch,w=A(v),C=zs,b=P(C),S=Ah,_=P(S);function A(U){if(U&&U.__esModule)return U;var Z={};if(U!=null)for(var ie in U)Object.prototype.hasOwnProperty.call(U,ie)&&(Z[ie]=U[ie]);return Z.default=U,Z}function P(U){return U&&U.__esModule?U:{default:U}}function F(U,Z){if(!(U instanceof Z))throw new TypeError("Cannot call a class as a function")}function N(U,Z){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z&&(typeof Z=="object"||typeof Z=="function")?Z:U}function D(U,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Z);U.prototype=Object.create(Z&&Z.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(U,Z):U.__proto__=Z)}var q={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},G=function(Z){return Z.code==="Tab"||Z.keyCode===9},H=function(Z){return Z.code==="Escape"||Z.keyCode===27},J=0,V=function(U){D(Z,U);function Z(ie){F(this,Z);var O=N(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this,ie));return O.setOverlayRef=function(L){O.overlay=L,O.props.overlayRef&&O.props.overlayRef(L)},O.setContentRef=function(L){O.content=L,O.props.contentRef&&O.props.contentRef(L)},O.afterClose=function(){var L=O.props,Q=L.appElement,B=L.ariaHideApp,ee=L.htmlOpenClassName,te=L.bodyOpenClassName,be=L.parentSelector,ge=be&&be().ownerDocument||document;te&&w.remove(ge.body,te),ee&&w.remove(ge.getElementsByTagName("html")[0],ee),B&&J>0&&(J-=1,J===0&&g.show(Q)),O.props.shouldFocusAfterRender&&(O.props.shouldReturnFocusAfterClose?(h.returnFocus(O.props.preventScroll),h.teardownScopedFocus()):h.popWithoutFocus()),O.props.onAfterClose&&O.props.onAfterClose(),_.default.deregister(O)},O.open=function(){O.beforeOpen(),O.state.afterOpen&&O.state.beforeClose?(clearTimeout(O.closeTimer),O.setState({beforeClose:!1})):(O.props.shouldFocusAfterRender&&(h.setupScopedFocus(O.node),h.markForFocusLater()),O.setState({isOpen:!0},function(){O.openAnimationFrame=requestAnimationFrame(function(){O.setState({afterOpen:!0}),O.props.isOpen&&O.props.onAfterOpen&&O.props.onAfterOpen({overlayEl:O.overlay,contentEl:O.content})})}))},O.close=function(){O.props.closeTimeoutMS>0?O.closeWithTimeout():O.closeWithoutTimeout()},O.focusContent=function(){return O.content&&!O.contentHasFocus()&&O.content.focus({preventScroll:!0})},O.closeWithTimeout=function(){var L=Date.now()+O.props.closeTimeoutMS;O.setState({beforeClose:!0,closesAt:L},function(){O.closeTimer=setTimeout(O.closeWithoutTimeout,O.state.closesAt-Date.now())})},O.closeWithoutTimeout=function(){O.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},O.afterClose)},O.handleKeyDown=function(L){G(L)&&(0,p.default)(O.content,L),O.props.shouldCloseOnEsc&&H(L)&&(L.stopPropagation(),O.requestClose(L))},O.handleOverlayOnClick=function(L){O.shouldClose===null&&(O.shouldClose=!0),O.shouldClose&&O.props.shouldCloseOnOverlayClick&&(O.ownerHandlesClose()?O.requestClose(L):O.focusContent()),O.shouldClose=null},O.handleContentOnMouseUp=function(){O.shouldClose=!1},O.handleOverlayOnMouseDown=function(L){!O.props.shouldCloseOnOverlayClick&&L.target==O.overlay&&L.preventDefault()},O.handleContentOnClick=function(){O.shouldClose=!1},O.handleContentOnMouseDown=function(){O.shouldClose=!1},O.requestClose=function(L){return O.ownerHandlesClose()&&O.props.onRequestClose(L)},O.ownerHandlesClose=function(){return O.props.onRequestClose},O.shouldBeClosed=function(){return!O.state.isOpen&&!O.state.beforeClose},O.contentHasFocus=function(){return document.activeElement===O.content||O.content.contains(document.activeElement)},O.buildClassName=function(L,Q){var B=(typeof Q>"u"?"undefined":r(Q))==="object"?Q:{base:q[L],afterOpen:q[L]+"--after-open",beforeClose:q[L]+"--before-close"},ee=B.base;return O.state.afterOpen&&(ee=ee+" "+B.afterOpen),O.state.beforeClose&&(ee=ee+" "+B.beforeClose),typeof Q=="string"&&Q?ee+" "+Q:ee},O.attributesFromObject=function(L,Q){return Object.keys(Q).reduce(function(B,ee){return B[L+"-"+ee]=Q[ee],B},{})},O.state={afterOpen:!1,beforeClose:!1},O.shouldClose=null,O.moveFromContentToOverlay=null,O}return i(Z,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(O,L){this.props.isOpen&&!O.isOpen?this.open():!this.props.isOpen&&O.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!L.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var O=this.props,L=O.appElement,Q=O.ariaHideApp,B=O.htmlOpenClassName,ee=O.bodyOpenClassName,te=O.parentSelector,be=te&&te().ownerDocument||document;ee&&w.add(be.body,ee),B&&w.add(be.getElementsByTagName("html")[0],B),Q&&(J+=1,g.hide(L)),_.default.register(this)}},{key:"render",value:function(){var O=this.props,L=O.id,Q=O.className,B=O.overlayClassName,ee=O.defaultStyles,te=O.children,be=Q?{}:ee.content,ge=B?{}:ee.overlay;if(this.shouldBeClosed())return null;var je={ref:this.setOverlayRef,className:this.buildClassName("overlay",B),style:n({},ge,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},We=n({id:L,ref:this.setContentRef,style:n({},be,this.props.style.content),className:this.buildClassName("content",Q),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",n({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),Ne=this.props.contentElement(We,te);return this.props.overlayElement(je,Ne)}}]),Z}(s.Component);V.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},V.propTypes={isOpen:a.default.bool.isRequired,defaultStyles:a.default.shape({content:a.default.object,overlay:a.default.object}),style:a.default.shape({content:a.default.object,overlay:a.default.object}),className:a.default.oneOfType([a.default.string,a.default.object]),overlayClassName:a.default.oneOfType([a.default.string,a.default.object]),parentSelector:a.default.func,bodyOpenClassName:a.default.string,htmlOpenClassName:a.default.string,ariaHideApp:a.default.bool,appElement:a.default.oneOfType([a.default.instanceOf(b.default),a.default.instanceOf(C.SafeHTMLCollection),a.default.instanceOf(C.SafeNodeList),a.default.arrayOf(a.default.instanceOf(b.default))]),onAfterOpen:a.default.func,onAfterClose:a.default.func,onRequestClose:a.default.func,closeTimeoutMS:a.default.number,shouldFocusAfterRender:a.default.bool,shouldCloseOnOverlayClick:a.default.bool,shouldReturnFocusAfterClose:a.default.bool,preventScroll:a.default.bool,role:a.default.string,contentLabel:a.default.string,aria:a.default.object,data:a.default.object,children:a.default.node,shouldCloseOnEsc:a.default.bool,overlayRef:a.default.func,contentRef:a.default.func,id:a.default.string,overlayElement:a.default.func,contentElement:a.default.func,testId:a.default.string},e.default=V,t.exports=e.default})(D_,D_.exports);var qW=D_.exports;function pM(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);t!=null&&this.setState(t)}function mM(t){function e(n){var r=this.constructor.getDerivedStateFromProps(t,n);return r??null}this.setState(e.bind(this))}function gM(t,e){try{var n=this.props,r=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}pM.__suppressDeprecationWarning=!0;mM.__suppressDeprecationWarning=!0;gM.__suppressDeprecationWarning=!0;function YW(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return t;var n=null,r=null,i=null;if(typeof e.componentWillMount=="function"?n="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),n!==null||r!==null||i!==null){var s=t.displayName||t.name,o=typeof t.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+s+" uses "+o+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(r!==null?`
  `+r:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof t.getDerivedStateFromProps=="function"&&(e.componentWillMount=pM,e.componentWillReceiveProps=mM),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=gM;var a=e.componentDidUpdate;e.componentDidUpdate=function(h,d,p){var f=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:p;a.call(this,h,d,f)}}return t}const QW=Object.freeze(Object.defineProperty({__proto__:null,polyfill:YW},Symbol.toStringTag,{value:"Module"})),KW=H_(QW);Object.defineProperty(Tu,"__esModule",{value:!0});Tu.bodyOpenClassName=Tu.portalClassName=void 0;var hA=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZW=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),yM=de,dy=qf(yM),JW=Fw,fy=qf(JW),eG=rb,Ke=qf(eG),tG=qW,dA=qf(tG),nG=Xs,rG=sG(nG),nl=zs,fA=qf(nl),iG=KW;function sG(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function qf(t){return t&&t.__esModule?t:{default:t}}function oG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pA(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function aG(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var lG=Tu.portalClassName="ReactModalPortal",uG=Tu.bodyOpenClassName="ReactModal__Body--open",Jl=nl.canUseDOM&&fy.default.createPortal!==void 0,mA=function(e){return document.createElement(e)},gA=function(){return Jl?fy.default.createPortal:fy.default.unstable_renderSubtreeIntoContainer};function zm(t){return t()}var Yf=function(t){aG(e,t);function e(){var n,r,i,s;oG(this,e);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return s=(r=(i=pA(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(a))),i),i.removePortal=function(){!Jl&&fy.default.unmountComponentAtNode(i.node);var h=zm(i.props.parentSelector);h&&h.contains(i.node)?h.removeChild(i.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},i.portalRef=function(h){i.portal=h},i.renderPortal=function(h){var d=gA(),p=d(i,dy.default.createElement(dA.default,hA({defaultStyles:e.defaultStyles},h)),i.node);i.portalRef(p)},r),pA(i,s)}return ZW(e,[{key:"componentDidMount",value:function(){if(nl.canUseDOM){Jl||(this.node=mA("div")),this.node.className=this.props.portalClassName;var r=zm(this.props.parentSelector);r.appendChild(this.node),!Jl&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(r){var i=zm(r.parentSelector),s=zm(this.props.parentSelector);return{prevParent:i,nextParent:s}}},{key:"componentDidUpdate",value:function(r,i,s){if(nl.canUseDOM){var o=this.props,a=o.isOpen,u=o.portalClassName;r.portalClassName!==u&&(this.node.className=u);var h=s.prevParent,d=s.nextParent;d!==h&&(h.removeChild(this.node),d.appendChild(this.node)),!(!r.isOpen&&!a)&&!Jl&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!nl.canUseDOM||!this.node||!this.portal)){var r=this.portal.state,i=Date.now(),s=r.isOpen&&this.props.closeTimeoutMS&&(r.closesAt||i+this.props.closeTimeoutMS);s?(r.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,s-i)):this.removePortal()}}},{key:"render",value:function(){if(!nl.canUseDOM||!Jl)return null;!this.node&&Jl&&(this.node=mA("div"));var r=gA();return r(dy.default.createElement(dA.default,hA({ref:this.portalRef,defaultStyles:e.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(r){rG.setElement(r)}}]),e}(yM.Component);Yf.propTypes={isOpen:Ke.default.bool.isRequired,style:Ke.default.shape({content:Ke.default.object,overlay:Ke.default.object}),portalClassName:Ke.default.string,bodyOpenClassName:Ke.default.string,htmlOpenClassName:Ke.default.string,className:Ke.default.oneOfType([Ke.default.string,Ke.default.shape({base:Ke.default.string.isRequired,afterOpen:Ke.default.string.isRequired,beforeClose:Ke.default.string.isRequired})]),overlayClassName:Ke.default.oneOfType([Ke.default.string,Ke.default.shape({base:Ke.default.string.isRequired,afterOpen:Ke.default.string.isRequired,beforeClose:Ke.default.string.isRequired})]),appElement:Ke.default.oneOfType([Ke.default.instanceOf(fA.default),Ke.default.instanceOf(nl.SafeHTMLCollection),Ke.default.instanceOf(nl.SafeNodeList),Ke.default.arrayOf(Ke.default.instanceOf(fA.default))]),onAfterOpen:Ke.default.func,onRequestClose:Ke.default.func,closeTimeoutMS:Ke.default.number,ariaHideApp:Ke.default.bool,shouldFocusAfterRender:Ke.default.bool,shouldCloseOnOverlayClick:Ke.default.bool,shouldReturnFocusAfterClose:Ke.default.bool,preventScroll:Ke.default.bool,parentSelector:Ke.default.func,aria:Ke.default.object,data:Ke.default.object,role:Ke.default.string,contentLabel:Ke.default.string,shouldCloseOnEsc:Ke.default.bool,overlayRef:Ke.default.func,contentRef:Ke.default.func,id:Ke.default.string,overlayElement:Ke.default.func,contentElement:Ke.default.func};Yf.defaultProps={isOpen:!1,portalClassName:lG,bodyOpenClassName:uG,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,n){return dy.default.createElement("div",e,n)},contentElement:function(e,n){return dy.default.createElement("div",e,n)}};Yf.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,iG.polyfill)(Yf);Tu.default=Yf;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=Tu,r=i(n);function i(s){return s&&s.__esModule?s:{default:s}}e.default=r.default,t.exports=e.default})(N_,N_.exports);var cG=N_.exports;const hG=yh(cG),dG="/ai-town/assets/volume-b1dd4cad.svg";let vM;function fG(t){return vM=t,t}function Df(){return vM}let pG=0;const U_=class extends Bo{constructor(t){super(),this.id=pG++,this.init(t)}set(t,e){if(this[t]===void 0)throw new Error(`Property with name ${t} does not exist.`);switch(t){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"paused":this.paused=e;break;case"loop":this.loop=e;break;case"muted":this.muted=e;break}return this}get progress(){const{currentTime:t}=this._source;return t/this._duration}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}_onPlay(){this._playing=!0}_onPause(){this._playing=!1}init(t){this._playing=!1,this._duration=t.source.duration;const e=this._source=t.source.cloneNode(!1);e.src=t.parent.url,e.onplay=this._onPlay.bind(this),e.onpause=this._onPause.bind(this),t.context.on("refresh",this.refresh,this),t.context.on("refreshPaused",this.refreshPaused,this),this._media=t}_internalStop(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())}stop(){this._internalStop(),this._source&&this.emit("stop")}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh()}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get filters(){return console.warn("HTML Audio does not support filters"),null}set filters(t){console.warn("HTML Audio does not support filters")}refresh(){const t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;const n=t.volume*(t.muted?0:1),r=e.volume*(e.muted?0:1),i=this._volume*(this._muted?0:1);this._source.volume=i*n*r,this._source.playbackRate=this._speed*t.speed*e.speed}refreshPaused(){const t=this._media.context,e=this._media.parent,n=this._paused||e.paused||t.paused;n!==this._pausedReal&&(this._pausedReal=n,n?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",n))}play(t){const{start:e,end:n,speed:r,loop:i,volume:s,muted:o}=t;n&&console.assert(n>e,"End time is before start time"),this._speed=r,this._volume=s,this._loop=!!i,this._muted=o,this.refresh(),this.loop&&n!==null&&(console.warn('Looping not support when specifying an "end" time'),this.loop=!1),this._start=e,this._end=n||this._duration,this._start=Math.max(0,this._start-U_.PADDING),this._end=Math.min(this._end+U_.PADDING,this._duration),this._source.onloadedmetadata=()=>{this._source&&(this._source.currentTime=e,this._source.onloadedmetadata=null,this.emit("progress",e,this._duration),zt.shared.add(this._onUpdate,this))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")}_onUpdate(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()}_onComplete(){zt.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)}destroy(){zt.shared.remove(this._onUpdate,this),this.removeAllListeners();const t=this._source;t&&(t.onended=null,t.onplay=null,t.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)}toString(){return`[HTMLAudioInstance id=${this.id}]`}};let xM=U_;xM.PADDING=.1;class mG extends Bo{init(e){this.parent=e,this._source=e.options.source||new Audio,e.url&&(this._source.src=e.url)}create(){return new xM(this)}get isPlayable(){return!!this._source&&this._source.readyState===4}get duration(){return this._source.duration}get context(){return this.parent.context}get filters(){return null}set filters(e){console.warn("HTML Audio does not support filters")}destroy(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)}get source(){return this._source}load(e){const n=this._source,r=this.parent;if(n.readyState===4){r.isLoaded=!0;const u=r.autoPlayStart();e&&setTimeout(()=>{e(null,r,u)},0);return}if(!r.url){e(new Error("sound.url or sound.source must be set"));return}n.src=r.url;const i=()=>{a(),r.isLoaded=!0;const u=r.autoPlayStart();e&&e(null,r,u)},s=()=>{a(),e&&e(new Error("Sound loading has been aborted"))},o=()=>{a();const u=`Failed to load audio element (code: ${n.error.code})`;e?e(new Error(u)):console.error(u)},a=()=>{n.removeEventListener("canplaythrough",i),n.removeEventListener("load",i),n.removeEventListener("abort",s),n.removeEventListener("error",o)};n.addEventListener("canplaythrough",i,!1),n.addEventListener("load",i,!1),n.addEventListener("abort",s,!1),n.addEventListener("error",o,!1),n.load()}}class gG{constructor(e,n){this.parent=e,Object.assign(this,n),this.duration=this.end-this.start,console.assert(this.duration>0,"End time must be after start time")}play(e){return this.parent.play({complete:e,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})}destroy(){this.parent=null}}const py=["ogg","oga","opus","m4a","mp3","mpeg","wav","aiff","wma","mid","caf"],yG=["audio/mpeg","audio/ogg"],z_={};function vG(t){const e={m4a:"audio/mp4",oga:"audio/ogg",opus:'audio/ogg; codecs="opus"',caf:'audio/x-caf; codecs="opus"',...t||{}},n=document.createElement("audio"),r={},i=/^no$/;py.forEach(s=>{const o=n.canPlayType(`audio/${s}`).replace(i,""),a=e[s]?n.canPlayType(e[s]).replace(i,""):"";r[s]=!!o||!!a}),Object.assign(z_,r)}vG();class $_{static setParamValue(e,n){if(e.setValueAtTime){const r=Df().context;e.setValueAtTime(n,r.audioContext.currentTime)}else e.value=n;return n}}let xG=0;class _G extends Bo{constructor(e){super(),this.id=xG++,this._media=null,this._paused=!1,this._muted=!1,this._elapsed=0,this.init(e)}set(e,n){if(this[e]===void 0)throw new Error(`Property with name ${e} does not exist.`);switch(e){case"speed":this.speed=n;break;case"volume":this.volume=n;break;case"muted":this.muted=n;break;case"loop":this.loop=n;break;case"paused":this.paused=n;break}return this}stop(){this._source&&(this._internalStop(),this.emit("stop"))}get speed(){return this._speed}set speed(e){this._speed=e,this.refresh(),this._update(!0)}get volume(){return this._volume}set volume(e){this._volume=e,this.refresh()}get muted(){return this._muted}set muted(e){this._muted=e,this.refresh()}get loop(){return this._loop}set loop(e){this._loop=e,this.refresh()}get filters(){return this._filters}set filters(e){var n;this._filters&&((n=this._filters)==null||n.filter(r=>r).forEach(r=>r.disconnect()),this._filters=null,this._source.connect(this._gain)),this._filters=e!=null&&e.length?e.slice(0):null,this.refresh()}refresh(){if(!this._source)return;const e=this._media.context,n=this._media.parent;this._source.loop=this._loop||n.loop;const r=e.volume*(e.muted?0:1),i=n.volume*(n.muted?0:1),s=this._volume*(this._muted?0:1);$_.setParamValue(this._gain.gain,s*i*r),$_.setParamValue(this._source.playbackRate,this._speed*n.speed*e.speed),this.applyFilters()}applyFilters(){var e;if((e=this._filters)!=null&&e.length){this._source.disconnect();let n=this._source;this._filters.forEach(r=>{n.connect(r.destination),n=r}),n.connect(this._gain)}}refreshPaused(){const e=this._media.context,n=this._media.parent,r=this._paused||n.paused||e.paused;r!==this._pausedReal&&(this._pausedReal=r,r?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",r))}play(e){const{start:n,end:r,speed:i,loop:s,volume:o,muted:a,filters:u}=e;r&&console.assert(r>n,"End time is before start time"),this._paused=!1;const{source:h,gain:d}=this._media.nodes.cloneBufferSource();this._source=h,this._gain=d,this._speed=i,this._volume=o,this._loop=!!s,this._muted=a,this._filters=u,this.refresh();const p=this._source.buffer.duration;this._duration=p,this._end=r,this._lastUpdate=this._now(),this._elapsed=n,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=r,this._source.loopStart=n,this._source.start(0,n)):r?this._source.start(0,n,r-n):this._source.start(0,n),this.emit("start"),this._update(!0),this.enableTicker(!0)}enableTicker(e){zt.shared.remove(this._updateListener,this),e&&zt.shared.add(this._updateListener,this)}get progress(){return this._progress}get paused(){return this._paused}set paused(e){this._paused=e,this.refreshPaused()}destroy(){var e;this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),(e=this._filters)==null||e.forEach(n=>n.disconnect()),this._filters=null,this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1}toString(){return`[WebAudioInstance id=${this.id}]`}_now(){return this._media.context.audioContext.currentTime}_updateListener(){this._update()}_update(e=!1){if(this._source){const n=this._now(),r=n-this._lastUpdate;if(r>0||e){const i=this._source.playbackRate.value;this._elapsed+=r*i,this._lastUpdate=n;const s=this._duration;let o;if(this._source.loopStart){const a=this._source.loopEnd-this._source.loopStart;o=(this._source.loopStart+this._elapsed%a)/s}else o=this._elapsed%s/s;this._progress=o,this.emit("progress",this._progress,s)}}}init(e){this._media=e,e.context.events.on("refresh",this.refresh,this),e.context.events.on("refreshPaused",this.refreshPaused,this)}_internalStop(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.stop(0),this._source.disconnect();try{this._source.buffer=null}catch(e){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",e)}this._source=null}}_onComplete(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.disconnect();try{this._source.buffer=null}catch(e){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",e)}}this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)}}class _M{constructor(e,n){this._output=n,this._input=e}get destination(){return this._input}get filters(){return this._filters}set filters(e){if(this._filters&&(this._filters.forEach(n=>{n&&n.disconnect()}),this._filters=null,this._input.connect(this._output)),e&&e.length){this._filters=e.slice(0),this._input.disconnect();let n=null;e.forEach(r=>{n===null?this._input.connect(r.destination):n.connect(r.destination),n=r}),n.connect(this._output)}}destroy(){this.filters=null,this._input=null,this._output=null}}const wM=class extends _M{constructor(t){const e=t.audioContext,n=e.createBufferSource(),r=e.createGain(),i=e.createAnalyser();n.connect(i),i.connect(r),r.connect(t.destination),super(i,r),this.context=t,this.bufferSource=n,this.gain=r,this.analyser=i}get script(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(wM.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script}destroy(){super.destroy(),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null}cloneBufferSource(){const t=this.bufferSource,e=this.context.audioContext.createBufferSource();e.buffer=t.buffer,$_.setParamValue(e.playbackRate,t.playbackRate.value),e.loop=t.loop;const n=this.context.audioContext.createGain();return e.connect(n),n.connect(this.destination),{source:e,gain:n}}get bufferSize(){return this.script.bufferSize}};let bM=wM;bM.BUFFER_SIZE=0;class wG{init(e){this.parent=e,this._nodes=new bM(this.context),this._source=this._nodes.bufferSource,this.source=e.options.source}destroy(){this.parent=null,this._nodes.destroy(),this._nodes=null;try{this._source.buffer=null}catch(e){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",e)}this._source=null,this.source=null}create(){return new _G(this)}get context(){return this.parent.context}get isPlayable(){return!!this._source&&!!this._source.buffer}get filters(){return this._nodes.filters}set filters(e){this._nodes.filters=e}get duration(){return console.assert(this.isPlayable,"Sound not yet playable, no duration"),this._source.buffer.duration}get buffer(){return this._source.buffer}set buffer(e){this._source.buffer=e}get nodes(){return this._nodes}load(e){this.source?this._decode(this.source,e):this.parent.url?this._loadUrl(e):e?e(new Error("sound.url or sound.source must be set")):console.error("sound.url or sound.source must be set")}async _loadUrl(e){const n=this.parent.url,r=await we.ADAPTER.fetch(n);this._decode(await r.arrayBuffer(),e)}_decode(e,n){const r=(i,s)=>{if(i)n&&n(i);else{this.parent.isLoaded=!0,this.buffer=s;const o=this.parent.autoPlayStart();n&&n(null,this.parent,o)}};e instanceof AudioBuffer?r(null,e):this.parent.context.decode(e,r)}}const fc=class{static from(t){let e={};typeof t=="string"?e.url=t:t instanceof ArrayBuffer||t instanceof AudioBuffer||t instanceof HTMLAudioElement?e.source=t:Array.isArray(t)?e.url=t:e=t,e={autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1,...e},Object.freeze(e);const n=Df().useLegacy?new mG:new wG;return new fc(n,e)}constructor(t,e){this.media=t,this.options=e,this._instances=[],this._sprites={},this.media.init(this);const n=e.complete;this._autoPlayOptions=n?{complete:n}:null,this.isLoaded=!1,this._preloadQueue=null,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=Array.isArray(e.url)?this.preferUrl(e.url):e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}preferUrl(t){const[{url:e}]=t.map(n=>({url:n,ext:Mn.extname(n).slice(1)})).sort((n,r)=>py.indexOf(n.ext)-py.indexOf(r.ext));return e}get context(){return Df().context}pause(){return this.isPlaying=!1,this.paused=!0,this}resume(){return this.isPlaying=this._instances.length>0,this.paused=!1,this}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh()}get filters(){return this.media.filters}set filters(t){this.media.filters=t}addSprites(t,e){if(typeof t=="object"){const r={};for(const i in t)r[i]=this.addSprites(i,t[i]);return r}console.assert(!this._sprites[t],`Alias ${t} is already taken`);const n=new gG(this,e);return this._sprites[t]=n,n}destroy(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null}removeSprites(t){if(t){const e=this._sprites[t];e!==void 0&&(e.destroy(),delete this._sprites[t])}else for(const e in this._sprites)this.removeSprites(e);return this}get isPlayable(){return this.isLoaded&&this.media&&this.media.isPlayable}stop(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(let t=this._instances.length-1;t>=0;t--)this._instances[t].stop();return this}play(t,e){let n;if(typeof t=="string"?n={sprite:t,loop:this.loop,complete:e}:typeof t=="function"?(n={},n.complete=t):n=t,n={complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1,...n||{}},n.sprite){const i=n.sprite;console.assert(!!this._sprites[i],`Alias ${i} is not available`);const s=this._sprites[i];n.start=s.start+(n.start||0),n.end=s.end,n.speed=s.speed||1,n.loop=s.loop||n.loop,delete n.sprite}if(n.offset&&(n.start=n.offset),!this.isLoaded)return this._preloadQueue?new Promise(i=>{this._preloadQueue.push(()=>{i(this.play(n))})}):(this._preloadQueue=[],this.autoPlay=!0,this._autoPlayOptions=n,new Promise((i,s)=>{this._preload((o,a,u)=>{this._preloadQueue.forEach(h=>h()),this._preloadQueue=null,o?s(o):(n.loaded&&n.loaded(o,a,u),i(u))})}));(this.singleInstance||n.singleInstance)&&this._removeInstances();const r=this._createInstance();return this._instances.push(r),this.isPlaying=!0,r.once("end",()=>{n.complete&&n.complete(this),this._onComplete(r)}),r.once("stop",()=>{this._onComplete(r)}),r.play(n),r}refresh(){const t=this._instances.length;for(let e=0;e<t;e++)this._instances[e].refresh()}refreshPaused(){const t=this._instances.length;for(let e=0;e<t;e++)this._instances[e].refreshPaused()}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}_preload(t){this.media.load(t)}get instances(){return this._instances}get sprites(){return this._sprites}get duration(){return this.media.duration}autoPlayStart(){let t;return this.autoPlay&&(t=this.play(this._autoPlayOptions)),t}_removeInstances(){for(let t=this._instances.length-1;t>=0;t--)this._poolInstance(this._instances[t]);this._instances.length=0}_onComplete(t){if(this._instances){const e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1),this.isPlaying=this._instances.length>0}this._poolInstance(t)}_createInstance(){if(fc._pool.length>0){const t=fc._pool.pop();return t.init(this.media),t}return this.media.create()}_poolInstance(t){t.destroy(),fc._pool.indexOf(t)<0&&fc._pool.push(t)}};let my=fc;my._pool=[];class bG extends Bo{constructor(){super(...arguments),this.speed=1,this.muted=!1,this.volume=1,this.paused=!1}refresh(){this.emit("refresh")}refreshPaused(){this.emit("refreshPaused")}get filters(){return console.warn("HTML Audio does not support filters"),null}set filters(e){console.warn("HTML Audio does not support filters")}get audioContext(){return console.warn("HTML Audio does not support audioContext"),null}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this.paused}destroy(){this.removeAllListeners()}}class Lf extends _M{constructor(){const e=window,n=new Lf.AudioContext,r=n.createDynamicsCompressor(),i=n.createAnalyser();i.connect(r),r.connect(n.destination),super(i,r),this.autoPause=!0,this._ctx=n,this._offlineCtx=new Lf.OfflineAudioContext(1,2,e.OfflineAudioContext?Math.max(8e3,Math.min(96e3,n.sampleRate)):44100),this.compressor=r,this.analyser=i,this.events=new Bo,this.volume=1,this.speed=1,this.muted=!1,this.paused=!1,this._locked=n.state==="suspended"&&("ontouchstart"in globalThis||"onclick"in globalThis),this._locked&&(this._unlock(),this._unlock=this._unlock.bind(this),document.addEventListener("mousedown",this._unlock,!0),document.addEventListener("touchstart",this._unlock,!0),document.addEventListener("touchend",this._unlock,!0)),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),globalThis.addEventListener("focus",this.onFocus),globalThis.addEventListener("blur",this.onBlur)}onFocus(){const e=this._ctx.state;(e==="suspended"||e==="interrupted"||!this._locked)&&(this.paused=this._pausedOnBlur,this.refreshPaused())}onBlur(){!this._locked&&this.autoPause&&(this._pausedOnBlur=this._paused,this.paused=!0,this.refreshPaused())}_unlock(){this._locked&&(this.playEmptySound(),this._ctx.state==="running"&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._locked=!1))}playEmptySound(){const e=this._ctx.createBufferSource();e.buffer=this._ctx.createBuffer(1,1,22050),e.connect(this._ctx.destination),e.start(0,0,0),e.context.state==="suspended"&&e.context.resume()}static get AudioContext(){const e=window;return e.AudioContext||e.webkitAudioContext||null}static get OfflineAudioContext(){const e=window;return e.OfflineAudioContext||e.webkitOfflineAudioContext||null}destroy(){super.destroy();const e=this._ctx;typeof e.close<"u"&&e.close(),globalThis.removeEventListener("focus",this.onFocus),globalThis.removeEventListener("blur",this.onBlur),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null}get audioContext(){return this._ctx}get offlineContext(){return this._offlineCtx}set paused(e){e&&this._ctx.state==="running"?this._ctx.suspend():!e&&this._ctx.state==="suspended"&&this._ctx.resume(),this._paused=e}get paused(){return this._paused}refresh(){this.events.emit("refresh")}refreshPaused(){this.events.emit("refreshPaused")}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this._paused}decode(e,n){const r=s=>{n(new Error((s==null?void 0:s.message)||"Unable to decode file"))},i=this._offlineCtx.decodeAudioData(e,s=>{n(null,s)},r);i&&i.catch(r)}}class SG{constructor(){this.init()}init(){return this.supported&&(this._webAudioContext=new Lf),this._htmlAudioContext=new bG,this._sounds={},this.useLegacy=!this.supported,this}get context(){return this._context}get filtersAll(){return this.useLegacy?[]:this._context.filters}set filtersAll(e){this.useLegacy||(this._context.filters=e)}get supported(){return Lf.AudioContext!==null}add(e,n){if(typeof e=="object"){const s={};for(const o in e){const a=this._getOptions(e[o],n);s[o]=this.add(o,a)}return s}if(console.assert(!this._sounds[e],`Sound with alias ${e} already exists.`),n instanceof my)return this._sounds[e]=n,n;const r=this._getOptions(n),i=my.from(r);return this._sounds[e]=i,i}_getOptions(e,n){let r;return typeof e=="string"?r={url:e}:Array.isArray(e)?r={url:e}:e instanceof ArrayBuffer||e instanceof AudioBuffer||e instanceof HTMLAudioElement?r={source:e}:r=e,r={...r,...n||{}},r}get useLegacy(){return this._useLegacy}set useLegacy(e){this._useLegacy=e,this._context=!e&&this.supported?this._webAudioContext:this._htmlAudioContext}get disableAutoPause(){return!this._webAudioContext.autoPause}set disableAutoPause(e){this._webAudioContext.autoPause=!e}remove(e){return this.exists(e,!0),this._sounds[e].destroy(),delete this._sounds[e],this}get volumeAll(){return this._context.volume}set volumeAll(e){this._context.volume=e,this._context.refresh()}get speedAll(){return this._context.speed}set speedAll(e){this._context.speed=e,this._context.refresh()}togglePauseAll(){return this._context.togglePause()}pauseAll(){return this._context.paused=!0,this._context.refreshPaused(),this}resumeAll(){return this._context.paused=!1,this._context.refreshPaused(),this}toggleMuteAll(){return this._context.toggleMute()}muteAll(){return this._context.muted=!0,this._context.refresh(),this}unmuteAll(){return this._context.muted=!1,this._context.refresh(),this}removeAll(){for(const e in this._sounds)this._sounds[e].destroy(),delete this._sounds[e];return this}stopAll(){for(const e in this._sounds)this._sounds[e].stop();return this}exists(e,n=!1){const r=!!this._sounds[e];return n&&console.assert(r,`No sound matching alias '${e}'.`),r}isPlaying(){for(const e in this._sounds)if(this._sounds[e].isPlaying)return!0;return!1}find(e){return this.exists(e,!0),this._sounds[e]}play(e,n){return this.find(e).play(n)}stop(e){return this.find(e).stop()}pause(e){return this.find(e).pause()}resume(e){return this.find(e).resume()}volume(e,n){const r=this.find(e);return n!==void 0&&(r.volume=n),r.volume}speed(e,n){const r=this.find(e);return n!==void 0&&(r.speed=n),r.speed}duration(e){return this.find(e).duration}close(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this}}const yA=t=>{var n;const e=t.src;return((n=t==null?void 0:t.alias)==null?void 0:n[0])??Mn.basename(e,Mn.extname(e))},EG={extension:Te.Asset,detection:{test:async()=>!0,add:async t=>[...t,...py.filter(e=>z_[e])],remove:async t=>t.filter(e=>t.includes(e))},loader:{extension:{type:[Te.LoadParser],priority:Gs.High},test(t){const e=Mn.extname(t).slice(1);return!!z_[e]||yG.some(n=>t.startsWith(`data:${n}`))},async load(t,e){const n=await new Promise((r,i)=>my.from({...e.data,url:t,preload:!0,loaded(s,o){var a,u;s?i(s):r(o),(u=(a=e.data)==null?void 0:a.loaded)==null||u.call(a,s,o)}}));return Df().add(yA(e),n),n},async unload(t,e){Df().remove(yA(e))}}};Me.add(EG);const k1=fG(new SG);function Ff(t){return W.jsx("a",{className:oy("button text-white shadow-solid text-xl pointer-events-auto",t.className),href:t.href,title:t.title,onClick:t.onClick,children:W.jsx("div",{className:"inline-block bg-clay-700",children:W.jsx("span",{children:W.jsxs("div",{className:"inline-flex h-full items-center gap-4",children:[W.jsx("img",{className:"w-4 h-4 sm:w-[30px] sm:h-[30px]",src:t.imgUrl}),t.children]})})})})}function TG(){const t=Br(nn.music.getBackgroundMusic),[e,n]=de.useState(!1);de.useEffect(()=>{t&&(k1.add("background",t).loop=!0)},[t]);const r=async()=>{e?k1.stop("background"):await k1.play("background"),n(!e)},i=de.useCallback(s=>{(s.key==="m"||s.key==="M")&&r()},[r]);return de.useEffect(()=>(window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)),[i]),W.jsx(W.Fragment,{children:W.jsx(Ff,{onClick:()=>void r(),className:"hidden lg:block",title:"Play AI generated music (press m to play/mute)",imgUrl:dG,children:e?"Mute":"Music"})})}const CG="/ai-town/assets/interact-b6edce2e.svg";function AG(){var p;const t=Br(nn.world.defaultWorldStatus),e=t==null?void 0:t.worldId,n=lM(e),r=Br(nn.world.userStatus,e?{worldId:e}:"skip"),i=n&&((p=[...n.world.players.values()].find(f=>f.human===r))==null?void 0:p.id),s=ch(nn.world.joinWorld),o=ch(nn.world.leaveWorld),a=!!i,u=e0(),h=de.useCallback(async f=>{let g;try{g=await s({worldId:f})}catch(v){if(v instanceof If){Bt.error(v.data);return}throw v}try{await xR(u,g)}catch(v){Bt.error(v.message)}},[u]),d=()=>{!e||n===void 0||(a?(console.log(`Leaving game for player ${i}`),o({worldId:e})):(console.log("Joining game"),h(e)))};return W.jsx(Ff,{imgUrl:CG,onClick:d,children:a?"Leave":"Interact"})}function IG(){const t=Br(nn.testing.stopAllowed)??!1,e=Br(nn.world.defaultWorldStatus),n=(e==null?void 0:e.status)==="stoppedByDeveloper",r=ch(nn.testing.resume),i=ch(nn.testing.stop),s=async()=>{n?(console.log("Unfreezing"),await r()):(console.log("Freezing"),await i())};return t?W.jsx(W.Fragment,{children:W.jsx(Ff,{onClick:s,className:"hidden lg:block",title:"When freezing a world, the agents will take some time to stop what they are doing before they become frozen. ",imgUrl:"/assets/star.svg",children:n?"Unfreeze":"Freeze"})}):null}const PG="/ai-town/assets/convex-bg-3c1e8188.webp";function kG(){return W.jsxs("a",{href:"https://convex.dev/c/ai-town",target:"_blank",className:"group absolute top-0 left-0 w-64 h-64 md:block z-10 hidden shape-top-left-corner overflow-hidden","aria-label":"Powered by Convex",children:[W.jsx("img",{src:PG,className:"absolute inset-0 scale-[1.2] -translate-x-6 group-hover:scale-[1.6] transition-transform",alt:""}),W.jsx("div",{className:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity"}),W.jsx("div",{className:"absolute inset-0 flex p-6",children:W.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[W.jsx("span",{className:"font-system font-medium uppercase tracking-wider text-stone-600",children:"Powered by"}),W.jsxs("svg",{width:"126",height:"20",viewBox:"0 0 126 20",fill:"black",xmlns:"http://www.w3.org/2000/svg",children:[W.jsx("title",{children:"Convex"}),W.jsxs("g",{"clip-path":"url(#clip0_5_2)",children:[W.jsx("path",{d:"M3.18483 17.4674C1.30005 15.782 0.357666 13.2908 0.357666 10.0003C0.357666 6.70977 1.31835 4.2186 3.24278 2.53321C5.16415 0.847812 7.79308 0.00350952 11.1265 0.00350952C12.5111 0.00350952 13.7341 0.103028 14.7985 0.308486C15.8629 0.510733 16.8815 0.854231 17.8544 1.34219V6.68088C16.3417 5.92646 14.6246 5.54765 12.7033 5.54765C11.0106 5.54765 9.76021 5.88473 8.95506 6.55889C8.14686 7.23304 7.74429 8.37911 7.74429 10.0003C7.74429 11.5669 8.14076 12.7001 8.93676 13.4C9.72971 14.103 10.9862 14.453 12.7063 14.453C14.527 14.453 16.2563 14.0067 17.8971 13.1175V18.7034C16.0763 19.5669 13.8073 19.9971 11.0899 19.9971C7.70159 19.9971 5.06961 19.1528 3.18483 17.4674Z"}),W.jsx("path",{d:"M19.538 9.99679C19.538 6.73194 20.4224 4.2504 22.1913 2.54896C23.9602 0.847512 26.6257 0 30.1909 0C33.7805 0 36.4644 0.850722 38.2485 2.54896C40.0296 4.24719 40.9201 6.73194 40.9201 9.99679C40.9201 16.6613 37.3427 19.9936 30.1909 19.9936C23.0879 19.9968 19.538 16.6645 19.538 9.99679ZM32.7497 13.3997C33.2743 12.6966 33.5365 11.5634 33.5365 10C33.5365 8.46228 33.2743 7.33547 32.7497 6.61958C32.2251 5.90369 31.3712 5.54735 30.1909 5.54735C29.0381 5.54735 28.2024 5.9069 27.6901 6.61958C27.1777 7.33547 26.9215 8.46228 26.9215 10C26.9215 11.5666 27.1777 12.6998 27.6901 13.3997C28.2024 14.1027 29.035 14.4526 30.1909 14.4526C31.3712 14.4526 32.2221 14.0995 32.7497 13.3997Z"}),W.jsx("path",{d:"M42.6029 0.404494H49.3704L49.5626 1.86196C50.3067 1.32263 51.2552 0.876404 52.408 0.526485C53.5608 0.176565 54.7533 0 55.9854 0C58.2667 0 59.9319 0.5939 60.9841 1.7817C62.0363 2.9695 62.5608 4.80257 62.5608 7.28732V19.5923H55.3328V8.05458C55.3328 7.19101 55.1467 6.57143 54.7747 6.19262C54.4026 5.8138 53.7804 5.62761 52.9082 5.62761C52.3714 5.62761 51.8194 5.75602 51.2552 6.01284C50.691 6.26966 50.2183 6.60032 49.8309 7.00482V19.5923H42.6029V0.404494Z"}),W.jsx("path",{d:"M62.5818 0.404617H70.1178L73.5794 11.6566L77.0409 0.404617H84.5769L77.3855 19.5924H69.7702L62.5818 0.404617Z"}),W.jsx("path",{d:"M86.8523 17.9422C84.6809 16.2279 83.6653 13.252 83.6653 10.0385C83.6653 6.90851 84.4735 4.33066 86.3186 2.54896C88.1637 0.767255 90.9757 0 94.5256 0C97.792 0 100.36 0.796147 102.236 2.38844C104.108 3.98074 105.047 6.15409 105.047 8.9053V12.2665H91.302C91.6436 13.2648 92.0766 13.9872 93.141 14.4334C94.2054 14.8796 95.6907 15.1011 97.5907 15.1011C98.7252 15.1011 99.8841 15.008 101.061 14.8186C101.476 14.7512 102.159 14.6453 102.519 14.565V19.2295C100.723 19.7432 98.3287 20 95.6297 20C91.9973 19.9968 89.0238 19.6565 86.8523 17.9422ZM97.4534 8.13804C97.4534 7.1878 96.4135 5.14286 94.3243 5.14286C92.4396 5.14286 91.1952 7.1557 91.1952 8.13804H97.4534Z"}),W.jsx("path",{d:"M110.723 9.8364L103.955 0.404617H111.799L125.642 19.5924H117.722L114.645 15.3003L111.567 19.5924H103.684L110.723 9.8364Z"}),W.jsx("path",{d:"M117.548 0.404617H125.356L119.363 8.8059L115.398 3.42227L117.548 0.404617Z"})]}),W.jsx("defs",{children:W.jsx("clipPath",{id:"clip0_5_2",children:W.jsx("rect",{width:"126",height:"20"})})})]})]})})]})}function RG(){const[t,e]=de.useState(!1);return W.jsxs("main",{className:"relative flex min-h-screen flex-col items-center justify-between font-body game-background",children:[W.jsx(kG,{}),W.jsx(hG,{isOpen:t,onRequestClose:()=>e(!1),style:MG,contentLabel:"Help modal",ariaHideApp:!1,children:W.jsxs("div",{className:"font-body",children:[W.jsx("h1",{className:"text-center text-6xl font-bold font-display game-title",children:"Help"}),W.jsxs("p",{children:["Welcome to AI town. AI town supports both anonymous ",W.jsx("i",{children:"spectators"})," and logged in"," ",W.jsx("i",{children:"interactivity"}),"."]}),W.jsx("h2",{className:"text-4xl mt-4",children:"Spectating"}),W.jsx("p",{children:"Click and drag to move around the town, and scroll in and out to zoom. You can click on an individual character to view its chat history."}),W.jsx("h2",{className:"text-4xl mt-4",children:"Interactivity"}),W.jsx("p",{children:'If you log in, you can join the simulation and directly talk to different agents! After logging in, click the "Interact" button, and your character will appear somewhere on the map with a highlighted circle underneath you.'}),W.jsx("p",{className:"text-2xl mt-2",children:"Controls:"}),W.jsx("p",{className:"mt-4",children:"Click to navigate around."}),W.jsx("p",{className:"mt-4",children:`To talk to an agent, click on them and then click "Start conversation," which will ask them to start walking towards you. Once they're nearby, the conversation will start, and you can speak to each other. You can leave at any time by closing the conversation pane or moving away. They may propose a conversation to you - you'll see a button to accept in the messages panel.`}),W.jsxs("p",{className:"mt-4",children:["AI town only supports ",b_," humans at a time. If you're idle for five minutes, you'll be automatically removed from the simulation."]})]})}),W.jsxs("div",{className:"w-full lg:h-screen min-h-screen relative isolate overflow-hidden lg:p-8 shadow-2xl flex flex-col justify-start",children:[W.jsx("h1",{className:"mx-auto text-4xl p-3 sm:text-8xl lg:text-9xl font-bold font-display leading-none tracking-wide game-title w-full text-left sm:text-center sm:w-auto",children:"AI Town"}),W.jsx("div",{className:"max-w-xs md:max-w-xl lg:max-w-none mx-auto my-4 text-center text-base sm:text-xl md:text-2xl text-white leading-tight shadow-solid",children:"A virtual town where AI characters live, chat and socialize."}),W.jsx(eW,{}),W.jsxs("footer",{className:"justify-end bottom-0 left-0 w-full flex items-center mt-4 gap-3 p-6 flex-wrap pointer-events-none",children:[W.jsxs("div",{className:"flex gap-4 flex-grow pointer-events-none",children:[W.jsx(IG,{}),W.jsx(TG,{}),W.jsx(Ff,{href:"https://github.com/a16z-infra/ai-town",imgUrl:rW,children:"Star"}),W.jsx(AG,{}),W.jsx(Ff,{imgUrl:iW,onClick:()=>e(!0),children:"Help"})]}),W.jsx("a",{href:"https://a16z.com",children:W.jsx("img",{className:"w-8 h-8 pointer-events-auto",src:tW,alt:"a16z"})}),W.jsx("a",{href:"https://convex.dev/c/ai-town",children:W.jsx("img",{className:"w-20 h-8 pointer-events-auto",src:nW,alt:"Convex"})})]}),W.jsx(g_,{position:"bottom-right",autoClose:2e3,closeOnClick:!0,theme:"dark"})]})]})}const MG={overlay:{backgroundColor:"rgb(0, 0, 0, 75%)",zIndex:12},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",maxWidth:"50%",border:"10px solid rgb(23, 20, 33)",borderRadius:"0",background:"rgb(35, 38, 58)",color:"white",fontFamily:'"Upheaval Pro", "sans-serif"'}};function OG(){return"https://grandiose-goose-783.convex.cloud"}const NG=new p7(OG(),{unsavedChangesWarning:!1});function DG({children:t}){return W.jsx(nR,{client:NG,children:t})}R1.createRoot(document.getElementById("root")).render(W.jsx(it.StrictMode,{children:W.jsx(DG,{children:W.jsx(RG,{})})}))});export default LG();
